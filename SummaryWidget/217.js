"use strict";(self.webpackChunkde_lmw_SummaryWidget=self.webpackChunkde_lmw_SummaryWidget||[]).push([[217],{7821:(e,t,i)=>{i.r(t),i.d(t,{FieldSettings:()=>v,ListBase:()=>s,ListView:()=>y,Sortable:()=>x,Virtualization:()=>b,classNames:()=>f,cssClass:()=>a,getFieldValues:()=>o,moveTo:()=>L});var s,n=i(2471),l=i(8810),r=i(4061),a={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function o(e,t){var i={};if((0,n.isNullOrUndefined)(e)||"string"==typeof e||"number"==typeof e||!(0,n.isNullOrUndefined)(e.isHeader))return e;for(var s=0,l=Object.keys(t);s<l.length;s++){var r=t[""+l[s]],a=(0,n.isNullOrUndefined)(r)||"string"!=typeof r?void 0:(0,n.getValue)(r,e);(0,n.isNullOrUndefined)(a)||(i[""+r]=a)}return i}function c(e){if(e)try{return"function"!=typeof e&&document.querySelector(e)?(0,n.compile)(document.querySelector(e).innerHTML.trim()):(0,n.compile)(e)}catch(t){return(0,n.compile)(e)}}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function s(e,t,i,s,n){return L(e,r(e,t,i,s,n),null,s)}function r(e,t,s,l,r){var o=[],c=(0,n.extend)({},i,l);a=w(c.moduleName);for(var h=v(),d=0;d<t.length;d++)if(!(0,n.isNullOrUndefined)(t[d])){var u;if(c.itemCreating&&"function"==typeof c.itemCreating){var p={dataSource:t,curData:t[d],text:t[d],options:c};c.itemCreating(p)}u=s?b(e,t[d],void 0,null,null,[],null,h,d,l):x(e,t[d],void 0,null,null,l,r),c.itemCreated&&"function"==typeof c.itemCreated&&(p={dataSource:t,curData:t[d],text:t[d],item:u,options:c},c.itemCreated(p)),o.push(u)}return o}function h(s,l,r,c,h,d){var u=(0,n.extend)({},i,r);a=w(u.moduleName);var p,m=!d||"listview"!==d.getModuleName()&&"multiselect"!==d.getModuleName()?(0,n.extend)({},e.defaultMappedFields,u.fields):u.fields,g=(0,n.extend)({},t,u.ariaAttributes),S=[];c&&(g.level=c);var L,C,V=[];l&&l.length&&!(0,n.isNullOrUndefined)(f(l).item)&&!f(l).item.hasOwnProperty(m.id)&&(p=v());for(var E=0;E<l.length;E++){var O=o(l[E],m);if(!(0,n.isNullOrUndefined)(l[E])){if(u.itemCreating&&"function"==typeof u.itemCreating){var k={dataSource:l,curData:l[E],text:O[m.text],options:u,fields:m};u.itemCreating(k)}var D=l[E];u.itemCreating&&"function"==typeof u.itemCreating&&(O=o(l[E],m)),O.hasOwnProperty(m.id)&&!(0,n.isNullOrUndefined)(O[m.id])&&(p=O[m.id]);var H=[];if(u.showCheckBox&&(u.itemNavigable&&(O[m.url]||O[m.urlAttributes])?S.push(s("input",{className:a.check,attrs:{type:"checkbox"}})):H.push(s("input",{className:a.check,attrs:{type:"checkbox"}}))),!0===h)u.showIcon&&O.hasOwnProperty(m.iconCss)&&!(0,n.isNullOrUndefined)(O[m.iconCss])&&H.push(s("span",{className:a.icon+" "+O[m.iconCss]})),C=(L=b(s,D,O,m,u.itemClass,H,!(!D.hasOwnProperty("isHeader")||!D.isHeader),p,E,r)).querySelector("."+a.anchorWrap),u.itemNavigable&&S.length&&(0,n.prepend)(S,L.firstElementChild);else{if((L=x(s,D,O,m,u.itemClass,r,d)).classList.add(a.level+"-"+g.level),L.setAttribute("aria-level",g.level.toString()),"presentation"!==g.groupItemRole&&"presentation"!==g.itemRole||L.removeAttribute("aria-level"),C=L.querySelector("."+a.anchorWrap),O.hasOwnProperty(m.tooltip)){var N=O[m.tooltip];if(r&&r.enableHtmlSanitizer)N=n.SanitizeHtmlHelper.sanitize(N);else{var T=s("span",{innerHTML:N});N=T.innerText,T=null}L.setAttribute("title",N)}if(O.hasOwnProperty(m.htmlAttributes)&&O[m.htmlAttributes]){var U=O[m.htmlAttributes];U.hasOwnProperty("class")&&"string"==typeof U.class&&""===U.class.trim()&&delete U.class,I(L,U)}if(O.hasOwnProperty(m.enabled)&&!1===O[m.enabled]&&L.classList.add(a.disabled),O.hasOwnProperty(m.isVisible)&&!1===O[m.isVisible]&&(L.style.display="none"),O.hasOwnProperty(m.imageUrl)&&!(0,n.isNullOrUndefined)(O[m.imageUrl])&&!u.template){var B={src:O[m.imageUrl]};(0,n.merge)(B,O[m.imageAttributes]);var A=s("img",{className:a.image,attrs:B});C?C.insertAdjacentElement("afterbegin",A):(0,n.prepend)([A],L.firstElementChild)}if(u.showIcon&&O.hasOwnProperty(m.iconCss)&&!(0,n.isNullOrUndefined)(O[m.iconCss])&&!u.template){var F=s("div",{className:a.icon+" "+O[m.iconCss]});C?C.insertAdjacentElement("afterbegin",F):(0,n.prepend)([F],L.firstElementChild)}H.length&&(0,n.prepend)(H,L.firstElementChild),u.itemNavigable&&S.length&&(0,n.prepend)(S,L.firstElementChild),y(s,O,m,0,u,L,g.level)}C&&(0,n.addClass)([L],[a.navigable]),u.itemCreated&&"function"==typeof u.itemCreated&&(k={dataSource:l,curData:l[E],text:O[m.text],item:L,options:u,fields:m},u.itemCreated(k)),S=[],V.push(L)}}return V}function d(e,t,s,l,r,a){var o=(0,n.extend)({},i,s);return L(e,h(e,t,s,l,r,a),o.listClass,s)}function u(e,t){if(t&&e)return Array.prototype.slice.call(t).indexOf(e)}function p(e,t,i){if(void 0===i&&(i=new l.Query),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var s=0;s<i.queries.length;s++)"onSortBy"===i.queries[s].fn&&i.queries.splice(s,1);return i}function m(e,t){return new l.DataManager(e).executeLocal(t)}function f(e){for(var t=0;t<e.length;t++)if(!(0,n.isNullOrUndefined)(e[t]))return{typeof:typeof e[t],item:e[t]};return{typeof:null,item:null}}function I(e,t){var i={};(0,n.merge)(i,t),i.class&&((0,n.addClass)([e],i.class.split(" ")),delete i.class),(0,n.attributes)(e,i)}function g(e){for(var t={},i=e.attributes,s=0;s<i.length;s++)t[i[s].nodeName]=i[s].nodeValue;return t}function v(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function y(e,t,i,s,l,r,o){var c=t[i.child]||[],h=t[i.hasChildren];if(c.length&&(h=!0,r.classList.add(a.hasChild),l.processSubChild)){var u=d(e,c,l,++o);r.appendChild(u)}l.expandCollapse&&h&&!l.template&&(r.firstElementChild.classList.add(a.iconWrapper),("Left"===l.expandIconPosition?n.prepend:n.append)([e("div",{className:"e-icons "+l.expandIconClass})],r.querySelector("."+a.textContent)))}function b(e,s,l,r,o,c,h,d,u,p){var m,f,g=(0,n.extend)({},i,p),v=(0,n.extend)({},t,g.ariaAttributes),y=s,b=s;"string"!=typeof s&&"number"!=typeof s&&"boolean"!=typeof s&&(m=s,y="boolean"==typeof l[r.text]||"number"==typeof l[r.text]?l[r.text]:l[r.text]||"",b=l[r.value]),f=(0,n.isNullOrUndefined)(m)||(0,n.isNullOrUndefined)(l[r.id])||""===l[r.id]?d+"-"+u:d;var w=e("li",{className:(!0===h?a.group:a.li)+" "+((0,n.isNullOrUndefined)(o)?"":o),id:f,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===h?v.groupItemRole:v.itemRole}:{}});return m&&l.hasOwnProperty(r.enabled)&&"false"===l[r.enabled].toString()&&w.classList.add(a.disabled),h?w.innerText=y:(w.setAttribute("data-value",(0,n.isNullOrUndefined)(b)?"null":b),w.setAttribute("role","option"),m&&l.hasOwnProperty(r.htmlAttributes)&&l[r.htmlAttributes]&&I(w,l[r.htmlAttributes]),c.length&&!g.itemNavigable&&(0,n.append)(c,w),m&&(l[r.url]||l[r.urlAttributes]&&l[r.urlAttributes].href)?w.appendChild(S(e,m,r,y,c,g.itemNavigable)):(c.length&&g.itemNavigable&&(0,n.append)(c,w),w.appendChild(document.createTextNode(y)))),w}function w(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function S(e,t,i,s,l,r){var c,h=o(t,i),d={href:h[i.url]};if(h.hasOwnProperty(i.urlAttributes)&&h[i.urlAttributes]&&((0,n.merge)(d,h[i.urlAttributes]),d.href=h[i.url]?h[i.url]:h[i.urlAttributes].href),r){c=e("a",{className:a.text+" "+a.url});var u=e("div",{className:a.anchorWrap});l&&l.length&&(0,n.append)(l,u),u.appendChild(document.createTextNode(s)),(0,n.append)([u],c)}else c=e("a",{className:a.text+" "+a.url,innerHTML:s});return I(c,d),c}function x(e,s,l,r,o,h,d){var u,p,m,f=(0,n.extend)({},i,h),I=(0,n.extend)({},t,f.ariaAttributes),g=s;"string"!=typeof s&&"number"!=typeof s&&(m=s,g=l[r.text]||"",u=(0,n.isNullOrUndefined)(l._id)?l[r.id]:l._id,p=!(!s.hasOwnProperty("isHeader")||!s.isHeader)),h&&h.enableHtmlSanitizer;var y=e("li",{className:(!0===p?a.group:a.li)+" "+((0,n.isNullOrUndefined)(o)?"":o),attrs:""!==I.groupItemRole&&""!==I.itemRole?{role:!0===p?I.groupItemRole:I.itemRole}:{}});if(1==!(0,n.isNullOrUndefined)(u)?y.setAttribute("data-uid",u):y.setAttribute("data-uid",v()),p&&h&&h.groupTemplate){var b=c(h.groupTemplate);d&&"listview"!==d.getModuleName()?(w=b(s,d,"groupTemplate",f.groupTemplateID,!!f.isStringTemplate,null,y))&&(0,n.append)(w,y):(0,n.append)(b(s,d,"groupTemplate",f.groupTemplateID,!!f.isStringTemplate),y)}else if(!p&&h&&h.template){var w;b=c(h.template),d&&"listview"!==d.getModuleName()?(w=b(s,d,"template",f.templateID,!!f.isStringTemplate,null,y))&&(0,n.append)(w,y):(0,n.append)(b(s,d,"template",f.templateID,!!f.isStringTemplate),y)}else{var x=e("div",{className:a.textContent,attrs:""!==I.wrapperRole?{role:I.wrapperRole}:{}});if(m&&(l[r.url]||l[r.urlAttributes]&&l[r.urlAttributes].href))x.appendChild(S(e,m,r,g,null,f.itemNavigable));else{var L=e("span",{className:a.text,attrs:""!==I.itemText?{role:I.itemText}:{}});h&&h.enableHtmlSanitizer?L.innerText=n.SanitizeHtmlHelper.sanitize(g):L.innerHTML=g,x.appendChild(L)}y.appendChild(x)}return y}function L(e,s,l,r){var o=(0,n.extend)({},i,r),c=(0,n.extend)({},t,o.ariaAttributes),h=e("ul",{className:(a=w(o.moduleName)).ul+" "+((0,n.isNullOrUndefined)(l)?"":l),attrs:""!==c.listRole?{role:c.listRole}:{}});return(0,n.append)(s,h),h}e.createList=function(e,l,r,a,o){var c=(0,n.extend)({},i,r),h=(0,n.extend)({},t,c.ariaAttributes),u=f(l).typeof;return"string"===u||"number"===u?s(e,l,a,r,o):d(e,l,r,h.level,a,o)},e.createListFromArray=s,e.createListItemFromArray=r,e.createListItemFromJson=h,e.createListFromJson=d,e.getSiblingLI=function(e,t,s){if(a=w(i.moduleName),e&&e.length){var l,r,o=Array.prototype.slice.call(e);for(l=o[(r=t?u(t,o):!0===s?o.length:-1)+(!0===s?-1:1)];l&&(!(0,n.isVisible)(l)||l.classList.contains(a.disabled));)l=o[r+=!0===s?-1:1];return l}},e.indexOf=u,e.groupDataSource=function(t,i,s){void 0===s&&(s="None");var r=(0,n.extend)({},e.defaultMappedFields,i),a=(new l.Query).group(r.groupBy),o=m(t,a=p(s,"key",a));t=[];for(var c=0;c<o.length;c++){var h=o[c].items,d={};d[r.text]=o[c].key,d.isHeader=!0;var u=r.text;"id"===u&&(d[u="text"]=o[c].key),d._id="group-list-item-"+(o[c].key?o[c].key.toString().trim():"undefined"),d.items=h,t.push(d);for(var f=0;f<h.length;f++)t.push(h[f])}return t},e.addSorting=p,e.getDataSource=m,e.createJsonFromElement=function t(s,l){var r=(0,n.extend)({},i,l),a=(0,n.extend)({},e.defaultMappedFields,r.fields),o=s.cloneNode(!0),c=[];o.classList.add("json-parent");var h=o.querySelectorAll(".json-parent>li");o.classList.remove("json-parent");for(var d=0;d<h.length;d++){for(var u=h[d],p=u.querySelector("a"),m=u.querySelector("ul"),f={},I=p?p.childNodes:u.childNodes,y=Object.keys(I),b=0;b<I.length;b++)I[Number(y[b])].hasChildNodes()||(f[a.text]=I[Number(y[b])].textContent);var w=g(u);w.id?(f[a.id]=w.id,delete w.id):f[a.id]=v(),Object.keys(w).length&&(f[a.htmlAttributes]=w),p&&(w=g(p),Object.keys(w).length&&(f[a.urlAttributes]=w)),m&&(f[a.child]=t(m,l)),c.push(f)}return c},e.renderContentTemplate=function(t,s,l,r,h,d){for(var u,p=t("ul",{className:(a=w(i.moduleName)).ul,attrs:{role:"presentation"}}),m=(0,n.extend)({},i,h),f=(0,n.extend)({},e.defaultMappedFields,r),I=c(s),g=[],y=v(),b=0;b<l.length;b++){var S=o(l[b],f),x=l[b],L=x.isHeader;if(u="string"==typeof l[b]||"number"==typeof l[b]?x:S[f.value],m.itemCreating&&"function"==typeof m.itemCreating){var C={dataSource:l,curData:x,text:u,options:m,fields:f};m.itemCreating(C)}m.itemCreating&&"function"==typeof m.itemCreating&&(S=o(l[b],f),u="string"==typeof l[b]||"number"==typeof l[b]?x:S[f.value]);var V=t("li",{id:y+"-"+b,className:L?a.group:a.li,attrs:{role:"presentation"}});if(L)"string"==typeof l[b]||"number"==typeof l[b]?V.innerText=x:V.innerText=S[f.text];else{var E,O=L?m.groupTemplateID:m.templateID;L?d&&"listview"!==d.getModuleName()?(E=I(x,d,"headerTemplate",O,!!m.isStringTemplate,null,V))&&(0,n.append)(E,V):(0,n.append)(I(x,d,"headerTemplate",O,!!m.isStringTemplate),V):d&&"listview"!==d.getModuleName()?(E=I(x,d,"template",O,!!m.isStringTemplate,null,V))&&(0,n.append)(E,V):(0,n.append)(I(x,d,"template",O,!!m.isStringTemplate),V),V.setAttribute("data-value",(0,n.isNullOrUndefined)(u)?"null":u),V.setAttribute("role","option")}m.itemCreated&&"function"==typeof m.itemCreated&&(C={dataSource:l,curData:x,text:u,item:V,options:m,fields:f},m.itemCreated(C)),g.push(V)}return(0,n.append)(g,p),p},e.renderGroupTemplate=function(t,s,l,r,a,o){for(var h=c(t),d=(0,n.extend)({},e.defaultMappedFields,l),u=(0,n.extend)({},i,a),p=d.groupBy,m=0,f=r;m<f.length;m++){var I=f[m],g={};if(g[""+p]=I.textContent,I.innerHTML="",o&&"listview"!==o.getModuleName()){var v=h(g,o,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate,null,I);v&&(0,n.append)(v,I)}else(0,n.append)(h(g,o,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate),I)}return r},e.generateId=v,e.generateUL=L,e.generateIcon=function(e,t,s,l){var r=(0,n.extend)({},i,l);return a=w(r.moduleName),("Left"===r.expandIconPosition?n.prepend:n.append)([e("div",{className:"e-icons "+r.expandIconClass+" "+((0,n.isNullOrUndefined)(s)?"":s)})],t.querySelector("."+a.textContent)),t}}(s||(s={}));var h,d=(h=function(e,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},h(e,t)},function(e,t){function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},p={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},m={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},f={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",container:"e-list-container",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},I="Template",g="GroupTemplate",v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),u([(0,n.Property)("id")],t.prototype,"id",void 0),u([(0,n.Property)("text")],t.prototype,"text",void 0),u([(0,n.Property)("isChecked")],t.prototype,"isChecked",void 0),u([(0,n.Property)("isVisible")],t.prototype,"isVisible",void 0),u([(0,n.Property)("enabled")],t.prototype,"enabled",void 0),u([(0,n.Property)("iconCss")],t.prototype,"iconCss",void 0),u([(0,n.Property)("child")],t.prototype,"child",void 0),u([(0,n.Property)("tooltip")],t.prototype,"tooltip",void 0),u([(0,n.Property)("groupBy")],t.prototype,"groupBy",void 0),u([(0,n.Property)("text")],t.prototype,"sortBy",void 0),u([(0,n.Property)("htmlAttributes")],t.prototype,"htmlAttributes",void 0),u([(0,n.Property)("tableName")],t.prototype,"tableName",void 0),t}(n.ChildProperty),y=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousSelectedItems=[],s.hiddenItems=[],s.enabledItems=[],s.disabledItems=[],s}return d(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++)switch(s[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":(0,n.isNullOrUndefined)(this.contentContainer)||(0,n.detach)(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}},t.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&(0,n.attributes)(this.element,this.htmlAttributes)},t.prototype.setCSSClass=function(e){this.cssClass&&(0,n.addClass)([this.element],this.cssClass.split(" ").filter((function(e){return e}))),e&&(0,n.removeClass)([this.element],e.split(" ").filter((function(e){return e})))},t.prototype.setSize=function(){this.element.style.height=(0,n.formatUnit)(this.height),this.element.style.width=(0,n.formatUnit)(this.width),this.isWindow=!this.element.clientHeight},t.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},t.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.enableElement=function(e,t){t?e.classList.remove(f.disable):e.classList.add(f.disable)},t.prototype.header=function(e,t,i){if(void 0===this.headerEle&&this.showHeader){this.headerEle=this.createElement("div",{className:f.header});var s=this.createElement("span",{className:f.headerText});this.enableHtmlSanitizer?(this.setProperties({headerTitle:n.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),s.innerText=this.headerTitle):s.innerHTML=this.headerTitle;var l=this.createElement("div",{className:f.text,innerHTML:s.outerHTML}),r=this.createElement("div",{className:f.icon+" "+f.backIcon+" "+f.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(r),this.headerEle.appendChild(l),this.headerTemplate){var a=(0,n.compile)(this.headerTemplate),o=this.createElement("div",{className:f.headerTemplateText}),c=a({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);c&&(0,n.append)(c,o),(0,n.append)([o],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&l.classList.add("header"),this.element.classList.add("e-has-header"),(0,n.prepend)([this.headerEle],this.element)}else this.headerEle&&(this.showHeader?(this.headerEle.style.display="",l=this.headerEle.querySelector("."+f.headerText),r=this.headerEle.querySelector("."+f.backIcon),this.enableHtmlSanitizer&&(e=n.SanitizeHtmlHelper.sanitize(e)),l.innerHTML=e,this.headerTemplate&&t&&(l.parentElement.classList.remove("header"),this.headerEle.querySelector("."+f.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(l.parentElement.classList.add("header"),this.headerEle.querySelector("."+f.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+f.headerTemplateText).classList.add("header")),r.style.display=!0===t?"":"none"):this.headerEle.style.display="none")},t.prototype.switchView=function(e,t,i){var s=this;if(e&&t){var l=e.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var a=void 0,o=this.animation.duration;this.animation.effect?a=this.enableRtl?m[this.animation.effect]:p[this.animation.effect]:(a=p.SlideLeft,i=this.enableRtl,o=0),this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?a[0]:a[1],duration:0===o&&"Enable"===n.animationMode?400:o,timingFunction:this.animation.easing,end:function(t){e.style.display="none",s.element.style.overflow=r,e.style.position=l,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?a[2]:a[3],duration:0===o&&"Enable"===n.animationMode?400:o,timingFunction:this.animation.easing,end:function(){s.trigger("actionComplete")}}),this.curUL=t}},t.prototype.preRender=function(){if(this.template)try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch(e){(0,n.compile)(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"list",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:""+this.element.id+I,groupTemplateID:""+this.element.id+g,enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},t.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=""+this.element.id+I,this.LISTVIEW_GROUPTEMPLATE_ID=""+this.element.id+g,this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new n.Animation(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},t.prototype.renderCheckbox=function(e){var t=this;if(e.item.classList.contains(f.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&this.isValidLI(e.item)){var i,s=void 0;(s=(0,r.createCheckBox)(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:f.listviewCheckbox})).setAttribute("role","checkbox");var l=s.querySelector("."+f.checkboxIcon);e.item.classList.add(f.itemCheckList),e.item.firstElementChild.classList.add(f.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?(i=o(e.curData,this.listBaseOption.fields),this.enablePersistence&&!(0,n.isNullOrUndefined)(this.selectedId)?-1!==this.selectedId.findIndex((function(e){return e===i[t.listBaseOption.fields.id].toString()}))&&this.checkInternally(e,s):i[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,s)):"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,s),s.setAttribute("aria-checked",l.classList.contains(f.checked)?"true":"false"),s.setAttribute("aria-label",e.text),"Left"===this.checkBoxPosition?(s.classList.add(f.checkboxLeft),e.item.firstElementChild.classList.add(f.checkboxLeft),e.item.firstElementChild.insertBefore(s,e.item.firstElementChild.childNodes[0])):(s.classList.add(f.checkboxRight),e.item.firstElementChild.classList.add(f.checkboxRight),e.item.firstElementChild.appendChild(s)),this.currentLiElements.push(e.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},t.prototype.checkInternally=function(e,t){e.item.classList.add(f.selected),t.querySelector("."+f.checkboxIcon).classList.add(f.checked),t.setAttribute("aria-checked","true")},t.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},t.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var i=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(e)),!(0,n.isNullOrUndefined)(i)){var s=i.querySelector("."+f.checkboxIcon);!0===t?i.classList.add(f.selected):i.classList.remove(f.selected),!0===t?s.classList.add(f.checked):s.classList.remove(f.checked),s.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(i),this.updateSelectedId()}},t.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},t.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},t.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},t.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+f.checkboxIcon);i&&(e?i.classList.contains(f.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(f.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e),this.updateSelectedId()}},t.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+f.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var s=e[i];t.item=s,t.curData=this.getItemData(s),s.querySelector("."+f.checkboxWrapper)&&this.removeElement(s.querySelector("."+f.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(f.selected)&&this.checkInternally(t,t.item.querySelector("."+f.checkboxWrapper))}else{for(e=Array.prototype.slice.call(this.element.querySelectorAll("."+f.itemCheckList)),i=0;i<e.length;i++)(s=e[i]).classList.remove(f.selected),s.firstElementChild.classList.remove(f.checkbox),this.removeElement(s.querySelector("."+f.checkboxWrapper));this.selectedItems&&this.selectedItems.item.classList.add(f.selected)}},t.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},t.prototype.clickHandler=function(e){if(!Array.isArray(this.dataSource)||0!==this.dataSource.length){var t=e.target;this.targetElement=t;var i,s=t.classList;if(s.contains(f.backIcon)||s.contains(f.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var l=(0,n.closest)(t.parentNode,"."+f.listItem);if(null===l&&(l=t),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(l))if(e.target.classList.contains(f.checkboxIcon)){if(l.classList.add(f.focused),(0,n.isNullOrUndefined)(l.querySelector("."+f.checked))){var r={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:l};this.checkInternally(r,r.item.querySelector("."+f.checkboxWrapper))}else this.uncheckItem(l),l.classList.add(f.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(l,e),e){var a=this.selectEventData(l,e),o=l.querySelector("."+f.checkboxIcon);(0,n.merge)(a,{isChecked:o.classList.contains(f.checked)}),this.trigger("select",a)}}else l.classList.contains(f.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(l),this.setSelectLI(l,e),l.classList.remove(f.selected)):(this.setCheckboxLI(l,e),"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||(t.classList.add("e-focused"),this.targetElement=t));else this.setSelectLI(l,e),"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||(t.classList.add("e-focused"),this.targetElement=t);i=(0,n.closest)(e.target,"li"),(0,n.isNullOrUndefined)(i)||i.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&i.classList.add(f.disable)}this.updateSelectedId()}},t.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.hoverHandler=function(e){var t=(0,n.closest)(e.target.parentNode,"."+f.listItem);this.setHoverLI(t)},t.prototype.leaveHandler=function(e){this.removeHover()},t.prototype.homeKeyHandler=function(e,t){if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+f.listItem),s=this.curUL.querySelector("."+f.focused)||this.curUL.querySelector("."+f.selected);s&&(s.classList.remove(f.focused),this.showCheckBox||s.classList.remove(f.selected));var n=t?i.length-1:0;i[n].classList.contains(f.hasChild)||this.showCheckBox?i[n].classList.add(f.focused):this.setSelectLI(i[n],e),i[n]?this.element.setAttribute("aria-activedescendant",i[n].id.toString()):this.element.removeAttribute("aria-activedescendant")}},t.prototype.onArrowKeyDown=function(e,t){var i,l;return!(0,n.isNullOrUndefined)(this.curUL.querySelector("."+f.hasChild))||this.showCheckBox?(l=this.curUL.querySelector("."+f.focused)||this.curUL.querySelector("."+f.selected),i=s.getSiblingLI(this.curUL.querySelectorAll("."+f.listItem),l,t),(0,n.isNullOrUndefined)(i)||(l&&(l.classList.remove(f.focused),this.showCheckBox||l.classList.remove(f.selected)),i.classList.contains(f.hasChild)||this.showCheckBox?i.classList.add(f.focused):this.setSelectLI(i,e))):(l=this.curUL.querySelector("."+f.selected),i=s.getSiblingLI(this.curUL.querySelectorAll("."+f.listItem),l,t),this.setSelectLI(i,e)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},t.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,l=this.element.getBoundingClientRect().height,r=this.curUL.querySelector("."+f.listItem).getBoundingClientRect(),a=void 0,o=void 0;if(this.fields.groupBy&&(o=this.curUL.querySelector("."+f.groupListItem).getBoundingClientRect()),s){var c=s.getBoundingClientRect().top,h=s.getBoundingClientRect().height;if(t)(a=this.isWindow?c:c-n)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var d=this.isWindow?window.innerHeight:l;(a=this.isWindow?c+h:c-n+h)>d&&(!0===this.isWindow?window.scroll(0,pageYOffset+(a-d)):this.element.scrollTop=this.element.scrollTop+(a-d))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(t)if(this.showHeader&&this.headerEle){var u=o?o.top:r.top,p=this.headerEle.getBoundingClientRect();a=p.top<0?p.height-u:0,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?o.top<0?o.top:0:n-r.top+o.height,!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},t.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!(0,n.isNullOrUndefined)(this.curUL.querySelector("."+f.hasChild)),i=this.curUL.querySelector("."+f.focused);t&&i&&(i.classList.remove(f.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,e))}},t.prototype.spaceKeyHandler=function(e){if(e.preventDefault(),this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+f.focused),i=void 0,s=void 0;if(!(0,n.isNullOrUndefined)(t)&&(0,n.isNullOrUndefined)(t.querySelector("."+f.checked))){var l={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};i=l.item.querySelector("."+f.checkboxWrapper),this.checkInternally(l,i),s=i.querySelector("."+f.checkboxIcon+"."+f.icon)}else this.uncheckItem(t);var r=this.selectEventData(t,e);(0,n.merge)(r,{isChecked:!!s&&s.classList.contains(f.checked)}),this.trigger("select",r),this.updateSelectedId()}},t.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:!(0,n.isNullOrUndefined)(this.targetElement)&&this.targetElement.classList.contains("e-focused")||this.spaceKeyHandler(e)}},t.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},t.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+f.focused);e&&(e.classList.remove(f.focused),this.showCheckBox||(0,n.isNullOrUndefined)(this.selectedLI)||this.selectedLI.classList.add(f.selected))}},t.prototype.wireEvents=function(){n.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),n.EventHandler.add(this.element,"click",this.clickHandler,this),n.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),n.EventHandler.add(this.element,"mouseout",this.leaveHandler,this),n.EventHandler.add(this.element,"focusout",this.focusout,this),this.touchModule=new n.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),(0,n.isNullOrUndefined)(this.scroll)||n.EventHandler.add(this.element,"scroll",this.onListScroll,this)},t.prototype.unWireEvents=function(){n.EventHandler.remove(this.element,"click",this.clickHandler),n.EventHandler.remove(this.element,"mouseover",this.hoverHandler),n.EventHandler.remove(this.element,"mouseout",this.leaveHandler),n.EventHandler.remove(this.element,"mouseover",this.hoverHandler),n.EventHandler.remove(this.element,"mouseout",this.leaveHandler),(0,n.isNullOrUndefined)(this.scroll)||n.EventHandler.remove(this.element,"scroll",this.onListScroll),this.touchModule.destroy(),this.touchModule=null},t.prototype.removeFocus=function(){for(var e=0,t=this.element.querySelectorAll("."+f.focused);e<t.length;e++)t[e].classList.remove(f.focused)},t.prototype.removeHover=function(){var e=this.element.querySelector("."+f.hover);e&&e.classList.remove(f.hover)},t.prototype.removeSelect=function(e){if((0,n.isNullOrUndefined)(e))for(var t=0,i=this.element.querySelectorAll("."+f.selected);t<i.length;t++){var s=i[t];this.showCheckBox&&s.querySelector("."+f.checked)||s.classList.remove(f.selected)}else e.classList.remove(f.selected)},t.prototype.isValidLI=function(e){return e&&e.classList.contains(f.listItem)&&!e.classList.contains(f.groupListItem)&&!e.classList.contains(f.disable)},t.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+f.focused)&&this.curUL.querySelector("."+f.focused).classList.remove(f.focused);var i=e.querySelector("textarea")||e.querySelector("input");e.classList.add(f.focused),(0,n.isNullOrUndefined)(t)||t.target===i&&i.classList.add("e-focused");var s=e.querySelector("."+f.checkboxWrapper),l=s.querySelector("."+f.checkboxIcon+"."+f.icon);this.removeHover(),l.classList.contains(f.checked)?(l.classList.remove(f.checked),e.classList.remove(f.selected)):(l.classList.add(f.checked),e.classList.add(f.selected)),s.setAttribute("aria-checked",l.classList.contains(f.checked)?"true":"false");var r=this.selectEventData(e,t);(0,n.merge)(r,{isChecked:l.classList.contains(f.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",r),this.setSelectedItemData(e),this.renderSubList(e)}},t.prototype.selectEventData=function(e,t){var i,s=this.getItemData(e),l=o(s,this.listBaseOption.fields);i=!(0,n.isNullOrUndefined)(s)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:l&&l[this.listBaseOption.fields.text],data:s};var r={};return(0,n.merge)(r,i),t&&(0,n.merge)(r,{isInteracted:!0,event:t,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),r},t.prototype.setSelectedItemData=function(e){var t=this.getItemData(e),i=o(t,this.listBaseOption.fields);(0,n.isNullOrUndefined)(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:i&&i[this.listBaseOption.fields.text],data:t}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},t.prototype.setSelectLI=function(e,t){var i=this;if(this.isValidLI(e)&&!e.classList.contains(f.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(f.selected),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var s=this.selectEventData(e,t);this.trigger("select",s,(function(t){t.cancel||(i.selectedLI=e,i.renderSubList(e))}))}},t.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(f.hover)&&this.enable){var t=this.element.querySelectorAll("."+f.hover);t&&t.length&&(0,n.removeClass)(t,f.hover),e.classList.contains(f.selected)&&!this.showCheckBox||e.classList.add(f.hover)}},t.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,i=0,s=e;i<s.length;i++){var n=s[i],l={};l[this.fields.id]=n,this.curDSJSON=this.findItemFromDS(t,l);var r=o(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?r[this.fields.child]:t}return t}return this.localData},t.prototype.getItemData=function(e){var t,i=this.dataSource instanceof l.DataManager?this.localData:this.dataSource,s=this.getElementUID(e);return t=(0,n.isNullOrUndefined)(this.element.querySelector("."+f.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(t,s)},t.prototype.findItemFromDS=function(e,t,i){var s,l=this;return e&&e.length&&t?e.some((function(r){var a=o(r,l.listBaseOption.fields);if(!t[l.fields.id]&&!t[l.fields.text]||t[l.fields.id]&&(!(0,n.isNullOrUndefined)(a[l.fields.id])&&a[l.fields.id].toString())!==t[l.fields.id].toString()||t[l.fields.text]&&a[l.fields.text]!==t[l.fields.text])if("object"!=typeof r&&-1!==e.indexOf(r))s=i?e:r;else if(!(0,n.isNullOrUndefined)(t[l.fields.id])&&(0,n.isNullOrUndefined)(a[l.fields.id])){var c=l.element.querySelector('[data-uid="'+t[l.fields.id]+'"]');c&&c.innerText.trim()===a[l.fields.text]&&(s=r)}else a.hasOwnProperty(l.fields.child)&&a[l.fields.child].length&&(s=l.findItemFromDS(a[l.fields.child],t,i));else s=i?e:r;return!!s})):s=e,s},t.prototype.getQuery=function(){var e=[],t=this.query?this.query:new l.Query;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var r=n[i];"tableName"!==r&&this.fields[""+r]&&this.fields[""+r]!==s.defaultMappedFields[""+r]&&-1===e.indexOf(this.fields[""+r])&&e.push(this.fields[""+r])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t},t.prototype.setViewDataSource=function(e){void 0===e&&(e=this.localData);var t=(0,n.isNullOrUndefined)(this.fields.sortBy)?this.fields.text:this.fields.sortBy,i=s.addSorting(this.sortOrder,t);e&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=s.groupDataSource(s.getDataSource(e,i),this.listBaseOption.fields,this.sortOrder):this.curViewDS=s.groupDataSource(e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?this.curViewDS=s.getDataSource(e,i):this.curViewDS=e},t.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},t.prototype.renderRemoteLists=function(e,t){this.isDestroyed||(this.localData=e.result,t.removeElement(t.contentContainer),this.renderList(),this.trigger("actionComplete",e))},t.prototype.triggerActionFailure=function(e){this.isDestroyed||this.trigger("actionFailure",e)},t.prototype.setLocalData=function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof l.DataManager)this.dataSource.ready?this.dataSource.ready.then((function(i){e.isOffline=e.dataSource.dataSource.offline,e.dataSource instanceof l.DataManager&&e.isOffline&&e.renderRemoteLists(i,t)})).catch((function(t){e.triggerActionFailure(t)})):this.dataSource.executeQuery(this.getQuery()).then((function(i){e.renderRemoteLists(i,t)})).catch((function(t){e.triggerActionFailure(t)}));else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var i=this.element.querySelector("ul");i&&((0,n.remove)(i),this.setProperties({dataSource:s.createJsonFromElement(i)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},t.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},t.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},t.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("tabindex","-1"))}},t.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=s.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+f.listItem),this.setAttributes(this.liCollection)},t.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},t.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+f.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+f.listItem))},t.prototype.renderSubList=function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(f.hasChild)&&t){var i=(0,n.closest)(e.parentNode,"."+f.parentItem),l=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!l){var r=this.curViewDS;l=s.createListFromJson(this.createElement,r,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var a=l.querySelectorAll("."+f.listItem);this.setAttributes(a),l.setAttribute("pID",t),l.style.display="none",this.renderIntoDom(l)}if(this.switchView(i,l),this.liCollection=this.curUL.querySelectorAll("."+f.listItem),this.selectedItems){var c=o(this.selectedItems.data,this.listBaseOption.fields);this.header(c[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},t.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},t.prototype.renderList=function(e){this.setViewDataSource(e),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:f.container}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},t.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},t.prototype.render=function(){this.element.classList.add(f.root),(0,n.attributes)(this.element,{tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=(0,n.rippleEffect)(this.element,{selector:"."+f.listItem}),this.renderComplete(),this.previousScrollTop=this.element.scrollTop},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[f.root,f.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter((function(e){return e})));(0,n.removeClass)([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",this.contentContainer=null,this.selectedItems=null,this.selectedLI=null,this.liElement=null,this.targetElement=null,this.currentLiElements=null,this.virtualCheckBox=null,e.prototype.destroy.call(this)},t.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),i=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var s=o(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,t,!0),this.removeFocus();var l=this.element.querySelector("[data-uid='"+e+"']");l.classList.remove(f.disable),l.classList.add(f.focused),this.showCheckBox&&l.querySelector("."+f.checkboxIcon).classList.contains(f.checked)||l.classList.remove(f.selected),this.liCollection=this.curUL.querySelectorAll("."+f.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:n.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?s:this.headerTitle,!!this.curDSLevel.length,"header")}},t.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):!0===(0,n.isNullOrUndefined)(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},t.prototype.getLiFromObjOrElement=function(e){var t,i=this.dataSource instanceof l.DataManager?this.localData:this.dataSource;if(!(0,n.isNullOrUndefined)(e))if("string"==typeof i[0]||"number"==typeof i[0])if(e instanceof Element){for(var s=e.getAttribute("data-uid").toString(),r=0;r<this.liCollection.length;r++)if(this.liCollection[r].getAttribute("data-uid").toString()===s){t=this.liCollection[r];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+f.listItem),(function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)}));else{var a=this.getItemData(e),c=o(a,this.listBaseOption.fields);if(a&&(t=this.element.querySelector('[data-uid="'+c[this.fields.id]+'"]'),!this.enableVirtualization&&(0,n.isNullOrUndefined)(t))){var h=this.element.querySelectorAll("."+f.listItem);for(r=0;r<h.length;r++)h[r].innerText.trim()===c[this.fields.text]&&(t=h[r])}}return t},t.prototype.selectMultipleItems=function(e){if(!(0,n.isNullOrUndefined)(e))for(var t=0;t<e.length;t++)(0,n.isNullOrUndefined)(e[t])||this.selectItem(e[t])},t.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},t.prototype.updateSelectedId=function(){this.selectedId=[];for(var e=this.curUL.getElementsByClassName(f.selected),t=0;t<e.length;t++){var i=this.getItemData(e[t]);!(0,n.isNullOrUndefined)(i)&&i[this.listBaseOption.fields.id]&&this.selectedId.push(i[this.listBaseOption.fields.id])}},t.prototype.getSelectedItems=function(){var e,t=!1;this.selectedId=[];var i=this.dataSource instanceof l.DataManager?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var s=this.curUL.getElementsByClassName(f.selected),r=[],a=[];this.selectedId=[];for(var c=[],h=0;h<s.length;h++)if("string"==typeof i[0]||"number"==typeof i[0])r.push(s[h].innerText.trim());else{var d=this.getItemData(s[h]),u=o(d,this.listBaseOption.fields);this.isNestedList?c.push({data:d,parentId:this.getParentId()}):a.push(d),u?(r.push(u[this.listBaseOption.fields.text]),this.selectedId.push(u[this.listBaseOption.fields.id])):(r.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||t||(e={item:s,data:i,text:r},t=!0),this.isNestedList&&!t?(e={item:s,data:c,text:r},t=!0):t||(e={item:s,data:a,text:r},t=!0)}else if(!t){var p=this.element.getElementsByClassName(f.selected)[0];u=o(this.getItemData(p),this.listBaseOption.fields),"string"!=typeof i[0]&&"number"!=typeof i[0]||t?t||((0,n.isNullOrUndefined)(u)||(0,n.isNullOrUndefined)(p)?(e=void 0,t=!0):(this.selectedId.push(u[this.listBaseOption.fields.id]),e={text:u[this.listBaseOption.fields.text],item:p,data:this.getItemData(p)},t=!0)):(e=(0,n.isNullOrUndefined)(p)?void 0:{item:p,data:i,text:p.innerText.trim()},t=!0)}return e},t.prototype.findItem=function(e){return this.getItemData(e)},t.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},t.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},t.prototype.setItemState=function(e,t){var i=this.getItemData(e),s=o(i,this.listBaseOption.fields);if(i){var n=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');t?(n&&n.classList.remove(f.disable),delete i[this.fields.enabled]):t||(n&&n.classList.add(f.disable),i[this.fields.enabled]=!1)}},t.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},t.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},t.prototype.showHideItem=function(e,t,i){var s=this.getItemData(e),n=o(s,this.listBaseOption.fields);if(s){var l=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');l&&(l.style.display=i),t?s[this.fields.isVisible]=!1:delete s[this.fields.isVisible]}},t.prototype.addItem=function(e,t,i){void 0===t&&(t=void 0);var s=this.dataSource instanceof l.DataManager?this.localData:this.dataSource;this.addItemInternally(e,t,s,i)},t.prototype.addItemInternally=function(e,t,i,s){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,i,s);else{var n=this.findItemFromDS(i,t),l=void 0;if(n&&((l=o(n,this.listBaseOption.fields)[this.fields.child])||(l=[]),l=l.concat(e)),n instanceof Array){for(var r=0;r<e.length;r++){i=this.addItemAtIndex(s,i,e[r]),this.setViewDataSource(i);var a=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&a?this.addItemIntoDom(e[r],a,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+f.listItem)}else n&&(n[this.fields.child]=l,this.addItemInNestedList(n,e))}},t.prototype.addItemAtIndex=function(e,t,i){return!(0,n.isNullOrUndefined)(e)&&e>=0&&e<t.length&&(0,n.isNullOrUndefined)(this.listBaseOption.fields.groupBy)?t.splice(e,0,i):t.push(i),t},t.prototype.addItemInNestedList=function(e,t){var i=e[this.fields.id],l=e[this.fields.child],r=this.element.querySelector("[pid='"+i+"']"),a=this.element.querySelector("[data-uid='"+i+"']"),o=r||(a?(0,n.closest)(a,"ul"):null),c=r?l:[e];if(a&&!a.classList.contains(f.hasChild)){var h=s.createListItemFromJson(this.createElement,c,this.listBaseOption,null,null,this);this.setAttributes(h),o.insertBefore(h[0],a),(0,n.detach)(a)}if(r&&t)for(var d=0;d<t.length;d++)c.push(t[d]),this.addItemIntoDom(t[d],o,c)},t.prototype.addItemIntoDom=function(e,t,i){var s=i.indexOf(e);this.addListItem(e,s,t,i);var n=i[s-1];n&&n.isHeader&&1===n.items.length&&this.addListItem(n,s-1,t,i)},t.prototype.addListItem=function(e,t,i,n){var l=this.getLiFromObjOrElement(n[t+1])||this.getLiFromObjOrElement(n[t+2])||null,r=s.createListItemFromJson(this.createElement,[e],this.listBaseOption,null,null,this);if(this.setAttributes(r),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&n[t+1]&&n[t+1].isHeader){var a=this.getLiFromObjOrElement(n[t-1]);a&&(l=a.nextElementSibling)}i.insertBefore(r[0],l)},t.prototype.removeItem=function(e){var t=this.dataSource instanceof l.DataManager?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):this.removeItemFromList(e,t)},t.prototype.removeItemFromList=function(e,t){var i,l=this,r=this.curViewDS,a=e instanceof Element?this.getElementUID(e):e;if(i=this.findItemFromDS(t,a,!0)){var o;o=this.findItemFromDS(i,a);var c=r.indexOf(o),h=this.getLiFromObjOrElement(e),d=void 0;this.validateNestedView(h),this.fields.groupBy&&this.curViewDS[c-1]&&r[c-1].isHeader&&1===r[c-1].items.length&&h&&h.previousElementSibling.classList.contains(f.groupListItem)&&((0,n.isNullOrUndefined)(h.nextElementSibling)||h.nextElementSibling&&h.nextElementSibling.classList.contains(f.groupListItem))&&(d=h.previousElementSibling),h&&(0,n.detach)(h),d&&(0,n.detach)(d);var u=i.length-1<=0?this.findParent(this.localData,this.fields.id,(function(e){return e===o[l.fields.id]}),null):null,p=i.indexOf(o);if(i.splice(p,1),this.setViewDataSource(t),u&&u.parent&&Array.isArray(u.parent[this.fields.child])&&u.parent[this.fields.child].length<=0){var m=this.getLiFromObjOrElement(u.parent);if(m){var I=s.createListItemFromJson(this.createElement,[u.parent],this.listBaseOption,null,null,this);this.setAttributes(I),m.parentElement.insertBefore(I[0],m),m.parentElement.removeChild(m)}}i.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+f.listItem))}},t.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some((function(e){return e.toString().toLowerCase()===t}));)this.back()},t.prototype.removeMultipleItems=function(e){if(e.length)for(var t=0;t<e.length;t++)this.removeItem(e[t])},t.prototype.findParent=function(e,t,i,s){if(e.hasOwnProperty(t)&&!0===i(e[t]))return(0,n.extend)({},e);for(var l=0;l<Object.keys(e).length;l++)if(e[Object.keys(e)[l]]&&"object"==typeof e[Object.keys(e)[l]]){var r=this.findParent(e[Object.keys(e)[l]],t,i,e);if(null!=r)return r.parent||(r.parent=s),r}return null},t.prototype.getModuleName=function(){return"listview"},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},t.prototype.onListScroll=function(e){var t={originalEvent:e,scrollDirection:"Bottom",distanceY:this.element.scrollHeight-this.element.scrollTop},i=this.element.scrollTop;i>this.previousScrollTop?(t.scrollDirection="Bottom",t.distanceY=this.element.scrollHeight-this.element.clientHeight-this.element.scrollTop,this.trigger("scroll",t)):this.previousScrollTop>i&&(t.scrollDirection="Top",t.distanceY=this.element.scrollTop,this.trigger("scroll",t)),this.previousScrollTop=i},t.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},u([(0,n.Property)("")],t.prototype,"cssClass",void 0),u([(0,n.Property)(!1)],t.prototype,"enableVirtualization",void 0),u([(0,n.Property)({})],t.prototype,"htmlAttributes",void 0),u([(0,n.Property)(!0)],t.prototype,"enable",void 0),u([(0,n.Property)([])],t.prototype,"dataSource",void 0),u([(0,n.Property)()],t.prototype,"query",void 0),u([(0,n.Complex)(s.defaultMappedFields,v)],t.prototype,"fields",void 0),u([(0,n.Property)({effect:"SlideLeft",duration:400,easing:"ease"})],t.prototype,"animation",void 0),u([(0,n.Property)("None")],t.prototype,"sortOrder",void 0),u([(0,n.Property)(!1)],t.prototype,"showIcon",void 0),u([(0,n.Property)(!1)],t.prototype,"showCheckBox",void 0),u([(0,n.Property)("Left")],t.prototype,"checkBoxPosition",void 0),u([(0,n.Property)("")],t.prototype,"headerTitle",void 0),u([(0,n.Property)(!1)],t.prototype,"showHeader",void 0),u([(0,n.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),u([(0,n.Property)("")],t.prototype,"height",void 0),u([(0,n.Property)("")],t.prototype,"width",void 0),u([(0,n.Property)(null)],t.prototype,"template",void 0),u([(0,n.Property)(null)],t.prototype,"headerTemplate",void 0),u([(0,n.Property)(null)],t.prototype,"groupTemplate",void 0),u([(0,n.Event)()],t.prototype,"select",void 0),u([(0,n.Event)()],t.prototype,"actionBegin",void 0),u([(0,n.Event)()],t.prototype,"actionComplete",void 0),u([(0,n.Event)()],t.prototype,"actionFailure",void 0),u([(0,n.Event)()],t.prototype,"scroll",void 0),u([n.NotifyPropertyChanges],t)}(n.Component),b=function(){function e(e){this.elementDifference=0,this.listViewInstance=e}return e.prototype.isNgTemplate=function(){return!(0,n.isNullOrUndefined)(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},e.prototype.isVueFunctionTemplate=function(){return this.listViewInstance.isVue&&"function"==typeof this.listViewInstance.template},e.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var e=this.listViewInstance.curViewDS,t=e.slice(0,1);this.listViewInstance.ulElement=this.listViewInstance.curUL=s.createList(this.listViewInstance.createElement,t,this.listViewInstance.listBaseOption,null,this.listViewInstance),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:f.container}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1;var i=e.slice(1,this.domItemCount),l=s.createListItemFromJson(this.listViewInstance.createElement,i,this.listViewInstance.listBaseOption,null,null,this.listViewInstance);(0,n.append)(l,this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight,this.listDiff=0,this.uiIndicesInitialization()},e.prototype.wireScrollEvent=function(e){e?!0===this.listViewInstance.isWindow?(window.removeEventListener("scroll",this.onVirtualScroll),window.removeEventListener("scroll",this.updateUl)):(n.EventHandler.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll),n.EventHandler.remove(this.listViewInstance.element,"scroll",this.updateUlContainer)):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):n.EventHandler.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},e.prototype.updateUlContainer=function(e){var t,i=this.listViewInstance.ulElement.querySelector("."+f.virtualElementContainer);(0,n.isNullOrUndefined)(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),((t=this.listViewInstance.isWindow?Math.round(e.target.documentElement.scrollTop/this.listViewInstance.liElementHeight)-2:Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight)-2)-1)*this.listViewInstance.liElementHeight<0?i.style.top="0px":i.style.top=t*this.listViewInstance.liElementHeight+"px"},e.prototype.ValidateItemCount=function(e){var t,i=parseFloat((0,n.formatUnit)(this.listViewInstance.height));return(t=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):"string"==typeof this.listViewInstance.height&&-1!==this.listViewInstance.height.indexOf("%")?Math.round(this.listViewInstance.element.getBoundingClientRect().height/this.listItemHeight*1.5):Math.round(i/this.listItemHeight*1.5))>e&&(t=e),t},e.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var e=this.listViewInstance.curViewDS,t=0;t<e.length;t++)this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),(0,n.isNullOrUndefined)(e[t][this.listViewInstance.fields.enabled])||e[t][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(t);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+f.listItem),s=0;s<i.length;s++)i[s].context=this.listViewInstance.viewContainerRef.get(s).context},e.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var e=this.listViewInstance.curViewDS;this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px"}},e.prototype.getscrollerHeight=function(e){return this.listViewInstance.isWindow?pageYOffset-e<=0?0:pageYOffset-e:this.listViewInstance.element.scrollTop-e<=0?0:this.listViewInstance.element.scrollTop-e},e.prototype.onVirtualUiScroll=function(e){var t,i,s=this.listViewInstance.curViewDS;this.listItemHeight=(0,n.select)(".e-list-item",this.listViewInstance.element).getBoundingClientRect().height,this.totalHeight=Object.keys(s).length*this.listItemHeight-this.domItemCount*this.listItemHeight,i=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=(0,n.isNullOrUndefined)(this.scrollPosition)?0:this.scrollPosition;var l,r=this.getscrollerHeight(i);this.topElementHeight=this.listItemHeight*Math.floor(r/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,t=r<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=t[0],this.bottomElementHeight=t[1],this.topElementHeight!==parseFloat(this.topElement.style.height)&&(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",r>this.scrollPosition?(l=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(l,!0):this.onNormalScroll(l,!0):(l=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(l,!1):this.onNormalScroll(l,!1)),this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled(),this.scrollPosition=r},e.prototype.onLongScroll=function(e,t){for(var i=t?this.uiFirstIndex+e:this.uiFirstIndex-e,s=this.listViewInstance.ulElement.querySelectorAll("li"),n=0;n<s.length;n++)this.updateUI(s[n],i),i++;this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},e.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<e;i++){s=--this.uiFirstIndex;var n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},e.prototype.updateUiContent=function(e,t){var i=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(e.dataset.uid=s.generateId(),e.getElementsByClassName(f.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[t].toString()):(e.dataset.uid=i[t][this.listViewInstance.fields.id]?i[t][this.listViewInstance.fields.id]:s.generateId(),e.getElementsByClassName(f.listItemText)[0].innerHTML=i[t][this.listViewInstance.fields.text]),this.listViewInstance.showIcon&&(e.querySelector("."+f.listIcon)&&(0,n.detach)(e.querySelector("."+f.listIcon)),this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss])){var l=e.querySelector("."+f.textContent),r=this.listViewInstance.createElement("div",{className:f.listIcon+" "+this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss]});l.insertBefore(r,e.querySelector("."+f.listItemText))}this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy&&(this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+f.checkboxWrapper).cloneNode(!0)),l=e.querySelector("."+f.textContent),this.listViewInstance.curViewDS[t].isHeader?e.querySelector("."+f.checkboxWrapper)&&(e.classList.remove(f.checklist),l.classList.remove(f.checkbox),(0,n.detach)(e.querySelector("."+f.checkboxWrapper))):e.querySelector("."+f.checkboxWrapper)||(e.classList.add(f.checklist),l.classList.add(f.checkbox),"Left"===this.listViewInstance.checkBoxPosition?l.classList.add("e-checkbox-left"):l.classList.add("e-checkbox-right"),l.append(this.checkListWrapper.cloneNode(!0))))},e.prototype.changeElementAttributes=function(e,t){if(e.classList.remove(f.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(t)&&e.classList.add(f.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(t)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var i=e.querySelector("."+f.checkboxWrapper);e.classList.remove(f.selected),e.classList.remove(f.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(f.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(t)&&!this.listViewInstance.curUL.querySelector(f.selected)&&(e.classList.add(f.selected),i.firstElementChild.classList.add(f.checked),i.setAttribute("aria-checked","true"),this.activeIndex===t&&e.classList.add(f.focused))}else e.classList.remove(f.selected),e.removeAttribute("aria-selected"),(0,n.isNullOrUndefined)(this.activeIndex)||this.activeIndex!==t||this.listViewInstance.curUL.querySelector(f.selected)||(e.classList.add(f.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[t].isHeader?e.classList.contains(f.listItem)&&(e.classList.remove(f.listItem),e.setAttribute("role","group"),e.classList.add(f.groupListItem)):e.classList.contains(f.groupListItem)&&(e.classList.remove(f.groupListItem),e.setAttribute("role","listitem"),e.classList.add(f.listItem)))},e.prototype.findDSAndIndexFromId=function(e,t){var i=this,s={};return t=this.listViewInstance.getElementUID(t),(0,n.isNullOrUndefined)(t)||e.some((function(e,n){return!!(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id]===(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id])||t===e)&&(s.index=n,s.data=e,!0)})),s},e.prototype.getSelectedItems=function(){var e=this;if(!(0,n.isNullOrUndefined)(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var t=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var s=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var r=this.uiIndices.activeIndices,a=0;a<r.length;a++)t.push(s[r[a]]);return{text:t,data:t,index:this.uiIndices.activeIndices.map((function(t){return e.listViewInstance.dataSource.indexOf(s[t])}))}}return{text:s[this.activeIndex],data:s[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(s[this.activeIndex])}}var o=this.listViewInstance.curViewDS,c=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var h=this.uiIndices.activeIndices;for(a=0;a<h.length;a++)i.push(o[h[a]][""+c]),t.push(o[h[a]]);var d=this.listViewInstance.dataSource instanceof l.DataManager?o:this.listViewInstance.dataSource;return{text:i,data:t,index:this.uiIndices.activeIndices.map((function(e){return d.indexOf(o[e])}))}}var u=this.listViewInstance.dataSource instanceof l.DataManager?o:this.listViewInstance.dataSource;return{text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:u.indexOf(o[this.activeIndex])}}},e.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length){var i=this.activeIndex===t.index,s=void 0;if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(t.index)?(s=!0,this.uiIndices.activeIndices.push(t.index)):(s=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index),1)),this.listViewInstance.curUL.querySelector("."+f.focused)&&this.listViewInstance.curUL.querySelector("."+f.focused).classList.remove(f.focused)),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var l=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])l={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var r=this.listViewInstance.curViewDS;l={text:r[this.activeIndex][this.listViewInstance.fields.text],data:r[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(l.isChecked=s,this.listViewInstance.trigger("select",l)):i||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",l))}}else(0,n.isNullOrUndefined)(e)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0)},e.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},e.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},e.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},e.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},e.prototype.removeItem=function(e){var t,i=this.listViewInstance.curViewDS,s=this.findDSAndIndexFromId(i,e);Object.keys(s).length&&(t=s.data,i[s.index-1]&&i[s.index-1].isHeader&&1===i[s.index-1].items.length?(this.removeUiItem(s.index-1),this.removeUiItem(s.index-1)):this.removeUiItem(s.index));var n=this.listViewInstance.dataSource instanceof l.DataManager?this.listViewInstance.localData:this.listViewInstance.dataSource,r=n.indexOf(t);-1!==r&&(n.splice(r,1),this.listViewInstance.setViewDataSource(n)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},e.prototype.setCheckboxLI=function(e,t){var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(f.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},e.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},e.prototype.checkedItem=function(e){if(e){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var t=this.listViewInstance.curViewDS,i=0;i<t.length;i++)t[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},e.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),!0===this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var t=this.listViewInstance.curViewDS[e],i=this.listViewInstance.getLiFromObjOrElement(t);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)(0,n.detach)(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(f.disable)&&(i.classList.remove(f.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&i.classList.contains(f.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var s=i.querySelector("."+f.checkboxWrapper);s.removeAttribute("aria-checked"),s.firstElementChild.classList.remove(f.checked),i.classList.contains(f.focused)&&(i.classList.remove(f.focused),this.activeIndex=void 0)}else i.classList.contains(f.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.changeUiIndices=function(e,t){for(var i=Object.keys(this.uiIndices),s=0;s<i.length;s++)this.uiIndices[i[s]]=this.uiIndices[i[s]].map((function(i){return i>=e?t?++i:--i:i}))},e.prototype.addItem=function(e,t,i,s){for(var n=0;n<e.length;n++){var l=e[n];if(i=this.listViewInstance.addItemAtIndex(s,i,l),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,t)instanceof Array){if(this.listViewInstance.ulElement){var r=this.listViewInstance.curViewDS.indexOf(l);this.createAndInjectNewItem(l,r),(a=this.listViewInstance.curViewDS[r-1])&&a.isHeader&&1===a.items.length&&(--r,this.createAndInjectNewItem(a,r))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var a,o=this.listViewInstance.curViewDS.indexOf(l);this.addUiItem(o),(a=this.listViewInstance.curViewDS[o-1])&&a.isHeader&&1===a.items.length&&this.addUiItem(o-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},e.prototype.createAndInjectNewItem=function(e,t){var i,n=s.createListItemFromJson(this.listViewInstance.createElement,[e],this.listViewInstance.listBaseOption,null,null,this.listViewInstance);if(i=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+2]),this.listViewInstance.fields.groupBy&&this.listViewInstance.curViewDS[t+1]&&this.listViewInstance.curViewDS[t+1].isHeader){var l=this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t-1]);l&&(i=l.nextElementSibling)}this.listViewInstance.ulElement.insertBefore(n[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},e.prototype.createUIItem=function(e){if(!e.item.classList.contains("e-list-group-item")&&(this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,this.listViewInstance.showCheckBox&&(this.listViewInstance.renderCheckbox(e),!(0,n.isNullOrUndefined)(this.listViewInstance.virtualCheckBox)&&!(0,n.isNullOrUndefined)(this.listViewInstance.virtualCheckBox.outerHTML)))){var t=document.createElement("div"),i='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>",s=(0,n.compile)(this.listViewInstance.template||i,this.listViewInstance)(this.templateData,this.listViewInstance);if(this.listViewInstance.template&&this.listViewInstance.isReact&&this.listViewInstance.renderReactTemplates(),[].slice.call(s).forEach((function(e){t.appendChild(e)})),t.children&&t.children[0]){for(t.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?t.children[0].classList.add("e-checkbox-left"):t.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?t.children[0].insertBefore(this.listViewInstance.virtualCheckBox,t.childNodes[0].children[0]):t.children[0].appendChild(this.listViewInstance.virtualCheckBox);e.item.lastChild;)e.item.removeChild(e.item.lastChild);[].slice.call(t.children).forEach((function(t){e.item.appendChild(t)}))}}},e.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&(0,n.detach)(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},e.prototype.updateUI=function(e,t,i){var n=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var l=this.listViewInstance.curViewDS[t];e.dataset.uid=l[this.listViewInstance.fields.id]?l[this.listViewInstance.fields.id]:s.generateId(),n(l,e,this)}else this.updateUiContent(e,t);this.changeElementAttributes(e,t),i&&this.listViewInstance.ulElement.insertBefore(e,i)},e.prototype.onChange=function(e,t,i){var n=s.createListItemFromJson(i.listViewInstance.createElement,[e],i.listViewInstance.listBaseOption,null,null,i.listViewInstance);for(i.listViewInstance.isReact&&i.listViewInstance.renderReactTemplates();t.lastChild;)t.removeChild(t.lastChild);[].slice.call(n[0].children).forEach((function(e){t.appendChild(e)}))},e.prototype.onNgChange=function(e,t,i){for(var s=(0,n.compile)(i.listViewInstance.template)(e);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(s[0])},e.prototype.getModuleName=function(){return"virtualization"},e.prototype.destroy=function(){this.wireScrollEvent(!0),this.topElement=null,this.bottomElement=null},e}(),w=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),S=function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},x=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.getHelper=function(e){var t,i=s.getSortableElement(e.sender.target);return!!s.isValidTarget(i,s)&&(s.helper?t=s.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),(0,n.addClass)([t],["e-sortableclone"]),document.body.appendChild(t),t)},s.onDrag=function(e){if(e.target){s.trigger("drag",{event:e.event,element:s.element,target:e.target});var t,i=s.getSortableInstance(e.target),l=s.getSortableElement(e.target,i);if(!(s.isValidTarget(l,i)||e.target.className.indexOf("e-list-group-item")>-1)||s.curTarget===l&&(0,n.isNullOrUndefined)(i.placeHolder)||i.placeHolderElement&&i.placeHolderElement===e.target)s.curTarget!==s.target&&s.scope&&s.curTarget!==l&&!(0,n.isNullOrUndefined)(i.placeHolder)&&((0,n.remove)(s.getSortableInstance(s.curTarget).placeHolderElement),s.curTarget=s.target);else{if(e.target.className.indexOf("e-list-group-item")>-1&&(l=e.target),s.curTarget=l,s.target===l)return;var r=s.getIndex(i.placeHolderElement,i),a=s.getPlaceHolder(l,i),o=void 0;if(a){r=(0,n.isNullOrUndefined)(r)?s.getIndex(s.target):r,o=s.getIndex(l,i,e.event);var c=s.isPlaceHolderPresent(i);if(c&&r===o)return;c&&(0,n.remove)(i.placeHolderElement),i.placeHolderElement=a,e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[o]):i.element!==s.element&&o===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[o]),s.refreshDisabled(r,o,i)}else{r=(0,n.isNullOrUndefined)(r)?s.getIndex(s.target):s.getIndex(l,i)<r||!r?r:r-1,o=s.getIndex(l,i);var h=i.element!==s.element?o:r<o?o+1:o;s.updateItemClass(i),i.element.insertBefore(s.target,i.element.children[h]),s.refreshDisabled(r,o,i),s.curTarget=s.target,s.trigger("drop",{droppedElement:s.target,element:i.element,previousIndex:r,currentIndex:o,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:s.scope})}}i=s.getSortableInstance(s.curTarget),(0,n.isNullOrUndefined)(l)&&e.target!==i.placeHolderElement?s.isPlaceHolderPresent(i)&&s.removePlaceHolder(i):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=s.getSortableInstance(e)).element&&t!==i&&s.removePlaceHolder(t)}))}},s.onDragStart=function(e){s.target=s.getSortableElement(e.target);var t=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:s.element,target:s.target};s.trigger("beforeDragStart",i,(function(i){i.cancel&&(t=i.cancel,s.onDragStop(e))})),t||(n.isBlazor?s.trigger("dragStart",{event:e.event,element:s.element,target:s.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):s.trigger("dragStart",{event:e.event,element:s.element,target:s.target}))},s.onDragStop=function(e){var t,i,l,r=s.getSortableInstance(s.curTarget);t=s.getIndex(s.target);var a=s.isPlaceHolderPresent(r);if(a){var o=s.getIndex(r.placeHolderElement,r),c={previousIndex:t,currentIndex:o,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1,handled:!1};s.trigger("beforeDrop",c,(function(i){if(!i.cancel){if(l=i.handled,s.updateItemClass(r),i.handled){var a=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=a}r.element.insertBefore(s.target,r.placeHolderElement);var o=s.getIndex(s.target,r);t=s===r&&t-o>1?t-1:t,s.trigger("drop",{event:e.event,element:r.element,previousIndex:t,currentIndex:o,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope,handled:l})}(0,n.remove)(r.placeHolderElement)}))}if(r=s.getSortableInstance(e.target),i=r.element.childElementCount,t=s.getIndex(s.target),r.element===e.target||!a&&s.curTarget===s.target){var h={previousIndex:t,currentIndex:s.curTarget===s.target?t:i,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1};s.trigger("beforeDrop",h,(function(n){(r.element===e.target||e.target.className.indexOf("e-list-nrt")>-1||e.target.className.indexOf("e-list-nr-template")>-1||e.target.closest(".e-list-nr-template"))&&!n.cancel&&(s.updateItemClass(r),r.element.appendChild(s.target),s.trigger("drop",{event:e.event,element:r.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope}))}))}s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,(0,n.remove)(e.helper),(0,n.getComponent)(s.element,"draggable").intDestroy(e.event)},s.bind(),s}var i;return w(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=(0,n.getUniqueID)("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new n.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:1}),this.wireEvents()},t.prototype.wireEvents=function(){var e=this.element;n.EventHandler.add(e,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){var e=this.element;n.EventHandler.remove(e,"keydown",this.keyDownHandler)},t.prototype.keyDownHandler=function(e){if(27===e.keyCode){var t=(0,n.getComponent)(this.element,"draggable");t&&t.intDestroy(null);var i=document.getElementsByClassName("e-sortableclone")[0];i&&i.remove();var s=document.getElementsByClassName("e-sortable-placeholder")[0];s&&s.remove()}},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&(0,n.compareElementParent)(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){(0,n.remove)(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=(0,n.closest)(e,".e-"+this.getModuleName())){var t=(0,n.getComponent)(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var s=void 0,n=e<t,l=void 0,r=n?e:t,a=n?t:e;r<=a;)(s=this.element.children[r]).classList.contains("e-disabled")?(l=this.getIndex(s),this.element.insertBefore(s,this.element.children[n?l+2:l-1]),r=n?l+2:l+1):r++},t.prototype.getIndex=function(e,t,i){var s,l;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach((function(t,r){if(t.classList.contains("e-sortable-placeholder")&&(l=!0),t!==e);else if(s=r,!(0,n.isNullOrUndefined)(i)){l&&(s-=1);var a=e.getBoundingClientRect(),o=a.bottom-(a.bottom-a.top)/2,c=i.changedTouches?i.changedTouches[0].clientY:i.clientY;s=c<=o?s:s+1}})),s},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),(0,n.closest)(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!(0,n.closest)(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){L(this.element,e,t,i)},t.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),(0,n.getComponent)(this.element,n.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++)"itemClass"===s[i]&&[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))},S([(0,n.Property)(!1)],t.prototype,"enableAnimation",void 0),S([(0,n.Property)(null)],t.prototype,"itemClass",void 0),S([(0,n.Property)(null)],t.prototype,"scope",void 0),S([(0,n.Property)()],t.prototype,"helper",void 0),S([(0,n.Property)()],t.prototype,"placeHolder",void 0),S([(0,n.Event)()],t.prototype,"drag",void 0),S([(0,n.Event)()],t.prototype,"beforeDragStart",void 0),S([(0,n.Event)()],t.prototype,"dragStart",void 0),S([(0,n.Event)()],t.prototype,"beforeDrop",void 0),S([(0,n.Event)()],t.prototype,"drop",void 0),i=S([n.NotifyPropertyChanges],t)}(n.Base);function L(e,t,i,s){var l=[];if(t||(t=e),i&&i.length?i.forEach((function(t){l.push(e.children[t])})):l=[].slice.call(e.children),(0,n.isNullOrUndefined)(s))l.forEach((function(e){t.appendChild(e)}));else{var r=t.children[s];l.forEach((function(e){t.insertBefore(e,r)}))}}}}]);
//# sourceMappingURL=217.js.map