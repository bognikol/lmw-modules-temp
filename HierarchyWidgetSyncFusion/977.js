"use strict";(self.webpackChunkhierarchy_widget=self.webpackChunkhierarchy_widget||[]).push([[977],{4977:(e,t,r)=>{r.r(t),r.d(t,{Adaptor:()=>p,CacheAdaptor:()=>b,CustomDataAdaptor:()=>O,DataManager:()=>A,DataUtil:()=>u,Deferred:()=>C,GraphQLAdaptor:()=>S,JsonAdaptor:()=>d,ODataAdaptor:()=>f,ODataV4Adaptor:()=>g,Predicate:()=>i,Query:()=>a,RemoteSaveAdaptor:()=>m,UrlAdaptor:()=>h,WebApiAdaptor:()=>y,WebMethodAdaptor:()=>v});var n,o=r(6964),a=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,r,n){return(e=e||this.dataManager)?e.executeQuery(this,t,r,n):u.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):u.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"==typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"==typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,r,n,o,a){t=t?t.toLowerCase():null;var s=null;return"string"==typeof e?s=new i(e,t,r,n,o,a):e instanceof i&&(s=e),this.queries.push({fn:"onWhere",e:s}),this},e.prototype.search=function(e,t,r,n,o){"string"==typeof t&&(t=[t]),r&&"none"!==r||(r="contains");var a=u.fnOperators[r];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:r,searchKey:e,ignoreCase:n,ignoreAccent:o,comparer:a}}),this},e.prototype.sortBy=function(e,t,r){return this.sortByForeignKey(e,t,r)},e.prototype.sortByForeignKey=function(t,r,n,a){var i,s,c=(0,o.le)(a)?"ascending":a;if("string"==typeof t&&u.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),r="descending"),r&&"string"!=typeof r||(c=r?r.toLowerCase():"ascending",r=u.fnSort(r)),n){i=e.filterQueries(this.queries,"onSortBy");for(var l=0;l<i.length;l++)if("string"==typeof(s=i[l].e.fieldName)){if(s===t)return this}else if(s instanceof Array)for(var p=0;p<s.length;p++)if(s[p]===t||t.toLowerCase()===s[p]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:r,direction:c}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,r){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:r||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"==typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter((function(e){return e.fn===t}))},e.filterQueryLists=function(e,t){for(var r=e.filter((function(e){return-1!==t.indexOf(e.fn)})),n={},o=0;o<r.length;o++)n[r[o].fn]||(n[r[o].fn]=r[o].e);return n},e}(),i=function(){function e(t,r,n,o,a,i){return void 0===o&&(o=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=r.toLowerCase(),this.value=n,this.matchCase=i,this.ignoreCase=o,this.ignoreAccent=a,this.isComplex=!1,this.comparer=u.fnOperators.processOperator(this.operator)):(t instanceof e&&n instanceof e||n instanceof Array)&&(this.isComplex=!0,this.condition=r.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return e.and=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,r,n,o,a){return e.combine(this,t,r,n,"and",o,a)},e.or=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,r,n,o,a){return e.combine(this,t,r,n,"or",o,a)},e.ornot=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"or not")},e.prototype.ornot=function(t,r,n,o,a){return e.combine(this,t,r,n,"ornot",o,a)},e.andnot=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.combinePredicates([].slice.call(t,0),"and not")},e.prototype.andnot=function(t,r,n,o,a){return e.combine(this,t,r,n,"andnot",o,a)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],r=0,n=e.length;r<n;r++)t.push(this.fromJSONData(e[r]));return t}var o=e;return this.fromJSONData(o)},e.prototype.validate=function(e){var t,r,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,u.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,u.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);r=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var o=0;o<n.length;o++)if(o>0&&this.condition&&-1!==this.condition.indexOf("not")&&(n[o].condition=n[o].condition?n[o].condition+"not":"not"),t=n[o].validate(e),r){if(!t)return!1}else if(t)return!0;return r},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var r=0;r<t.length;r++)e.push(t[r].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,matchCase:this.matchCase}},e.combinePredicates=function(t,r){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],r,t.slice(1))},e.combine=function(t,r,n,o,a,i,s){return r instanceof e?e[a](t,r):"string"==typeof r?e[a](t,new e(r,n,o,i,s)):u.throwError("Predicate - "+a+" : invalid arguments")},e.fromJSONData=function(t){for(var r=t.predicates||[],n=r.length,o=[],a=0;a<n;a++)o.push(this.fromJSONData(r[a]));return t.isComplex?new e(o[0],t.condition,o.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}(),s={GroupGuid:"{271bbba0-1ee7}"},u=function(){function e(){}return e.getValue=function(e,t){return"function"==typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.notEndsWith=function(e,t){return e.slice&&e.slice(-t.length)!==t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.notStartsWith=function(e,t){return e.slice(0,t.length)!==t},e.wildCard=function(e,t){var r,n;if(-1!==t.indexOf("[")&&(t=t.split("[").join("[[]")),-1!==t.indexOf("(")&&(t=t.split("(").join("[(]")),-1!==t.indexOf(")")&&(t=t.split(")").join("[)]")),-1!==t.indexOf("\\")&&(t=t.split("\\").join("[\\\\]")),-1!==t.indexOf("*")){"*"!==t.charAt(0)&&(t="^"+t),"*"!==t.charAt(t.length-1)&&(t+="$"),r=t.split("*");for(var o=0;o<r.length;o++)-1===r[o].indexOf(".")?r[o]=r[o]+".*":r[o]=r[o]+"*";t=r.join("")}return-1===t.indexOf("%3f")&&-1===t.indexOf("?")||(n=-1!==t.indexOf("%3f")?t.split("%3f"):t.split("?"),t=n.join(".")),new RegExp(t,"g").test(e)},e.like=function(t,r){return-1!==r.indexOf("%")&&("%"===r.charAt(0)&&r.lastIndexOf("%")<2?(r=r.substring(1,r.length),e.startsWith(e.toLowerCase(t),e.toLowerCase(r))):"%"===r.charAt(r.length-1)&&r.indexOf("%")>r.length-3?(r=r.substring(0,r.length-1),e.endsWith(e.toLowerCase(t),e.toLowerCase(r))):r.lastIndexOf("%")!==r.indexOf("%")&&r.lastIndexOf("%")>r.indexOf("%")+1?(r=r.substring(r.indexOf("%")+1,r.lastIndexOf("%")),-1!==t.indexOf(r)):-1!==t.indexOf(r))},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return(0,o.le)(e)&&(0,o.le)(t)||null==t?-1:"string"==typeof e?e.localeCompare(t):null==e?1:e-t},e.fnDescending=function(e,t){return(0,o.le)(e)&&(0,o.le)(t)?-1:null==t?1:"string"==typeof e?-1*e.localeCompare(t):null==e?-1:t-e},e.extractFields=function(e,t){for(var r={},n=0;n<t.length;n++)r=this.setValue(t[n],this.getObject(t[n],e),r);return r},e.select=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push(this.extractFields(e[n],t));return r},e.group=function(t,r,n,a,i,u,c){a=a||1;var l=t,p="GroupGuid";if(l.GroupGuid===s[p]){for(var d=function(e){if((0,o.le)(i))l[e].items=h.group(l[e].items,r,n,l.level+1,null,u,c),l[e].count=l[e].items.length;else{var t,a=i.filter((function(t){return t.key===l[e].key}));t=i.indexOf(a[0]),l[e].items=h.group(l[e].items,r,n,l.level+1,i[t].items,u,c),l[e].count=i[t].count}},h=this,f=0;f<l.length;f++)d(f);return l.childLevels+=1,l}var g={},y=[];y.GroupGuid=s[p],y.level=a,y.childLevels=0,y.records=l;for(var v=function(e){var t=m.getVal(l,e,r);if((0,o.le)(u)||(t=u(t,r)),!g[t]&&(g[t]={key:t,count:0,items:[],aggregates:{},field:r},y.push(g[t]),!(0,o.le)(i))){var a=i.filter((function(e){return e.key===g[t].key}));g[t].count=a[0].count}g[t].count=(0,o.le)(i)?g[t].count+=1:g[t].count,(!c||c&&n.length)&&g[t].items.push(l[e])},m=this,O=0;O<l.length;O++)v(O);if(n&&n.length){var S=function(t){for(var r={},a=void 0,s=n,u=0;u<n.length;u++)if(a=e.aggregates[n[u].type],(0,o.le)(i))a&&(r[s[u].field+" - "+s[u].type]=a(y[t].items,s[u].field));else{var c=i.filter((function(e){return e.key===y[t].key}));a&&(r[s[u].field+" - "+s[u].type]=a(c[0].items,s[u].field))}y[t].aggregates=r};for(O=0;O<y.length;O++)S(O)}if(c&&y.length&&n.length)for(O=0;O<y.length;O++)y[O].items=[];return l.length&&y||l},e.buildHierarchy=function(e,t,r,n,o){var a,i={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),a=0;a<n.length;a++)(i[s=this.getObject(e,n[a])]||(i[s]=[])).push(n[a]);for(a=0;a<r.length;a++){var s=this.getObject(o||e,r[a]);r[a][t]=i[s]}},e.getFieldList=function(e,t,r){if(void 0===r&&(r=""),null==t)return this.getFieldList(e,[],r);for(var n=e,o=0,a=Object.keys(e);o<a.length;o++){var i=a[o];"object"!=typeof n[i]||n[i]instanceof Array?t.push(r+i):this.getFieldList(n[i],t,r+i+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf(".")){var r=e.charAt(0).toLowerCase()+e.slice(1),n=e.charAt(0).toUpperCase()+e.slice(1);return(0,o.le)(t[e])?(0,o.le)(t[r])?(0,o.le)(t[n])?null:t[n]:t[r]:t[e]}for(var a=t,i=e.split("."),s=0;s<i.length&&null!=a;s++){if(void 0===(a=a[i[s]])){var u=i[s].charAt(0).toUpperCase()+i[s].slice(1);a=t[u]||t[u.charAt(0).toLowerCase()+u.slice(1)]||null}t=a}return a}},e.setValue=function(e,t,r){var n,a,i=e.toString().split("."),s=r||{},u=s,c=i.length;for(n=0;n<c;n++)a=i[n],n+1===c?u[a]=void 0===t?void 0:t:(0,o.le)(u[a])&&(u[a]={}),u=u[a];return s},e.sort=function(e,t,r){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),o=e.slice(0,n),a=e.slice(n);return o=this.sort(o,t,r),a=this.sort(a,t,r),this.merge(o,a,t,r)},e.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map((function(t){return t in e.diacritics?e.diacritics[t]:t})).join("")},e.merge=function(e,t,r,n){for(var o,a=[];e.length>0||t.length>0;)o=e.length>0&&t.length>0?n?n(this.getVal(e,0,r),this.getVal(t,0,r),e[0],t[0])<=0?e:t:e[0][r]<e[0][r]?e:t:e.length>0?e:t,a.push(o.shift());return a},e.getVal=function(e,t,r){return r?this.getObject(r,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"==typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,r,n){if(t in e){var a=e[t](r,n);(0,o.le)(a)||(r=a)}return r},e.getAddParams=function(t,r,n){var o={};return e.callAdaptorFunction(t,"addParams",{dm:r,query:n,params:n.params,reqParams:o}),o},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(e){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(function(e,r){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===r?3&t|8:t]}))},e.isNull=function(e){return null==e},e.getItemFromComparer=function(t,r,n){var a,i,s,u=0,c="string"==typeof e.getVal(t,0,r);if(t.length)for(;(0,o.le)(a)&&u<t.length;)a=e.getVal(t,u,r),s=t[u++];for(;u<t.length;u++)i=e.getVal(t,u,r),(0,o.le)(i)||(c&&(a=+a,i=+i),n(a,i)>0&&(a=i,s=t[u]));return s},e.distinct=function(t,r,n){n=!(0,o.le)(n)&&n;var a,i=[],s={};return t.forEach((function(o,u){(a="object"==typeof t[u]?e.getVal(t,u,r):t[u])in s||(i.push(n?t[u]:a),s[a]=1)})),i},e.processData=function(e,t){var r=this.prepareQuery(e),n=new A(t);e.requiresCounts&&r.requiresCount();var o=n.executeLocal(r),a={result:e.requiresCounts?o.result:o,count:o.count,aggregates:JSON.stringify(o.aggregates)};return e.requiresCounts?a:o},e.prepareQuery=function(t){var r=this,n=new a;return t.select&&n.select(t.select),t.where&&e.parse.parseJson(t.where).filter((function(e){if((0,o.le)(e.condition))n.where(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent);else{var t=[];e.field?t.push(new i(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)):t=t.concat(r.getPredicate(e.predicates)),"or"===e.condition?n.where(i.or(t)):"and"===e.condition&&n.where(i.and(t))}})),t.search&&e.parse.parseJson(t.search).filter((function(e){return n.search(e.key,e.fields,e.operator,e.ignoreCase,e.ignoreAccent)})),t.aggregates&&t.aggregates.filter((function(e){return n.aggregate(e.type,e.field)})),t.sorted&&t.sorted.filter((function(e){return n.sortBy(e.name,e.direction)})),t.skip&&n.skip(t.skip),t.take&&n.take(t.take),t.group&&t.group.filter((function(e){return n.group(e)})),n},e.getPredicate=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.field)t.push(new i(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var o=[],a=this.getPredicate(n.predicates),s=0,u=Object.keys(a);s<u.length;s++){var c=u[s];o.push(a[c])}t.push("or"===n.condition?i.or(o):i.and(o))}}return t},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},e.aggregates={sum:function(t,r){for(var n,o=0,a="number"!=typeof e.getVal(t,0,r),i=0;i<t.length;i++)n=e.getVal(t,i,r),isNaN(n)||null===n||(a&&(n=+n),o+=n);return o},average:function(t,r){return e.aggregates.sum(t,r)/t.length},min:function(t,r){var n;return"function"==typeof r&&(n=r,r=null),e.getObject(r,e.getItemFromComparer(t,r,n||e.fnAscending))},max:function(t,r){var n;return"function"==typeof r&&(n=r,r=null),e.getObject(r,e.getItemFromComparer(t,r,n||e.fnDescending))},truecount:function(e,t){return new A(e).executeLocal((new a).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new A(e).executeLocal((new a).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},e.diacritics={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"},e.fnOperators={equal:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?e.toLowerCase(t)===e.toLowerCase(r):t===r},notequal:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),!e.fnOperators.equal(t,r,n)},lessthan:function(t,r,n){return n?e.toLowerCase(t)<e.toLowerCase(r):((0,o.le)(t)&&(t=void 0),t<r)},greaterthan:function(t,r,n){return n?e.toLowerCase(t)>e.toLowerCase(r):t>r},lessthanorequal:function(t,r,n){return n?e.toLowerCase(t)<=e.toLowerCase(r):((0,o.le)(t)&&(t=void 0),t<=r)},greaterthanorequal:function(t,r,n){return n?e.toLowerCase(t)>=e.toLowerCase(r):t>=r},contains:function(t,r,n,a){return a&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?!(0,o.le)(t)&&!(0,o.le)(r)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(r)):!(0,o.le)(t)&&!(0,o.le)(r)&&-1!==t.toString().indexOf(r)},doesnotcontain:function(t,r,n,a){return a&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?!(0,o.le)(t)&&!(0,o.le)(r)&&-1===e.toLowerCase(t).indexOf(e.toLowerCase(r)):!(0,o.le)(t)&&!(0,o.le)(r)&&-1===t.toString().indexOf(r)},isnotnull:function(e){return null!=e},isnull:function(e){return null==e},startswith:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?t&&r&&e.startsWith(e.toLowerCase(t),e.toLowerCase(r)):t&&r&&e.startsWith(t,r)},doesnotstartwith:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?t&&r&&e.notStartsWith(e.toLowerCase(t),e.toLowerCase(r)):t&&r&&e.notStartsWith(t,r)},like:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?t&&r&&e.like(e.toLowerCase(t),e.toLowerCase(r)):t&&r&&e.like(t,r)},isempty:function(e){return void 0===e||""===e},isnotempty:function(e){return void 0!==e&&""!==e},wildcard:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?(t||"boolean"==typeof t)&&r&&"object"!=typeof t&&e.wildCard(e.toLowerCase(t),e.toLowerCase(r)):(t||"boolean"==typeof t)&&r&&e.wildCard(t,r)},endswith:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?t&&r&&e.endsWith(e.toLowerCase(t),e.toLowerCase(r)):t&&r&&e.endsWith(t,r)},doesnotendwith:function(t,r,n,o){return o&&(t=e.ignoreDiacritics(t),r=e.ignoreDiacritics(r)),n?t&&r&&e.notEndsWith(e.toLowerCase(t),e.toLowerCase(r)):t&&r&&e.notEndsWith(t,r)},processSymbols:function(t){var r=e.operatorSymbols[t];return r?e.fnOperators[r]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return e.fnOperators[t]||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"!=typeof t||!/^[\s]*\[|^[\s]*\{(.)+:/g.test(t)&&-1!==t.indexOf('"')?t instanceof Array?e.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&e.parse.iterateAndReviveJson(t):t=JSON.parse(t,e.parse.jsonReviver),t},iterateAndReviveArray:function(t){for(var r=0;r<t.length;r++)"object"==typeof t[r]&&null!==t[r]?e.parse.iterateAndReviveJson(t[r]):"string"!=typeof t[r]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[r])&&-1!==t[r].toString().indexOf('"')?t[r]=e.parse.parseJson(t[r]):t[r]=e.parse.jsonReviver("",t[r])},iterateAndReviveJson:function(t){for(var r,n=0,o=Object.keys(t);n<o.length;n++){var a=o[n];e.startsWith(a,"__")||("object"==typeof(r=t[a])?r instanceof Array?e.parse.iterateAndReviveArray(r):r&&e.parse.iterateAndReviveJson(r):t[a]=e.parse.jsonReviver(t[a],r))}},jsonReviver:function(t,r){if("string"==typeof r){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(r),o=e.timeZoneHandling?e.serverTimezoneOffset:null;if(n)return e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),o,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(r)){var a=r.indexOf("Z")>-1||r.indexOf("z")>-1,i=r.split(/[^0-9.]/);if(a){if(i[5].indexOf(".")>-1){var s=i[5].split(".");i[5]=s[0],i[6]=new Date(r).getUTCMilliseconds().toString()}else i[6]="00";r=e.dateParse.toTimeZone(new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10),parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5]?i[5]:"00",10),parseInt(i[6],10)),e.serverTimezoneOffset,!1)}else{var u=new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10),parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5]?i[5]:"00",10)),c=parseInt(i[6],10),l=parseInt(i[7],10);if(isNaN(c)&&isNaN(l))return u;r.indexOf("+")>-1?u.setHours(u.getHours()-c,u.getMinutes()-l):u.setHours(u.getHours()+c,u.getMinutes()+l),r=e.dateParse.toTimeZone(u,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(r=e.dateParse.addSelfOffset(r))}else if(/^\d{4}-\d{2}-\d{2}$/.test(r))return i=r.split(/[^0-9.]/),new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10))}return r},isJson:function(t){return"string"==typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,r){return e.isPlainObject(t)?e.parse.jsonReplacer(t,r):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},r).val:t},jsonReplacer:function(t,r){for(var n,o=0,a=Object.keys(t);o<a.length;o++){var i=a[o];if((n=t[i])instanceof Date){var s=n;null==e.serverTimezoneOffset?t[i]=e.dateParse.toTimeZone(s,null).toJSON():(s=new Date(+s+36e5*e.serverTimezoneOffset),t[i]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(s),null).toJSON())}}return t},arrayReplacer:function(t){for(var r=0;r<t.length;r++)e.isPlainObject(t[r])?t[r]=e.parse.jsonReplacer(t[r]):t[r]instanceof Date&&(t[r]=e.parse.jsonReplacer({date:t[r]}).date);return t},jsonDateReplacer:function(t,r){if("value"===t&&r){if("string"==typeof r){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(r);if(n)r=e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(r)){var o=r.split(/[^0-9]/);r=e.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),null,!0)}}if(r instanceof Date)return r=e.dateParse.addSelfOffset(r),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(r),null).toJSON():(r=e.dateParse.toTimeZone(r,r.getTimezoneOffset()/60-e.serverTimezoneOffset,!1)).toJSON()}return r}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,r,n){if(null===r)return t;var o=n?e.dateParse.toUTC(t):t;return new Date(+o-36e5*r)},toLocalTime:function(e){var t=e,r=-t.getTimezoneOffset(),n=r>=0?"+":"-",o=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+o(t.getMonth()+1)+"-"+o(t.getDate())+"T"+o(t.getHours())+":"+o(t.getMinutes())+":"+o(t.getSeconds())+n+o(r/60)+":"+o(r%60)}},e}(),c=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l={GroupGuid:"{271bbba0-1ee7}"},p=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,r,n){return e},e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.processQuery=function(e,t){for(var r,n,o,a=e.dataSource.json.slice(0),i=a.length,s=!0,u={},c=0,l=[],p=0;p<t.lazyLoad.length;p++)c++,u[t.lazyLoad[p].key]=t.lazyLoad[p].value;var d={};for(p=0;p<t.queries.length;p++)"onPage"!==(n=t.queries[p]).fn&&"onGroup"!==n.fn||!t.lazyLoad.length?(r=this[n.fn].call(this,a,n.e,t),"onAggregates"===n.fn?d[n.e.field+" - "+n.e.type]=r:a=void 0!==r?r:a,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(s=!1),s&&(i=a.length)):("onGroup"===n.fn&&l.push(n.e),"onPage"===n.fn&&(o=n.e));if(c){var h={query:t,lazyLoad:u,result:a,group:l,page:o},f=this.lazyLoadGroup(h);a=f.result,i=f.count}return t.isCountRequired&&(a={result:a,count:i,aggregates:d}),a},t.prototype.lazyLoadGroup=function(e){var t=0,r=this.getAggregate(e.query),n=e.result;if((0,o.le)(e.lazyLoad.onDemandGroupInfo))s=e.group[0].fieldName,t=(n=u.group(n,s,r,null,null,e.group[0].comparer,!0)).length,c=n,e.page&&(n=this.onPage(n,e.page,e.query)),this.formGroupResult(n,c);else{for(var a=e.lazyLoad.onDemandGroupInfo,i=a.where.length-1;i>=0;i--)n=this.onWhere(n,a.where[i]);if(e.group.length!==a.level){var s=e.group[a.level].fieldName;n=u.group(n,s,r,null,null,e.group[0].comparer,!0)}t=n.length;var c=n;n=(n=n.slice(a.skip)).slice(0,a.take),e.group.length!==a.level&&this.formGroupResult(n,c)}return{result:n,count:t}},t.prototype.formGroupResult=function(e,t){if(e.length&&t.length){var r="GroupGuid",n="childLevels",o="level",a="records";e[r]=t[r],e[n]=t[n],e[o]=t[o],e[a]=t[a]}return e},t.prototype.getAggregate=function(e){var t=a.filterQueries(e.queries,"onAggregates"),r=[];if(t.length)for(var n=void 0,o=0;o<t.length;o++)n=t[o].e,r.push({type:n.type,field:u.getValue(n.field,e)});return r},t.prototype.batchRequest=function(e,t,r){var n,o=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,r.key,t.changedRecords[n]);for(n=0;n<o;n++)this.remove(e,r.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter((function(e){if(t)return t.validate(e)})):e},t.prototype.onAggregates=function(e,t){var r=u.aggregates[t.type];return e&&r&&0!==e.length?r(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&u.getFieldList(e[0],t.fieldNames),e.filter((function(e){for(var r=0;r<t.fieldNames.length;r++)if(t.comparer.call(e,u.getObject(t.fieldNames[r],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))):e},t.prototype.onSortBy=function(e,t,r){if(!e||!e.length)return e;var n,o=u.getValue(t.fieldName,r);if(!o)return e.sort(t.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)o[a]&&(n=t.comparer,u.endsWith(o[a]," desc")&&(n=u.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=u.sort(e,o[a],n));return e}return u.sort(e,o,t.comparer)},t.prototype.onGroup=function(e,t,r){if(!e||!e.length)return e;var n=this.getAggregate(r);return u.group(e,u.getValue(t.fieldName,r),n,null,null,t.comparer)},t.prototype.onPage=function(e,t,r){var n=u.getValue(t.pageSize,r),o=(u.getValue(t.pageIndex,r)-1)*n,a=o+n;return e&&e.length?e.slice(o,a):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(u.getValue(t.start),u.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,u.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(u.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?u.select(e,u.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,r,n,a){return(0,o.le)(a)?e.dataSource.json.push(t):e.dataSource.json.splice(a,0,t)},t.prototype.remove=function(e,t,r,n){var o,a=e.dataSource.json;for("object"!=typeof r||r instanceof Date||(r=u.getObject(t,r)),o=0;o<a.length&&u.getObject(t,a[o])!==r;o++);return o!==a.length?a.splice(o,1):null},t.prototype.update=function(e,t,r,n){var a,i,s=e.dataSource.json;for((0,o.le)(t)||(i=(0,o.NA)(t,r)),a=0;a<s.length&&((0,o.le)(t)||(0,o.NA)(t,s[a])!==i);a++);return a<s.length?(0,o.TS)(s[a],r):null},t}(p),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.processQuery=function(e,t,r){var n,i,s=this.getQueryRequest(t),c=a.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),l=t.params,p=e.dataSource.url,d=null,h=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in c?(n=c.onPage,i=((i=u.getValue(n.pageIndex,t))-1)*(d=u.getValue(n.pageSize,t))):"onRange"in c&&(i=(n=c.onRange).start,d=n.end-n.start);for(var g=0;g<s.sorts.length;g++)n=u.getValue(s.sorts[g].e.fieldName,t),f.sorts.push(u.callAdaptorFunction(this,"onEachSort",{name:n,direction:s.sorts[g].e.direction},t));for(r&&(n=this.getFiltersFrom(r,t))&&f.filters.push(u.callAdaptorFunction(this,"onEachWhere",n.toJson(),t)),g=0;g<s.filters.length;g++){var y=u.callAdaptorFunction(this,"onEachWhere",s.filters[g].e.toJson(),t);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!(0,o.le)(s.filters[g].e.key)&&s.filters.length>1&&(y="("+y+")"),f.filters.push(y);for(var v=0,m="object"==typeof f.filters[g]?Object.keys(f.filters[g]):[];v<m.length;v++){var O=m[v];u.isNull(f[O])&&delete f[O]}}for(g=0;g<s.searches.length;g++)n=s.searches[g].e,f.searches.push(u.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(g=0;g<s.groups.length;g++)f.groups.push(u.getValue(s.groups[g].e.fieldName,t));for(g=0;g<s.aggregates.length;g++)n=s.aggregates[g].e,f.aggregates.push({type:n.type,field:u.getValue(n.field,t)});var S={};if(this.getRequestQuery(h,t,c,f,S),u.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:l,reqParams:S}),t.lazyLoad.length)for(g=0;g<t.lazyLoad.length;g++)S[t.lazyLoad[g].key]=t.lazyLoad[g].value;for(var b=0,A=Object.keys(S);b<A.length;b++)O=A[b],(u.isNull(S[O])||""===S[O]||0===S[O].length)&&delete S[O];h.skip in S&&h.take in S||null===d||(S[h.skip]=u.callAdaptorFunction(this,"onSkip",i,t),S[h.take]=u.callAdaptorFunction(this,"onTake",d,t));var C=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(S,u.parse.jsonDateReplacer),url:p,pvtData:C,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(S,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?p.replace(/\/*$/,n):p,pvtData:C})},t.prototype.getRequestQuery=function(e,t,r,n,o){var a=o;a[e.from]=t.fromTable,e.apply&&t.distincts.length&&(a[e.apply]="onDistinct"in this?u.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(a[e.expand]="onExpand"in this&&"onSelect"in r?u.callAdaptorFunction(this,"onExpand",{selects:u.getValue(r.onSelect.fieldNames,t),expands:t.expands},t):t.expands),a[e.select]="onSelect"in r&&!t.distincts.length?u.callAdaptorFunction(this,"onSelect",u.getValue(r.onSelect.fieldNames,t),t):"",a[e.count]=t.isCountRequired?u.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",a[e.search]=n.searches.length?u.callAdaptorFunction(this,"onSearch",n.searches,t):"",a[e.skip]="onSkip"in r?u.callAdaptorFunction(this,"onSkip",u.getValue(r.onSkip.nos,t),t):"",a[e.take]="onTake"in r?u.callAdaptorFunction(this,"onTake",u.getValue(r.onTake.nos,t),t):"",a[e.where]=n.filters.length||n.searches.length?u.callAdaptorFunction(this,"onWhere",n.filters,t):"",a[e.sortBy]=n.sorts.length?u.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",a[e.group]=n.groups.length?u.callAdaptorFunction(this,"onGroup",n.groups,t):"",a[e.aggregates]=n.aggregates.length?u.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",a.param=[]},t.prototype.convertToQueryString=function(e,t,r){return""},t.prototype.processResponse=function(e,t,r,n,a,i){if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("application/json")){var s=u.timeZoneHandling;t&&!t.timeZoneHandling&&(u.timeZoneHandling=!1),e=u.parse.parseJson(e),u.timeZoneHandling=s}var c=a,l=c.pvtData||{},p=e?e.groupDs:[];if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("xml"))return r.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(c.data);if(d&&"batch"===d.action&&e&&e.addedRecords)return i.addedRecords=e.addedRecords,i;e&&e.d&&(e=e.d);var h={};e&&"count"in e&&(h.count=e.count),h.result=e&&e.result?e.result:e;var f=!1;if(Array.isArray(e.result)&&e.result.length&&((0,o.le)(e.result[0].key)||(h.result=this.formRemoteGroupedData(h.result,1,l.groups.length-1)),r&&r.lazyLoad.length&&l.groups.length))for(var g=0;g<r.lazyLoad.length;g++)if("onDemandGroupInfo"===r.lazyLoad[g].key){var y=r.lazyLoad[g].value.level;l.groups.length===y&&(f=!0)}return f||this.getAggregateResult(l,e,h,p,r),u.isNull(h.count)?h.result:{result:h.result,count:h.count,aggregates:h.aggregates}},t.prototype.formRemoteGroupedData=function(e,t,r){for(var n=0;n<e.length;n++)e[n].items.length&&Object.keys(e[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[n].items,t+1,r-1);var a="GroupGuid",i="records";return e[a]=l[a],e.level=t,e.childLevels=r,e[i]=e[0].items.length?this.getGroupedRecords(e,!(0,o.le)(e[0].items[i])):[],e},t.prototype.getGroupedRecords=function(e,t){for(var r=[],n=0;n<e.length;n++)if(t)r=r.concat(e[n].items.records);else for(var o=0;o<e[n].items.length;o++)r.push(e[n].items[o]);return r},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,r,n,a){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,o.l7)({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:r[void 0],key:r[void 0]},u.getAddParams(this,e,n)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,r,n){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,o.l7)({},{value:t,table:r,action:"insert"},u.getAddParams(this,e,n)))}},t.prototype.remove=function(e,t,r,n,a){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,o.l7)({},{key:r,keyColumn:t,table:n,action:"remove"},u.getAddParams(this,e,a)))}},t.prototype.update=function(e,t,r,n,a){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,o.l7)({},{value:r,action:"update",keyColumn:t,key:u.getObject(t,r),table:n},u.getAddParams(this,e,a)))}},t.prototype.getFiltersFrom=function(e,t){var r,n=t.fKey,o=n,a=t.key,s=[];"object"!=typeof e[0]&&(o=null);for(var c=0;c<e.length;c++)r="object"==typeof e[0]?u.getObject(a||o,e[c]):e[c],s.push(new i(n,"equal",r));return i.or(s)},t.prototype.getAggregateResult=function(e,t,r,n,i){var s=t;if(t&&t.result&&(s=t.result),e&&e.aggregates&&e.aggregates.length){var c=e.aggregates,l=void 0,p=s,d={};t.aggregate&&(p=t.aggregate);for(var h=0;h<c.length;h++)(l=u.aggregates[c[h].type])&&(d[c[h].field+" - "+c[h].type]=l(p,c[h].field));r.aggregates=d}var f=Array.isArray(t.result)&&t.result.length&&!(0,o.le)(t.result[0].key);if(e&&e.groups&&e.groups.length&&!f){var g=e.groups;for(h=0;h<g.length;h++){(0,o.le)(n)||(n=u.group(n,g[h]));var y=a.filterQueries(i.queries,"onGroup")[h].e;s=u.group(s,g[h],e.aggregates,null,n,y.comparer)}r.result=s}return r},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=a.filterQueries(e.queries,"onSortBy"),t.groups=a.filterQueries(e.queries,"onGroup"),t.filters=a.filterQueries(e.queries,"onWhere"),t.searches=a.filterQueries(e.queries,"onSearch"),t.aggregates=a.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var r=0,n=e.params;r<n.length;r++){var o=n[r];if(t[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[o.key]=o.value,o.fn&&(t[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),t.params[o.key]=t[o.key]}},t}(p),f=function(e){function t(t){var r=e.call(this)||this;return r.options=(0,o.l7)({},r.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),(0,o.l7)(r.options,t||{}),r}return c(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,r,n){var a,i,s="",c=e.value,l=typeof c,p=e.field?t.getField(e.field):null;if(c instanceof Date&&(c="datetime'"+u.parse.replacer(c)+"'"),"string"===l&&(c=c.replace(/'/g,"''"),e.ignoreCase&&(c=c.toLowerCase()),"like"!==e.operator&&(c=encodeURIComponent(c)),"wildcard"!==e.operator&&"like"!==e.operator&&(c="'"+c+"'"),n&&(p="cast("+p+", 'Edm.String')"),u.parse.isGuid(c)&&(i="guid"),e.ignoreCase&&(i||(p="tolower("+p+")"),c=c.toLowerCase())),"isempty"===e.operator||"isnull"===e.operator||"isnotempty"===e.operator||"isnotnull"===e.operator?(a=-1!==e.operator.indexOf("isnot")?u.odBiOperator.notequal:u.odBiOperator.equal,c="isnull"===e.operator||"isnotnull"===e.operator?null:"''"):a=u.odBiOperator[e.operator],a)return s+=p,s+=a,i&&(s+=i),s+c;if("like"===(a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator[e.operator]:u.odv4UniOperator[e.operator]))-1!==c.indexOf("%")&&("%"===c.charAt(0)&&c.lastIndexOf("%")<2?(c=c.substring(1,c.length),a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.startswith:u.odv4UniOperator.startswith):"%"===c.charAt(c.length-1)&&c.indexOf("%")>c.length-3?(c=c.substring(0,c.length-1),a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.endswith:u.odv4UniOperator.endswith):c.lastIndexOf("%")!==c.indexOf("%")&&c.lastIndexOf("%")>c.indexOf("%")+1?(c=c.substring(c.indexOf("%")+1,c.lastIndexOf("%")),a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.contains:u.odv4UniOperator.contains):a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.contains:u.odv4UniOperator.contains),c="'"+(c=encodeURIComponent(c))+"'";else if("wildcard"===a)if(-1!==c.indexOf("*")){var d=c.split("*"),h=void 0,f=0;if(0!==c.indexOf("*")&&-1===d[0].indexOf("%3f")&&-1===d[0].indexOf("?")&&(h="'"+(h=d[0])+"'",s+=(a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.startswith:u.odv4UniOperator.startswith)+"(",s+=p+",",i&&(s+=i),s+=h+")",f++),c.lastIndexOf("*")!==c.length-1&&-1===d[d.length-1].indexOf("%3f")&&-1===d[d.length-1].indexOf("?")&&(h="'"+(h=d[d.length-1])+"'",f>0&&(s+=" and "),s+=(a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.endswith:u.odv4UniOperator.endswith)+"(",s+=p+",",i&&(s+=i),s+=h+")",f++),d.length>2)for(var g=1;g<d.length-1;g++)if(-1===d[g].indexOf("%3f")&&-1===d[g].indexOf("?")){if(h="'"+(h=d[g])+"'",f>0&&(s+=" and "),"substringof"===(a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.contains:u.odv4UniOperator.contains)||"not substringof"===a){var y=h;h=p,p=y}s+=a+"(",s+=p+",",i&&(s+=i),s+=h+")",f++}0===f?(a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.contains:u.odv4UniOperator.contains,-1===c.indexOf("?")&&-1===c.indexOf("%3f")||(c=-1!==c.indexOf("?")?c.split("?").join(""):c.split("%3f").join("")),c="'"+c+"'"):a="wildcard"}else a=(0,o.le)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?u.odUniOperator.contains:u.odv4UniOperator.contains,-1===c.indexOf("?")&&-1===c.indexOf("%3f")||(c=-1!==c.indexOf("?")?c.split("?").join(""):c.split("%3f").join("")),c="'"+c+"'";return"substringof"!==a&&"not substringof"!==a||(y=c,c=p,p=y),"wildcard"!==a&&(s+=a+"(",s+=p+",",i&&(s+=i),s+=c+")"),s},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,r){for(var n=[],o=0;o<e.predicates.length;o++)n.push("("+this.onEachWhere(e.predicates[o],t,r)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,r){return e.isComplex?this.onComplexPredicate(e,t,r):this.onPredicate(e,t,r)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&u.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],r=0;r<e.fields.length;r++)t.push(new i(e.fields[r],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=i.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var r=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)r.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else r.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return r.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var r=0;r<e.length;r++)e[r]=t.getField(e[r]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,r){u.endsWith(r.url,this.options.batch)&&"post"===r.type.toLowerCase()?(t.headers.set("Accept",this.options.multipartAccept),t.headers.set("DataServiceVersion","2.0")):t.headers.set("Accept",this.options.accept),t.headers.set("DataServiceVersion","2.0"),t.headers.set("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,r,n,a,i){var s="odata.metadata";if(a&&"GET"===a.type&&!this.rootUrl&&e[s]){var c=e[s].split("/$metadata#");this.rootUrl=c[0],this.resourceTableName=c[1]}if(!(0,o.le)(e.d)){var l=r&&r.isCountRequired?e.d.results:e.d,p="__metadata";if(!(0,o.le)(l))for(var d=0;d<l.length;d++)(0,o.le)(l[d][p])||delete l[d][p]}var h=a&&a.pvtData,f=this.processBatchResponse(e,r,n,a,i);if(f)return f;var g=n&&a.fetchRequest.headers.get("DataServiceVersion"),y=null,v=g&&parseInt(g,10)||2;if(r&&r.isCountRequired){var m="__count";(e[m]||e["odata.count"])&&(y=e[m]||e["odata.count"]),e.d&&(e=e.d),(e[m]||e["odata.count"])&&(y=e[m]||e["odata.count"])}3===v&&e.value&&(e=e.value),e.d&&(e=e.d),v<3&&e.results&&(e=e.results);var O={};return O.count=y,O.result=e,this.getAggregateResult(h,e,O,null,r),u.isNull(y)?O.result:{result:O.result,count:O.count,aggregates:O.aggregates}},t.prototype.convertToQueryString=function(e,t,r){var n=[],o="table",a=e[o]||"";delete e[o],r.dataSource.requiresFormat&&(e.$format="json");for(var i=0,s=Object.keys(e);i<s.length;i++){var u=s[i];n.push(u+"="+e[u])}return n=n.join("&"),r.dataSource.url&&-1!==r.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},t.prototype.localTimeReplacer=function(e,t){for(var r=0,n=(0,o.le)(t)?[]:Object.keys(t);r<n.length;r++){var a=n[r];t[a]instanceof Date&&(t[a]=u.dateParse.toLocalTime(t[a]))}return t},t.prototype.insert=function(e,t,r){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,r,n){var o;return o="string"!=typeof r||u.parse.isGuid(r)?"("+r+")":"('"+r+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o}},t.prototype.update=function(e,t,r,n,a,i){var s;return"PATCH"!==this.options.updateType||(0,o.le)(i)||(r=this.compareAndRemove(r,i,t)),s="string"!=typeof r[t]||u.parse.isGuid(r[t])?"("+r[t]+")":"('"+r[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s,data:JSON.stringify(r,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,r,n,o){var a=r.guid=u.getGuid(this.options.batchPre),i=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;var s={url:r.url,key:r.key,cid:1,cSet:u.getGuid(this.options.changeSet)},c="--"+a+"\n";return c+="Content-Type: multipart/mixed; boundary="+s.cSet.replace("--","")+"\n",this.pvt.changeSet=0,c+=this.generateInsertRequest(t.addedRecords,s,e),c+=this.generateUpdateRequest(t.changedRecords,s,e,o?o.changedRecords:[]),c+=this.generateDeleteRequest(t.deletedRecords,s,e),c+=s.cSet+"--\n",{type:"POST",url:i,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:c+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,t,r){if(!e)return"";var n={method:"DELETE ",url:function(e,t,r){var n=u.getObject(r,e[t]);return"number"==typeof n||u.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][r].toJSON()+")":"('"+n+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,n,r)+"\n"},t.prototype.generateInsertRequest=function(e,t,r){if(!e)return"";var n={method:"POST ",url:function(e,t,r){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,n,r)},t.prototype.generateUpdateRequest=function(e,t,r,n){var o=this;if(!e)return"";e.forEach((function(e){return e=o.compareAndRemove(e,n.filter((function(r){return u.getObject(t.key,r)===u.getObject(t.key,e)}))[0],t.key)}));var a={method:this.options.updateType+" ",url:function(e,t,r){return"number"==typeof e[t][r]||u.parse.isGuid(e[t][r])?"("+e[t][r]+")":e[t][r]instanceof Date?"("+e[t][r].toJSON()+")":"('"+e[t][r]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,a,r)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,r,n){for(var a="",i=0;i<e.length;i++)a+="\n"+t.cSet+"\n",a+=this.options.changeSetContent+"\n\n",a+=r.method,"POST "===r.method?a+=(n.dataSource.insertUrl||n.dataSource.crudUrl||t.url)+r.url(e,i,t.key)+" HTTP/1.1\n":"PUT "===r.method||"PATCH "===r.method?a+=(n.dataSource.updateUrl||n.dataSource.crudUrl||t.url)+r.url(e,i,t.key)+" HTTP/1.1\n":"DELETE "===r.method&&(a+=(n.dataSource.removeUrl||n.dataSource.crudUrl||t.url)+r.url(e,i,t.key)+" HTTP/1.1\n"),a+="Accept: "+this.options.accept+"\n",a+="Content-Id: "+this.pvt.changeSet+++"\n",a+=this.options.batchChangeSetContentType+"\n",(0,o.le)(e[i]["@odata.etag"])?a+="\n":(a+="If-Match: "+e[i]["@odata.etag"]+"\n\n",delete e[i]["@odata.etag"]),a+=r.data(e,i);return a},t.prototype.processBatchResponse=function(e,t,r,n,a){if(r&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&u.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var i=r.headers.get("Content-Type"),s=void 0,c=void 0,l=e+"";if(i=i.substring(i.indexOf("=batchresponse")+1),(l=l.split(i)).length<2)return{};l=l[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);p&&l.replace(p[0],"");for(var d=p?p[1]:"",h=(l=l.split(d)).length;h>-1;h--)/\bContent-ID:/i.test(l[h])&&/\bHTTP.+201/.test(l[h])&&(s=parseInt(/\bContent-ID: (\d+)/i.exec(l[h])[1],10),a.addedRecords[s]&&(c=u.parse.parseJson(/^\{.+\}/m.exec(l[h])[0]),(0,o.l7)({},a.addedRecords[s],this.processResponse(c))));return a}return null},t.prototype.compareAndRemove=function(e,t,r){var n=this;return(0,o.le)(t)||Object.keys(e).forEach((function(o){o!==r&&"@odata.etag"!==o&&(u.isPlainObject(e[o])?(n.compareAndRemove(e[o],t[o]),0===Object.keys(e[o]).filter((function(e){return"@odata.etag"!==e})).length&&delete e[o]):(e[o]===t[o]||e[o]&&t[o]&&e[o].valueOf()===t[o].valueOf())&&delete e[o])})),e},t}(h),g=function(e){function t(t){var r=e.call(this,t)||this;return r.options=(0,o.l7)({},r.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),(0,o.l7)(r.options,t||{}),r}return c(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,r,n){var o="",i=t.value,s=i instanceof Date;if(r instanceof a)for(var c=this.getQueryRequest(r),l=0;l<c.filters.length;l++)c.filters[l].e.key===t.value&&(n=!0);return o=e.prototype.onPredicate.call(this,t,r,n),s&&(o=o.replace(/datetime'(.*)'$/,"$1")),u.parse.isGuid(i)&&(o=o.replace("guid","").replace(/'/g,"")),o},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,r={},n={},o=e.expands.slice(),a=[];return e.selects.filter((function(e){return e.indexOf(".")>-1})).forEach((function(e){var n=e.split(".");if(n[0]in r||(r[n[0]]=[]),2===n.length)r[n[0]].length&&-1!==Object.keys(r).indexOf(n[0])?-1!==r[n[0]][0].indexOf("$expand")&&-1===r[n[0]][0].indexOf(";$select=")?r[n[0]][0]=r[n[0]][0]+";$select="+n[1]:r[n[0]][0]=r[n[0]][0]+","+n[1]:r[n[0]].push("$select="+n[1]);else{for(var o="$select="+n[n.length-1],a="",i="",s=1;s<n.length-1;s++)a=a+"$expand="+n[s]+"(",i+=")";var u=a+o+i;if(r[n[0]].length&&-1!==Object.keys(r).indexOf(n[0])&&t.expandQueryIndex(r[n[0]],!0)){var c=t.expandQueryIndex(r[n[0]]);r[n[0]][c]=r[n[0]][c]+u.replace("$expand=",",")}else r[n[0]].push(u)}})),Object.keys(r).forEach((function(e){-1===o.indexOf(e)&&o.push(e)})),o.forEach((function(e){n[e]=e in r?e+"("+r[e].join(";")+")":e})),Object.keys(n).forEach((function(e){return a.push(n[e])})),a.join(",")},t.prototype.expandQueryIndex=function(e,t){for(var r=0;r<e.length;r++)if(-1!==e[r].indexOf("$expand"))return!!t||r;return!t&&0},t.prototype.onDistinct=function(e){return"groupby(("+e.map((function(e){return f.getField(e)})).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter((function(e){return-1===e.indexOf(".")})))},t.prototype.beforeSend=function(e,t,r){"POST"!==r.type&&"PUT"!==r.type&&"PATCH"!==r.type||t.headers.set("Prefer","return=representation"),t.headers.set("Accept",this.options.accept)},t.prototype.processResponse=function(t,r,n,a,i,s){var c="@odata.context",l="@context";if(i&&"GET"===i.type&&!this.rootUrl&&(t[c]||t[l])){var p=t[c]?t[c].split("/$metadata#"):t[l].split("/$metadata#");this.rootUrl=p[0],this.resourceTableName=p[1]}var d=i&&i.pvtData,h=e.prototype.processBatchResponse.call(this,t,n,a,i,s);if(h)return h;var f=null,g="@odata.count",y="@count";n&&n.isCountRequired&&(g in t?f=t[g]:y in t&&(f=t[y])),t=(0,o.le)(t.value)?t:t.value;var v={};return v.count=f,v.result=t,this.getAggregateResult(d,t,v,null,n),u.isNull(f)?v.result:{result:v.result,count:f,aggregates:v.aggregates}},t}(f),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,r){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,r,n){return{type:"DELETE",url:e.dataSource.url+"/"+r,data:JSON.stringify(r)}},t.prototype.update=function(e,t,r,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(r)}},t.prototype.batchRequest=function(e,t,r){var n=this,o=r.guid=u.getGuid(this.options.batchPre),a=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;for(var i=[],s=0,c=t.addedRecords.length;s<c;s++)t.addedRecords.forEach((function(n,a){i.push("--"+o),i.push("Content-Type: application/http; msgtype=request",""),i.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||r.url)+(t.addedRecords,r.key," HTTP/1.1")),i.push("Content-Type: application/json; charset=utf-8"),i.push("Host: "+location.host),i.push("",n?JSON.stringify(n):"")}));for(s=0,c=t.changedRecords.length;s<c;s++)t.changedRecords.forEach((function(a,s){n.options.updateType,i.push("--"+o),i.push("Content-Type: application/http; msgtype=request",""),i.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||r.url)+(t.changedRecords,r.key," HTTP/1.1")),i.push("Content-Type: application/json; charset=utf-8"),i.push("Host: "+location.host),i.push("",a?JSON.stringify(a):"")}));var l=function(n,a){t.deletedRecords.forEach((function(a,s){i.push("--"+o),i.push("Content-Type: application/http; msgtype=request",""),i.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||r.url)+function(e,t,r){var n=u.getObject(r,e[t]);return"number"==typeof n||u.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+e[t][r].toJSON():"/'"+n+"'"}(t.deletedRecords,n,r.key)+" HTTP/1.1"),i.push("Content-Type: application/json; charset=utf-8"),i.push("Host: "+location.host),i.push("",a?JSON.stringify(a):"")}))};for(s=0,c=t.deletedRecords.length;s<c;s++)l(s);return i.push("--"+o+"--",""),{type:"POST",url:a,contentType:"multipart/mixed; boundary="+o,data:i.join("\r\n")}},t.prototype.beforeSend=function(e,t,r){t.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,r,n,o,a){var i=o&&o.pvtData,s=null,c={};if(o&&"post"!==o.type.toLowerCase()){var l=n&&o.fetchRequest.headers.get("DataServiceVersion"),p=l&&parseInt(l,10)||2;r&&r.isCountRequired&&(u.isNull(e.Count)||(s=e.Count)),p<3&&e.Items&&(e=e.Items),c.count=s,c.result=e,this.getAggregateResult(i,e,c,null,r)}return c.result=c.result||e,u.isNull(s)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}},t}(f),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.processQuery=function(e,t,r){var n=(new h).processQuery(e,t,r),o=u.parse.parseJson(n.data),a={};if(o.param)for(var i=0;i<o.param.length;i++){var s=o.param[i],c=Object.keys(s)[0];a[c]=s[c]}return a.value=o,{data:JSON.stringify(a),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}},t}(h),m=function(e){function t(){var t=e.call(this)||this;return(0,o.sO)("beforeSend",h.prototype.beforeSend,t),t}return c(t,e),t.prototype.insert=function(e,t,r,n,a){return this.pvt.position=a,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,o.l7)({},{value:t,table:r,action:"insert"},u.getAddParams(this,e,n)))}},t.prototype.remove=function(t,r,n,a,i){return e.prototype.remove.call(this,t,r,n),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify((0,o.l7)({},{key:n,keyColumn:r,table:a,action:"remove"},u.getAddParams(this,t,i)))}},t.prototype.update=function(e,t,r,n,a){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify((0,o.l7)({},{value:r,action:"update",keyColumn:t,key:r[t],table:n},u.getAddParams(this,e,a)))}},t.prototype.processResponse=function(t,r,n,o,a,i,s){var c;if(t="batch"===(a?JSON.parse(a.data):t).action?u.parse.parseJson(t):t,"add"===this.updateType&&e.prototype.insert.call(this,r,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,r,this.updateKey,t),this.updateType=void 0,t.added)for(c=0;c<t.added.length;c++)e.prototype.insert.call(this,r,t.added[c]);if(t.changed)for(c=0;c<t.changed.length;c++)e.prototype.update.call(this,r,s.key,t.changed[c]);if(t.deleted)for(c=0;c<t.deleted.length;c++)e.prototype.remove.call(this,r,s.key,t.deleted[c]);return t},t.prototype.batchRequest=function(e,t,r,n,a){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify((0,o.l7)({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:r.url,key:r.key},u.getAddParams(this,e,n)))}},t.prototype.addParams=function(e){(new h).addParams(e)},t}(d),O=function(e){function t(t){var r=e.call(this)||this;return r.options=(0,o.l7)({},r.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),(0,o.l7)(r.options,t||{}),r}return c(t,e),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(h),S=function(e){function t(t){var r=e.call(this)||this;return r.opt=t,r.schema=r.opt.response,r.query=r.opt.query,r.getVariables=r.opt.getVariables?r.opt.getVariables:function(){},r.getQuery=function(){return r.query},r}return c(t,e),t.prototype.getModuleName=function(){return"GraphQLAdaptor"},t.prototype.processQuery=function(t,r){var n=e.prototype.processQuery.apply(this,arguments),o=JSON.parse(n.data),a={};["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"].filter((function(e){a[e]="searchwhereparams".indexOf(e)>-1?JSON.stringify(o[e]):o[e]}));var i=this.getVariables()||{};i.datamanager=a;var s=JSON.stringify({query:this.getQuery(),variables:i});return n.data=s,n},t.prototype.processResponse=function(e,t,r,n,a){var i,s,c=e,l=(0,o.NA)(this.schema.result,c.data);this.schema.count&&(i=(0,o.NA)(this.schema.count,c.data)),this.schema.aggregates&&(s=(0,o.NA)(this.schema.aggregates,c.data),s=(0,o.le)(s)?s:u.parse.parseJson(s));var p=a.pvtData||{},d={result:l,aggregates:s},h=d;return p&&p.groups&&p.groups.length&&this.getAggregateResult(p,h,d,null,r),(0,o.le)(i)?d.result:{result:d.result,count:i,aggregates:s}},t.prototype.insert=function(){var t=e.prototype.insert.apply(this,arguments);return this.generateCrudData(t,"insert")},t.prototype.update=function(){var t=e.prototype.update.apply(this,arguments);return this.generateCrudData(t,"update")},t.prototype.remove=function(){var t=e.prototype.remove.apply(this,arguments);return this.generateCrudData(t,"remove")},t.prototype.batchRequest=function(t,r,n,o,a){var i=e.prototype.batchRequest.apply(this,arguments),s=JSON.parse(i.data);return s.key=n.key,i.data=JSON.stringify(s),this.generateCrudData(i,"batch")},t.prototype.generateCrudData=function(e,t){var r=JSON.parse(e.data);return e.data=JSON.stringify({query:this.opt.getMutation(t),variables:r}),e},t}(h),b=function(e){function t(t,r,n){var a=e.call(this)||this;a.isCrudAction=!1,a.isInsertAction=!1,(0,o.le)(t)||(a.cacheAdaptor=t),a.pageSize=n,a.guidId=u.getGuid("cacheAdaptor"),window.localStorage.setItem(a.guidId,JSON.stringify({keys:[],results:[]}));var i=a.guidId;return(0,o.le)(r)||setInterval((function(){for(var e=u.parse.parseJson(window.localStorage.getItem(i)),t=[],n=0;n<e.results.length;n++){var o=+new Date,a=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=o-a,o-a>r&&t.push(n)}for(n=0;n<t.length;n++)e.results.splice(t[n],1),e.keys.splice(t[n],1);window.localStorage.removeItem(i),window.localStorage.setItem(i,JSON.stringify(e))}),r),a}return c(t,e),t.prototype.generateKey=function(e,t){var r=this.getQueryRequest(t),n=a.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,i="onPage";i in n&&(o+=n[i].pageIndex),r.sorts.forEach((function(e){o+=e.e.direction+e.e.fieldName})),r.groups.forEach((function(e){o+=e.e.fieldName})),r.searches.forEach((function(e){o+=e.e.searchKey}));for(var s=0;s<r.filters.length;s++){var u=r.filters[s];if(u.e.isComplex){var c=t.clone();c.queries=[];for(var l=0;l<u.e.predicates.length;l++)c.queries.push({fn:"onWhere",e:u.e.predicates[l],filter:t.queries.filter});o+=u.e.condition+this.generateKey(e,c)}else o+=u.e.field+u.e.operator+u.e.value}return o},t.prototype.processQuery=function(e,t,r){var n=this.generateKey(e.dataSource.url,t),o=u.parse.parseJson(window.localStorage.getItem(this.guidId)),a=o?o.results[o.keys.indexOf(n)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,t,r,n,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&u.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,r,n,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var i=r?this.generateKey(t.dataSource.url,r):t.dataSource.url,s={},c=(s=u.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(i);for(-1!==c&&(s.results.splice(c,1),s.keys.splice(c,1)),s.results[s.keys.push(i)-1]={keys:i,result:e.result,timeStamp:new Date,count:e.count};s.results.length>this.pageSize;)s.results.splice(0,1),s.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(s)),e},t.prototype.beforeSend=function(e,t,r){!(0,o.le)(this.cacheAdaptor.options.batch)&&u.endsWith(r.url,this.cacheAdaptor.options.batch)&&"post"===r.type.toLowerCase()&&t.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.headers.set("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,r,n)},t.prototype.insert=function(e,t,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,r)},t.prototype.remove=function(e,t,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,r,n)},t.prototype.batchRequest=function(e,t,r){return this.cacheAdaptor.batchRequest(e,t,r)},t}(h),A=function(){function e(e,t,r){var n,i=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,e||this.dataSource||(e=[]),r=r||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?n={json:e,offline:!0}:"object"==typeof e?(e.json||(e.json=[]),e.enablePersistence||(e.enablePersistence=!1),e.id||(e.id=""),e.ignoreOnPersist||(e.ignoreOnPersist=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof m||e.adaptor instanceof O||e.url),requiresFormat:e.requiresFormat,enablePersistence:e.enablePersistence,id:e.id,ignoreOnPersist:e.ignoreOnPersist}):u.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||u.isCors()||(n.requiresFormat=!!(0,o.le)(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=t,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=r||new f,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new a),this.ready.then((function(e){i.dataSource.offline=!0,i.isDataAvailable=!0,n.json=e.result,i.adaptor=new d}))):this.adaptor=n.offline?new d:new f,!n.jsonp&&this.adaptor instanceof f&&(n.jsonp="callback"),this.adaptor=r||this.adaptor,n.enableCaching&&(this.adaptor=new b(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return e.prototype.getPersistedData=function(e){var t=localStorage.getItem(e||this.dataSource.id);return JSON.parse(t)},e.prototype.setPersistData=function(e,t,r){localStorage.setItem(t||this.dataSource.id,JSON.stringify(r||this.persistQuery))},e.prototype.setPersistQuery=function(e){var t=this,r=this.getPersistedData();if(this.isInitialLoad&&r&&Object.keys(r).length){this.persistQuery=r,this.persistQuery.queries=this.persistQuery.queries.filter((function(e){if(t.dataSource.ignoreOnPersist&&t.dataSource.ignoreOnPersist.length&&e.fn&&t.dataSource.ignoreOnPersist.some((function(t){return e.fn===t})))return!1;if("onWhere"===e.fn){var r=e.e;if(r&&r.isComplex&&r.predicates instanceof Array){var n=r.predicates.map((function(e){if(e.predicates&&e.predicates instanceof Array){var t=e.predicates.map((function(e){var t=e.field,r=e.operator,n=e.value,o=e.ignoreCase,a=e.ignoreAccent,s=e.matchCase;return new i(t,r,n,o,a,s)}));return"and"===e.condition?i.and(t):i.or(t)}var r=e.field,n=e.operator,o=e.value,a=e.ignoreCase,s=e.ignoreAccent,u=e.matchCase;return new i(r,n,o,a,s,u)}));e.e=new i(n[0],r.condition,n.slice(1))}}return!0}));var n=(0,o.l7)(new a,this.persistQuery);return this.isInitialLoad=!1,n}return this.persistQuery=e,this.isInitialLoad=!1,e},e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof a||u.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),t=t||this.defaultQuery;var r=this.adaptor.processQuery(this,t);if(t.subQuery){var n=t.subQuery.fromTable,i=t.subQuery.lookups,s=t.isCountRequired?r.result:r;i&&i instanceof Array&&u.buildHierarchy(t.subQuery.fKey,n,s,i,t.subQuery.key);for(var c=0;c<s.length;c++)s[c][n]instanceof Array&&(s[c]=(0,o.l7)({},{},s[c]),s[c][n]=this.adaptor.processResponse(t.subQuery.using(new e(s[c][n].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(r,this,t)},e.prototype.executeQuery=function(t,r,n,i){var s=this,c="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),"function"==typeof t&&(i=n,n=r,r=t,t=null),t||(t=this.defaultQuery),t instanceof a||u.throwError("DataManager - executeQuery() : A query is required to execute");var l=new C,p={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!(0,o.le)(this.adaptor[c])||this.isCustomDataAdaptor(this.adaptor)){var d=this.adaptor.processQuery(this,t);(0,o.le)(this.adaptor[c])?!(0,o.le)(d.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(d,l,p,t)):(p=e.getDeferedArgs(t,d,p),l.resolve(p)):this.adaptor[c](d,l,p,t)}else e.nextTick((function(){var r=s.executeLocal(t);p=e.getDeferedArgs(t,r,p),l.resolve(p)}));return(r||n)&&l.promise.then(r,n),i&&l.promise.then(i,i),l.promise},e.getDeferedArgs=function(e,t,r){return e.isCountRequired?(r.result=t.result,r.count=t.count,r.aggregates=t.aggregates):r.result=t,r},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,r){return(0,o.l7)({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:r},e)},e.prototype.makeRequest=function(e,t,r,n){var a=this,i=!!n.subQuerySelector,s=function(e){r.error=e,t.reject(r)},c=function(e,n,o,a,i,s,u){r.xhr=o,r.count=n?parseInt(n.toString(),10):0,r.result=e,r.request=a,r.aggregates=s,r.actual=i,r.virtualSelectRecords=u,t.resolve(r)},l=function(e,t){var o=new C,l={parent:r};n.subQuery.isChild=!0;var p=a.adaptor.processQuery(a,n.subQuery,e?a.adaptor.processResponse(e):t),d=a.makeRequest(p,o,l,n.subQuery);return i||o.then((function(t){e&&(u.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,e,t,n.subQuery.key),c(e,t.count,t.xhr))}),s),d},p=this.extendRequest(e,(function(e,t){if(a.isGraphQLAdaptor(a.adaptor)&&!(0,o.le)(e.errors))return s(e.errors);a.isCustomDataAdaptor(a.adaptor)&&(t=(0,o.l7)({},a.fetchReqOption,t)),-1===t.contentType.indexOf("xml")&&a.dateParse&&(e=u.parse.parseJson(e));var r=a.adaptor.processResponse(e,a,n,t.fetchRequest,t),p=0,d=null,h=e.virtualSelectRecords;n.isCountRequired&&(p=r.count,d=r.aggregates,r=r.result),n.subQuery?i||l(r,t):c(r,p,t.fetchRequest,t.type,e,d,h)}),s);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=p;var d=p;this.adaptor.options.getData({data:d.data,onSuccess:d.onSuccess,onFailure:d.onFailure})}else{var h=new o.Uo(p);h.beforeSend=function(){a.beforeSend(h.fetchRequest,h)},(p=h.send()).catch((function(e){return!0})),this.requests.push(h)}if(i){var f=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});f&&f.length?Promise.all([p,l(null,f)]).then((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],o=a.adaptor.processResponse(r[0],a,n,a.requests[0].fetchRequest,a.requests[0]),s=0;n.isCountRequired&&(s=o.count,o=o.result);var l=a.adaptor.processResponse(r[1],a,n.subQuery,a.requests[1].fetchRequest,a.requests[1]);s=0,n.subQuery.isCountRequired&&(s=l.count,l=l.result),u.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,o,l,n.subQuery.key),i=!1,c(o,s,a.requests[0].fetchRequest)})):i=!1}return p},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var r,n=this.dataSource.headers,o=0;n&&o<n.length;o++){r=[];for(var a=0,i=Object.keys(n[o]);a<i.length;a++){var s=i[a];r.push(s),e.headers.set(s,n[o][s])}}},e.prototype.saveChanges=function(e,t,r,n,i){var s=this;r instanceof a&&(n=r,r=null);var u={url:r,key:t||this.dataSource.key},c=this.adaptor.batchRequest(this,e,u,n||new a,i),l="dofetchRequest";if(this.dataSource.offline)return c;if((0,o.le)(this.adaptor[l])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(c,this.adaptor.options.batchUpdate);var p=new C,d=new o.Uo(c);return d.beforeSend=function(){s.beforeSend(d.fetchRequest,d)},d.onSuccess=function(t,r){s.isGraphQLAdaptor(s.adaptor)&&((0,o.le)(t.errors)||d.onFailure(JSON.stringify(t.errors))),p.resolve(s.adaptor.processResponse(t,s,null,r.fetchRequest,r,e,u))},d.onFailure=function(e){p.reject([{error:e}])},d.send().catch((function(e){return!0})),p.promise}return this.adaptor[l](c)},e.prototype.insert=function(e,t,r,n){t instanceof a&&(r=t,t=null);var i=this.adaptor.insert(this,e,t,r,n),s="dofetchRequest";return this.dataSource.offline?i:(0,o.le)(this.adaptor[s])?this.dofetchRequest(i,this.adaptor.options.addRecord):this.adaptor[s](i)},e.prototype.remove=function(e,t,r,n){"object"==typeof t&&(t=u.getObject(e,t)),r instanceof a&&(n=r,r=null);var i=this.adaptor.remove(this,e,t,r,n),s="dofetchRequest";if(this.dataSource.offline)return i;if((0,o.le)(this.adaptor[s])){var c=this.adaptor.options.deleteRecord;return this.dofetchRequest(i,c)}return this.adaptor[s](i)},e.prototype.update=function(e,t,r,n,i){r instanceof a&&(n=r,r=null);var s=this.adaptor.update(this,e,t,r,n,i),u="dofetchRequest";if(this.dataSource.offline)return s;if((0,o.le)(this.adaptor[u])){var c=this.adaptor.options.updateRecord;return this.dofetchRequest(s,c)}return this.adaptor[u](s)},e.prototype.isCustomDataAdaptor=function(e){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},e.prototype.isGraphQLAdaptor=function(e){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},e.prototype.successFunc=function(e,t){if(this.isGraphQLAdaptor(this.adaptor)){var r=JSON.parse(e);(0,o.le)(r.errors)||this.failureFunc(JSON.stringify(r.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=(0,o.l7)({},this.fetchReqOption,t));try{u.parse.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(u.parse.parseJson(e),this,null,t.fetchRequest,t),this.fetchDeffered.resolve(e)},e.prototype.failureFunc=function(e){this.fetchDeffered.reject([{error:e}])},e.prototype.dofetchRequest=function(e,t){var r=this;if(e=(0,o.l7)({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.fetchDeffered=new C,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new o.Uo(e);n.beforeSend=function(){r.beforeSend(n.fetchRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch((function(e){return!0}))}return this.fetchDeffered.promise},e.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},e}(),C=function(){var e=this;this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}}]);