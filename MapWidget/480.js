/*! For license information please see 480.js.LICENSE.txt */
(self.webpackChunkde_lmw_MapWidget=self.webpackChunkde_lmw_MapWidget||[]).push([[480],{505:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(623),o=r.n(n),i=r(936),a=r.n(i)()(o());a.push([t.id,":root{--primary-80: #6CB1BD;--primary: #00838F;--primary-120: #005662;--secondary: #414141;--secondary-80: #6C6B6B;--secondary-60: #999;--brand: #C00;--atmo1: #FBFCFC;--atmo2: #F4F5F5;--atmo2s: #E2F0F1;--atmo3: #E8E8E8;--atmo4: #CCCED0;--neutral: #4D8AC0;--neutral-20: #D8E6F1;--positive: #478B1A;--positive-20: #DFECD1;--positive-80: #709C27;--positive-120: #227A10;--warning: #F9C846;--warning-20: #FBF2D8;--warning-80: #F8AC39;--warning-140: #F27C27;--negative: #D43136;--negative-20: #F4D3D4;--negative-80: #ED4747;--negative-120: #B41B3A;--catastrophic: #930A80;--content-bg-color-alt2: #F3F4F6;--content-bg-color-hover: #E9ECEF;--content-bg-color-pressed: #CED4DA;--border-light: #E5E7EB}.MapWidget__widgetRoot__mNSro{width:100%;height:100%;box-sizing:border-box}.MapWidget__widgetRoot__mNSro *{box-sizing:border-box}.MapWidget__mapContainer__udQD4{width:100%;height:100%}.MapWidget__buttonAddPin__aIi5Y{position:absolute;right:20px;top:20px;z-index:10000000}",""]),a.locals={widgetRoot:"MapWidget__widgetRoot__mNSro",mapContainer:"MapWidget__mapContainer__udQD4",buttonAddPin:"MapWidget__buttonAddPin__aIi5Y"};const s=a},215:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(875),o=r.n(n),i=r(107),a=r.n(i),s=r(771),u=r.n(s),l=r(113),c=r.n(l),f=r(723),h=r.n(f),p=r(868),y=r.n(p),d=r(505),v={};v.styleTagTransform=y(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),o()(d.Z,v);const g=d.Z&&d.Z.locals?d.Z.locals:void 0},952:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MapWidget=void 0;var a=r(980),s=r(95),u=r(180),l=i(r(215)),c={baseLayers:[{layerId:"mapbox-streets",layerType:"mapbox",styleUrl:"mapbox://styles/hitachi-powergrids/cknqm8ylu040217ofrgjf097a",accessToken:"pk.eyJ1IjoiaGl0YWNoaS1wb3dlcmdyaWRzIiwiYSI6ImNrazhzMjJscjBlNjUydW5zdDlrcHp2OWQifQ.xkmD6caBhcMQv_j_p4G4EQ",title:"map.baseLayers.mapboxStreet",image:"streetLayer",attributions:"© <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> © <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> <strong><a href='https://www.mapbox.com/map-feedback/' target='_blank'>Improve this map</a></strong>"}],layers:[{groupTitle:"map.layerGroups.layer",groupId:"test",groupItems:[{layerId:"maptiler-geojson",layerType:"geojson",source:"maptiler-geojson",title:"map.layers.testLayers.maptilerGeojson",image:"",minZoom:3,maxZoom:20,visible:!0,cluster:!1,selectable:!1}]}],sources:{"maptiler-geojson":{loadingStrategy:"bbox",sourceType:"geojson",url:"/v1/dataquery/asset/assetsystemposition/geo?bbox={{bbox}}&size=50&retrieveAll=true",internalSource:"asset-assetsystemposition"}}};e.MapWidget=function(t){var e=(0,s.useState)(null),r=(e[0],e[1]);return(0,s.useEffect)((function(){!function(){n(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,(0,u.createMap)({mapConfig:c,serverUrl:"".concat(location.protocol,"//").concat(location.hostname),getAccessToken:function(){return t.service.authService.getToken()},enableTileDebug:!1})];case 1:return e=n.sent(),r(e),[2]}}))}))}()}),[]),(0,a.jsx)("div",{className:l.default.widgetRoot,children:(0,a.jsx)("div",{id:"map",className:l.default.mapContainer})})}},975:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(952);e.default=n.MapWidget},180:(t,e,r)=>{var n,o;n=[r(148),r(790),r(527),r(698)],void 0===(o=((t,e,n,o)=>(()=>{var i={333:(t,e,r)=>{"use strict";var n=r(955);function o(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}o.default=o,e.Z=o},966:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function o(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var o=0,i=t;o<i.length;o++){var a=i[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function a(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function f(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function p(t){return t%(2*Math.PI)*180/Math.PI}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return o(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=o,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return o(t,e)})),r)},e.polygon=i,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return i(t,e)})),r)},e.lineString=a,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return a(t,e)})),r)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=e.areaFactors[r];if(!o)throw new Error("invalid original units");var i=e.areaFactors[n];if(!i)throw new Error("invalid final units");return t/o*i},e.isNumber=y,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!y(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(r(t)))throw new Error("id must be a number or a string")}},955:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(966);function o(t,e,r){if(null!==t)for(var n,i,a,s,u,l,c,f,h=0,p=0,y=t.type,d="FeatureCollection"===y,v="Feature"===y,g=d?t.features.length:1,m=0;m<g;m++){u=(f=!!(c=d?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<u;b++){var w=0,_=0;if(null!==(s=f?c.geometries[b]:c)){l=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,m,w,_))return!1;p++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,m,w,_))return!1;p++,"MultiPoint"===x&&w++}"LineString"===x&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(i=0;i<l[n].length-h;i++){if(!1===e(l[n][i],p,m,w,_))return!1;p++}"MultiLineString"===x&&w++,"Polygon"===x&&_++}"Polygon"===x&&w++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(_=0,i=0;i<l[n].length;i++){for(a=0;a<l[n][i].length-h;a++){if(!1===e(l[n][i][a],p,m,w,_))return!1;p++}_++}w++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===o(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function s(t,e){var r,n,o,i,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,y="Feature"===t.type,d=p?t.features.length:1;for(r=0;r<d;r++){for(s=p?t.features[r].geometry:y?t.geometry:t,l=p?t.features[r].properties:y?t.properties:{},c=p?t.features[r].bbox:y?t.bbox:void 0,f=p?t.features[r].id:y?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}function u(t,e){s(t,(function(t,r,o,i,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,o,{bbox:i,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(n.feature(c,o),r,l))return!1}}))}function l(t,e){u(t,(function(t,r,i){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,f=0;return!1!==o(t,(function(o,s,h,p,y){if(void 0===u||r>l||p>c||y>f)return u=o,l=r,c=p,f=y,void(a=0);var d=n.lineString([u,o],t.properties);if(!1===e(d,r,i,y,a))return!1;a++,u=o}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,r,o){if(null!==t.geometry){var i=t.geometry.type,a=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,r,o,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(n.lineString(a[s],t.properties),r,o,s))return!1}}}))}e.coordAll=function(t){var e=[];return o(t,(function(t){e.push(t)})),e},e.coordEach=o,e.coordReduce=function(t,e,r,n){var i=r;return o(t,(function(t,n,o,a,s){i=0===n&&void 0===r?t:e(i,t,n,o,a,s)}),n),i},e.featureEach=a,e.featureReduce=function(t,e,r){var n=r;return a(t,(function(t,o){n=0===o&&void 0===r?t:e(n,t,o)})),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,o=e.featureIndex||0,i=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),u=u||t.features[o].properties,r=t.features[o].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,u,e);case"MultiPoint":return i<0&&(i=l.length+i),n.point(l[i],u,e);case"LineString":return s<0&&(s=l.length+s),n.point(l[s],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),n.point(l[a][s],u,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),n.point(l[i][s],u,e);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),s<0&&(s=l[i][a].length-s),n.point(l[i][a][s],u,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,o=e.featureIndex||0,i=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),u=u||t.features[o].properties,r=t.features[o].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),n.lineString([l[s],l[s+1]],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),n.lineString([l[a][s],l[a][s+1]],u,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),n.lineString([l[i][s],l[i][s+1]],u,e);case"MultiPolygon":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),s<0&&(s=l[i][a].length-s-1),n.lineString([l[i][a][s],l[i][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.flattenEach=u,e.flattenReduce=function(t,e,r){var n=r;return u(t,(function(t,o,i){n=0===o&&0===i&&void 0===r?t:e(n,t,o,i)})),n},e.geomEach=s,e.geomReduce=function(t,e,r){var n=r;return s(t,(function(t,o,i,a,s){n=0===o&&void 0===r?t:e(n,t,o,i,a,s)})),n},e.lineEach=c,e.lineReduce=function(t,e,r){var n=r;return c(t,(function(t,o,i,a){n=0===o&&void 0===r?t:e(n,t,o,i,a)})),n},e.propEach=i,e.propReduce=function(t,e,r){var n=r;return i(t,(function(t,o){n=0===o&&void 0===r?t:e(n,t,o)})),n},e.segmentEach=l,e.segmentReduce=function(t,e,r){var n=r,o=!1;return l(t,(function(t,i,a,s,u){n=!1===o&&void 0===r?t:e(n,t,i,a,s,u),o=!0})),n}},517:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},22:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);n&&a[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},852:t=>{"use strict";t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},813:t=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r,n="object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function o(r){t.removeListener(e,i),n(r)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}v(t,e,i,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+e(t))}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var o,i,a,s;if(u(r),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),a=i[e]),void 0===a)a=i[e]=r,++t._eventsCount;else if("function"==typeof a?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=l(t))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function p(t,e,r){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(o):d(o,o.length)}function y(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function v(t,r,n,o){if("function"==typeof t.on)o.once?t.once(r,n):t.on(r,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+e(t));t.addEventListener(r,(function e(i){o.once&&t.removeEventListener(r,e),n(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,c=d(u,l);for(r=0;r<l;++r)o(c[r],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,o,i,a;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},a.prototype.listenerCount=y,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},147:(t,e,r)=>{var n=r(537),o=r(966),i=r(955),a=r(333).Z,s=i.featureEach,u=(i.coordEach,o.polygon,o.featureCollection);function l(t){var e=new n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return u(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},546:function(t,e,r){var n,o,i,a;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}t=r.nmd(t),a=function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=h();return t.compile=function(e,r){return u.compile(e,r,t)},t.precompile=function(e,r){return u.precompile(e,r,t)},t.AST=a.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=l.default,t.Parser=s.parser,t.parse=s.parse,t.parseWithoutProcessing=s.parseWithoutProcessing,t}var o=r(1).default;e.__esModule=!0;var i=o(r(2)),a=o(r(84)),s=r(85),u=r(90),l=o(r(91)),c=o(r(88)),f=o(r(83)),h=i.default.create,p=n();p.create=n,f.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=s.default,t.Exception=u.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var o=r(3).default,i=r(1).default;e.__esModule=!0;var a=o(r(4)),s=i(r(77)),u=i(r(6)),l=o(r(5)),c=o(r(78)),f=i(r(83)),h=n();h.create=n,f.default(h),h.default=h,e.default=h,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var o=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var i=r(5),a=o(r(6)),s=r(10),u=r(70),l=o(r(72)),c=r(73);e.VERSION="4.7.8",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var f="[object Object]";n.prototype={constructor:n,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(i.toString.call(t)===f){if(e)throw new a.default("Arg not supported with multiple helpers");i.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(i.toString.call(t)===f)i.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(i.toString.call(t)===f){if(e)throw new a.default("Arg not supported with multiple decorators");i.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var h=l.default.log;e.log=h,e.createFrame=i.createFrame,e.logger=l.default},function(t,e){"use strict";function r(t){return o[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}e.__esModule=!0,e.extend=n,e.indexOf=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return a.test(t)?t.replace(i,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=n({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,a=/[&<>"'`=]/,u=Object.prototype.toString;e.toString=u;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=s(t))&&"[object Array]"===u.call(t)};e.isArray=c},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0,u=void 0,l=void 0;r&&(a=r.start.line,s=r.end.line,u=r.start.column,l=r.end.column,t+=" - "+a+":"+u);for(var c=Error.prototype.constructor.call(this,t),f=0;f<i.length;f++)this[i[f]]=c[i[f]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,o?(Object.defineProperty(this,"column",{value:u,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=u,this.endColumn=l))}catch(t){}}var o=r(7).default;e.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){o.default(t),i.default(t),a.default(t),s.default(t),u.default(t),l.default(t),c.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var o=n(r(11)),i=n(r(12)),a=n(r(65)),s=n(r(66)),u=n(r(67)),l=n(r(68)),c=n(r(69))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var o=r.inverse,i=r.fn;if(!0===e)return i(this);if(!1===e||null==e)return o(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):o(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return i(e,r)}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(13).default,o=r(43).default,i=r(55).default,a=r(60).default,u=r(1).default;e.__esModule=!0;var l=r(5),c=u(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){function r(e,r,n){y&&(y.key=e,y.index=r,y.first=0===r,y.last=!!n,d&&(y.contextPath=d+e)),p+=u(t[e],{data:y,blockParams:l.blockParams([t[e],e],[d+e,null])})}if(!e)throw new c.default("Must pass iterator to #each");var u=e.fn,f=e.inverse,h=0,p="",y=void 0,d=void 0;if(e.data&&e.ids&&(d=l.appendContextPath(e.data.contextPath,e.ids[0])+"."),l.isFunction(t)&&(t=t.call(this)),e.data&&(y=l.createFrame(e.data)),t&&"object"==s(t))if(l.isArray(t))for(var v=t.length;h<v;h++)h in t&&r(h,h,h===t.length-1);else if("function"==typeof n&&t[o]){for(var g=[],m=i(t),b=m.next();!b.done;b=m.next())g.push(b.value);for(v=(t=g).length;h<v;h++)r(h,h,h===t.length-1)}else!function(){var e=void 0;a(t).forEach((function(t){void 0!==e&&r(e,h-1),e=t,h++})),void 0!==e&&r(e,h-1,!0)}();return 0===h&&(p=f(this)),p}))},t.exports=e.default},function(t,e,r){t.exports={default:r(14),__esModule:!0}},function(t,e,r){r(15),r(42),t.exports=r(21).Symbol},function(t,e,r){"use strict";var n=r(9),o=r(16),i=r(17),a=r(18),u=r(20),l=r(24),c=r(19),f=r(27),h=r(28),p=r(30),y=r(29),d=r(31),v=r(36),g=r(37),m=r(38),b=r(39),w=r(32),_=r(26),x=n.getDesc,S=n.setDesc,k=n.create,O=v.get,E=o.Symbol,P=o.JSON,j=P&&P.stringify,C=!1,A=y("_hidden"),T=n.isEnum,R=f("symbol-registry"),I=f("symbols"),L="function"==typeof E,M=Object.prototype,F=a&&c((function(){return 7!=k(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=x(M,e);n&&delete M[e],S(t,e,r),n&&t!==M&&S(M,e,n)}:S,D=function(t){var e=I[t]=k(E.prototype);return e._k=t,a&&C&&F(M,t,{configurable:!0,set:function(e){i(this,A)&&i(this[A],t)&&(this[A][t]=!1),F(this,t,_(1,e))}}),e},B=function(t){return"symbol"==s(t)},N=function(t,e,r){return r&&i(I,e)?(r.enumerable?(i(t,A)&&t[A][e]&&(t[A][e]=!1),r=k(r,{enumerable:_(0,!1)})):(i(t,A)||S(t,A,_(1,{})),t[A][e]=!0),F(t,e,r)):S(t,e,r)},z=function(t,e){b(t);for(var r,n=g(e=w(e)),o=0,i=n.length;i>o;)N(t,r=n[o++],e[r]);return t},G=function(t,e){return void 0===e?k(t):z(k(t),e)},U=function(t){var e=T.call(this,t);return!(e||!i(this,t)||!i(I,t)||i(this,A)&&this[A][t])||e},q=function(t,e){var r=x(t=w(t),e);return!r||!i(I,e)||i(t,A)&&t[A][e]||(r.enumerable=!0),r},W=function(t){for(var e,r=O(w(t)),n=[],o=0;r.length>o;)i(I,e=r[o++])||e==A||n.push(e);return n},V=function(t){for(var e,r=O(w(t)),n=[],o=0;r.length>o;)i(I,e=r[o++])&&n.push(I[e]);return n},Y=c((function(){var t=E();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))}));L||(E=function(){if(B(this))throw TypeError("Symbol is not a constructor");return D(p(arguments.length>0?arguments[0]:void 0))},l(E.prototype,"toString",(function(){return this._k})),B=function(t){return t instanceof E},n.create=G,n.isEnum=U,n.getDesc=q,n.setDesc=N,n.setDescs=z,n.getNames=v.get=W,n.getSymbols=V,a&&!r(41)&&l(M,"propertyIsEnumerable",U,!0));var Z={for:function(t){return i(R,t+="")?R[t]:R[t]=E(t)},keyFor:function(t){return d(R,t)},useSetter:function(){C=!0},useSimple:function(){C=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),(function(t){var e=y(t);Z[t]=L?e:D(e)})),C=!0,u(u.G+u.W,{Symbol:E}),u(u.S,"Symbol",Z),u(u.S+u.F*!L,"Object",{create:G,defineProperty:N,defineProperties:z,getOwnPropertyDescriptor:q,getOwnPropertyNames:W,getOwnPropertySymbols:V}),P&&u(u.S+u.F*(!L||Y),"JSON",{stringify:function(t){if(void 0!==t&&!B(t)){for(var e,r,n=[t],o=1,i=arguments;i.length>o;)n.push(i[o++]);return"function"==typeof(e=n[1])&&(r=e),!r&&m(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!B(e))return e}),n[1]=e,j.apply(P,n)}}}),h(E,"Symbol"),h(Math,"Math",!0),h(o.JSON,"JSON",!0)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){t.exports=!r(19)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(16),o=r(21),i=r(22),a="prototype",s=function t(e,r,s){var u,l,c,f=e&t.F,h=e&t.G,p=e&t.S,y=e&t.P,d=e&t.B,v=e&t.W,g=h?o:o[r]||(o[r]={}),m=h?n:p?n[r]:(n[r]||{})[a];for(u in h&&(s=r),s)(l=!f&&m&&u in m)&&u in g||(c=l?m[u]:s[u],g[u]=h&&"function"!=typeof m[u]?s[u]:d&&l?i(c,n):v&&m[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):y&&"function"==typeof c?i(Function.call,c):c,y&&((g[a]||(g[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(23);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){t.exports=r(25)},function(t,e,r){var n=r(9),o=r(26);t.exports=r(18)?function(t,e,r){return n.setDesc(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(16),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,r){var n=r(9).setDesc,o=r(17),i=r(29)("toStringTag");t.exports=function(t,e,r){t&&!o(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(27)("wks"),o=r(30),i=r(16).Symbol;t.exports=function(t){return n[t]||(n[t]=i&&i[t]||(i||o)("Symbol."+t))}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(9),o=r(32);t.exports=function(t,e){for(var r,i=o(t),a=n.getKeys(i),s=a.length,u=0;s>u;)if(i[r=a[u++]]===e)return r}},function(t,e,r){var n=r(33),o=r(35);t.exports=function(t){return n(o(t))}},function(t,e,r){var n=r(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(32),o=r(9).getNames,i={}.toString,a="object"==("undefined"==typeof window?"undefined":s(window))&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},function(t,e,r){var n=r(9);t.exports=function(t){var e=n.getKeys(t),r=n.getSymbols;if(r)for(var o,i=r(t),a=n.isEnum,s=0;i.length>s;)a.call(t,o=i[s++])&&e.push(o);return e}},function(t,e,r){var n=r(34);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(40);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==s(t)?null!==t:"function"==typeof t}},function(t,e){t.exports=!0},function(t,e){},function(t,e,r){t.exports={default:r(44),__esModule:!0}},function(t,e,r){r(45),r(51),t.exports=r(29)("iterator")},function(t,e,r){"use strict";var n=r(46)(!0);r(48)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){var n=r(47),o=r(35);t.exports=function(t){return function(e,r){var i,a,s=String(o(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):i:t?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){"use strict";var n=r(41),o=r(20),i=r(24),a=r(25),s=r(17),u=r(49),l=r(50),c=r(28),f=r(9).getProto,h=r(29)("iterator"),p=!([].keys&&"next"in[].keys()),y="@@iterator",d="keys",v="values",g=function(){return this};t.exports=function(t,e,r,m,b,w,_){l(r,e,m);var x,S,k=function(t){if(!p&&t in j)return j[t];switch(t){case d:case v:return function(){return new r(this,t)}}return function(){return new r(this,t)}},O=e+" Iterator",E=b==v,P=!1,j=t.prototype,C=j[h]||j[y]||b&&j[b],A=C||k(b);if(C){var T=f(A.call(new t));c(T,O,!0),!n&&s(j,y)&&a(T,h,g),E&&C.name!==v&&(P=!0,A=function(){return C.call(this)})}if(n&&!_||!p&&!P&&j[h]||a(j,h,A),u[e]=A,u[O]=g,b)if(x={values:E?A:k(v),keys:w?A:k(d),entries:E?k("entries"):A},_)for(S in x)S in j||i(j,S,x[S]);else o(o.P+o.F*(p||P),e,x);return x}},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(9),o=r(26),i=r(28),a={};r(25)(a,r(29)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n.create(a,{next:o(1,r)}),i(t,e+" Iterator")}},function(t,e,r){r(52);var n=r(49);n.NodeList=n.HTMLCollection=n.Array},function(t,e,r){"use strict";var n=r(53),o=r(54),i=r(49),a=r(32);t.exports=r(48)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(56),__esModule:!0}},function(t,e,r){r(51),r(45),t.exports=r(57)},function(t,e,r){var n=r(39),o=r(58);t.exports=r(21).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(59),o=r(29)("iterator"),i=r(49);t.exports=r(21).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[n(t)]}},function(t,e,r){var n=r(34),o=r(29)("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=(e=Object(t))[o])?r:i?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){t.exports={default:r(61),__esModule:!0}},function(t,e,r){r(62),t.exports=r(21).Object.keys},function(t,e,r){var n=r(63);r(64)("keys",(function(t){return function(e){return t(n(e))}}))},function(t,e,r){var n=r(35);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(20),o=r(21),i=r(19);t.exports=function(t,e){var r=(o.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*i((function(){r(1)})),"Object",a)}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var o=n(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var o=r(5),i=n(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new i.default("#if requires exactly one argument");return o.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new i.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var o=1;null!=r.hash.level?o=r.hash.level:r.data&&null!=r.data.level&&(o=r.data.level),e[0]=o,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,r){return t?r.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var o=r(5),i=n(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new i.default("#with requires exactly one argument");o.isFunction(t)&&(t=t.call(this));var r=e.fn;if(o.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=o.createFrame(e.data)).contextPath=o.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:n,blockParams:o.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){o.default(t)};var o=n(r(71))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,o){var i=t;return e.partials||(e.partials={},i=function(o,i){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(o,i);return r.partials=a,s}),e.partials[o.args[0]]=o.fn,i}))},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(o.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=o.lookupLevel(t),"undefined"!=typeof console&&o.lookupLevel(o.level)<=t){var e=o.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];console[e].apply(console,n)}}};e.default=o,t.exports=e.default},function(t,e,r){"use strict";var n=r(74).default,o=r(60).default,i=r(1).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=n(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var r=n(null);return r.__proto__=!1,{properties:{whitelist:a.createNewLookupObject(r,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:a.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,r){return function(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==u[t]&&(u[t]=!0,s.default.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}("function"==typeof t?e.methods:e.properties,r)},e.resetLoggedProperties=function(){o(u).forEach((function(t){delete u[t]}))};var a=r(76),s=i(r(72)),u=n(null)},function(t,e,r){t.exports={default:r(75),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){"use strict";var n=r(74).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return o.extend.apply(void 0,[n(null)].concat(e))};var o=r(5)},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r,n,o,a,s){function u(e){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(i=[e].concat(s)),r(t,e,t.helpers,t.partials,o.data||n,a&&[o.blockParams].concat(a),i)}return(u=i(r,u,t,s,n,a)).program=e,u.depth=s?s.length:0,u.blockParams=o||0,u}function o(){return""}function i(t,e,r,n,o,i){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],o,i,n),f.extend(e,a)}return e}var a=r(79).default,u=r(60).default,l=r(3).default,c=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=p.COMPILER_REVISION;if(!(e>=p.LAST_COMPATIBLE_COMPILER_REVISION&&e<=p.COMPILER_REVISION)){if(e<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[r],o=p.REVISION_CHANGES[e];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+o+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){function r(e){function n(e){return""+t.main(l,e,l.helpers,l.partials,a,u,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;r._setup(o),!o.partial&&t.useData&&(a=function(t,e){return e&&"root"in e||((e=e?p.createFrame(e):{}).root=t),e}(e,a));var s=void 0,u=t.useBlockParams?[]:void 0;return t.useDepths&&(s=o.depths?e!=o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=i(t.main,n,l,o.depths||[],a,u))(e,o)}if(!e)throw new h.default("No environment passed to template");if(!t||!t.main)throw new h.default("Unknown template object: "+s(t));t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var o=t.compiler&&7===t.compiler[0],l={strict:function(t,e,r){if(!t||!(e in t))throw new h.default('"'+e+'" not defined in '+t,{loc:r});return l.lookupProperty(t,e)},lookupProperty:function(t,e){var r=t[e];return null==r||Object.prototype.hasOwnProperty.call(t,e)||v.resultIsAllowed(r,l.protoAccessControl,e)?r:void 0},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(null!=(t[n]&&l.lookupProperty(t[n],e)))return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:function(r,n,o){o.hash&&(n=f.extend({},n,o.hash),o.ids&&(o.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,o);var i=f.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=e.VM.invokePartial.call(this,r,n,i);if(null==a&&e.compile&&(o.partials[o.name]=e.compile(r,t.compilerOptions,e),a=o.partials[o.name](n,i)),null!=a){if(o.indent){for(var s=a.split("\n"),u=0,l=s.length;u<l&&(s[u]||u+1!==l);u++)s[u]=o.indent+s[u];a=s.join("\n")}return a}throw new h.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,o,i){var a=this.programs[t],s=this.fn(t);return e||i||o||r?a=n(this,t,s,e,r,o,i):a||(a=this.programs[t]=n(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=f.extend({},e,t)),r},nullContext:a({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(r){if(r.partial)l.protoAccessControl=r.protoAccessControl,l.helpers=r.helpers,l.partials=r.partials,l.decorators=r.decorators,l.hooks=r.hooks;else{var n=f.extend({},e.helpers,r.helpers);(function(t,e){u(t).forEach((function(r){var n=t[r];t[r]=function(t,e){var r=e.lookupProperty;return d.wrapHelper(t,(function(t){return f.extend({lookupProperty:r},t)}))}(n,e)}))})(n,l),l.helpers=n,t.usePartial&&(l.partials=l.mergeIfNeeded(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(l.decorators=f.extend({},e.decorators,r.decorators)),l.hooks={},l.protoAccessControl=v.createProtoAccessControl(r);var i=r.allowCallsToHelperMissing||o;y.moveHelperToHooks(l,"helperMissing",i),y.moveHelperToHooks(l,"blockHelperMissing",i)}},r._child=function(e,r,o,i){if(t.useBlockParams&&!o)throw new h.default("must pass block params");if(t.useDepths&&!i)throw new h.default("must pass parent depths");return n(l,e,t[e],r,0,o,i)},r},e.wrapProgram=n,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var i=void 0;if(r.fn&&r.fn!==o&&function(){r.data=p.createFrame(r.data);var t=r.fn;i=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=p.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=f.extend({},r.partials,t.partials))}(),void 0===t&&i&&(t=i),void 0===t)throw new h.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=o;var f=l(r(5)),h=c(r(6)),p=r(4),y=r(10),d=r(82),v=r(73)},function(t,e,r){t.exports={default:r(80),__esModule:!0}},function(t,e,r){r(81),t.exports=r(21).Object.seal},function(t,e,r){var n=r(40);r(64)("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){return arguments[arguments.length-1]=e(arguments[arguments.length-1]),t.apply(this,arguments)}}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){"object"!=("undefined"==typeof globalThis?"undefined":s(globalThis))&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var e=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=e),t}},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return"Program"===t.type?t:(a.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},a.default.parse(t))}var o=r(1).default,i=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=function(t,e){var r=n(t,e);return new s.default(e).accept(r)};var a=o(r(86)),s=o(r(87)),u=i(r(89)),l=r(5);e.parser=a.default;var c={};l.extend(c,u)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,o,i,a){var s=i.length-1;switch(o){case 1:return i[s-1];case 2:this.$=n.prepareProgram(i[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=i[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(i[s]),strip:n.stripFlags(i[s],i[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:i[s],value:i[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(i[s-2],i[s-1],i[s],this._$);break;case 12:this.$={path:i[s-3],params:i[s-2],hash:i[s-1]};break;case 13:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!1,this._$);break;case 14:this.$=n.prepareBlock(i[s-3],i[s-2],i[s-1],i[s],!0,this._$);break;case 15:this.$={open:i[s-5],path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 16:case 17:this.$={path:i[s-4],params:i[s-3],hash:i[s-2],blockParams:i[s-1],strip:n.stripFlags(i[s-5],i[s])};break;case 18:this.$={strip:n.stripFlags(i[s-1],i[s-1]),program:i[s]};break;case 19:var u=n.prepareBlock(i[s-2],i[s-1],i[s],i[s],!1,this._$),l=n.prepareProgram([u],i[s-1].loc);l.chained=!0,this.$={strip:i[s-2].strip,program:l,chain:!0};break;case 21:this.$={path:i[s-1],strip:n.stripFlags(i[s-2],i[s])};break;case 22:case 23:this.$=n.prepareMustache(i[s-3],i[s-2],i[s-1],i[s-4],n.stripFlags(i[s-4],i[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:i[s-3],params:i[s-2],hash:i[s-1],indent:"",strip:n.stripFlags(i[s-4],i[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(i[s-2],i[s-1],i[s],this._$);break;case 26:this.$={path:i[s-3],params:i[s-2],hash:i[s-1],strip:n.stripFlags(i[s-4],i[s])};break;case 29:this.$={type:"SubExpression",path:i[s-3],params:i[s-2],hash:i[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:i[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(i[s-2]),value:i[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(i[s-1]);break;case 35:this.$={type:"StringLiteral",value:i[s],original:i[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(i[s]),original:Number(i[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===i[s],original:"true"===i[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,i[s],this._$);break;case 43:this.$=n.preparePath(!1,i[s],this._$);break;case 44:i[s-2].push({part:n.id(i[s]),original:i[s],separator:i[s-1]}),this.$=i[s-2];break;case 45:this.$=[{part:n.id(i[s]),original:i[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:i[s-1].push(i[s]);break;case 98:case 100:this.$=[i[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],o=[null],i=[],a=this.table,s="",u=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;i.push(f);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,y,d,v,g,m,b,w,_,x={};;){if(d=n[n.length-1],this.defaultActions[d]?v=this.defaultActions[d]:(null!=p||(p=e()),v=a[d]&&a[d][p]),void 0===v||!v.length||!v[0]){var S="";if(!c){for(m in _=[],a[d])this.terminals_[m]&&m>2&&_.push("'"+this.terminals_[m]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:f,expected:_})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+d+", token: "+p);switch(v[0]){case 1:n.push(p),o.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(v[1]),p=null,y?(p=y,y=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,f=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[v[1]][1],x.$=o[o.length-b],x._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},h&&(x._$.range=[i[i.length-(b||1)].range[0],i[i.length-1].range[1]]),void 0!==(g=this.performAction.call(x,s,l,u,this.yy,v[1],o,i)))return g;b&&(n=n.slice(0,-1*b*2),o=o.slice(0,-1*b),i=i.slice(0,-1*b)),n.push(this.productions_[v[1]][0]),o.push(x.$),i.push(x._$),w=a[n[n.length-2]][n[n.length-1]],n.push(w);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),a=0;a<i.length&&(!(r=this._input.match(this.rules[i[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function o(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(o(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=o(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=o(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function o(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],o=t[e-2];return n?"ContentStatement"===n.type?(o||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function i(t,e,r){void 0===e&&(e=-1);var n=t[e+1],o=t[e+2];return n?"ContentStatement"===n.type?(o||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var o=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==o}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var o=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==o,n.leftStripped}}var u=r(1).default;e.__esModule=!0;var l=u(r(88));n.prototype=new l.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,u=0,l=n.length;u<l;u++){var c=n[u],f=this.accept(c);if(f){var h=o(n,u,r),p=i(n,u,r),y=f.openStandalone&&h,d=f.closeStandalone&&p,v=f.inlineStandalone&&h&&p;f.close&&a(n,u,!0),f.open&&s(n,u,!0),e&&v&&(a(n,u),s(n,u)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[u-1].original)[1])),e&&y&&(a((c.program||c.inverse).body),s(n,u)),e&&d&&(a(n,u),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,u=r;if(r&&r.chained)for(n=r.body[0].program;u.chained;)u=u.body[u.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:i(e.body),closeStandalone:o((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&o(e.body)&&i(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function o(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function i(t){o.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var u=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new u.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new u.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:i,DecoratorBlock:i,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new i.default(t.path.original+" doesn't match "+e,r)}}var o=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",o=[],a=0,s=0,u=e.length;s<u;s++){var l=e[s].part,c=e[s].original!==l;if(n+=(e[s].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)o.push(l);else{if(o.length>0)throw new i.default("Invalid path: "+n,{loc:r});".."===l&&a++}}return{type:"PathExpression",data:t,depth:a,parts:o,original:n,loc:r}},e.prepareMustache=function(t,e,r,n,o,i){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:o,loc:this.locInfo(i)}},e.prepareRawBlock=function(t,e,r,o){n(t,r);var i={type:"Program",body:e,strip:{},loc:o=this.locInfo(o)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:o}},e.prepareBlock=function(t,e,r,o,a,s){o&&o.path&&n(t,o);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(r){if(u)throw new i.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=o.strip),c=r.strip,l=r.program}return a&&(a=l,l=e,e=a),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:o&&o.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,o){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(o)}};var i=o(r(6))},function(t,e,r){"use strict";function n(){}function o(t,e){if(t===e)return!0;if(l.isArray(t)&&l.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;return!0}}function i(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var a=r(74).default,s=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),o=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(o,e)},e.compile=function(t,e,r){function n(){var n=r.parse(t,e),o=(new r.Compiler).compile(n,e),i=(new r.JavaScriptCompiler).compile(o,e,void 0,!0);return r.template(i)}function o(t,e){return i||(i=n()),i.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=l.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var i=void 0;return o._setup=function(t){return i||(i=n()),i._setup(t)},o._child=function(t,e,r,o){return i||(i=n()),i._child(t,e,r,o)},o};var u=s(r(6)),l=r(5),c=s(r(84)),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],i=t.opcodes[r];if(n.opcode!==i.opcode||!o(n.args,i.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=l.extend(a(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){i(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,o="SubExpression"===t.name.type;o&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var i=t.indent||"";this.options.preventIndent&&i&&(this.opcode("appendContent",i),i=""),this.opcode("invokePartial",o,n,i),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){i(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,o=n.parts[0],i=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",o,i)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),o=t.path,i=o.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",n.length,i);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+i,t);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",n.length,o.original,c.default.helpers.simpleId(o))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=c.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=c.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&c.default.helpers.helperExpression(t),o=!r&&(n||e);if(o&&!n){var i=t.path.parts[0],a=this.options;a.knownHelpers[i]?n=!0:a.knownHelpersOnly&&(o=!1)}return n?"helper":o?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||c.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var o=t.params;return this.pushParams(o),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],o=n&&l.indexOf(n,t);if(n&&o>=0)return[e,o]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function o(){}var i=r(60).default,a=r(1).default;e.__esModule=!0;var s=r(4),u=a(r(6)),l=r(5),c=a(r(92));o.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=s.COMPILER_REVISION;return[t,s.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return l.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var o=t.opcodes,i=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=o.length;s<l;s++)i=o[s],this.source.currentLocation=i.loc,a=a||i.loc,this[i.opcode].apply(this,i.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var f={compiler:this.compilerInfo(),main:c};this.decorators&&(f.main_d=this.decorators,f.useDecorators=!0);var h=this.context,p=h.programs,y=h.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(f[s]=p[s],y[s]&&(f[s+"_d"]=y[s],f.useDecorators=!0));return this.environment.usePartial&&(f.usePartial=!0),this.options.data&&(f.useData=!0),this.useDepths&&(f.useDepths=!0),this.useBlockParams&&(f.useBlockParams=!0),this.options.compat&&(f.compat=!0),n?f.compilerOptions=this.options:(f.compiler=JSON.stringify(f.compiler),this.source.currentLocation={start:{line:1,column:0}},f=this.objectLiteral(f),e.srcName?(f=f.toStringWithSourceMap({file:e.destName})).map=f.map&&f.map.toString():f=f.toString()),f},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(t){var e=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var o=0;i(this.aliases).forEach((function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(r+=", alias"+ ++o+"="+t,n.children[0]="alias"+o)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(r);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,o=void 0,i=void 0,a=void 0;return this.source.each((function(t){t.appendToBuffer?(i?t.prepend("  + "):i=t,a=t):(i&&(o?i.prepend("buffer += "):n=!0,a.add(";"),i=a=void 0),o=!0,e||(r=!1))})),r?i?(i.prepend("return "),a.add(";")):o||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),i?(i.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[o++])),this.resolvePath("context",t,o,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,o){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,n,o){var i=e.popStack(),a=r.length;for(t&&a--;n<a;n++)i=e.nameLookup(i,r[n],o);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(r[n]),", ",JSON.stringify(e.source.currentLocation)," )"]:i}(this.options.strict&&o,this,e,r,t));else for(var a=e.length;r<a;r++)this.replaceStack((function(o){var a=i.nameLookup(o,e[r],t);return n?[" && ",a]:[" != null ? ",a," : ",o]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),o=this.setupHelper(t,e),i=[];r&&i.push(o.name),i.push(n),this.options.strict||i.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(i,"||"),")"],s=this.source.functionCall(a,"call",o.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),o=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",o,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],o=this.setupParams(e,1,n);t&&(e=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var i=this.hash;r&&(i.contexts[t]=r),n&&(i.types[t]=n),o&&(i.ids[t]=o),i.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:o,compileChildren:function(t,e){for(var r=t.children,n=void 0,o=void 0,i=0,a=r.length;i<a;i++){n=r[i],o=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var u=this.context.programs.length;n.index=u,n.name="program"+u,this.context.programs[u]=o.compile(n,e,this.context,!this.precompile),this.context.decorators[u]=o.decorators,this.context.environments[u]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,o=void 0,i=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)e=["(",r=[a.value]],i=!0;else{o=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=t.call(this,r);i||this.popStack(),o&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var o=t[e];if(o instanceof n)this.compileStack.push(o);else{var i=this.incrStack();this.pushSource([i," = ",o,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,r){var n={},o=[],i=[],a=[],s=!r,u=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"container.noop",n.inverse=l||"container.noop");for(var f=e;f--;)u=this.popStack(),r[f]=u,this.trackIds&&(a[f]=this.popStack()),this.stringParams&&(i[f]=this.popStack(),o[f]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(i),n.contexts=this.source.generateArray(o)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var o=this.setupParams(t,e,r);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),n?(this.useRegister("options"),r.push("options"),["options=",o]):r?(r.push(o),""):o}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=o.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),o.isValidJavaScriptVariableName=function(t){return!o.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=o,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(a.isArray(t)){for(var n=[],o=0,i=t.length;o<i;o++)n.push(e.wrap(t[o],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function o(t){this.srcFile=t,this.source=[]}var i=r(60).default;e.__esModule=!0;var a=r(5),s=void 0;s||(s=function(t,e,r,n){this.src="",n&&this.add(n)},s.prototype={add:function(t){a.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){a.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),o.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new s(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof s?t:(t=n(t,this,e),new s(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,r=[];i(t).forEach((function(o){var i=n(t[o],e);"undefined"!==i&&r.push([e.quotedString(o),":",i])}));var o=this.generateList(r);return o.prepend("{"),o.add("}"),o},generateList:function(t){for(var e=this.empty(),r=0,o=t.length;r<o;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=o,t.exports=e.default}])},"object"==s(e)&&"object"==s(t)?t.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=i))},542:(t,e)=>{e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+t[e+f],f+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=l}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=y,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[r+p]=255&a,p+=y,a/=256,l-=8);t[r+p-y]|=128*d}},584:(t,e,r)=>{"use strict";t.exports=o;var n=r(542);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var i=4294967296,a=1/i,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function u(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function l(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=t;o--)r.buf[o+n]=r.buf[o]}function f(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function b(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,i=this.pos;this.type=7&n,t(o,e,this),this.pos===i&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=w(this.buf,this.pos)+w(this.buf,this.pos+4)*i;return this.pos+=8,t},readSFixed64:function(){var t=w(this.buf,this.pos)+x(this.buf,this.pos+4)*i;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,o,i=r.buf;if(n=(112&(o=i[r.pos++]))>>4,o<128)return l(t,n,e);if(n|=(127&(o=i[r.pos++]))<<3,o<128)return l(t,n,e);if(n|=(127&(o=i[r.pos++]))<<10,o<128)return l(t,n,e);if(n|=(127&(o=i[r.pos++]))<<17,o<128)return l(t,n,e);if(n|=(127&(o=i[r.pos++]))<<24,o<128)return l(t,n,e);if(n|=(1&(o=i[r.pos++]))<<31,o<128)return l(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,r){return s.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",o=e;o<r;){var i,a,s,u=t[o],l=null,c=u>239?4:u>223?3:u>191?2:1;if(o+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(i=t[o+1]))&&(l=(31&u)<<6|63&i)<=127&&(l=null):3===c?(i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&((l=(15&u)<<12|(63&i)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),o+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==o.Bytes)return t.push(this.readVarint(e));var r=u(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==o.Bytes)return t.push(this.readSVarint());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==o.Bytes)return t.push(this.readBoolean());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==o.Bytes)return t.push(this.readFloat());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==o.Bytes)return t.push(this.readDouble());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,o,i=0;i<e.length;i++){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){n>56319||i+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&c(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,o.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},537:function(t,e,r){var n,o,i;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}i=function(){"use strict";function t(t,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(r,n,Math.max(o,Math.floor(n-u*c/s+f)),Math.min(i,Math.floor(n+(s-u)*c/s+f)),a)}var h=r[n],p=o,y=i;for(e(r,o,n),a(r[i],h)>0&&e(r,o,i);p<y;){for(e(r,p,y),p++,y--;a(r[p],h)<0;)p++;for(;a(r[y],h)>0;)y--}0===a(r[o],h)?e(r,o,y):e(r,++y,i),y<=n&&(o=y+1),n<=y&&(i=y-1)}}(t,n,o||0,i||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function i(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,o){o||(o=y(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=e;i<r;i++){var a=t.children[i];s(o,t.leaf?n(a):a)}return o}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,r,n,o,i){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=o)){var s=r+Math.ceil((n-r)/o/2)*o;t(e,s,r,n,i),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var a=e.children[i],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):h(t,s)?this._all(a,r):o.push(a))}e=o.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],i=e.leaf?this.toBBox(o):o;if(p(t,i)){if(e.leaf||h(t,i))return!0;r.push(o)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=y([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,i,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),i=!0),a.leaf){var c=o(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}i||a.leaf||!h(a,s)?n?(r++,a=n.children[r],i=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var o,a=r-e+1,s=this._maxEntries;if(a<=s)return i(o=y(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(o=y([])).leaf=!1,o.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));d(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var f=Math.min(c+l-1,r);d(t,c,f,u,this.compareMinY);for(var h=c;h<=f;h+=u){var p=Math.min(h+u-1,f);o.children.push(this._build(t,h,p,n-1))}}return i(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var o=1/0,i=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),f=(h=t,p=u,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l);f<i?(i=f,o=l<o?l:o,a=u):f===i&&l<o&&(o=l,a=u)}e=a||e.children[0]}var h,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),o=[],i=this._chooseSubtree(n,this.data,e,o);for(i.children.push(t),s(i,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var a=this._chooseSplitIndex(r,o,n),s=y(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,i(r,this.toBBox),i(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,o,i,s,u,l,f,h=1/0,p=1/0,y=e;y<=r-e;y++){var d=a(t,0,y,this.toBBox),v=a(t,y,r,this.toBBox),g=(o=d,i=v,s=Math.max(o.minX,i.minX),u=Math.max(o.minY,i.minY),l=Math.min(o.maxX,i.maxX),f=Math.min(o.maxY,i.maxY),Math.max(0,l-s)*Math.max(0,f-u)),m=c(d)+c(v);g<h?(h=g,n=y,p=m<p?m:p):g===h&&m<p&&(p=m,n=y)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var o=this.toBBox,i=a(t,0,e,o),u=a(t,r-e,r,o),l=f(i)+f(u),c=e;c<r-e;c++){var h=t.children[c];s(i,t.leaf?o(h):h),l+=f(i)}for(var p=r-e-1;p>=e;p--){var y=t.children[p];s(u,t.leaf?o(y):y),l+=f(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},n},"object"==a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},835:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var n=Symbol.for("react.element"),o=(Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator,{isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}}),i=Object.assign,a={};function s(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||o}function u(){}function l(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||o}s.prototype.isReactComponent={},s.prototype.setState=function(t,e){if("object"!==r(t)&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},u.prototype=s.prototype;var c=l.prototype=new u;c.constructor=l,i(c,s.prototype),c.isPureReactComponent=!0,Array.isArray;var f=Object.prototype.hasOwnProperty,h={key:!0,ref:!0,__self:!0,__source:!0};e.createElement=function(t,e,r){var o,i={},a=null,s=null;if(null!=e)for(o in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)f.call(e,o)&&!h.hasOwnProperty(o)&&(i[o]=e[o]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(o in u=t.defaultProps)void 0===i[o]&&(i[o]=u[o]);return{$$typeof:n,type:t,key:a,ref:s,props:i,_owner:null}}},807:(t,e,r)=>{"use strict";t.exports=r(835)},0:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(852),o=r.n(n),i=r(22),a=r.n(i)()(o());a.push([t.id,':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: pan-x pan-y;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',"",{version:3,sources:["webpack://./../../node_modules/.pnpm/ol@8.2.0/node_modules/ol/ol.css"],names:[],mappings:"AAAA;;EAEE,4BAA4B;EAC5B,qCAAqC;EACrC,uDAAuD;EACvD,wDAAwD;EACxD,8BAA8B;EAC9B,qCAAqC;EACrC,yBAAyB;AAC3B;;AAEA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,8CAA8C;EAC9C,oDAAoD;AACtD;;AAEA;EACE,QAAQ;EACR,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,8CAA8C;EAC9C,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,mDAAmD;EACnD,gBAAgB;EAChB,iCAAiC;EACjC,eAAe;EACf,kBAAkB;EAClB,WAAW;EACX,4BAA4B;EAC5B,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;AACX;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,UAAU;EACV,YAAY;EACZ,4CAA4C;EAC5C,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,eAAe;EACf,WAAW;EACX,iCAAiC;EACjC,6LAA6L;AAC/L;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,iCAAiC;EACjC,6LAA6L;AAC/L;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,sBAAsB;EACtB,4CAA4C;AAC9C;;AAEA;EACE,mDAAmD;AACrD;;AAEA;EACE,4CAA4C;AAC9C;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE,2BAA2B;EAC3B,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;EACjB,wCAAwC;AAC1C;;AAEA;EACE,UAAU;EACV,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,8BAA8B;EAC9B,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,YAAY;EACZ,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,mDAAmD;EACnD,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,SAAS;EACT,WAAW;EACX,qDAAqD;AACvD;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,0DAA0D;AAC5D;;AAEA;EACE,YAAY;EACZ,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,SAAS;AACX;;AAEA;EACE,cAAc;EACd,WAAW;EACX,UAAU;EACV,wCAAwC;EACxC,iBAAiB;EACjB,qBAAqB;EACrB,kBAAkB;EAClB,kBAAkB;EAClB,eAAe;EACf,cAAc;EACd,iBAAiB;EACjB,4CAA4C;EAC5C,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,UAAU;AACZ;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,UAAU;AACZ;;AAEA;;EAEE,qBAAqB;EACrB,oDAAoD;EACpD,iCAAiC;AACnC;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,WAAW;EACX,6BAA6B;EAC7B,aAAa;EACb,sBAAsB;EACtB,mBAAmB;AACrB;;AAEA;EACE,wCAAwC;EACxC,qBAAqB;AACvB;;AAEA;EACE,SAAS;EACT,iBAAiB;EACjB,iCAAiC;EACjC,+CAA+C;EAC/C,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,sBAAsB;AACxB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8CAA8C;AAChD;;AAEA;EACE,SAAS;EACT,QAAQ;EACR,sBAAsB;AACxB;;AAEA;EACE,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,UAAU;EACV,UAAU;EACV,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,aAAa;AACf;;AAEA;EACE,SAAS;EACT,OAAO;EACP,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,mDAAmD;EACnD,aAAa;EACb,YAAY;AACd;;AAEA;EACE,SAAS;EACT,OAAO;EACP,kBAAkB;AACpB;;AAEA;;EAEE,aAAa;AACf;;AAEA;EACE,6CAA6C;AAC/C;;AAEA;EACE,sDAAsD;AACxD;;AAEA;EACE,YAAY;AACd",sourcesContent:[':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: pan-x pan-y;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n'],sourceRoot:""}]);const s=a},471:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(852),o=r.n(n),i=r(22),a=r.n(i)()(o());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-picker {\n    --header-group-background-color: #000000;\n    --header-text-color: #ffffff;\n}\n\n.layer-header-group {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    color: var(--header-text-color);\n    background-color: var(--header-group-background-color);\n    padding: 4px 12px;\n    line-height: 1.5;\n}\n\n.layer-header-group.layer-header-group-disabled {\n    opacity: 0.4;\n}\n\n.layer-header-group svg {\n    width: 18px;\n    height: 18px;\n}\n\n.layer-header-group > span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.33_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_nowlp75po4l3noj2wnve2lraqy/node_modules/webcore-map-nextgen/map/layerPicker/LayerPicker.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,wCAAwC;IACxC,4BAA4B;AAChC;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,+BAA+B;IAC/B,sDAAsD;IACtD,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;AACvB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-picker {\r\n    --header-group-background-color: #000000;\r\n    --header-text-color: #ffffff;\r\n}\r\n\r\n.layer-header-group {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: var(--header-text-color);\r\n    background-color: var(--header-group-background-color);\r\n    padding: 4px 12px;\r\n    line-height: 1.5;\r\n}\r\n\r\n.layer-header-group.layer-header-group-disabled {\r\n    opacity: 0.4;\r\n}\r\n\r\n.layer-header-group svg {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\n.layer-header-group > span {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n"],sourceRoot:""}]);const s=a},143:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(852),o=r.n(n),i=r(22),a=r.n(i)()(o());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\n.layer-list-item {\n    display: flex;\n    padding: 4px 12px;\n    font-size: 14px;\n    line-height: 1.5;\n}\n\n.layer-list-item.layer-list-item-not-in-view {\n    text-decoration: line-through;\n}\n\n.layer-list-item.layer-list-item-disabled {\n    opacity: 0.4;\n}\n\n.layer-list-item .layer-list-item-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex: 1;\n    overflow-x: hidden;\n}\n\n.layer-list-item .layer-list-item-title > span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.layer-list-item img {\n    flex-shrink: 0;\n    flex-grow: 0;\n    width: 20px;\n    height: 20px;\n    margin-right: 8px;\n    object-fit: contain;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.33_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_nowlp75po4l3noj2wnve2lraqy/node_modules/webcore-map-nextgen/map/layerPicker/layerList/LayerList.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,gBAAgB;IAChB,UAAU;IACV,SAAS;AACb;;AAEA;IACI,aAAa;IACb,iBAAiB;IACjB,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,OAAO;IACP,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,iBAAiB;IACjB,mBAAmB;AACvB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-list {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n.layer-list-item {\r\n    display: flex;\r\n    padding: 4px 12px;\r\n    font-size: 14px;\r\n    line-height: 1.5;\r\n}\r\n\r\n.layer-list-item.layer-list-item-not-in-view {\r\n    text-decoration: line-through;\r\n}\r\n\r\n.layer-list-item.layer-list-item-disabled {\r\n    opacity: 0.4;\r\n}\r\n\r\n.layer-list-item .layer-list-item-title {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    flex: 1;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.layer-list-item .layer-list-item-title > span {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\n.layer-list-item img {\r\n    flex-shrink: 0;\r\n    flex-grow: 0;\r\n    width: 20px;\r\n    height: 20px;\r\n    margin-right: 8px;\r\n    object-fit: contain;\r\n}\r\n"],sourceRoot:""}]);const s=a},214:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(852),o=r.n(n),i=r(22),a=r.n(i)()(o());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-visibility-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    color: inherit;\n    cursor: pointer;\n    outline: none;\n    font-family: inherit;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.33_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_nowlp75po4l3noj2wnve2lraqy/node_modules/webcore-map-nextgen/map/layerPicker/layerVisibilityButton/LayerVisibilityButton.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,YAAY;IACZ,gBAAgB;IAChB,UAAU;IACV,SAAS;IACT,cAAc;IACd,eAAe;IACf,aAAa;IACb,oBAAoB;AACxB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-visibility-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: none;\r\n    background: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    color: inherit;\r\n    cursor: pointer;\r\n    outline: none;\r\n    font-family: inherit;\r\n}\r\n"],sourceRoot:""}]);const s=a},625:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(852),o=r.n(n),i=r(22),a=r.n(i)()(o());a.push([t.id,".wmn-feature-picker {\n    background-color: white;\n    opacity: 0.95;\n    color: black;\n    font: 16px sans-serif;\n    border: 1px solid grey;\n}\n\n.wmn-feature-picker-item {\n    padding: 10px;\n    cursor: pointer;\n}\n\n.wmn-feature-picker-item:not(:last-child) {\n    border-bottom: 1px solid grey;\n}\n\n.wmn-feature-picker-item:hover {\n    background: #ebebeb;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.33_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_nowlp75po4l3noj2wnve2lraqy/node_modules/webcore-map-nextgen/map/map.css"],names:[],mappings:"AAAA;IACI,uBAAuB;IACvB,aAAa;IACb,YAAY;IACZ,qBAAqB;IACrB,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,eAAe;AACnB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,mBAAmB;AACvB",sourcesContent:[".wmn-feature-picker {\r\n    background-color: white;\r\n    opacity: 0.95;\r\n    color: black;\r\n    font: 16px sans-serif;\r\n    border: 1px solid grey;\r\n}\r\n\r\n.wmn-feature-picker-item {\r\n    padding: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.wmn-feature-picker-item:not(:last-child) {\r\n    border-bottom: 1px solid grey;\r\n}\r\n\r\n.wmn-feature-picker-item:hover {\r\n    background: #ebebeb;\r\n}\r\n"],sourceRoot:""}]);const s=a},798:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var i={},a=[],s=0;s<t.length;s++){var u=t[s],l=n.base?u[0]+n.base:u[0],c=i[l]||0,f="".concat(l," ").concat(c);i[l]=c+1;var h=r(f),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var y=o(p,n);n.byIndex=s,e.splice(s,0,{identifier:f,updater:y,references:1})}a.push(f)}return a}function o(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,o){var i=n(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var s=r(i[a]);e[s].references--}for(var u=n(t,o),l=0;l<i.length;l++){var c=r(i[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=u}}},63:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},613:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},463:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},43:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},442:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},481:t=>{"use strict";t.exports=n},280:e=>{"use strict";e.exports=t},207:t=>{"use strict";t.exports=o},369:t=>{"use strict";t.exports=e}},a={};function s(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,loaded:!1,exports:{}};return i[t].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=i,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.u=t=>t+".index.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!t;)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.b=document.baseURI||self.location.href,s.nc=void 0;var u={};return(()=>{"use strict";s.r(u),s.d(u,{LayerPicker:()=>_L,cleanupMap:()=>yM,createLayer:()=>qR,createMap:()=>fM,deleteMapDB:()=>vC,deselectAllFeatures:()=>wI,disableFollowMode:()=>EC,disablePuttingPin:()=>wM,enableFollowMode:()=>OC,enablePuttingPin:()=>bM,findFeature:()=>QR,followCurrentLocation:()=>qC,getLayer:()=>UR,getVisibleBaseLayerId:()=>aC,isLayerVisible:()=>GR,panToBoundingBox:()=>dM,panToCenterPointAndZoom:()=>gM,refreshMap:()=>pM,selectFeatureByIdCoord:()=>xI,selectFeatures:()=>_I,setIsOffline:()=>ZL,showCurrentLocation:()=>VC,startDrawFeature:()=>EI,startOfflineMapDownload:()=>KL,stopDrawFeature:()=>PI,stopOfflineMapDownload:()=>$L,toggleBaseLayer:()=>tC,toggleLayerVisibility:()=>zR,unfollowCurrentLocation:()=>WC});var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:String(r)}s.r(t),s.d(t,{hasBrowserEnv:()=>mt,hasStandardBrowserEnv:()=>bt,hasStandardBrowserWebWorkerEnv:()=>wt});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isConsoleSupported=void 0!==window.console}var r,o;return r=t,(o=[{key:"error",value:function(t,r){var n=t;r&&("object"===e(r)?(r.message&&(n+="\n"+r.message),r.stack&&(n+="\n"+r.stack)):n+="\n"+r.toString()),this.isConsoleSupported&&window.console.error(n)}},{key:"warn",value:function(t){this.isConsoleSupported&&window.console.warn(t)}},{key:"info",value:function(t){this.isConsoleSupported&&window.console.info(t)}},{key:"debug",value:function(t){this.isConsoleSupported&&window.console.debug(t)}},{key:"event",value:function(t,r){var n=t;r&&("object"===e(r)?n+="\n ".concat(JSON.stringify(r)):"string"==typeof r&&(n+="\n"+r)),this.isConsoleSupported&&window.console.log(n)}},{key:"trackRequest",value:function(t,e,r,n,o){window.console.log("Request ".concat(o?"Success":"Failed"," - ").concat(t," : ").concat(e," took ").concat(n,"ms, returned ").concat(r))}},{key:"group",value:function(t){this.isConsoleSupported&&window.console.group(t)}},{key:"groupCollapsed",value:function(t){this.isConsoleSupported&&window.console.groupCollapsed(t)}},{key:"groupEnd",value:function(){this.isConsoleSupported&&window.console.groupEnd()}}])&&n(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e={id:"console",logger:new i};this.plugins=[e],window.onerror=function(t,e,r,n,o){this.error(t,o)}.bind(this)}var e,r;return e=t,(r=[{key:"findPlugin",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(this.plugins);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.id===t)return n}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"addPlugin",value:function(t,e){if(this.findPlugin(t))throw new Error("Logger with the same id already exists");var r={id:t,logger:e};this.plugins.push(r)}},{key:"removePlugin",value:function(t){for(var e=0;e<this.plugins.length;e+=1)if(this.plugins[e].id===t)return void this.plugins.splice(e,1)}},{key:"doesPluginExist",value:function(t){return null!==this.findPlugin(t)}},{key:"error",value:function(t,e){this.plugins.forEach((function(r){r.logger.error(t,e)}))}},{key:"warn",value:function(t){this.plugins.forEach((function(e){e.logger.warn(t)}))}},{key:"info",value:function(t){this.plugins.forEach((function(e){e.logger.info(t)}))}},{key:"debug",value:function(t){this.plugins.forEach((function(e){e.logger.debug(t)}))}},{key:"event",value:function(t,e){this.plugins.forEach((function(r){r.logger.event(t,e)}))}},{key:"group",value:function(t){this.plugins.forEach((function(e){e.logger.group(t)}))}},{key:"groupCollapsed",value:function(t){this.plugins.forEach((function(e){e.logger.groupCollapsed(t)}))}},{key:"groupEnd",value:function(){this.plugins.forEach((function(t){t.logger.groupEnd()}))}},{key:"trackMetric",value:function(t,e,r,n,o){this.plugins.forEach((function(i){"function"==typeof i.logger.trackMetric&&i.logger.trackMetric(t,e,r,n,o)}))}},{key:"trackPageView",value:function(t,e,r,n,o){this.plugins.forEach((function(i){"function"==typeof i.logger.trackPageView&&i.logger.trackPageView(t,e,r,n,o)}))}},{key:"setAuthenticatedUserContext",value:function(t,e){this.plugins.forEach((function(r){"function"==typeof r.logger.setAuthenticatedUserContext&&r.logger.setAuthenticatedUserContext(t,e)}))}},{key:"clearAuthenticatedUserContext",value:function(){this.plugins.forEach((function(t){"function"==typeof t.logger.clearAuthenticatedUserContext&&t.logger.clearAuthenticatedUserContext()}))}},{key:"setCustomProperty",value:function(t,e){this.plugins.forEach((function(r){"function"==typeof r.logger.setCustomProperty&&r.logger.setCustomProperty(t,e)}))}},{key:"clearCustomProperty",value:function(t){this.plugins.forEach((function(e){"function"==typeof e.logger.clearCustomProperty&&e.logger.clearCustomProperty(t)}))}},{key:"trackRequest",value:function(t,e,r,n,o,i,a){this.plugins.forEach((function(s){"function"==typeof s.logger.trackRequest&&s.logger.trackRequest(t,e,r,n,o,i,a)}))}},{key:"flush",value:function(){this.plugins.forEach((function(t){"function"==typeof t.logger.flush&&t.logger.flush()}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.abbesWebcoreLogger=window.abbesWebcoreLogger||new f;const h=window.abbesWebcoreLogger;function p(t,e){return function(){return t.apply(e,arguments)}}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var d=Object.prototype.toString,v=Object.getPrototypeOf,g=function(t){return function(e){var r=d.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null)),m=function(t){return t=t.toLowerCase(),function(e){return g(e)===t}},b=function(t){return function(e){return y(e)===t}},w=Array.isArray,_=b("undefined"),x=m("ArrayBuffer"),S=b("string"),k=b("function"),O=b("number"),E=function(t){return null!==t&&"object"===y(t)},P=function(t){if("object"!==g(t))return!1;var e=v(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},j=m("Date"),C=m("File"),A=m("Blob"),T=m("FileList"),R=m("URLSearchParams");function I(t,e){var r,n,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,i=void 0!==o&&o;if(null!=t)if("object"!==y(t)&&(t=[t]),w(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{var a,s=i?Object.getOwnPropertyNames(t):Object.keys(t),u=s.length;for(r=0;r<u;r++)a=s[r],e.call(null,t[a],a,t)}}function L(t,e){e=e.toLowerCase();for(var r,n=Object.keys(t),o=n.length;o-- >0;)if(e===(r=n[o]).toLowerCase())return r;return null}var M,F,D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,B=function(t){return!_(t)&&t!==D},N=(M="undefined"!=typeof Uint8Array&&v(Uint8Array),function(t){return M&&t instanceof M}),z=m("HTMLFormElement"),G=(F=Object.prototype.hasOwnProperty,function(t,e){return F.call(t,e)}),U=m("RegExp"),q=function(t,e){var r=Object.getOwnPropertyDescriptors(t),n={};I(r,(function(r,o){var i;!1!==(i=e(r,o,t))&&(n[o]=i||r)})),Object.defineProperties(t,n)},W="abcdefghijklmnopqrstuvwxyz",V="0123456789",Y={DIGIT:V,ALPHA:W,ALPHA_DIGIT:W+W.toUpperCase()+V},Z=m("AsyncFunction");const X={isArray:w,isArrayBuffer:x,isBuffer:function(t){return null!==t&&!_(t)&&null!==t.constructor&&!_(t.constructor)&&k(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:function(t){var e;return t&&("function"==typeof FormData&&t instanceof FormData||k(t.append)&&("formdata"===(e=g(t))||"object"===e&&k(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&x(t.buffer)},isString:S,isNumber:O,isBoolean:function(t){return!0===t||!1===t},isObject:E,isPlainObject:P,isUndefined:_,isDate:j,isFile:C,isBlob:A,isRegExp:U,isFunction:k,isStream:function(t){return E(t)&&k(t.pipe)},isURLSearchParams:R,isTypedArray:N,isFileList:T,forEach:I,merge:function t(){for(var e=(B(this)&&this||{}).caseless,r={},n=function(n,o){var i=e&&L(r,o)||o;P(r[i])&&P(n)?r[i]=t(r[i],n):P(n)?r[i]=t({},n):w(n)?r[i]=n.slice():r[i]=n},o=0,i=arguments.length;o<i;o++)arguments[o]&&I(arguments[o],n);return r},extend:function(t,e,r){return I(e,(function(e,n){r&&k(e)?t[n]=p(e,r):t[n]=e}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:function(t,e,r,n){var o,i,a,s={};if(e=e||{},null==t)return e;do{for(i=(o=Object.getOwnPropertyNames(t)).length;i-- >0;)a=o[i],n&&!n(a,t,e)||s[a]||(e[a]=t[a],s[a]=!0);t=!1!==r&&v(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:g,kindOfTest:m,endsWith:function(t,e,r){t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r},toArray:function(t){if(!t)return null;if(w(t))return t;var e=t.length;if(!O(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r},forEachEntry:function(t,e){for(var r,n=(t&&t[Symbol.iterator]).call(t);(r=n.next())&&!r.done;){var o=r.value;e.call(t,o[0],o[1])}},matchAll:function(t,e){for(var r,n=[];null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:z,hasOwnProperty:G,hasOwnProp:G,reduceDescriptors:q,freezeMethods:function(t){q(t,(function(e,r){if(k(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=t[r];k(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(t,e){var r={},n=function(t){t.forEach((function(t){r[t]=!0}))};return w(t)?n(t):n(String(t).split(e)),r},toCamelCase:function(t){return t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(t,e){return t=+t,Number.isFinite(t)?t:e},findKey:L,global:D,isContextDefined:B,ALPHABET:Y,generateString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.ALPHA_DIGIT,r="",n=e.length;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&k(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:function(t){var e=new Array(10);return function t(r,n){if(E(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;var o=w(r)?[]:{};return I(r,(function(e,r){var i=t(e,n+1);!_(i)&&(o[r]=i)})),e[n]=void 0,o}}return r}(t,0)},isAsyncFn:Z,isThenable:function(t){return t&&(E(t)||k(t))&&k(t.then)&&k(t.catch)}};function H(t,e,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}X.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var K=H.prototype,J={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(t){J[t]={value:t}})),Object.defineProperties(H,J),Object.defineProperty(K,"isAxiosError",{value:!0}),H.from=function(t,e,r,n,o,i){var a=Object.create(K);return X.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(function(t){return"isAxiosError"!==t})),H.call(a,t.message,e,r,n,o),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};const $=H;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function tt(t){return X.isPlainObject(t)||X.isArray(t)}function et(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function rt(t,e,r){return t?t.concat(e).map((function(t,e){return t=et(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}var nt=X.toFlatObject(X,{},null,(function(t){return/^is[A-Z]/.test(t)}));const ot=function(t,e,r){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;var n=(r=X.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!X.isUndefined(e[t])}))).metaTokens,o=r.visitor||l,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(o))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(X.isDate(t))return t.toISOString();if(!s&&X.isBlob(t))throw new $("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(t)||X.isTypedArray(t)?s&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function l(t,r,o){var s=t;if(t&&!o&&"object"===Q(t))if(X.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(X.isArray(t)&&function(t){return X.isArray(t)&&!t.some(tt)}(t)||(X.isFileList(t)||X.endsWith(r,"[]"))&&(s=X.toArray(t)))return r=et(r),s.forEach((function(t,n){!X.isUndefined(t)&&null!==t&&e.append(!0===a?rt([r],n,i):null===a?r:r+"[]",u(t))})),!1;return!!tt(t)||(e.append(rt(o,r,i),u(t)),!1)}var c=[],f=Object.assign(nt,{defaultVisitor:l,convertValue:u,isVisitable:tt});if(!X.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!X.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),X.forEach(r,(function(r,i){!0===(!(X.isUndefined(r)||null===r)&&o.call(e,r,X.isString(i)?i.trim():i,n,f))&&t(r,n?n.concat(i):[i])})),c.pop()}}(t),e};function it(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function at(t,e){this._pairs=[],t&&ot(t,this,e)}var st=at.prototype;st.append=function(t,e){this._pairs.push([t,e])},st.toString=function(t){var e=t?function(e){return t.call(this,e,it)}:it;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const ut=at;function lt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ct(t,e,r){if(!e)return t;var n,o=r&&r.encode||lt,i=r&&r.serialize;if(n=i?i(e,r):X.isURLSearchParams(e)?e.toString():new ut(e,r).toString(o)){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function ht(t){var e=function(t,e){if("object"!=ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:String(e)}var pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=[]}var e,r;return e=t,r=[{key:"use",value:function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){X.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const yt=pt,dt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ut,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};var gt,mt="undefined"!=typeof window&&"undefined"!=typeof document,bt=(gt="undefined"!=typeof navigator&&navigator.product,mt&&["ReactNative","NativeScript","NS"].indexOf(gt)<0),wt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=_t(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==_t(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const kt=St(St({},t),vt),Ot=function(t){function e(t,r,n,o){var i=t[o++],a=Number.isFinite(+i),s=o>=t.length;return i=!i&&X.isArray(n)?n.length:i,s?(X.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&X.isObject(n[i])||(n[i]=[]),e(t,r,n[i],o)&&X.isArray(n[i])&&(n[i]=function(t){var e,r,n={},o=Object.keys(t),i=o.length;for(e=0;e<i;e++)n[r=o[e]]=t[r];return n}(n[i])),!a)}if(X.isFormData(t)&&X.isFunction(t.entries)){var r={};return X.forEachEntry(t,(function(t,n){e(function(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map((function(t){return"[]"===t[0]?"":t[1]||t[0]}))}(t),n,r,0)})),r}return null};var Et={transitional:dt,adapter:["xhr","http"],transformRequest:[function(t,e){var r,n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=X.isObject(t);if(i&&X.isHTMLForm(t)&&(t=new FormData(t)),X.isFormData(t))return o&&o?JSON.stringify(Ot(t)):t;if(X.isArrayBuffer(t)||X.isBuffer(t)||X.isStream(t)||X.isFile(t)||X.isBlob(t))return t;if(X.isArrayBufferView(t))return t.buffer;if(X.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return ot(t,new kt.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return kt.isNode&&X.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=X.isFileList(t))||n.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return ot(r?{"files[]":t}:t,a&&new a,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),function(t,e,r){if(X.isString(t))try{return(0,JSON.parse)(t),X.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||Et.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&X.isString(t)&&(r&&!this.responseType||n)){var o=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw $.from(t,$.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kt.classes.FormData,Blob:kt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],(function(t){Et.headers[t]={}}));const Pt=Et;var jt=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function Rt(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:String(e)}var It=Symbol("internals");function Lt(t){return t&&String(t).trim().toLowerCase()}function Mt(t){return!1===t||null==t?t:X.isArray(t)?t.map(Mt):String(t)}function Ft(t,e,r,n,o){return X.isFunction(n)?n.call(this,e,r):(o&&(e=r),X.isString(e)?X.isString(n)?-1!==e.indexOf(n):X.isRegExp(n)?n.test(e):void 0:void 0)}var Dt=function(t,e){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t&&this.set(t)}var n,o,i;return n=r,o=[{key:"set",value:function(t,e,r){var n=this;function o(t,e,r){var o=Lt(e);if(!o)throw new Error("header name must be a non-empty string");var i=X.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||e]=Mt(t))}var i,a,s,u,l,c=function(t,e){return X.forEach(t,(function(t,r){return o(t,r,e)}))};return X.isPlainObject(t)||t instanceof this.constructor?c(t,e):X.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?c((l={},(i=t)&&i.split("\n").forEach((function(t){u=t.indexOf(":"),a=t.substring(0,u).trim().toLowerCase(),s=t.substring(u+1).trim(),!a||l[a]&&jt[a]||("set-cookie"===a?l[a]?l[a].push(s):l[a]=[s]:l[a]=l[a]?l[a]+", "+s:s)})),l),e):null!=t&&o(e,t,r),this}},{key:"get",value:function(t,e){if(t=Lt(t)){var r=X.findKey(this,t);if(r){var n=this[r];if(!e)return n;if(!0===e)return function(t){for(var e,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=n.exec(t);)r[e[1]]=e[2];return r}(n);if(X.isFunction(e))return e.call(this,n,r);if(X.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(t,e){if(t=Lt(t)){var r=X.findKey(this,t);return!(!r||void 0===this[r]||e&&!Ft(0,this[r],r,e))}return!1}},{key:"delete",value:function(t,e){var r=this,n=!1;function o(t){if(t=Lt(t)){var o=X.findKey(r,t);!o||e&&!Ft(0,r[o],o,e)||(delete r[o],n=!0)}}return X.isArray(t)?t.forEach(o):o(t),n}},{key:"clear",value:function(t){for(var e=Object.keys(this),r=e.length,n=!1;r--;){var o=e[r];t&&!Ft(0,this[o],o,t,!0)||(delete this[o],n=!0)}return n}},{key:"normalize",value:function(t){var e=this,r={};return X.forEach(this,(function(n,o){var i=X.findKey(r,o);if(i)return e[i]=Mt(n),void delete e[o];var a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))}(o):String(o).trim();a!==o&&delete e[o],e[a]=Mt(n),r[a]=!0})),this}},{key:"concat",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.constructor).concat.apply(t,[this].concat(r))}},{key:"toJSON",value:function(t){var e=Object.create(null);return X.forEach(this,(function(r,n){null!=r&&!1!==r&&(e[n]=t&&X.isArray(r)?r.join(", "):r)})),e}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var e,r=function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e)||function(t,e){if(t){if("string"==typeof t)return At(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return r[0]+": "+r[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],i=[{key:"from",value:function(t){return t instanceof this?t:new this(t)}},{key:"concat",value:function(t){for(var e=new this(t),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((function(t){return e.set(t)})),e}},{key:"accessor",value:function(t){var e=(this[It]=this[It]={accessors:{}}).accessors,r=this.prototype;function n(t){var n=Lt(t);e[n]||(function(t,e){var r=X.toCamelCase(" "+e);["get","set","has"].forEach((function(n){Object.defineProperty(t,n+r,{value:function(t,r,o){return this[n].call(this,e,t,r,o)},configurable:!0})}))}(r,t),e[n]=!0)}return X.isArray(t)?t.forEach(n):n(t),this}}],o&&Tt(n.prototype,o),i&&Tt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),r}();Dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.reduceDescriptors(Dt.prototype,(function(t,e){var r=t.value,n=e[0].toUpperCase()+e.slice(1);return{get:function(){return r},set:function(t){this[n]=t}}})),X.freezeMethods(Dt);const Bt=Dt;function Nt(t,e){var r=this||Pt,n=e||r,o=Bt.from(n.headers),i=n.data;return X.forEach(t,(function(t){i=t.call(r,i,o.normalize(),e?e.status:void 0)})),o.normalize(),i}function zt(t){return!(!t||!t.__CANCEL__)}function Gt(t,e,r){$.call(this,null==t?"canceled":t,$.ERR_CANCELED,e,r),this.name="CanceledError"}X.inherits(Gt,$,{__CANCEL__:!0});const Ut=Gt,qt=kt.hasStandardBrowserEnv?{write:function(t,e,r,n,o,i){var a=[t+"="+encodeURIComponent(e)];X.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),X.isString(n)&&a.push("path="+n),X.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Wt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Vt=kt.hasStandardBrowserEnv?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=X.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0};function Yt(t,e){if(t){if("string"==typeof t)return Zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zt(t,e):void 0}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ht(t,e){var r=0,n=function(t,e){t=t||10;var r,n=new Array(t),o=new Array(t),i=0,a=0;return e=void 0!==e?e:1e3,function(s){var u=Date.now(),l=o[a];r||(r=u),n[i]=s,o[i]=u;for(var c=a,f=0;c!==i;)f+=n[c++],c%=t;if((i=(i+1)%t)===a&&(a=(a+1)%t),!(u-r<e)){var h=l&&u-l;return h?Math.round(1e3*f/h):void 0}}}(50,250);return function(o){var i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-r,u=n(s);r=i;var l={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:o};l[e?"download":"upload"]=!0,t(l)}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Jt={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){var n,o,i,a=t.data,s=Bt.from(t.headers).normalize(),u=t.responseType,l=t.withXSRFToken;function c(){t.cancelToken&&t.cancelToken.unsubscribe(n),t.signal&&t.signal.removeEventListener("abort",n)}if(X.isFormData(a))if(kt.hasStandardBrowserEnv||kt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(o=s.getContentType())){var f=function(t){if(Array.isArray(t))return t}(i=o?o.split(";").map((function(t){return t.trim()})).filter(Boolean):[])||Xt(i)||Yt(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=f[0],p=f.slice(1);s.setContentType([h||"multipart/form-data"].concat(function(t){return function(t){if(Array.isArray(t))return Zt(t)}(t)||Xt(t)||Yt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(p)).join("; "))}var y=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(d+":"+v))}var g=Wt(t.baseURL,t.url);function m(){if(y){var n=Bt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders());!function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new $("Request failed with status code "+r.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),c()}),(function(t){r(t),c()}),{data:u&&"text"!==u&&"json"!==u?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:n,config:t,request:y}),y=null}}if(y.open(t.method.toUpperCase(),ct(g,t.params,t.paramsSerializer),!0),y.timeout=t.timeout,"onloadend"in y?y.onloadend=m:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(m)},y.onabort=function(){y&&(r(new $("Request aborted",$.ECONNABORTED,t,y)),y=null)},y.onerror=function(){r(new $("Network Error",$.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",n=t.transitional||dt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new $(e,n.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,t,y)),y=null},kt.hasStandardBrowserEnv&&(l&&X.isFunction(l)&&(l=l(t)),l||!1!==l&&Vt(g))){var b=t.xsrfHeaderName&&t.xsrfCookieName&&qt.read(t.xsrfCookieName);b&&s.set(t.xsrfHeaderName,b)}void 0===a&&s.setContentType(null),"setRequestHeader"in y&&X.forEach(s.toJSON(),(function(t,e){y.setRequestHeader(e,t)})),X.isUndefined(t.withCredentials)||(y.withCredentials=!!t.withCredentials),u&&"json"!==u&&(y.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&y.addEventListener("progress",Ht(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",Ht(t.onUploadProgress)),(t.cancelToken||t.signal)&&(n=function(e){y&&(r(!e||e.type?new Ut(null,t,y):e),y.abort(),y=null)},t.cancelToken&&t.cancelToken.subscribe(n),t.signal&&(t.signal.aborted?n():t.signal.addEventListener("abort",n)));var w,_=(w=/^([-+\w]{1,25})(:?\/\/|:)/.exec(g))&&w[1]||"";_&&-1===kt.protocols.indexOf(_)?r(new $("Unsupported protocol "+_+":",$.ERR_BAD_REQUEST,t)):y.send(a||null)}))}};X.forEach(Jt,(function(t,e){if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));var $t=function(t){return"- ".concat(t)},Qt=function(t){return X.isFunction(t)||null===t||!1===t};const te=function(t){for(var e,r,n=(t=X.isArray(t)?t:[t]).length,o={},i=0;i<n;i++){var a=void 0;if(r=e=t[i],!Qt(e)&&void 0===(r=Jt[(a=String(e)).toLowerCase()]))throw new $("Unknown adapter '".concat(a,"'"));if(r)break;o[a||"#"+i]=r}if(!r){var s=Object.entries(o).map((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t)||function(t,e){if(t){if("string"==typeof t)return Kt(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t),r=e[0],n=e[1];return"adapter ".concat(r," ")+(!1===n?"is not supported by the environment":"is not available in the build")})),u=n?s.length>1?"since :\n"+s.map($t).join("\n"):" "+$t(s[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r};function ee(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ut(null,t)}function re(t){return ee(t),t.headers=Bt.from(t.headers),t.data=Nt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),te(t.adapter||Pt.adapter)(t).then((function(e){return ee(t),e.data=Nt.call(t,t.transformResponse,e),e.headers=Bt.from(e.headers),e}),(function(e){return zt(e)||(ee(t),e&&e.response&&(e.response.data=Nt.call(t,t.transformResponse,e.response),e.response.headers=Bt.from(e.response.headers))),Promise.reject(e)}))}var ne=function(t){return t instanceof Bt?t.toJSON():t};function oe(t,e){e=e||{};var r={};function n(t,e,r){return X.isPlainObject(t)&&X.isPlainObject(e)?X.merge.call({caseless:r},t,e):X.isPlainObject(e)?X.merge({},e):X.isArray(e)?e.slice():e}function o(t,e,r){return X.isUndefined(e)?X.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function i(t,e){if(!X.isUndefined(e))return n(void 0,e)}function a(t,e){return X.isUndefined(e)?X.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function s(r,o,i){return i in e?n(r,o):i in t?n(void 0,r):void 0}var u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(t,e){return o(ne(t),ne(e),!0)}};return X.forEach(Object.keys(Object.assign({},t,e)),(function(n){var i=u[n]||o,a=i(t[n],e[n],n);X.isUndefined(a)&&i!==s||(r[n]=a)})),r}function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}var ae={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){ae[t]=function(r){return ie(r)===t||"a"+(e<1?"n ":" ")+t}}));var se={};ae.transitional=function(t,e,r){function n(t,e){return"[Axios v1.6.3] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,o,i){if(!1===t)throw new $(n(o," has been removed"+(e?" in "+e:"")),$.ERR_DEPRECATED);return e&&!se[o]&&(se[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,o,i)}};const ue={assertOptions:function(t,e,r){if("object"!==ie(t))throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),o=n.length;o-- >0;){var i=n[o],a=e[i];if(a){var s=t[i],u=void 0===s||a(s,i,t);if(!0!==u)throw new $("option "+i+" must be "+u,$.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new $("Unknown option "+i,$.ERR_BAD_OPTION)}},validators:ae};function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ce(t){var e=function(t,e){if("object"!=le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:String(e)}var fe=ue.validators,he=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaults=e,this.interceptors={request:new yt,response:new yt}}var e,r;return e=t,(r=[{key:"request",value:function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{};var r=e=oe(this.defaults,e),n=r.transitional,o=r.paramsSerializer,i=r.headers;void 0!==n&&ue.assertOptions(n,{silentJSONParsing:fe.transitional(fe.boolean),forcedJSONParsing:fe.transitional(fe.boolean),clarifyTimeoutError:fe.transitional(fe.boolean)},!1),null!=o&&(X.isFunction(o)?e.paramsSerializer={serialize:o}:ue.assertOptions(o,{encode:fe.function,serialize:fe.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();var a=i&&X.merge(i.common,i[e.method]);i&&X.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete i[t]})),e.headers=Bt.concat(a,i);var s=[],u=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(u=u&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));var l,c=[];this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));var f,h=0;if(!u){var p=[re.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),f=p.length,l=Promise.resolve(e);h<f;)l=l.then(p[h++],p[h++]);return l}f=s.length;var y=e;for(h=0;h<f;){var d=s[h++],v=s[h++];try{y=d(y)}catch(t){v.call(this,t);break}}try{l=re.call(this,y)}catch(t){return Promise.reject(t)}for(h=0,f=c.length;h<f;)l=l.then(c[h++],c[h++]);return l}},{key:"getUri",value:function(t){return ct(Wt((t=oe(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ce(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();X.forEach(["delete","get","head","options"],(function(t){he.prototype[t]=function(e,r){return this.request(oe(r||{},{method:t,url:e,data:(r||{}).data}))}})),X.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,o){return this.request(oe(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}he.prototype[t]=e(),he.prototype[t+"Form"]=e(!0)}));const pe=he;function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ve(n.key),n)}}function ve(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ye(e)?e:String(e)}const ge=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"function"!=typeof e)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(t){r=t}));var n=this;this.promise.then((function(t){if(n._listeners){for(var e=n._listeners.length;e-- >0;)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},e((function(t,e,o){n.reason||(n.reason=new Ut(t,e,o),r(n.reason))}))}var e,r,n;return e=t,n=[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}],(r=[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}},{key:"unsubscribe",value:function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}}}])&&de(e.prototype,r),n&&de(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var be={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(be).forEach((function(t){var e,r=function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e)||function(t,e){if(t){if("string"==typeof t)return me(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],o=r[1];be[o]=n}));const we=be;var _e=function t(e){var r=new pe(e),n=p(pe.prototype.request,r);return X.extend(n,pe.prototype,r,{allOwnKeys:!0}),X.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(oe(e,r))},n}(Pt);_e.Axios=pe,_e.CanceledError=Ut,_e.CancelToken=ge,_e.isCancel=zt,_e.VERSION="1.6.3",_e.toFormData=ot,_e.AxiosError=$,_e.Cancel=_e.CanceledError,_e.all=function(t){return Promise.all(t)},_e.spread=function(t){return function(e){return t.apply(null,e)}},_e.isAxiosError=function(t){return X.isObject(t)&&!0===t.isAxiosError},_e.mergeConfig=oe,_e.AxiosHeaders=Bt,_e.formToJSON=function(t){return Ot(X.isHTMLForm(t)?new FormData(t):t)},_e.getAdapter=te,_e.HttpStatusCode=we,_e.default=_e;const xe=_e;function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function ke(t){var e=function(t,e){if("object"!=Se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Se(e)?e:String(e)}const Oe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}var e,r;return e=t,(r=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ee="propertychange";function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function je(t){var e=function(t,e){if("object"!=Pe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pe(e)?e:String(e)}const Ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disposed=!1}var e,r;return e=t,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,je(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ae(t,e){return t>e?1:t<e?-1:0}function Te(t,e,r){if(t[0]<=e)return 0;var n=t.length;if(e<=t[n-1])return n-1;if("function"==typeof r){for(var o=1;o<n;++o){var i=t[o];if(i===e)return o;if(i<e)return r(e,t[o-1],i)>0?o-1:o}return n-1}if(r>0){for(var a=1;a<n;++a)if(t[a]<e)return a-1;return n-1}if(r<0){for(var s=1;s<n;++s)if(t[s]<=e)return s;return n-1}for(var u=1;u<n;++u){if(t[u]==e)return u;if(t[u]<e)return t[u-1]-e<e-t[u]?u-1:u}return n-1}function Re(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function Ie(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,o=0;o<n;o++)t[t.length]=r[o]}function Le(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Me(){return!0}function Fe(){return!1}function De(){}function Be(t){var e,r,n,o=!1;return function(){var i=Array.prototype.slice.call(arguments);return o&&this===n&&Le(i,r)||(o=!0,n=this,r=i,e=t.apply(this,arguments)),e}}function Ne(t){return function(){var e;try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}function ze(t){for(var e in t)delete t[e]}function Ge(t){var e;for(e in t)return!1;return!e}function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function qe(t){var e=function(t,e){if("object"!=Ue(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ue(e)?e:String(e)}function We(t){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},We(t)}function Ve(t,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ve(t,e)}var Ye=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=We(e),function(t,e){if(e&&("object"===Ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],We(t).constructor):e.apply(t,void 0))}(this,e)).eventTarget_=t,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(e,t),r=e,n=[{key:"addEventListener",value:function(t,e){if(t&&e){var r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);n.includes(e)||n.push(e)}}},{key:"dispatchEvent",value:function(t){var e="string"==typeof t,r=e?t:t.type,n=this.listeners_&&this.listeners_[r];if(n){var o=e?new Oe(t):t;o.target||(o.target=this.eventTarget_||this);var i,a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,s[r]=0),++a[r];for(var u=0,l=n.length;u<l;++u)if(!1===(i="handleEvent"in n[u]?n[u].handleEvent(o):n[u].call(this,o))||o.propagationStopped){i=!1;break}if(0==--a[r]){var c=s[r];for(delete s[r];c--;)this.removeEventListener(r,De);delete a[r]}return i}}},{key:"disposeInternal",value:function(){this.listeners_&&ze(this.listeners_)}},{key:"getListeners",value:function(t){return this.listeners_&&this.listeners_[t]||void 0}},{key:"hasListener",value:function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(t,e){if(this.listeners_){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=De,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qe(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ce);const Ze=Ye,Xe="change",He="contextmenu",Ke="click",Je="keydown",$e="keypress",Qe="touchmove",tr="wheel";function er(t,e,r,n,o){if(n&&n!==t&&(r=r.bind(n)),o){var i=r;r=function(){t.removeEventListener(e,r),i.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function rr(t,e,r,n){return er(t,e,r,n,!0)}function nr(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),ze(t))}function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==or(e)?e:String(e)}function ar(t){return ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ar(t)}function sr(t,e){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sr(t,e)}var ur=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,r){return e=ar(e),function(t,e){if(e&&("object"===or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ar(t).constructor):e.apply(t,void 0))}(this,e)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(Xe)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=er(this,t[o],e);return n}return er(this,t,e)}},{key:"onceInternal",value:function(t,e){var r;if(Array.isArray(t)){var n=t.length;r=new Array(n);for(var o=0;o<n;++o)r[o]=rr(this,t[o],e)}else r=rr(this,t,e);return e.ol_key=r,r}},{key:"unInternal",value:function(t,e){var r=e.ol_key;if(r)lr(r);else if(Array.isArray(t))for(var n=0,o=t.length;n<o;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ir(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ze);function lr(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)nr(t[e]);else nr(t)}ur.prototype.on,ur.prototype.once,ur.prototype.un;const cr=ur;function fr(){throw new Error("Unimplemented abstract method.")}var hr=0;function pr(t){return t.ol_uid||(t.ol_uid=String(++hr))}function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gr(n.key),n)}}function vr(t,e,r){return e&&dr(t.prototype,e),r&&dr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gr(t){var e=function(t,e){if("object"!=yr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yr(e)?e:String(e)}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e,r){return e=_r(e),function(t,e){if(e&&("object"===yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wr(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],_r(t).constructor):e.apply(t,r))}function wr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}function xr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sr(t,e)}function Sr(t,e){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sr(t,e)}var kr=function(t){function e(t,r,n){var o;return mr(this,e),(o=br(this,e,[t])).key=r,o.oldValue=n,o}return xr(e,t),vr(e)}(Oe);const Or=function(t){function e(t){var r;return mr(this,e),(r=br(this,e)).on,r.once,r.un,pr(wr(r)),r.values_=null,void 0!==t&&r.setProperties(t),r}return xr(e,t),vr(e,[{key:"get",value:function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"getPropertiesInternal",value:function(){return this.values_}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(t,e){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new kr(r,t,e)),r=Ee,this.hasListener(r)&&this.dispatchEvent(new kr(r,t,e))}},{key:"addChangeListener",value:function(t,e){this.addEventListener("change:".concat(t),e)}},{key:"removeChangeListener",value:function(t,e){this.removeEventListener("change:".concat(t),e)}},{key:"set",value:function(t,e,r){var n=this.values_||(this.values_={});if(r)n[t]=e;else{var o=n[t];n[t]=e,o!==e&&this.notify(t,o)}}},{key:"setProperties",value:function(t,e){for(var r in t)this.set(r,t[r],e)}},{key:"applyProperties",value:function(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}},{key:"unset",value:function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],Ge(this.values_)&&(this.values_=null),e||this.notify(t,r)}}}]),e}(cr),Er="opacity",Pr="visible",jr="extent",Cr="zIndex",Ar="maxResolution",Tr="minResolution",Rr="maxZoom",Ir="minZoom",Lr="source";function Mr(t,e){if(!t)throw new Error(e)}function Fr(t,e,r){return Math.min(Math.max(t,e),r)}function Dr(t,e,r,n,o,i){var a=o-r,s=i-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=o,n=i):u>0&&(r+=a*u,n+=s*u)}return Br(t,e,r,n)}function Br(t,e,r,n){var o=r-t,i=n-e;return o*o+i*i}function Nr(t){return t*Math.PI/180}function zr(t,e){var r=t%e;return r*e<0?r+e:r}function Gr(t,e,r){return t+r*(e-t)}function Ur(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function qr(t,e){return Math.floor(Ur(t,e))}function Wr(t,e){return Math.ceil(Ur(t,e))}function Vr(t){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(t)}function Yr(t){var e=function(t,e){if("object"!=Vr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vr(e)?e:String(e)}function Zr(){return Zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Zr.apply(this,arguments)}function Xr(t){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xr(t)}function Hr(t,e){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hr(t,e)}var Kr=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Xr(e),function(t,e){if(e&&("object"===Vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xr(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un,r.background_=t.background;var n=Object.assign({},t);return"object"===Vr(t.properties)&&(delete n.properties,Object.assign(n,t.properties)),n[Er]=void 0!==t.opacity?t.opacity:1,Mr("number"==typeof n[Er],"Layer opacity must be a number"),n[Pr]=void 0===t.visible||t.visible,n[Cr]=t.zIndex,n[Ar]=void 0!==t.maxResolution?t.maxResolution:1/0,n[Tr]=void 0!==t.minResolution?t.minResolution:0,n[Ir]=void 0!==t.minZoom?t.minZoom:-1/0,n[Rr]=void 0!==t.maxZoom?t.maxZoom:1/0,r.className_=void 0!==n.className?n.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hr(t,e)}(e,t),r=e,(n=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=Fr(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return fr()}},{key:"getLayerStatesArray",value:function(t){return fr()}},{key:"getExtent",value:function(){return this.get(jr)}},{key:"getMaxResolution",value:function(){return this.get(Ar)}},{key:"getMinResolution",value:function(){return this.get(Tr)}},{key:"getMinZoom",value:function(){return this.get(Ir)}},{key:"getMaxZoom",value:function(){return this.get(Rr)}},{key:"getOpacity",value:function(){return this.get(Er)}},{key:"getSourceState",value:function(){return fr()}},{key:"getVisible",value:function(){return this.get(Pr)}},{key:"getZIndex",value:function(){return this.get(Cr)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(jr,t)}},{key:"setMaxResolution",value:function(t){this.set(Ar,t)}},{key:"setMinResolution",value:function(t){this.set(Tr,t)}},{key:"setMaxZoom",value:function(t){this.set(Rr,t)}},{key:"setMinZoom",value:function(t){this.set(Ir,t)}},{key:"setOpacity",value:function(t){Mr("number"==typeof t,"Layer opacity must be a number"),this.set(Er,t)}},{key:"setVisible",value:function(t){this.set(Pr,t)}},{key:"setZIndex",value:function(t){this.set(Cr,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),Zr(Xr(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yr(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const Jr=Kr,$r="add",Qr="remove";function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nn(n.key),n)}}function rn(t,e,r){return e&&en(t.prototype,e),r&&en(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nn(t){var e=function(t,e){if("object"!=tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tn(e)?e:String(e)}function on(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function an(t,e,r){return e=sn(e),function(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],sn(t).constructor):e.apply(t,r))}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ln(t,e)}function ln(t,e){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ln(t,e)}var cn="length",fn=function(t){function e(t,r,n){var o;return on(this,e),(o=an(this,e,[t])).element=r,o.index=n,o}return un(e,t),rn(e)}(Oe),hn=function(t){function e(t,r){var n;if(on(this,e),(n=an(this,e)).on,n.once,n.un,r=r||{},n.unique_=!!r.unique,n.array_=t||[],n.unique_)for(var o=0,i=n.array_.length;o<i;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return un(e,t),rn(e,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(cn)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new fn($r,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new fn(Qr,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new fn(Qr,r,t)),this.dispatchEvent(new fn($r,e,t))}}},{key:"updateLength_",value:function(){this.set(cn,this.array_.length)}},{key:"assertUnique_",value:function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Error("Duplicate item added to a unique collection")}}]),e}(Or);const pn=hn,yn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function dn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(t){for(var e=[1/0,1/0,-1/0,-1/0],r=0,n=t.length;r<n;++r)An(e,t[r]);return e}function gn(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function mn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function bn(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function wn(t,e){return xn(t,e[0],e[1])}function _n(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function xn(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function Sn(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=e[0],s=e[1],u=yn.UNKNOWN;return a<r?u|=yn.LEFT:a>o&&(u|=yn.RIGHT),s<n?u|=yn.BELOW:s>i&&(u|=yn.ABOVE),u===yn.UNKNOWN&&(u=yn.INTERSECTING),u}function kn(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function On(t){return kn(1/0,1/0,-1/0,-1/0,t)}function En(t,e){var r=t[0],n=t[1];return kn(r,n,r,n,e)}function Pn(t,e,r,n,o){return Tn(On(o),t,e,r,n)}function jn(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Cn(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function An(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Tn(t,e,r,n,o){for(;r<n;r+=o)Rn(t,e[r],e[r+1]);return t}function Rn(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function In(t,e){var r;return(r=e(Mn(t)))||(r=e(Fn(t)))||(r=e(Wn(t)))?r:(r=e(qn(t)))||!1}function Ln(t){var e=0;return Zn(t)||(e=Vn(t)*Gn(t)),e}function Mn(t){return[t[0],t[1]]}function Fn(t){return[t[2],t[1]]}function Dn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Bn(t,e){var r;if("bottom-left"===e)r=Mn(t);else if("bottom-right"===e)r=Fn(t);else if("top-left"===e)r=qn(t);else{if("top-right"!==e)throw new Error("Invalid corner");r=Wn(t)}return r}function Nn(t,e,r,n,o){var i,a=function(t){if(Array.isArray(t))return t}(i=zn(t,e,r,n))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),8!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(i)||function(t,e){if(t){if("string"==typeof t)return dn(t,8);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dn(t,8):void 0}}(i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4],h=a[5],p=a[6],y=a[7];return kn(Math.min(s,l,f,p),Math.min(u,c,h,y),Math.max(s,l,f,p),Math.max(u,c,h,y),o)}function zn(t,e,r,n){var o=e*n[0]/2,i=e*n[1]/2,a=Math.cos(r),s=Math.sin(r),u=o*a,l=o*s,c=i*a,f=i*s,h=t[0],p=t[1];return[h-u+f,p-l-c,h-u-f,p-l+c,h+u-f,p+l+c,h+u+f,p+l-c,h-u+f,p-l-c]}function Gn(t){return t[3]-t[1]}function Un(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return Yn(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):On(n),n}function qn(t){return[t[0],t[3]]}function Wn(t){return[t[2],t[3]]}function Vn(t){return t[2]-t[0]}function Yn(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Zn(t){return t[2]<t[0]||t[3]<t[1]}function Xn(t,e,r,n){if(Zn(t))return On(r);var o=[];if(n>1)for(var i=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)o.push(t[0]+i*s/n,t[1],t[2],t[1]+a*s/n,t[2]-i*s/n,t[3],t[0],t[3]-a*s/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(o,o,2);for(var u=[],l=[],c=0,f=o.length;c<f;c+=2)u.push(o[c]),l.push(o[c+1]);return function(t,e,r){return kn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function Hn(t,e){var r=e.getExtent(),n=Dn(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var o=Vn(r),i=Math.floor((n[0]-r[0])/o)*o;t[0]-=i,t[2]-=i}return t}function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qn(n.key),n)}}function $n(t,e,r){return e&&Jn(t.prototype,e),r&&Jn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qn(t){var e=function(t,e){if("object"!=Kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kn(e)?e:String(e)}function to(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eo(t,e,r){return e=ro(e),function(t,e){if(e&&("object"===Kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],ro(t).constructor):e.apply(t,r))}function ro(t){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ro(t)}function no(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oo(t,e)}function oo(t,e){return oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oo(t,e)}var io=function(t){function e(t,r){var n;return to(this,e),(n=eo(this,e,[t])).layer=r,n}return no(e,t),$n(e)}(Oe),ao="layers",so=function(t){function e(t){var r;to(this,e),t=t||{};var n=Object.assign({},t);delete n.layers;var o=t.layers;return(r=eo(this,e,[n])).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(ao,r.handleLayersChanged_),o?Array.isArray(o)?o=new pn(o.slice(),{unique:!0}):Mr("function"==typeof o.getArray,"Expected `layers` to be an array or a `Collection`"):o=new pn(void 0,{unique:!0}),r.setLayers(o),r}return no(e,t),$n(e,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(nr),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(er(t,$r,this.handleLayersAdd_,this),er(t,Qr,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(nr);ze(this.listenerKeys_);for(var r=t.getArray(),n=0,o=r.length;n<o;n++){var i=r[n];this.registerLayerListeners_(i),this.dispatchEvent(new io("addlayer",i))}this.changed()}},{key:"registerLayerListeners_",value:function(t){var r=[er(t,Ee,this.handleLayerChange_,this),er(t,Xe,this.handleLayerChange_,this)];t instanceof e&&r.push(er(t,"addlayer",this.handleLayerGroupAdd_,this),er(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[pr(t)]=r}},{key:"handleLayerGroupAdd_",value:function(t){this.dispatchEvent(new io("addlayer",t.layer))}},{key:"handleLayerGroupRemove_",value:function(t){this.dispatchEvent(new io("removelayer",t.layer))}},{key:"handleLayersAdd_",value:function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new io("addlayer",e)),this.changed()}},{key:"handleLayersRemove_",value:function(t){var e=t.element,r=pr(e);this.listenerKeys_[r].forEach(nr),delete this.listenerKeys_[r],this.dispatchEvent(new io("removelayer",e)),this.changed()}},{key:"getLayers",value:function(){return this.get(ao)}},{key:"setLayers",value:function(t){var e=this.getLayers();if(e)for(var r=e.getArray(),n=0,o=r.length;n<o;++n)this.dispatchEvent(new io("removelayer",r[n]));this.set(ao,t)}},{key:"getLayersArray",value:function(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}},{key:"getLayerStatesArray",value:function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var n=this.getLayerState(),o=n.zIndex;t||void 0!==n.zIndex||(o=0);for(var i=r,a=e.length;i<a;i++){var s=e[i];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=Un(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=o)}return e}},{key:"getSourceState",value:function(){return"ready"}}]),e}(Jr);const uo=so,lo="prerender",co="postrender",fo="precompose",ho="rendercomplete",po={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var yo=42,vo=256,go={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};function mo(t){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mo(t)}function bo(t){var e=function(t,e){if("object"!=mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mo(e)?e:String(e)}var wo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}var e,r;return e=t,(r=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||go[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const _o=wo;function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function So(t){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},So(t)}function ko(t,e){return ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ko(t,e)}var Oo=6378137,Eo=Math.PI*Oo,Po=[-Eo,-Eo,Eo,Eo],jo=[-180,-85,180,85],Co=Oo*Math.log(Math.tan(Math.PI/2)),Ao=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[{code:t,units:"m",extent:Po,global:!0,worldExtent:jo,getPointResolution:function(t,e){return t/Math.cosh(e[1]/Oo)}}],n=So(n=e),function(t,e){if(e&&("object"===xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],So(r).constructor):n.apply(r,o));var r,n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(_o),To=[new Ao("EPSG:3857"),new Ao("EPSG:102100"),new Ao("EPSG:102113"),new Ao("EPSG:900913"),new Ao("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ao("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Ro(t){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro(t)}function Io(t){return Io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Io(t)}function Lo(t,e){return Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lo(t,e)}var Mo=[-180,-90,180,90],Fo=6378137*Math.PI/180,Do=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i=[{code:t,units:"degrees",extent:Mo,axisOrientation:r,global:!0,metersPerUnit:Fo,worldExtent:Mo}],o=Io(o=e),function(t,e){if(e&&("object"===Ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(n,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(o,i||[],Io(n).constructor):o.apply(n,i));var n,o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(_o),Bo=[new Do("CRS:84"),new Do("EPSG:4326","neu"),new Do("urn:ogc:def:crs:OGC:1.3:CRS84"),new Do("urn:ogc:def:crs:OGC:2:84"),new Do("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Do("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Do("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],No={},zo={};function Go(t,e,r){var n=t.getCode(),o=e.getCode();n in zo||(zo[n]={}),zo[n][o]=r}function Uo(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function qo(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function Wo(t,e){var r=Math.cos(e),n=Math.sin(e),o=t[0]*r-t[1]*n,i=t[1]*r+t[0]*n;return t[0]=o,t[1]=i,t}function Vo(t,e){return t[0]*=e,t[1]*=e,t}function Yo(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Zo(t,e){return Math.sqrt(Yo(t,e))}function Xo(t,e){if(e.canWrapX()){var r=Vn(e.getExtent()),n=function(t,e,r){var n=e.getExtent(),o=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(r=r||Vn(n),o=Math.floor((t[0]-n[0])/r)),o}(t,e,r);n&&(t[0]-=n*r)}return t}var Ho=6371008.8;function Ko(t,e,r){r=r||Ho;var n=Nr(t[1]),o=Nr(e[1]),i=(o-n)/2,a=Nr(e[0]-t[0])/2,s=Math.sin(i)*Math.sin(i)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}var Jo={info:1,warn:2,error:3,none:4},$o=Jo.info;function Qo(){var t;$o>Jo.warn||(t=console).warn.apply(t,arguments)}var ti=!0;function ei(t){ti=!(void 0===t||t)}function ri(t,e){if(void 0!==e)for(var r=0,n=t.length;r<n;++r)e[r]=t[r];else e=t.slice();return e}function ni(t,e){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function oi(t){!function(t,e){No[t]=e}(t.getCode(),t),Go(t,t,ri)}function ii(t){return"string"==typeof t?No[e=t]||No[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function ai(t,e,r,n){var o,i=(t=ii(t)).getPointResolutionFunc();if(i){if(o=i(e,r),n&&n!==t.getUnits()){var a=t.getMetersPerUnit();a&&(o=o*a/go[n])}}else{var s=t.getUnits();if("degrees"==s&&!n||"degrees"==n)o=e;else{var u=hi(t,ii("EPSG:4326"));if(u===ni&&"degrees"!==s)o=e*t.getMetersPerUnit();else{var l=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];o=(Ko((l=u(l,l,2)).slice(0,2),l.slice(2,4))+Ko(l.slice(4,6),l.slice(6,8)))/2}var c=n?go[n]:t.getMetersPerUnit();void 0!==c&&(o/=c)}}return o}function si(t){!function(t){t.forEach(oi)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Go(e,t,ri)}))}))}function ui(t,e){return t?"string"==typeof t?ii(t):t:ii(e)}function li(t,e){return ei(),yi(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function ci(t,e){var r=yi(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=zr(n+180,360)-180),r}function fi(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||hi(t,e)===ri)&&r}function hi(t,e){var r=function(t,e){var r;return t in zo&&e in zo[t]&&(r=zo[t][e]),r}(t.getCode(),e.getCode());return r||(r=ni),r}function pi(t,e){return hi(ii(t),ii(e))}function yi(t,e,r){return pi(e,r)(t,void 0,t.length)}function di(t,e,r,n){return Xn(t,pi(e,r),void 0,n)}var vi,gi,mi,bi=null;function wi(){return bi}function _i(t,e){return bi?yi(t,e,bi):t}function xi(t,e){return bi?yi(t,bi,e):(ti&&!qo(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(ti=!1,Qo("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Si(t,e){return bi?di(t,e,bi):t}function ki(t,e){return bi?di(t,bi,e):t}function Oi(t,e){if(!bi)return t;var r=ii(e).getMetersPerUnit(),n=bi.getMetersPerUnit();return r&&n?t*r/n:t}function Ei(t,e,r){return function(n,o,i,a,s){if(n){if(!o&&!e)return n;var u=e?0:i[0]*o,l=e?0:i[1]*o,c=s?s[0]:0,f=s?s[1]:0,h=t[0]+u/2+c,p=t[2]-u/2+c,y=t[1]+l/2+f,d=t[3]-l/2+f;h>p&&(p=h=(p+h)/2),y>d&&(d=y=(d+y)/2);var v=Fr(n[0],h,p),g=Fr(n[1],y,d);if(a&&r&&o){var m=30*o;v+=-m*Math.log(1+Math.max(0,h-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-p)/m),g+=-m*Math.log(1+Math.max(0,y-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-d)/m)}return[v,g]}}}function Pi(t){return t}function ji(t,e,r,n){var o=Vn(e)/r[0],i=Gn(e)/r[1];return n?Math.min(t,Math.max(o,i)):Math.min(t,Math.min(o,i))}function Ci(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),Fr(n,r/2,2*e)}function Ai(t,e,r,n,o){return r=void 0===r||r,function(i,a,s,u){if(void 0!==i){var l=n?ji(t,n,s,o):t;return r&&u?Ci(i,l,e):Fr(i,e,l)}}}function Ti(t){if(void 0!==t)return 0}function Ri(t){if(void 0!==t)return t}function Ii(t){return Math.pow(t,3)}function Li(t){return 1-Ii(1-t)}function Mi(t){return 3*t*t-2*t*t*t}function Fi(t){return t}si(To),si(Bo),vi=To,gi=function(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r){e[o]=Eo*t[o]/180;var i=Oo*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));i>Co?i=Co:i<-Co&&(i=-Co),e[o+1]=i}return e},mi=function(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r)e[o]=180*t[o]/Eo,e[o+1]=360*Math.atan(Math.exp(t[o+1]/Oo))/Math.PI-90;return e},Bo.forEach((function(t){vi.forEach((function(e){Go(t,e,gi),Go(e,t,mi)}))}));var Di,Bi="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Ni=Bi.includes("firefox"),zi=(Bi.includes("safari")&&!Bi.includes("chrom")&&(Bi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Bi)),Bi.includes("webkit")&&!Bi.includes("edge")),Gi=Bi.includes("macintosh"),Ui="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,qi="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Wi="undefined"!=typeof Image&&Image.prototype.decode,Vi=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Yi=new Array(6);function Zi(t){return Hi(t,1,0,0,1,0,0)}function Xi(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],f=e[3],h=e[4],p=e[5];return t[0]=r*u+o*l,t[1]=n*u+i*l,t[2]=r*c+o*f,t[3]=n*c+i*f,t[4]=r*h+o*p+a,t[5]=n*h+i*p+s,t}function Hi(t,e,r,n,o,i,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t}function Ki(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function Ji(t,e,r){return Xi(t,Hi(Yi,e,0,0,r,0,0))}function $i(t,e,r,n,o,i,a,s){var u=Math.sin(i),l=Math.cos(i);return t[0]=n*l,t[1]=o*u,t[2]=-n*u,t[3]=o*l,t[4]=a*n*l-s*n*u+e,t[5]=a*o*u+s*o*l+r,t}function Qi(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];Mr(0!==n,"Transformation matrix cannot be inverted");var o=e[0],i=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-i/n,t[2]=-a/n,t[3]=o/n,t[4]=(a*l-s*u)/n,t[5]=-(o*l-i*u)/n,t}function ta(t){var e="matrix("+t.join(", ")+")";if(qi)return e;var r=Di||(Di=document.createElement("div"));return r.style.transform=e,r.style.transform}function ea(t,e,r,n,o,i){i=i||[];for(var a=0,s=e;s<r;s+=n){var u=t[s],l=t[s+1];i[a++]=o[0]*u+o[2]*l+o[4],i[a++]=o[1]*u+o[3]*l+o[5]}return i&&i.length!=a&&(i.length=a),i}function ra(t,e,r,n,o,i,a){a=a||[];for(var s=Math.cos(o),u=Math.sin(o),l=i[0],c=i[1],f=0,h=e;h<r;h+=n){var p=t[h]-l,y=t[h+1]-c;a[f++]=l+p*s-y*u,a[f++]=c+p*u+y*s;for(var d=h+2;d<h+n;++d)a[f++]=t[d]}return a&&a.length!=f&&(a.length=f),a}function na(t){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(t)}function oa(t){var e=function(t,e){if("object"!=na(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==na(e)?e:String(e)}function ia(t){return ia=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ia(t)}function aa(t,e){return aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aa(t,e)}var sa=[1,0,0,1,0,0],ua=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,r){return e=ia(e),function(t,e){if(e&&("object"===na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ia(t).constructor):e.apply(t,void 0))}(this,e)).extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Be((function(e,r,n){if(!n)return t.getSimplifiedGeometry(r);var o=t.clone();return o.applyTransform(n),o.getSimplifiedGeometry(r)})),t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aa(t,e)}(e,t),r=e,n=[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return fr()}},{key:"closestPointXY",value:function(t,e,r,n){return fr()}},{key:"containsXY",value:function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return fr()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&On(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}},{key:"rotate",value:function(t,e){fr()}},{key:"scale",value:function(t,e,r){fr()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return fr()}},{key:"getType",value:function(){return fr()}},{key:"applyTransform",value:function(t){fr()}},{key:"intersectsExtent",value:function(t){return fr()}},{key:"translate",value:function(t,e){fr()}},{key:"transform",value:function(t,e){var r=ii(t),n="tile-pixels"==r.getUnits()?function(t,n,o){var i=r.getExtent(),a=r.getWorldExtent(),s=Gn(a)/Gn(i);return $i(sa,a[0],a[3],s,-s,0,0,0),ea(t,0,t.length,o,sa,n),pi(r,e)(t,n,o)}:pi(r,e);return this.applyTransform(n),this}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oa(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const la=ua;function ca(t){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(t)}function fa(t){var e=function(t,e){if("object"!=ca(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ca(e)?e:String(e)}function ha(t){return ha=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ha(t)}function pa(t,e){return pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pa(t,e)}var ya=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,r){return e=ha(e),function(t,e){if(e&&("object"===ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ha(t).constructor):e.apply(t,void 0))}(this,e)).layout="XY",t.stride=2,t.flatCoordinates,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pa(t,e)}(e,t),r=e,n=[{key:"computeExtent",value:function(t){return Pn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return fr()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=va(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,e){fr()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=va(t);else{for(var o=0;o<r;++o){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=da(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();ra(r,0,r.length,n,t,e,r),this.changed()}}},{key:"scale",value:function(t,e,r){void 0===e&&(e=t),r||(r=Dn(this.getExtent()));var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,r,n,o,i,a,s){s=s||[];for(var u=a[0],l=a[1],c=0,f=0;f<r;f+=n){var h=t[f]-u,p=t[f+1]-l;s[c++]=u+o*h,s[c++]=l+i*p;for(var y=f+2;y<f+n;++y)s[c++]=t[y]}s&&s.length!=c&&(s.length=c)}(n,0,n.length,o,t,e,r,n),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();!function(t,e,r,n,o,i,a){a=a||[];for(var s=0,u=0;u<r;u+=n){a[s++]=t[u]+o,a[s++]=t[u+1]+i;for(var l=u+2;l<u+n;++l)a[s++]=t[l]}a&&a.length!=s&&(a.length=s)}(r,0,r.length,n,t,e,r),this.changed()}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fa(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(la);function da(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function va(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const ga=ya;function ma(t,e,r,n,o,i,a){var s,u=t[e],l=t[e+1],c=t[r]-u,f=t[r+1]-l;if(0===c&&0===f)s=e;else{var h=((o-u)*c+(i-l)*f)/(c*c+f*f);if(h>1)s=r;else{if(h>0){for(var p=0;p<n;++p)a[p]=Gr(t[e+p],t[r+p],h);return void(a.length=n)}s=e}}for(var y=0;y<n;++y)a[y]=t[s+y];a.length=n}function ba(t,e,r,n,o){var i=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=Br(i,a,s,u);l>o&&(o=l),i=s,a=u}return o}function wa(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i];o=ba(t,e,s,n,o),e=s}return o}function _a(t,e,r,n,o,i,a,s,u,l,c){if(e==r)return l;var f,h;if(0===o){if((h=Br(a,s,t[e],t[e+1]))<l){for(f=0;f<n;++f)u[f]=t[e+f];return u.length=n,h}return l}c=c||[NaN,NaN];for(var p=e+n;p<r;)if(ma(t,p-n,p,n,a,s,c),(h=Br(a,s,c[0],c[1]))<l){for(l=h,f=0;f<n;++f)u[f]=c[f];u.length=n,p+=n}else p+=n*Math.max((Math.sqrt(h)-Math.sqrt(l))/o|0,1);if(i&&(ma(t,r-n,e,n,a,s,c),(h=Br(a,s,c[0],c[1]))<l)){for(l=h,f=0;f<n;++f)u[f]=c[f];u.length=n}return l}function xa(t,e,r,n,o,i,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=_a(t,e,p,n,o,i,a,s,u,l,c),e=p}return l}function Sa(t,e,r,n){for(var o=0,i=r.length;o<i;++o)t[e++]=r[o];return e}function ka(t,e,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],s=0;s<n;++s)t[e++]=a[s];return e}function Oa(t,e,r,n,o){o=o||[];for(var i=0,a=0,s=r.length;a<s;++a){var u=ka(t,e,r[a],n);o[i++]=u,e=u}return o.length=i,o}function Ea(t,e,r,n,o){o=o||[];for(var i=0,a=0,s=r.length;a<s;++a){var u=Oa(t,e,r[a],n,o[i]);0===u.length&&(u[0]=e),o[i++]=u,e=u[u.length-1]}return o.length=i,o}function Pa(t,e,r,n,o,i,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)i[a++]=t[e],i[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var f=l.pop(),h=l.pop(),p=0,y=t[h],d=t[h+1],v=t[f],g=t[f+1],m=h+n;m<f;m+=n){var b=Dr(t[m],t[m+1],y,d,v,g);b>p&&(c=m,p=b)}p>o&&(u[(c-e)/n]=1,h+n<c&&l.push(h,c),c+n<f&&l.push(c,f))}for(var w=0;w<s;++w)u[w]&&(i[a++]=t[e+w*n],i[a++]=t[e+w*n+1]);return a}function ja(t,e,r,n,o,i,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=Pa(t,e,c,n,o,i,a),s.push(a),e=c}return a}function Ca(t,e){return e*Math.round(t/e)}function Aa(t,e,r,n,o,i,a){if(e==r)return a;var s,u,l=Ca(t[e],o),c=Ca(t[e+1],o);e+=n,i[a++]=l,i[a++]=c;do{if(s=Ca(t[e],o),u=Ca(t[e+1],o),(e+=n)==r)return i[a++]=s,i[a++]=u,a}while(s==l&&u==c);for(;e<r;){var f=Ca(t[e],o),h=Ca(t[e+1],o);if(e+=n,f!=s||h!=u){var p=s-l,y=u-c,d=f-l,v=h-c;p*v==y*d&&(p<0&&d<p||p==d||p>0&&d>p)&&(y<0&&v<y||y==v||y>0&&v>y)?(s=f,u=h):(i[a++]=s,i[a++]=u,l=s,c=u,s=f,u=h)}}return i[a++]=s,i[a++]=u,a}function Ta(t,e,r,n,o,i,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=Aa(t,e,c,n,o,i,a),s.push(a),e=c}return a}function Ra(t,e,r,n,o){o=void 0!==o?o:[];for(var i=0,a=e;a<r;a+=n)o[i++]=t.slice(a,a+n);return o.length=i,o}function Ia(t,e,r,n,o){o=void 0!==o?o:[];for(var i=0,a=0,s=r.length;a<s;++a){var u=r[a];o[i++]=Ra(t,e,u,n,o[i]),e=u}return o.length=i,o}function La(t,e,r,n,o){o=void 0!==o?o:[];for(var i=0,a=0,s=r.length;a<s;++a){var u=r[a];o[i++]=1===u.length&&u[0]===e?[]:Ia(t,e,u,n,o[i]),e=u[u.length-1]}return o.length=i,o}function Ma(t,e,r,n){for(var o=0,i=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function Fa(t,e,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var s=r[i];o+=Ma(t,e,s,n),e=s}return o}function Da(t){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(t)}function Ba(t){var e=function(t,e){if("object"!=Da(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Da(e)?e:String(e)}function Na(t){return Na=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Na(t)}function za(t,e){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},za(t,e)}var Ga=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=Na(e),function(t,e){if(e&&("object"===Da(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Na(t).constructor):e.apply(t,void 0))}(this,e)).maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(t[0])?n.setCoordinates(t,r):n.setFlatCoordinates(r,t),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&za(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){return new e(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,r,n){return n<bn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ba(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))}},{key:"getArea",value:function(){return Ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return Ra(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[];return r.length=Pa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ka(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ba(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Ua=Ga;function qa(t){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qa(t)}function Wa(t){var e=function(t,e){if("object"!=qa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qa(e)?e:String(e)}function Va(t){return Va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Va(t)}function Ya(t,e){return Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ya(t,e)}var Za=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=Va(e),function(t,e){if(e&&("object"===qa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Va(t).constructor):e.apply(t,void 0))}(this,e)).setCoordinates(t,r),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ya(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var o=this.flatCoordinates,i=Br(t,e,o[0],o[1]);if(i<n){for(var a=this.stride,s=0;s<a;++s)r[s]=o[s];return r.length=a,i}return n}},{key:"getCoordinates",value:function(){return this.flatCoordinates.slice()}},{key:"computeExtent",value:function(t){return En(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return xn(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Sa(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wa(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Xa=Za;function Ha(t,e,r,n,o){return!In(o,(function(o){return!Ka(t,e,r,n,o[0],o[1])}))}function Ka(t,e,r,n,o,i){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=i?c>i&&(l-s)*(i-u)-(o-s)*(c-u)>0&&a++:c<=i&&(l-s)*(i-u)-(o-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function Ja(t,e,r,n,o,i){if(0===r.length)return!1;if(!Ka(t,e,r[0],n,o,i))return!1;for(var a=1,s=r.length;a<s;++a)if(Ka(t,r[a-1],r[a],n,o,i))return!1;return!0}function $a(t,e,r,n,o,i,a){for(var s,u,l,c,f,h,p,y=o[i+1],d=[],v=0,g=r.length;v<g;++v){var m=r[v];for(c=t[m-n],h=t[m-n+1],s=e;s<m;s+=n)f=t[s],p=t[s+1],(y<=h&&p<=y||h<=y&&y<=p)&&(l=(y-h)/(p-h)*(f-c)+c,d.push(l)),c=f,h=p}var b=NaN,w=-1/0;for(d.sort(Ae),c=d[0],s=1,u=d.length;s<u;++s){f=d[s];var _=Math.abs(f-c);_>w&&Ja(t,e,r,n,l=(c+f)/2,y)&&(b=l,w=_),c=f}return isNaN(b)&&(b=o[i]),a?(a.push(b,y,w),a):[b,y,w]}function Qa(t,e,r,n,o){for(var i=[],a=0,s=r.length;a<s;++a){var u=r[a];i=$a(t,e,u,n,o,2*a,i),e=u[u.length-1]}return i}function ts(t,e,r,n,o){var i;for(e+=n;e<r;e+=n)if(i=o(t.slice(e-n,e),t.slice(e,e+n)))return i;return!1}function es(t,e,r,n,o){var i=Tn([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!Yn(o,i)&&(!!_n(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]||ts(t,e,r,n,(function(t,e){return function(t,e,r){var n=!1,o=Sn(t,e),i=Sn(t,r);if(o===yn.INTERSECTING||i===yn.INTERSECTING)n=!0;else{var a,s,u=t[0],l=t[1],c=t[2],f=t[3],h=e[0],p=e[1],y=r[0],d=r[1],v=(d-p)/(y-h);i&yn.ABOVE&&!(o&yn.ABOVE)&&(n=(a=y-(d-f)/v)>=u&&a<=c),n||!(i&yn.RIGHT)||o&yn.RIGHT||(n=(s=d-(y-c)*v)>=l&&s<=f),n||!(i&yn.BELOW)||o&yn.BELOW||(n=(a=y-(d-l)/v)>=u&&a<=c),n||!(i&yn.LEFT)||o&yn.LEFT||(n=(s=d-(y-u)*v)>=l&&s<=f)}return n}(o,t,e)})))}function rs(t,e,r,n,o){return!!(es(t,e,r,n,o)||Ka(t,e,r,n,o[0],o[1])||Ka(t,e,r,n,o[0],o[3])||Ka(t,e,r,n,o[2],o[1])||Ka(t,e,r,n,o[2],o[3]))}function ns(t,e,r,n,o){if(!rs(t,e,r[0],n,o))return!1;if(1===r.length)return!0;for(var i=1,a=r.length;i<a;++i)if(Ha(t,r[i-1],r[i],n,o)&&!es(t,r[i-1],r[i],n,o))return!1;return!0}function os(t,e,r,n){for(;e<r-n;){for(var o=0;o<n;++o){var i=t[e+o];t[e+o]=t[r-n+o],t[r-n+o]=i}e+=n,r-=n}}function is(t,e,r,n){for(var o=0,i=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];o+=(s-i)*(u+a),i=s,a=u}return 0===o?void 0:o>0}function as(t,e,r,n,o){o=void 0!==o&&o;for(var i=0,a=r.length;i<a;++i){var s=r[i],u=is(t,e,s,n);if(0===i){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=s}return!0}function ss(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i];if(!as(t,e,s,n,o))return!1;s.length&&(e=s[s.length-1])}return!0}function us(t,e,r,n,o){o=void 0!==o&&o;for(var i=0,a=r.length;i<a;++i){var s=r[i],u=is(t,e,s,n);(0===i?o&&u||!o&&!u:o&&!u||!o&&u)&&os(t,e,s,n),e=s}return e}function ls(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i)e=us(t,e,r[i],n,o);return e}function cs(t,e){for(var r,n=[],o=0,i=0,a=0,s=e.length;a<s;++a){var u=e[a],l=is(t,o,u,2);if(void 0===r&&(r=l),l===r)n.push(e.slice(i,a+1));else{if(0===n.length)continue;n[n.length-1].push(e[i])}i=a+1,o=u}return n}function fs(t){return fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(t)}function hs(t){var e=function(t,e){if("object"!=fs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fs(e)?e:String(e)}function ps(t){return ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(t)}function ys(t,e){return ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ys(t,e)}var ds=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e,r){return e=ps(e),function(t,e){if(e&&("object"===fs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ps(t).constructor):e.apply(t,void 0))}(this,e)).ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&n?(o.setFlatCoordinates(r,t),o.ends_=n):o.setCoordinates(t,r),o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ys(t,e)}(e,t),r=e,n=[{key:"appendLinearRing",value:function(t){this.flatCoordinates?Ie(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<bn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wa(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))}},{key:"containsXY",value:function(t,e){return Ja(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return Fa(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?us(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Ia(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Dn(this.getExtent());this.flatInteriorPoint_=$a(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new Xa(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new Ua(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],o=0,i=0,a=r.length;i<a;++i){var s=r[i],u=new Ua(e.slice(o,s),t);n.push(u),o=s}return n}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;as(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=us(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=Ta(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,"XY",n)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return ns(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Oa(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const vs=ds;function gs(t){if(Zn(t))throw new Error("Cannot create polygon from empty extent");var e=t[0],r=t[1],n=t[2],o=t[3],i=[e,r,e,o,n,o,n,r,e,r];return new ds(i,"XY",[i.length])}function ms(t){return ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ms(t)}function bs(t){var e=function(t,e){if("object"!=ms(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ms(e)?e:String(e)}function ws(t){return ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ws(t)}function _s(t,e){return _s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_s(t,e)}var xs=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=ws(e),function(t,e){if(e&&("object"===ms(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ws(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un,t=Object.assign({},t),r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=ui(t.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.nextCenter_=null,r.nextResolution_,r.nextRotation_,r.cancelAnchor_=void 0,t.projection&&ei(),t.center&&(t.center=xi(t.center,r.projection_)),t.extent&&(t.extent=ki(t.extent,r.projection_)),r.applyOptions_(t),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_s(t,e)}(e,t),r=e,n=[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var r in po)delete e[r];this.setProperties(e,!0);var n=function(t){var e,r,n,o=void 0!==t.minZoom?t.minZoom:0,i=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=ui(t.projection,"EPSG:3857"),f=c.getExtent(),h=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(h=!1,p=f),void 0!==t.resolutions){var y=t.resolutions;r=y[o],n=void 0!==y[i]?y[i]:y[y.length-1],e=t.constrainResolution?function(t,e,r,n){return e=void 0===e||e,function(o,i,a,s){if(void 0!==o){var u=t[0],l=t[t.length-1],c=r?ji(u,r,a,n):u;if(s)return e?Ci(o,c,l):Fr(o,l,c);var f=Math.min(c,o),h=Math.floor(Te(t,f,i));return t[h]>c&&h<t.length-1?t[h+1]:t[h]}}}(y,u,!h&&p,l):Ai(r,n,u,!h&&p,l)}else{var d=(f?Math.max(Vn(f),Gn(f)):360*go.degrees/c.getMetersPerUnit())/vo/Math.pow(2,0),v=d/Math.pow(2,28);void 0!==(r=t.maxResolution)?o=0:r=d/Math.pow(a,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,i):d/Math.pow(a,i):v),i=o+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,i-o),e=t.constrainResolution?function(t,e,r,n,o,i){return n=void 0===n||n,r=void 0!==r?r:0,function(a,s,u,l){if(void 0!==a){var c=o?ji(e,o,u,i):e;if(l)return n?Ci(a,c,r):Fr(a,r,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),h=-s*(.5-1e-9)+.5,p=Math.min(c,a),y=Math.floor(Math.log(e/p)/Math.log(t)+h),d=Math.max(f,y);return Fr(e/Math.pow(t,d),r,c)}}}(a,r,n,u,!h&&p,l):Ai(r,n,u,!h&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:o,zoomFactor:a}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;var o=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ei(t.extent,t.constrainOnlyCenter,e)}var r=ui(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ei(n,!1,!1)}return Pi}(t),i=n.constraint,a=function(t){var e,r,n;if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(n=Nr(5),function(t,e){return e||void 0===t?t:Math.abs(t)<=n?0:t}):!1===o?Ri:"number"==typeof o?(e=o,r=2*Math.PI/e,function(t,e){return e?t:void 0!==t?t=Math.floor(t/r+.5)*r:void 0}):Ri}return Ti}(t);this.constraints_={center:o,resolution:i,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var r=this.getCenterInternal();if(r){var n=t||[0,0,0,0];e=e||[0,0,0,0];var o=this.getResolution(),i=o/2*(n[3]-e[3]+e[1]-n[1]),a=o/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+i,r[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=Object.assign({},n)).center=xi(n.center,this.getProjection())),n.anchor&&((n=Object.assign({},n)).anchor=xi(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var e,r=arguments.length;r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r);for(var n=0;n<r&&!this.isDef();++n){var o=arguments[n];o.center&&this.setCenterInternal(o.center),void 0!==o.zoom?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),void 0!==o.rotation&&this.setRotation(o.rotation)}if(n!==r){for(var i=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,u=this.targetRotation_,l=[];n<r;++n){var c=arguments[n],f={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||Mi,callback:e};if(c.center&&(f.sourceCenter=a,f.targetCenter=c.center.slice(),a=f.targetCenter),void 0!==c.zoom?(f.sourceResolution=s,f.targetResolution=this.getResolutionForZoom(c.zoom),s=f.targetResolution):c.resolution&&(f.sourceResolution=s,f.targetResolution=c.resolution,s=f.targetResolution),void 0!==c.rotation){f.sourceRotation=u;var h=zr(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+h,u=f.targetRotation}ks(f)?f.complete=!0:i+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}else e&&Ss(e,!0)}},{key:"getAnimating",value:function(){return this.hints_[0]>0}},{key:"getInteracting",value:function(){return this.hints_[1]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&Ss(n[0].callback,!1),!t)for(var o=0,i=n.length;o<i;++o){var a=n[o];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],o=!0,i=0,a=n.length;i<a;++i){var s=n[i];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):o=!1;var c=s.easing(l);if(s.sourceCenter){var f=s.sourceCenter[0],h=s.sourceCenter[1],p=s.targetCenter[0],y=s.targetCenter[1];this.nextCenter_=s.targetCenter;var d=f+c*(p-f),v=h+c*(y-h);this.targetCenter_=[d,v]}if(s.sourceResolution&&s.targetResolution){var g=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(g,0,m,!0);this.targetCenter_=this.calculateCenterZoom(b,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var w=1===c?zr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(o){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=n[0].callback;x&&Ss(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(Wo(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),Uo(r,e)),r}},{key:"calculateCenterZoom",value:function(t,e){var r,n=this.getCenterInternal(),o=this.getResolution();return void 0!==n&&void 0!==o&&(r=[e[0]-t*(e[0]-n[0])/o,e[1]-t*(e[1]-n[1])/o]),r}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?_i(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(po.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){return Si(this.calculateExtentInternal(t),this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();Mr(e,"The view center is not defined");var r=this.getResolution();Mr(void 0!==r,"The view resolution is not defined");var n=this.getRotation();return Mr(void 0!==n,"The view rotation is not defined"),Nn(e,r,n,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(po.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal(ki(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var r=Vn(t)/e[0],n=Gn(t)/e[1];return Math.max(r,n)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(e/r)/Math.log(t);return function(r){return e/Math.pow(t,r*n)}}},{key:"getRotation",value:function(){return this.get(po.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/o}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),o=this.padding_;if(o){var i=this.getViewportSizeMinusPadding_();n=Os(n,this.getViewportSize_(),[i[0]/2+o[3],i[1]/2+o[0]],e,r)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var o=Te(this.resolutions_,t,1);n=o,e=this.resolutions_[o],r=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Fr(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,Fr(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var r;if(Mr(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t))Mr(!Zn(t),"Cannot fit empty extent provided as `geometry`"),r=gs(ki(t,this.getProjection()));else if("Circle"===t.getType()){var n=ki(t.getExtent(),this.getProjection());(r=gs(n)).rotate(this.getRotation(),Dn(n))}else{var o=wi();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),o=t.getFlatCoordinates(),i=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0,f=o.length;c<f;c+=i){var h=o[c]*r-o[c+1]*n,p=o[c]*n+o[c+1]*r;a=Math.min(a,h),s=Math.min(s,p),u=Math.max(u,h),l=Math.max(l,p)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var r=(e=e||{}).size;r||(r=this.getViewportSizeMinusPadding_());var n,o=void 0!==e.padding?e.padding:[0,0,0,0],i=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var a=this.rotatedExtentForGeometry(t),s=this.getResolutionForExtentInternal(a,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);s=isNaN(s)?n:Math.max(s,n),s=this.getConstrainedResolution(s,i?0:1);var u=this.getRotation(),l=Math.sin(u),c=Math.cos(u),f=Dn(a);f[0]+=(o[1]-o[3])/2*s,f[1]+=(o[0]-o[2])/2*s;var h=f[0]*c-f[1]*l,p=f[1]*c+f[0]*l,y=this.getConstrainedCenter([h,p],s),d=e.callback?e.callback:De;void 0!==e.duration?this.animateInternal({resolution:s,center:y,duration:e.duration,easing:e.easing},d):(this.targetResolution_=s,this.targetCenter_=y,this.applyTargetState_(!1,!0),Ss(d,!0))}},{key:"centerOn",value:function(t,e,r){this.centerOnInternal(xi(t,this.getProjection()),e,r)}},{key:"centerOnInternal",value:function(t,e,r){this.setCenterInternal(Os(t,e,r,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,r,n){var o,i=this.padding_;if(i&&t){var a=this.getViewportSizeMinusPadding_(-r),s=Os(t,n,[a[0]/2+i[3],a[1]/2+i[0]],e,r);o=[t[0]-s[0],t[1]-s[1]]}return o}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=_i(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&xi(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=xi(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?xi(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(n),i=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,i,o,r,this.calculateCenterShift(this.targetCenter_,i,n,o));this.get(po.ROTATION)!==n&&this.set(po.ROTATION,n),this.get(po.RESOLUTION)!==i&&(this.set(po.RESOLUTION,i),this.set("zoom",this.getZoom(),!0)),a&&this.get(po.CENTER)&&qo(this.get(po.CENTER),a)||this.set(po.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,r){t=void 0!==t?t:200;var n=e||0,o=this.constraints_.rotation(this.targetRotation_),i=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,n,i),s=this.constraints_.center(this.targetCenter_,a,i,!1,this.calculateCenterShift(this.targetCenter_,a,o,i));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=s,void this.applyTargetState_();r=r||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===o&&this.getCenterInternal()&&qo(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:s,resolution:a,duration:t,easing:Li,anchor:r}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(1,1)}},{key:"endInteraction",value:function(t,e,r){r=r&&xi(r,this.getProjection()),this.endInteractionInternal(t,e,r)}},{key:"endInteractionInternal",value:function(t,e,r){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,r))}},{key:"getConstrainedCenter",value:function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)}},{key:"getConstrainedZoom",value:function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,r)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);function Ss(t,e){setTimeout((function(){t(e)}),0)}function ks(t){return!(t.sourceCenter&&t.targetCenter&&!qo(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Os(t,e,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),s=t[0]*i-t[1]*a,u=t[1]*i+t[0]*a;return[(s+=(e[0]/2-r[0])*n)*i-(u+=(r[1]-e[1]/2)*n)*(a=-a),u*i+s*a]}const Es=xs;function Ps(t){return Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ps(t)}function js(t){var e=function(t,e){if("object"!=Ps(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ps(e)?e:String(e)}function Cs(){return Cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=As(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Cs.apply(this,arguments)}function As(t){return As=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},As(t)}function Ts(t,e){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ts(t,e)}var Rs=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=Object.assign({},t);delete n.source,(r=function(t,e,r){return e=As(e),function(t,e){if(e&&("object"===Ps(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],As(t).constructor):e.apply(t,r))}(this,e,[n])).on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,r.sourceReady_=!1,r.rendered=!1,t.render&&(r.render=t.render),t.map&&r.setMap(t.map),r.addChangeListener(Lr,r.handleSourcePropertyChange_);var o=t.source?t.source:null;return r.setSource(o),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ts(t,e)}(e,t),r=e,n=[{key:"getLayersArray",value:function(t){return(t=t||[]).push(this),t}},{key:"getLayerStatesArray",value:function(t){return(t=t||[]).push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(Lr)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var t=this.getSource();return t?t.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var t=this;this.sourceChangeKey_&&(nr(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var e=this.getSource();e&&(this.sourceChangeKey_=er(e,Xe,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((function(){t.dispatchEvent("sourceready")}),0))),this.changed()}},{key:"getFeatures",value:function(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}},{key:"getData",value:function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}},{key:"isVisible",value:function(t){var e,r,n=this,o=this.getMapInternal();!t&&o&&(t=o.getView()),!(e=t instanceof Es?{viewState:t.getState(),extent:t.calculateExtent()}:t).layerStatesArray&&o&&(e.layerStatesArray=o.getLayerGroup().getLayerStatesArray()),r=e.layerStatesArray?e.layerStatesArray.find((function(t){return t.layer===n})):this.getLayerState();var i=this.getExtent();return Is(r,e.viewState)&&(!i||Yn(i,e.extent))}},{key:"getAttributions",value:function(t){if(!this.isVisible(t))return[];var e,r=this.getSource();if(r&&(e=r.getAttributions()),!e)return[];var n=e(t instanceof Es?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}},{key:"render",value:function(t,e){var r=this.getRenderer();return r.prepareFrame(t)?(this.rendered=!0,r.renderFrame(t,e)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(t){t||this.unrender(),this.set("map",t)}},{key:"getMapInternal",value:function(){return this.get("map")}},{key:"setMap",value:function(t){this.mapPrecomposeKey_&&(nr(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(nr(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=er(t,fo,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);Mr(!e.some((function(t){return t.layer===r.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(r)}),this),this.mapRenderKey_=er(this,Xe,t.render,t),this.changed())}},{key:"setSource",value:function(t){this.set(Lr,t)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),Cs(As(e.prototype),"disposeInternal",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,js(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Jr);function Is(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const Ls=Rs,Ms="preload",Fs="useInterimTilesOnError";function Ds(t){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(t)}function Bs(t){var e=function(t,e){if("object"!=Ds(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ds(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ds(e)?e:String(e)}function Ns(){return Ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ns.apply(this,arguments)}function zs(t){return zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zs(t)}function Gs(t,e){return Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gs(t,e)}var Us=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);return delete n.preload,delete n.useInterimTilesOnError,(r=function(t,e,r){return e=zs(e),function(t,e){if(e&&("object"===Ds(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],zs(t).constructor):e.apply(t,r))}(this,e,[n])).on,r.once,r.un,r.setPreload(void 0!==t.preload?t.preload:0),r.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gs(t,e)}(e,t),r=e,(n=[{key:"getPreload",value:function(){return this.get(Ms)}},{key:"setPreload",value:function(t){this.set(Ms,t)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(Fs)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(Fs,t)}},{key:"getData",value:function(t){return Ns(zs(e.prototype),"getData",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ls);const qs=Us;function Ws(t){return Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(t)}function Vs(t){var e=function(t,e){if("object"!=Ws(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ws(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ws(e)?e:String(e)}function Ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zs(){return Zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Zs.apply(this,arguments)}function Xs(t){return Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xs(t)}function Hs(t,e){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hs(t,e)}const Ks=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Xs(e),function(t,e){if(e&&("object"===Ws(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ys(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xs(t).constructor):e.apply(t,void 0))}(this,e)).ready=!0,r.boundHandleImageChange_=r.handleImageChange_.bind(Ys(r)),r.layer_=t,r.declutterExecutorGroup=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hs(t,e)}(e,t),r=e,(n=[{key:"getFeatures",value:function(t){return fr()}},{key:"getData",value:function(t){return null}},{key:"prepareFrame",value:function(t){return fr()}},{key:"renderFrame",value:function(t,e){return fr()}},{key:"loadedTileCallback",value:function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(t,e,r){var n=this;return function(o,i){var a=n.loadedTileCallback.bind(n,r,o);return t.forEachLoadedTile(e,o,i,a)}}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,o){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(t){var e=t.target;2!==e.getState()&&3!==e.getState()||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(Xe,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}},{key:"renderIfReadyAndVisible",value:function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,Zs(Xs(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cr);function Js(t){return Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(t)}function $s(t){return $s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$s(t)}function Qs(t,e){return Qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qs(t,e)}var tu=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=$s(e),function(t,e){if(e&&("object"===Js(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],$s(t).constructor):e.apply(t,r))}(this,e,[t])).inversePixelTransform=r,i.frameState=n,i.context=o,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qs(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Oe);const eu=tu,ru={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var nu={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};nu.max=nu.whitepoint[2].D65,nu.rgb=function(t,e){e=e||nu.whitepoint[2].E;var r,n,o,i=t[0]/e[0],a=t[1]/e[1],s=t[2]/e[2];return n=-.96924363628087*i+1.87596750150772*a+.041555057407175*s,o=.055630079696993*i+-.20397695888897*a+1.056971514242878*s,r=(r=3.240969941904521*i+-1.537383177570093*a+-.498610760293*s)>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1)),255*(o=Math.min(Math.max(0,o),1))]},ru.xyz=function(t,e){var r=t[0]/255,n=t[1]/255,o=t[2]/255,i=.21263900587151*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.71516867876775*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.072192315360733*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),a=.019330818715591*r+.11919477979462*n+.95053215224966*o;return[(.41239079926595*r+.35758433938387*n+.18048078840183*o)*(e=e||nu.whitepoint[2].E)[0],i*e[1],a*e[2]]};const ou=nu,iu={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,r){var n,o,i,a,s,u,l,c,f;return i=t[0],a=t[1],s=t[2],0===i?[0,0,0]:(e=e||"D65",r=r||2,n=a/(13*i)+4*(l=ou.whitepoint[r][e][0])/(l+15*(c=ou.whitepoint[r][e][1])+3*(f=ou.whitepoint[r][e][2]))||0,o=s/(13*i)+9*c/(l+15*c+3*f)||0,[9*(u=i>8?c*Math.pow((i+16)/116,3):c*i*.0011070564598794539)*n/(4*o)||0,u,u*(12-3*n-20*o)/(4*o)||0])}};ou.luv=function(t,e,r){var n,o,i,a,s,u,l,c,f,h,p;e=e||"D65",r=r||2,h=4*(l=ou.whitepoint[r][e][0])/(l+15*(c=ou.whitepoint[r][e][1])+3*(f=ou.whitepoint[r][e][2])),p=9*c/(l+15*c+3*f),n=4*(a=t[0])/(a+15*(s=t[1])+3*(u=t[2]))||0,o=9*s/(a+15*s+3*u)||0;var y=s/c;return[i=y<=.008856451679035631?903.2962962962961*y:116*Math.pow(y,1/3)-16,13*i*(n-h),13*i*(o-p)]};var au={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},xyz:function(t){return iu.xyz(au.luv(t))}};const su=au;iu.lchuv=function(t){var e=t[0],r=t[1],n=t[2],o=Math.sqrt(r*r+n*n),i=360*Math.atan2(n,r)/2/Math.PI;return i<0&&(i+=360),[e,o,i]},ou.lchuv=function(t){return iu.lchuv(ou.luv(t))};var uu=s(517);const lu=function(t){var e,r,n=[],o=1;if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),uu[t])n=uu[t].slice(),r="rgb";else if("transparent"===t)o=0,r="rgb",n=[0,0,0];else if("#"===t[0]){var i=t.slice(1),a=i.length;o=1,a<=4?(n=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],4===a&&(o=parseInt(i[3]+i[3],16)/255)):(n=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],8===a&&(o=parseInt(i[6]+i[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var s=e[1],u="cmyk"===(r=s.replace(/a$/,""))?4:"gray"===r?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===r&&(r=n.shift()),o=(n=n.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===r?255*t:"h"===r[0]?100*t:"l"!==r[0]||e?"lab"===r?125*t:"lch"===r?e<2?150*t:360*t:"o"!==r[0]||e?"oklab"===r?.4*t:"oklch"===r?e<2?.4*t:360*t:t:t:100*t;if("h"===r[e]||2===e&&"h"===r[r.length-1]){if(void 0!==cu[t])return cu[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>u?n.pop():1}else if(/[0-9](?:\s|\/|,)/.test(t)){var l;n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),r=(null===(l=t.match(/([a-z])/gi))||void 0===l||null===(l=l.join(""))||void 0===l?void 0:l.toLowerCase())||"rgb"}return{space:r,values:n,alpha:o}};var cu={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const fu={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,n,o,i,a=t[0]/360,s=t[1]/100,u=t[2]/100,l=0;if(0===s)return[i=255*u,i,i];for(e=2*u-(r=u<.5?u*(1+s):u+s-u*s),o=[0,0,0];l<3;)(n=a+1/3*-(l-1))<0?n++:n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,o[l++]=255*i;return o}};function hu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pu(t){return"string"==typeof t?t:xu(t)}ru.hsl=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a;return s===a?e=0:n===s?e=(o-i)/u:o===s?e=2+(i-n)/u:i===s&&(e=4+(n-o)/u),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?u/(s+a):u/(2-s-a)),100*r]};var yu=1024,du={},vu=0;function gu(t){if(4===t.length)return t;var e=t.slice();return e[3]=1,e}function mu(t){var e=ou.lchuv(ru.xyz(t));return e[3]=t[3],e}function bu(t){if(du.hasOwnProperty(t))return du[t];if(vu>=yu){var e=0;for(var r in du)0==(3&e++)&&(delete du[r],--vu)}var n=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw.apply(String,arguments)),t instanceof Number&&(t=+t);var r=lu(t);if(!r.space)return[];var n="h"===r.space[0]?fu.min:ru.min,o="h"===r.space[0]?fu.max:ru.max;return(e=Array(3))[0]=Math.min(Math.max(r.values[0],n[0]),o[0]),e[1]=Math.min(Math.max(r.values[1],n[1]),o[1]),e[2]=Math.min(Math.max(r.values[2],n[2]),o[2]),"h"===r.space[0]&&(e=fu.rgb(e)),e.push(Math.min(Math.max(r.alpha,0),1)),e}(t);if(4!==n.length)throw new Error('Failed to parse "'+t+'" as color');var o,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return hu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hu(t,e):void 0}}(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(isNaN(a))throw new Error('Failed to parse "'+t+'" as color')}}catch(t){i.e(t)}finally{i.f()}return _u(n),du[t]=n,++vu,n}function wu(t){return Array.isArray(t)?t:bu(t)}function _u(t){return t[0]=Fr(t[0]+.5|0,0,255),t[1]=Fr(t[1]+.5|0,0,255),t[2]=Fr(t[2]+.5|0,0,255),t[3]=Fr(t[3],0,1),t}function xu(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Su(t,e,r,n){var o;return o=r&&r.length?r.shift():qi?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",n)}function ku(t){var e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Ou(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+(parseInt(r.marginLeft,10)+parseInt(r.marginRight,10))}function Eu(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10))}function Pu(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function ju(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Cu(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Au(t){return Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(t)}function Tu(t){var e=function(t,e){if("object"!=Au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Au(e)?e:String(e)}function Ru(){return Ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ru.apply(this,arguments)}function Iu(t){return Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Iu(t)}function Lu(t,e){return Lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lu(t,e)}var Mu=[],Fu=null,Du=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Iu(e),function(t,e){if(e&&("object"===Au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Iu(t).constructor):e.apply(t,r))}(this,e,[t])).container=null,r.renderedResolution,r.tempTransform=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r.pixelContext_=null,r.frameState=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lu(t,e)}(e,t),r=e,n=[{key:"getImageData",value:function(t,e,r){var n;Fu||(Fu=Su(1,1,void 0,{willReadFrequently:!0})),Fu.clearRect(0,0,1,1);try{Fu.drawImage(t,e,r,1,1,0,0,1,1),n=Fu.getImageData(0,0,1,1).data}catch(t){return Fu=null,null}return n}},{key:"getBackground",value:function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}},{key:"useContainer",value:function(t,e,r){var n,o,i=this.getLayer().getClassName();if(t&&t.className===i&&(!r||t&&t.style.backgroundColor&&Le(wu(t.style.backgroundColor),wu(r)))){var a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(n=document.createElement("div")).className=i;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var u=(o=Su()).canvas;n.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=o}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(t,e,r){var n=qn(r),o=Wn(r),i=Fn(r),a=Mn(r);Ki(e.coordinateToPixelTransform,n),Ki(e.coordinateToPixelTransform,o),Ki(e.coordinateToPixelTransform,i),Ki(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Ki(s,n),Ki(s,o),Ki(s,i),Ki(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var o=new eu(t,this.inversePixelTransform,r,e);n.dispatchEvent(o)}}},{key:"preRender",value:function(t,e){this.frameState=e,this.dispatchRenderEvent_(lo,t,e)}},{key:"postRender",value:function(t,e){this.dispatchRenderEvent_(co,t,e)}},{key:"getRenderTransform",value:function(t,e,r,n,o,i,a){var s=o/2,u=i/2,l=n/e,c=-l,f=-t[0]+a,h=-t[1];return $i(this.tempTransform,s,u,l,c,-r,f,h)}},{key:"disposeInternal",value:function(){delete this.frameState,Ru(Iu(e.prototype),"disposeInternal",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tu(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ks);const Bu=Du,Nu={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function zu(t){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(t)}function Gu(t){var e=function(t,e){if("object"!=zu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zu(e)?e:String(e)}function Uu(t){return Uu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uu(t)}function qu(t,e){return qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qu(t,e)}var Wu=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},(o=function(t,e,r){return e=Uu(e),function(t,e){if(e&&("object"===zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Uu(t).constructor):e.apply(t,void 0))}(this,e)).tileCoord=t,o.state=r,o.interimTile=null,o.key="",o.transition_=void 0===n.transition?250:n.transition,o.transitionStarts_={},o.interpolate=!!n.interpolate,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qu(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){this.dispatchEvent(Xe)}},{key:"release",value:function(){this.state===Nu.ERROR&&this.setState(Nu.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){var t=this.interimTile;if(!t)return this;do{if(t.getState()==Nu.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){var t=this.interimTile;if(t){var e=this;do{if(t.getState()==Nu.LOADED){t.interimTile=null;break}t.getState()==Nu.LOADING?e=t:t.getState()==Nu.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==Nu.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){fr()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:Ii(n/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gu(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ze);const Vu=Wu;function Yu(t){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(t)}function Zu(t){var e=function(t,e){if("object"!=Yu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yu(e)?e:String(e)}function Xu(t){return Xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xu(t)}function Hu(t,e){return Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hu(t,e)}const Ku=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=Xu(e),function(t,e){if(e&&("object"===Yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xu(t).constructor):e.apply(t,void 0))}(this,e)).extent=t,i.pixelRatio_=n,i.resolution=r,i.state="function"==typeof o?0:o,i.image_=null,i.loader="function"==typeof o?o:null,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hu(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){this.dispatchEvent(Xe)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return this.image_}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){var t=this;if(0==this.state&&this.loader){this.state=1,this.changed();var e=this.getResolution(),r=Array.isArray(e)?e[0]:e;Ne((function(){return t.loader(t.getExtent(),r,t.getPixelRatio())})).then((function(e){"image"in e&&(t.image_=e.image),"extent"in e&&(t.extent=e.extent),"resolution"in e&&(t.resolution=e.resolution),"pixelRatio"in e&&(t.pixelRatio_=e.pixelRatio),(e instanceof HTMLImageElement||e instanceof ImageBitmap||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)&&(t.image_=e),t.state=2})).catch((function(e){t.state=3,console.error(e)})).finally((function(){return t.changed()}))}}},{key:"setImage",value:function(t){this.image_=t}},{key:"setResolution",value:function(t){this.resolution=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zu(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ze);function Ju(t){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(t)}function $u(t){var e=function(t,e){if("object"!=Ju(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ju(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ju(e)?e:String(e)}function Qu(t){return Qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qu(t)}function tl(t,e){return tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tl(t,e)}var el=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function(t,e,r){return e=Qu(e),function(t,e){if(e&&("object"===Ju(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Qu(t).constructor):e.apply(t,r))}(this,e,[t,r,a])).crossOrigin_=o,s.src_=n,s.key=n,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.tileLoadFunction_=i,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tl(t,e)}(e,t),r=e,(n=[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=Nu.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){var t;this.state=Nu.ERROR,this.unlistenImage_(),this.image_=((t=Su(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Nu.LOADED:this.state=Nu.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){var t,e,r,n,o,i,a,s;this.state==Nu.ERROR&&(this.state=Nu.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Nu.IDLE&&(this.state=Nu.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(t=this.image_,e=this.handleImageLoad_.bind(this),r=this.handleImageError_.bind(this),o=!0,i=!1,a=!1,s=[rr(n=t,"load",(function(){a=!0,i||e()}))],n.src&&Wi?(i=!0,n.decode().then((function(){o&&e()})).catch((function(t){o&&(a?e():r())}))):s.push(rr(n,"error",r)),function(){o=!1,s.forEach(nr)}))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$u(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vu);const rl=el;function nl(t){return nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(t)}function ol(t){var e=function(t,e){if("object"!=nl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nl(e)?e:String(e)}const il=function(){function t(e,r,n,o,i,a){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceProj_=e,this.targetProj_=r;var u={},l=pi(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=l(t)),u[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&Vn(o)>=Vn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Vn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Vn(this.targetProj_.getExtent()):null;var c=qn(n),f=Wn(n),h=Fn(n),p=Mn(n),y=this.transformInv_(c),d=this.transformInv_(f),v=this.transformInv_(h),g=this.transformInv_(p),m=10+(a?Math.max(0,Math.ceil(Math.log2(Ln(n)/(a*a*256*256)))):0);if(this.addQuad_(c,f,h,p,y,d,v,g,m),this.wrapsXInSource_){var b=1/0;this.triangles_.forEach((function(t,e,r){b=Math.min(b,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-b>s.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-b>s.sourceWorldWidth_/2&&(e[0][0]-=s.sourceWorldWidth_),e[1][0]-b>s.sourceWorldWidth_/2&&(e[1][0]-=s.sourceWorldWidth_),e[2][0]-b>s.sourceWorldWidth_/2&&(e[2][0]-=s.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<s.sourceWorldWidth_/2&&(t.source=e)}}))}u={}}var e,r;return e=t,(r=[{key:"addTriangle_",value:function(t,e,r,n,o,i){this.triangles_.push({source:[n,o,i],target:[t,e,r]})}},{key:"addQuad_",value:function(t,e,r,n,o,i,a,s,u){var l=vn([o,i,a,s]),c=this.sourceWorldWidth_?Vn(l)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,h=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=Vn(vn([t,e,r,n]))/this.targetWorldWidth_>.25||p),!h&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||Yn(l,this.maxSourceExtent_)){var y=0;if(!(p||isFinite(o[0])&&isFinite(o[1])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(u>0)p=!0;else if(1!=(y=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(i[0])&&isFinite(i[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=y&&4!=y&&8!=y)return;if(u>0){if(!p){var d,v=[(t[0]+r[0])/2,(t[1]+r[1])/2],g=this.transformInv_(v);d=h?(zr(o[0],f)+zr(a[0],f))/2-zr(g[0],f):(o[0]+a[0])/2-g[0];var m=(o[1]+a[1])/2-g[1];p=d*d+m*m>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var b=[(e[0]+r[0])/2,(e[1]+r[1])/2],w=this.transformInv_(b),_=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(_);this.addQuad_(t,e,b,_,o,i,w,x,u-1),this.addQuad_(_,b,r,n,x,w,a,s,u-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],k=this.transformInv_(S),O=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(O);this.addQuad_(t,S,O,n,o,k,E,s,u-1),this.addQuad_(S,e,r,O,k,i,a,E,u-1)}return}}if(h){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&y)&&this.addTriangle_(t,r,n,o,a,s),0==(14&y)&&this.addTriangle_(t,r,e,o,a,i),y&&(0==(13&y)&&this.addTriangle_(e,n,t,i,s,o),0==(7&y)&&this.addTriangle_(e,n,r,i,s,a))}}},{key:"calculateSourceExtent",value:function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,r,n){var o=e.source;An(t,o[0]),An(t,o[1]),An(t,o[2])})),t}},{key:"getTriangles",value:function(){return this.triangles_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ol(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var al,sl=[];function ul(t,e,r,n,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,o)),t.restore()}function ll(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function cl(t,e,r,n){var o=yi(r,e,t),i=ai(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(i*=a);var s=t.getMetersPerUnit();void 0!==s&&(i/=s);var u=t.getExtent();if(!u||wn(u,o)){var l=ai(t,i,o)/i;isFinite(l)&&l>0&&(i/=l)}return i}function fl(t,e,r,n,o,i,a,s,u,l,c,f,h){var p=Su(Math.round(r*t),Math.round(r*e),sl);if(f||(p.imageSmoothingEnabled=!1),0===u.length)return p.canvas;function y(t){return Math.round(t*r)/r}p.scale(r,r),p.globalCompositeOperation="lighter";var d,v=[1/0,1/0,-1/0,-1/0];if(u.forEach((function(t,e,r){Cn(v,t.extent)})),!h||1!==u.length||0!==l){var g=Vn(v),m=Gn(v);d=Su(Math.round(r*g/n),Math.round(r*m/n),sl),f||(d.imageSmoothingEnabled=!1);var b=r/n;u.forEach((function(t,e,r){var n=t.extent[0]-v[0],o=-(t.extent[3]-v[3]),i=Vn(t.extent),a=Gn(t.extent);t.image.width>0&&t.image.height>0&&d.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*b,o*b,i*b,a*b)}))}var w=qn(a);return s.getTriangles().forEach((function(t,e,o){var a=t.source,s=t.target,l=a[0][0],c=a[0][1],h=a[1][0],g=a[1][1],m=a[2][0],b=a[2][1],_=y((s[0][0]-w[0])/i),x=y(-(s[0][1]-w[1])/i),S=y((s[1][0]-w[0])/i),k=y(-(s[1][1]-w[1])/i),O=y((s[2][0]-w[0])/i),E=y(-(s[2][1]-w[1])/i),P=l,j=c;l=0,c=0;var C=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,o=Math.abs(t[r][r]),i=r+1;i<e;i++){var a=Math.abs(t[i][r]);a>o&&(o=a,n=i)}if(0===o)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var f=new Array(e),h=e-1;h>=0;h--){f[h]=t[h][e]/t[h][h];for(var p=h-1;p>=0;p--)t[p][e]-=t[p][h]*f[h]}return f}([[h-=P,g-=j,0,0,S-_],[m-=P,b-=j,0,0,O-_],[0,0,h,g,k-x],[0,0,m,b,E-x]]);if(C){if(p.save(),p.beginPath(),function(){if(void 0===al){var t=Su(6,6,sl);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ul(t,4,5,4,0),ul(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;al=ll(e,0)||ll(e,4)||ll(e,8),ku(t),sl.push(t.canvas)}return al}()||!f){p.moveTo(S,k);for(var A=_-S,T=x-k,R=0;R<4;R++)p.lineTo(S+y((R+1)*A/4),k+y(R*T/3)),3!=R&&p.lineTo(S+y((R+1)*A/4),k+y((R+1)*T/3));p.lineTo(O,E)}else p.moveTo(S,k),p.lineTo(_,x),p.lineTo(O,E);var I;if(p.clip(),p.transform(C[0],C[2],C[1],C[3],_,x),p.translate(v[0]-P,v[3]-j),d)I=d.canvas,p.scale(n/r,-n/r);else{var L=u[0],M=L.extent;I=L.image,p.scale(Vn(M)/I.width,-Gn(M)/I.height)}p.drawImage(I,0,0),p.restore()}})),d&&(ku(d),sl.push(d.canvas)),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var n=t.target,o=(n[0][0]-w[0])/i,a=-(n[0][1]-w[1])/i,s=(n[1][0]-w[0])/i,u=-(n[1][1]-w[1])/i,l=(n[2][0]-w[0])/i,c=-(n[2][1]-w[1])/i;p.beginPath(),p.moveTo(s,u),p.lineTo(o,a),p.lineTo(l,c),p.closePath(),p.stroke()})),p.restore()),p.canvas}function hl(t){return hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(t)}function pl(t){var e=function(t,e){if("object"!=hl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hl(e)?e:String(e)}function yl(t,e){if(e&&("object"===hl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dl(){return dl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},dl.apply(this,arguments)}function vl(t){return vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vl(t)}function gl(t,e){return gl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gl(t,e)}var ml=function(t){function e(t,r,n,o,i,a,s,u,l,c,f,h){var p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(p=function(t,e,r){return e=vl(e),yl(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],vl(t).constructor):e.apply(t,r))}(this,e,[i,Nu.IDLE,h])).renderEdges_=void 0!==f&&f,p.pixelRatio_=s,p.gutter_=u,p.canvas_=null,p.sourceTileGrid_=r,p.targetTileGrid_=o,p.wrappedTileCoord_=a||i,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var y=o.getTileCoordExtent(p.wrappedTileCoord_),d=p.targetTileGrid_.getExtent(),v=p.sourceTileGrid_.getExtent(),g=d?Un(y,d):y;if(0===Ln(g))return p.state=Nu.EMPTY,yl(p);var m=t.getExtent();m&&(v=v?Un(v,m):m);var b=o.getResolution(p.wrappedTileCoord_[0]),w=function(t,e,r,n){var o=Dn(r),i=cl(t,e,o,n);return(!isFinite(i)||i<=0)&&In(r,(function(r){return i=cl(t,e,r,n),isFinite(i)&&i>0})),i}(t,n,g,b);if(!isFinite(w)||w<=0)return p.state=Nu.EMPTY,yl(p);var _=void 0!==c?c:.5;if(p.triangulation_=new il(t,n,g,v,w*_,b),0===p.triangulation_.getTriangles().length)return p.state=Nu.EMPTY,yl(p);p.sourceZ_=r.getZForResolution(w);var x=p.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(x[1]=Fr(x[1],v[1],v[3]),x[3]=Fr(x[3],v[1],v[3])):x=Un(x,v)),Ln(x)){for(var S=r.getTileRangeForExtentAndZ(x,p.sourceZ_),k=S.minX;k<=S.maxX;k++)for(var O=S.minY;O<=S.maxY;O++){var E=l(p.sourceZ_,k,O,s);E&&p.sourceTiles_.push(E)}0===p.sourceTiles_.length&&(p.state=Nu.EMPTY)}else p.state=Nu.EMPTY;return p}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gl(t,e)}(e,t),r=e,(n=[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var t=this,e=[];if(this.sourceTiles_.forEach((function(r){r&&r.getState()==Nu.LOADED&&e.push({extent:t.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})})),this.sourceTiles_.length=0,0===e.length)this.state=Nu.ERROR;else{var r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],a=this.targetTileGrid_.getResolution(r),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=fl(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Nu.LOADED}this.changed()}},{key:"load",value:function(){var t=this;if(this.state==Nu.IDLE){this.state=Nu.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(r){var n=r.getState();if(n==Nu.IDLE||n==Nu.LOADING){e++;var o=er(r,Xe,(function(t){var n=r.getState();n!=Nu.LOADED&&n!=Nu.ERROR&&n!=Nu.EMPTY||(nr(o),0==--e&&(this.unlistenSources_(),this.reproject_()))}),t);t.sourcesListenerKeys_.push(o)}})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){t.getState()==Nu.IDLE&&t.load()}))}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(nr),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&(ku(this.canvas_.getContext("2d")),sl.push(this.canvas_),this.canvas_=null),dl(vl(e.prototype),"release",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pl(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vu);const bl=ml;function wl(t){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(t)}function _l(t){var e=function(t,e){if("object"!=wl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wl(e)?e:String(e)}var xl=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=e,this.maxX=r,this.minY=n,this.maxY=o}var e,r;return e=t,(r=[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_l(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sl(t,e,r,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=r,o.maxY=n,o):new xl(t,e,r,n)}const kl=xl;function Ol(t){return t[0]>0&&t[1]>0}function El(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function Pl(t){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(t)}function jl(t){var e=function(t,e){if("object"!=Pl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pl(e)?e:String(e)}function Cl(){return Cl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Al(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Cl.apply(this,arguments)}function Al(t){return Al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Al(t)}function Tl(t,e){return Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tl(t,e)}var Rl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Al(e),function(t,e){if(e&&("object"===Pl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Al(t).constructor):e.apply(t,r))}(this,e,[t])).extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new kl(0,0,0,0),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tl(t,e)}(e,t),r=e,n=[{key:"isDrawableTile",value:function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==Nu.LOADED||r==Nu.EMPTY||r==Nu.ERROR&&!n}},{key:"getTile",value:function(t,e,r,n){var o=n.pixelRatio,i=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,o,i);return s.getState()==Nu.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=Ki(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!wn(o,n))return null;for(var i=e.pixelRatio,a=e.viewState.projection,s=e.viewState,u=r.getRenderSource(),l=u.getTileGridForProjection(s.projection),c=u.getTilePixelRatio(e.pixelRatio),f=l.getZForResolution(s.resolution);f>=l.getMinZoom();--f){var h=l.getTileCoordForCoordAndZ(n,f),p=u.getTile(f,h[1],h[2],i,a);if(!(p instanceof rl||p instanceof bl)||p instanceof bl&&p.getState()===Nu.EMPTY)return null;if(p.getState()===Nu.LOADED){var y=l.getOrigin(f),d=El(l.getTileSize(f)),v=l.getResolution(f),g=Math.floor(c*((n[0]-y[0])/v-h[1]*d[0])),m=Math.floor(c*((y[1]-n[1])/v-h[2]*d[1])),b=Math.round(c*u.getGutterForProjection(s.projection));return this.getImageData(p.getImage(),g+b,m+b)}}return null}},{key:"loadedTileCallback",value:function(t,r,n){return!!this.isDrawableTile(n)&&Cl(Al(e.prototype),"loadedTileCallback",this).call(this,t,r,n)}},{key:"prepareFrame",value:function(t){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,i=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),f=c.getRevision(),h=c.getTileGridForProjection(o),p=h.getZForResolution(i,c.zDirection),y=h.getResolution(p),d=t.extent,v=t.viewState.resolution,g=c.getTilePixelRatio(u),m=Math.round(Vn(d)/v*u),b=Math.round(Gn(d)/v*u),w=r.extent&&ki(r.extent,o);w&&(d=Un(d,ki(r.extent,o)));var _=y*m/2/g,x=y*b/2/g,S=[a[0]-_,a[1]-x,a[0]+_,a[1]+x],k=h.getTileRangeForExtentAndZ(d,p),O={};O[p]={};var E=this.createLoadedTileFinder(c,o,O),P=this.tmpExtent,j=this.tmpTileRange_;this.newTiles_=!1;for(var C=s?zn(n.center,v,s,t.size):void 0,A=k.minX;A<=k.maxX;++A)for(var T=k.minY;T<=k.maxY;++T)if(!s||h.tileCoordIntersectsViewport([p,A,T],C)){var R=this.getTile(p,A,T,t);if(this.isDrawableTile(R)){var I=pr(this);if(R.getState()==Nu.LOADED){O[p][R.tileCoord.toString()]=R;var L=R.inTransition(I);L&&1!==r.opacity&&(R.endTransition(I),L=!1),this.newTiles_||!L&&this.renderedTiles.includes(R)||(this.newTiles_=!0)}if(1===R.getAlpha(I,t.time))continue}var M=h.getTileCoordChildTileRange(R.tileCoord,j,P),F=!1;M&&(F=E(p+1,M)),F||h.forEachTileCoordParentTileRange(R.tileCoord,E,j,P)}var D=y/i*u/g;$i(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,s,-m/2,-b/2);var B=ta(this.pixelTransform);this.useContainer(e,B,this.getBackground(t));var N=this.context,z=N.canvas;Qi(this.inversePixelTransform,this.pixelTransform),$i(this.tempTransform,m/2,b/2,D,D,0,-m/2,-b/2),z.width!=m||z.height!=b?(z.width=m,z.height=b):this.containerReused||N.clearRect(0,0,m,b),w&&this.clipUnrotated(N,t,w),c.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;var G,U,q,W=Object.keys(O).map(Number);W.sort(Ae),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(G=[],U=[]):W=W.reverse();for(var V=W.length-1;V>=0;--V){var Y=W[V],Z=c.getTilePixelSize(Y,u,o),X=h.getResolution(Y)/y,H=Z[0]*X*D,K=Z[1]*X*D,J=h.getTileCoordForCoordAndZ(qn(S),Y),$=h.getTileCoordExtent(J),Q=Ki(this.tempTransform,[g*($[0]-S[0])/y,g*(S[3]-$[3])/y]),tt=g*c.getGutterForProjection(o),et=O[Y];for(var rt in et){var nt=et[rt],ot=nt.tileCoord,it=J[1]-ot[1],at=Math.round(Q[0]-(it-1)*H),st=J[2]-ot[2],ut=Math.round(Q[1]-(st-1)*K),lt=Math.round(Q[0]-it*H),ct=Math.round(Q[1]-st*K),ft=at-lt,ht=ut-ct,pt=p===Y,yt=pt&&1!==nt.getAlpha(pr(this),t.time),dt=!1;if(!yt)if(G){q=[lt,ct,lt+ft,ct,lt+ft,ct+ht,lt,ct+ht];for(var vt=0,gt=G.length;vt<gt;++vt)if(p!==Y&&Y<U[vt]){var mt=G[vt];Yn([lt,ct,lt+ft,ct+ht],[mt[0],mt[3],mt[4],mt[7]])&&(dt||(N.save(),dt=!0),N.beginPath(),N.moveTo(q[0],q[1]),N.lineTo(q[2],q[3]),N.lineTo(q[4],q[5]),N.lineTo(q[6],q[7]),N.moveTo(mt[6],mt[7]),N.lineTo(mt[4],mt[5]),N.lineTo(mt[2],mt[3]),N.lineTo(mt[0],mt[1]),N.clip())}G.push(q),U.push(Y)}else N.clearRect(lt,ct,ft,ht);this.drawTileImage(nt,t,lt,ct,ft,ht,tt,pt),G&&!yt?(dt&&N.restore(),this.renderedTiles.unshift(nt)):this.renderedTiles.push(nt),this.updateUsedTiles(t.usedTiles,c,nt)}}return this.renderedRevision=f,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!jn(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.renderedProjection=o,this.manageTilePyramid(t,c,h,u,o,d,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(N,t),r.extent&&N.restore(),N.imageSmoothingEnabled=!0,B!==z.style.transform&&(z.style.transform=B),this.container}},{key:"drawTileImage",value:function(t,e,r,n,o,i,a,s){var u=this.getTileImage(t);if(u){var l=pr(this),c=e.layerStatesArray[e.layerIndex],f=c.opacity*(s?t.getAlpha(l,e.time):1),h=f!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,n,o,i),h&&this.context.restore(),f!==c.opacity?e.animate=!0:s&&t.endTransition(l)}}},{key:"getImage",value:function(){var t=this.context;return t?t.canvas:null}},{key:"getTileImage",value:function(t){return t.getImage()}},{key:"scheduleExpireCache",value:function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=pr(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(t,e,r){var n=pr(e);n in t||(t[n]={}),t[n][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(t,e,r,n,o,i,a,s,u){var l=pr(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,f,h,p,y,d,v=t.wantedTiles[l],g=t.tileQueue,m=r.getMinZoom(),b=t.viewState.rotation,w=b?zn(t.viewState.center,t.viewState.resolution,b,t.size):void 0,_=0;for(d=m;d<=a;++d)for(f=r.getTileRangeForExtentAndZ(i,d,f),h=r.getResolution(d),p=f.minX;p<=f.maxX;++p)for(y=f.minY;y<=f.maxY;++y)b&&!r.tileCoordIntersectsViewport([d,p,y],w)||(a-d<=s?(++_,(c=e.getTile(d,p,y,n,o)).getState()==Nu.IDLE&&(v[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),h])),void 0!==u&&u(c)):e.useTile(d,p,y,o));e.updateCacheSize(_,o)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jl(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Bu);const Il=Rl;function Ll(t){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(t)}function Ml(t){var e=function(t,e){if("object"!=Ll(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ll(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ll(e)?e:String(e)}function Fl(t){return Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fl(t)}function Dl(t,e){return Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dl(t,e)}var Bl=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[t],n=Fl(n=e),function(t,e){if(e&&("object"===Ll(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],Fl(r).constructor):n.apply(r,o));var r,n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dl(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Il(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ml(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(qs);const Nl=Bl;var zl=s(537);function Gl(t){return Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(t)}function Ul(t){var e=function(t,e){if("object"!=Gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gl(e)?e:String(e)}var ql=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=El(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}var e,r;return e=t,r=[{key:"clone",value:function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return fr()}},{key:"getImage",value:function(t){return fr()}},{key:"getHitDetectionImage",value:function(){return fr()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return fr()}},{key:"getImageSize",value:function(){return fr()}},{key:"getOrigin",value:function(){return fr()}},{key:"getSize",value:function(){return fr()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=El(t)}},{key:"listenImageChange",value:function(t){fr()}},{key:"load",value:function(){fr()}},{key:"unlistenImageChange",value:function(t){fr()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ul(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Wl=ql;function Vl(t){return Array.isArray(t)?xu(t):t}var Yl,Zl,Xl="ol-hidden",Hl="ol-unselectable",Kl="ol-control",Jl="ol-collapsed",$l=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Ql=["style","variant","weight","size","lineHeight","family"],tc=function(t){var e=t.match($l);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=Ql.length;n<o;++n){var i=e[n+1];void 0!==i&&(r[Ql[n]]=i)}return r.families=r.family.split(/,\s?/),r},ec="10px sans-serif",rc="#000",nc="round",oc=[],ic="round",ac="#000",sc="center",uc="middle",lc=[0,0,0,0],cc=new Or,fc=null,hc={},pc=function(){var t,e,r="32px ",n=["monospace","serif"],o=n.length,i="wmytzilWMYTZIL@#/&?$%10";function a(t,a,s){for(var u=!0,l=0;l<o;++l){var c=n[l];if(e=vc(t+" "+a+" "+r+c,i),s!=c){var f=vc(t+" "+a+" "+r+s+","+c,i);u=u&&f!=e}}return!!u}function s(){for(var e=!0,r=cc.getKeys(),n=0,o=r.length;n<o;++n){var i=r[n];cc.get(i)<100&&(a.apply(this,i.split("\n"))?(ze(hc),fc=null,Yl=void 0,cc.set(i,100)):(cc.set(i,cc.get(i)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=tc(e);if(r)for(var n=r.families,o=0,i=n.length;o<i;++o){var u=n[o],l=r.style+"\n"+r.weight+"\n"+u;void 0===cc.get(l)&&(cc.set(l,100,!0),a(r.style,r.weight,u)||(cc.set(l,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),yc=function(t){var e=hc[t];if(null==e){if(qi){var r=tc(t),n=dc(t,"Žg");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else Zl||((Zl=document.createElement("div")).innerHTML="M",Zl.style.minHeight="0",Zl.style.maxHeight="none",Zl.style.height="auto",Zl.style.padding="0",Zl.style.border="none",Zl.style.position="absolute",Zl.style.display="block",Zl.style.left="-99999px"),Zl.style.font=t,document.body.appendChild(Zl),e=Zl.offsetHeight,document.body.removeChild(Zl);hc[t]=e}return e};function dc(t,e){return fc||(fc=Su(1,1)),t!=Yl&&(fc.font=t,Yl=fc.font),fc.measureText(e)}function vc(t,e){return dc(t,e).width}function gc(t,e,r){if(e in r)return r[e];var n=e.split("\n").reduce((function(e,r){return Math.max(e,vc(t,r))}),0);return r[e]=n,n}function mc(t){return mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(t)}function bc(t){var e=function(t,e){if("object"!=mc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mc(e)?e:String(e)}function wc(t){return wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wc(t)}function _c(t,e){return _c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_c(t,e)}var xc=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=wc(e),function(t,e){if(e&&("object"===mc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],wc(t).constructor):e.apply(t,r))}(this,e,[{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}])).canvases_,r.hitDetectionCanvas_=null,r.fill_=void 0!==t.fill?t.fill:null,r.origin_=[0,0],r.points_=t.points,r.radius_=void 0!==t.radius?t.radius:t.radius1,r.radius2_=t.radius2,r.angle_=void 0!==t.angle?t.angle:0,r.stroke_=void 0!==t.stroke?t.stroke:null,r.size_,r.renderOptions_,r.render(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_c(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}},{key:"getAnchor",value:function(){var t=this.size_,e=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-e[0]/r[0],t[1]/2+e[1]/r[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvases_[t];if(!e){var r=this.renderOptions_,n=Su(r.size*t,r.size*t);this.draw_(r,n,t),e=n.canvas,this.canvases_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return 2}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,r){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var n=this.radius_,o=void 0===this.radius2_?n:this.radius2_;if(n<o){var i=n;n=o,o=i}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,u=o*Math.sin(s),l=n-Math.sqrt(o*o-u*u),c=Math.sqrt(u*u+l*l),f=c/u;if("miter"===t&&f<=r)return f*e;var h=e/2/f,p=e/2*(l/c),y=Math.sqrt((n+h)*(n+h)+p*p)-n;if(void 0===this.radius2_||"bevel"===t)return 2*y;var d=n*Math.sin(s),v=o-Math.sqrt(n*n-d*d),g=Math.sqrt(d*d+v*v)/d;if(g<=r){var m=g*e/2-o-n;return 2*Math.max(y,m)}return 2*y}},{key:"createRenderOptions",value:function(){var t,e,r,n,o,i,a,s=nc,u=ic,l=0,c=null,f=0,h=0;this.stroke_&&(t=Vl(null!==(e=this.stroke_.getColor())&&void 0!==e?e:ac),h=null!==(r=this.stroke_.getWidth())&&void 0!==r?r:1,c=this.stroke_.getLineDash(),f=null!==(n=this.stroke_.getLineDashOffset())&&void 0!==n?n:0,u=null!==(o=this.stroke_.getLineJoin())&&void 0!==o?o:ic,s=null!==(i=this.stroke_.getLineCap())&&void 0!==i?i:nc,l=null!==(a=this.stroke_.getMiterLimit())&&void 0!==a?a:10);var p=this.calculateLineJoinSize_(u,h,l),y=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:h,size:Math.ceil(2*y+p),lineCap:s,lineDash:c,lineDashOffset:f,lineJoin:u,miterLimit:l}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}},{key:"draw_",value:function(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=rc),e.fillStyle=Vl(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){var e;if(this.fill_){var r=this.fill_.getColor(),n=0;"string"==typeof r&&(r=wu(r)),null===r?n=1:Array.isArray(r)&&(n=4===r.length?r[3]:1),0===n&&(e=Su(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}},{key:"createPath_",value:function(t){var e=this.points_,r=this.radius_;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var o=this.angle_-Math.PI/2,i=2*Math.PI/e,a=0;a<e;a++){var s=o+a*i,u=a%2==0?r:n;t.lineTo(u*Math.cos(s),u*Math.sin(s))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=rc,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bc(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Wl);const Sc=xc;function kc(t){return kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(t)}function Oc(t){var e=function(t,e){if("object"!=kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kc(e)?e:String(e)}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ec(t)}function Pc(t,e){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pc(t,e)}var jc=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=e,o=[{points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}],n=Ec(n),function(t,e){if(e&&("object"===kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],Ec(r).constructor):n.apply(r,o));var r,n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pc(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oc(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Sc);const Cc=jc;function Ac(t){return Ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(t)}function Tc(t){var e=function(t,e){if("object"!=Ac(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ac(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ac(e)?e:String(e)}var Rc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null}var e,r;return e=t,(r=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(t){this.color_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Ic=Rc;function Lc(t){return Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(t)}function Mc(t){var e=function(t,e){if("object"!=Lc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lc(e)?e:String(e)}var Fc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}var e,r;return e=t,(r=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(t){this.color_=t}},{key:"setLineCap",value:function(t){this.lineCap_=t}},{key:"setLineDash",value:function(t){this.lineDash_=t}},{key:"setLineDashOffset",value:function(t){this.lineDashOffset_=t}},{key:"setLineJoin",value:function(t){this.lineJoin_=t}},{key:"setMiterLimit",value:function(t){this.miterLimit_=t}},{key:"setWidth",value:function(t){this.width_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Dc=Fc;function Bc(t){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(t)}function Nc(t){var e=function(t,e){if("object"!=Bc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bc(e)?e:String(e)}var zc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.geometry_=null,this.geometryFunction_=Wc,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}var e,r;return e=t,r=[{key:"clone",value:function(){var e,r,n=this.getGeometry();return n&&"object"===Bc(n)&&(n=n.clone()),new t({geometry:null!==(e=n)&&void 0!==e?e:void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:null!==(r=this.getRenderer())&&void 0!==r?r:void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(t){this.renderer_=t}},{key:"setHitDetectionRenderer",value:function(t){this.hitDetectionRenderer_=t}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(t){this.text_=t}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Wc,this.geometry_=t}},{key:"setZIndex",value:function(t){this.zIndex_=t}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Gc=null;function Uc(t,e){if(!Gc){var r=new Ic({color:"rgba(255,255,255,0.4)"}),n=new Dc({color:"#3399CC",width:1.25});Gc=[new zc({image:new Cc({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return Gc}function qc(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t.Polygon=[new zc({fill:new Ic({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new zc({stroke:new Dc({color:e,width:5})}),new zc({stroke:new Dc({color:r,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new zc({image:new Cc({radius:6,fill:new Ic({color:r}),stroke:new Dc({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Wc(t){return t.getGeometry()}const Vc=zc;function Yc(t){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(t)}function Zc(t){var e=function(t,e){if("object"!=Yc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yc(e)?e:String(e)}function Xc(t,e,r){return e+":"+t+":"+(r?pu(r):"null")}var Hc=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var e,r;return e=t,(r=[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}},{key:"get",value:function(t,e,r){var n=Xc(t,e,r);return n in this.cache_?this.cache_[n]:null}},{key:"set",value:function(t,e,r,n){var o=Xc(t,e,r);this.cache_[o]=n,++this.cacheSize_}},{key:"setSize",value:function(t){this.maxCacheSize_=t,this.expire()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Kc(t){return Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(t)}function Jc(t){var e=function(t,e){if("object"!=Kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kc(e)?e:String(e)}function $c(t){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$c(t)}function Qc(t,e){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qc(t,e)}var tf=null,ef=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=function(t,e,r){return e=$c(e),function(t,e){if(e&&("object"===Kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],$c(t).constructor):e.apply(t,void 0))}(this,e)).hitDetectionImage_=null,a.image_=t,a.crossOrigin_=n,a.canvas_={},a.color_=i,a.imageState_=void 0===o?0:o,a.size_=t&&t.width&&t.height?[t.width,t.height]:null,a.src_=r,a.tainted_,a}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qc(t,e)}(e,t),r=e,n=[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&2===this.imageState_){tf||(tf=Su(1,1,void 0,{willReadFrequently:!0})),tf.drawImage(this.image_,0,0);try{tf.getImageData(0,0,1,1),this.tainted_=!1}catch(t){tf=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(Xe)}},{key:"handleImageError_",value:function(){this.imageState_=3,this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=2,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],r=Su(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){var t,e,r=this;if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(t=this.image_,e=this.src_,e&&(t.src=e),t.src&&Wi?new Promise((function(e,r){return t.decode().then((function(){return e(t)})).catch((function(n){return t.complete&&t.width?e(t):r(n)}))})):function(t,e){return new Promise((function(e,r){function n(){i(),e(t)}function o(){i(),r(new Error("Image load error"))}function i(){t.removeEventListener("load",n),t.removeEventListener("error",o)}t.addEventListener("load",n),t.addEventListener("error",o)}))}(t)).then((function(t){r.image_=t,r.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=this.image_,r=document.createElement("canvas");r.width=Math.ceil(e.width*t),r.height=Math.ceil(e.height*t);var n=r.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=pu(this.color_),n.fillRect(0,0,r.width/t,r.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=r}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jc(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ze);function rf(t){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(t)}function nf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function of(t){var e=function(t,e){if("object"!=rf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rf(e)?e:String(e)}function af(t,e){if(e&&("object"===rf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sf(){return sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},sf.apply(this,arguments)}function uf(t){return uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uf(t)}function lf(t,e){return lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lf(t,e)}function cf(t,e,r,n){return void 0!==r&&void 0!==n?[r/t,n/e]:void 0!==r?r/t:void 0!==n?n/e:1}var ff=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=void 0!==(t=t||{}).opacity?t.opacity:1,o=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,a=void 0!==t.rotateWithView&&t.rotateWithView;(r=function(t,e,r){return e=uf(e),af(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],uf(t).constructor):e.apply(t,r))}(this,e,[{opacity:n,rotation:o,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:a,declutterMode:t.declutterMode}])).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",r.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",r.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",r.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var s,u,l=void 0!==t.img?t.img:null,c=t.src;if(Mr(!(void 0!==c&&l),"`image` and `src` cannot be provided at the same time"),void 0!==c&&0!==c.length||!l||(c=l.src||pr(l)),Mr(void 0!==c&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),Mr(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?s=0:void 0!==l&&(s=l instanceof HTMLImageElement?l.complete?l.src?2:0:1:2),r.color_=void 0!==t.color?wu(t.color):null,r.iconImage_=function(t,e,r,n,o){var i=void 0===e?void 0:Hc.get(e,r,o);return i||(i=new ef(t,t instanceof HTMLImageElement?t.src||void 0:e,r,n,o),Hc.set(e,r,o,i)),i}(l,c,r.crossOrigin_,s,r.color_),r.offset_=void 0!==t.offset?t.offset:[0,0],r.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",r.origin_=null,r.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){var f,h;if(t.size){var p=function(t){if(Array.isArray(t))return t}(u=t.size)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(u)||function(t,e){if(t){if("string"==typeof t)return nf(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nf(t,2):void 0}}(u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();f=p[0],h=p[1]}else{var y=r.getImage(1);if(y.width&&y.height)f=y.width,h=y.height;else if(y instanceof HTMLImageElement)return r.initialOptions_=t,r.listenImageChange((function e(){if(r.unlistenImageChange(e),r.initialOptions_){var n=r.iconImage_.getSize();r.setScale(cf(n[0],n[1],t.width,t.height))}})),af(r)}void 0!==f&&r.setScale(cf(f,h,t.width,t.height))}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lf(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t,r,n;return this.initialOptions_?(r=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:r,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var r=this.getDisplacement(),n=this.getScaleArray();return[t[0]-r[0]/n[0],t[1]+r[1]/n[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=r[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*t[0]:void 0}},{key:"getHeight",value:function(){var t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*t[1]:void 0}},{key:"setScale",value:function(t){delete this.initialOptions_,sf(uf(e.prototype),"setScale",this).call(this,t)}},{key:"listenImageChange",value:function(t){this.iconImage_.addEventListener(Xe,t)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(t){this.iconImage_.removeEventListener(Xe,t)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,of(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Wl);const hf=ff;function pf(t){return pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pf(t)}function yf(t){var e=function(t,e){if("object"!=pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pf(e)?e:String(e)}var df=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=El(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Ic({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}var e,r;return e=t,r=[{key:"clone",value:function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRepeat",value:function(t){this.repeat_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=El(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yf(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const vf=df;var gf;function mf(t,e,r){return mf=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&bf(o,r.prototype),o},mf.apply(null,arguments)}function bf(t,e){return bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bf(t,e)}function wf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Ef(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _f(t){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(t)}function xf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cf(n.key),n)}}function Sf(t,e,r){return e&&xf(t.prototype,e),r&&xf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Of(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ef(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ef(t,e){if(t){if("string"==typeof t)return Pf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pf(t,e):void 0}}function Pf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jf(t,e,r){return(e=Cf(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cf(t){var e=function(t,e){if("object"!=_f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_f(e)?e:String(e)}var Af=0,Tf=0,Rf=1<<Af++,If=1<<Af++,Lf=1<<Af++,Mf=1<<Af++,Ff=1<<Af++,Df=Math.pow(2,5)-1,Bf=jf(jf(jf(jf(jf({},Rf,"boolean"),If,"number"),Lf,"string"),Mf,"color"),Ff,"number[]"),Nf=Object.keys(Bf).map(Number).sort(Ae);function zf(t){var e,r,n=[],o=Of(Nf);try{for(o.s();!(e=o.n()).done;){var i=e.value;(t&(r=i))===r&&n.push(Bf[i])}}catch(t){o.e(t)}finally{o.f()}return 0===n.length?"untyped":n.length<3?n.join(" or "):n.slice(0,-1).join(", ")+", or "+n[n.length-1]}function Gf(t,e){return!!(t&e)}function Uf(t,e){return t===e}var qf=Sf((function t(e,r){kf(this,t),this.type=e,this.value=r})),Wf=Sf((function t(e,r){kf(this,t),this.type=e,this.operator=r;for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];this.args=o}));function Vf(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function Yf(t,e,r){switch(_f(t)){case"boolean":return new qf(Rf,t);case"number":return new qf(If,t);case"string":var n=Lf;return function(t){try{return bu(t),!0}catch(t){return!1}}(t)&&(n|=Mf),Uf(n&r,Tf)||(n&=r),new qf(n,t)}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"==typeof t[0])return function(t,e,r){var n=t[0],o=Xf[n];if(!o)throw new Error("Unknown operator: ".concat(n));return o(t,e,r)}(t,e,r);var o,i=Of(t);try{for(i.s();!(o=i.n()).done;)if("number"!=typeof o.value)throw new Error("Expected an array of numbers")}catch(t){i.e(t)}finally{i.f()}var a=Ff;return 3!==t.length&&4!==t.length||(a|=Mf),r&&(a&=r),new qf(a,t)}var Zf={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},Xf=(jf(jf(jf(jf(jf(jf(jf(jf(jf(jf(gf={},Zf.Get,th((function(t){var e=wf(t,2),r=(e[0],e[1]);return void 0!==r?function(t){switch(t){case"string":return Lf;case"color":return Mf;case"number":return If;case"boolean":return Rf;case"number[]":return Ff;default:throw new Error("Unrecognized type hint: ".concat(t))}}(r.value):Df}),Kf(1,2),(function(t,e){var r=Yf(t[1],e);if(!(r instanceof qf))throw new Error("Expected a literal argument for get operation");if("string"!=typeof r.value)throw new Error("Expected a string argument for get operation");return e.properties.add(r.value),3===t.length?[r,Yf(t[2],e)]:[r]}))),Zf.Var,th((function(t){return wf(t,1)[0].type}),Kf(1,1),(function(t,e,r,n){var o=t[1];if("string"!=typeof o)throw new Error("Expected a string argument for var operation");if(e.variables.add(o),!("variables"in e.style)||void 0===e.style.variables[o])return[new qf(Df,o)];var i=Yf(e.style.variables[o],e);if(i.value=o,n&&!Gf(n,i.type))throw new Error("The variable ".concat(o," has type ").concat(zf(i.type)," but the following type was expected: ").concat(zf(n)));return[i]}))),Zf.Id,th(If|Lf,Hf,(function(t,e){e.featureId=!0}))),Zf.Concat,th(Lf,Kf(2,1/0),Jf(Df))),Zf.GeometryType,th(Lf,Hf)),Zf.Resolution,th(If,Hf)),Zf.Zoom,th(If,Hf)),Zf.Time,th(If,Hf)),Zf.Any,th(Rf,Kf(2,1/0),Jf(Rf))),Zf.All,th(Rf,Kf(2,1/0),Jf(Rf))),jf(jf(jf(jf(jf(jf(jf(jf(jf(jf(gf,Zf.Not,th(Rf,Kf(1,1),Jf(Rf))),Zf.Equal,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.NotEqual,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.GreaterThan,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.GreaterThanOrEqualTo,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.LessThan,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.LessThanOrEqualTo,th(Rf,Kf(2,2),Jf(Df),$f)),Zf.Multiply,th((function(t){for(var e=If|Mf,r=0;r<t.length;r++)e&=t[r].type;return e}),Kf(2,1/0),Jf(If|Mf),$f)),Zf.Divide,th(If,Kf(2,2),Jf(If))),Zf.Add,th(If,Kf(2,1/0),Jf(If))),jf(jf(jf(jf(jf(jf(jf(jf(jf(jf(gf,Zf.Subtract,th(If,Kf(2,2),Jf(If))),Zf.Clamp,th(If,Kf(3,3),Jf(If))),Zf.Mod,th(If,Kf(2,2),Jf(If))),Zf.Pow,th(If,Kf(2,2),Jf(If))),Zf.Abs,th(If,Kf(1,1),Jf(If))),Zf.Floor,th(If,Kf(1,1),Jf(If))),Zf.Ceil,th(If,Kf(1,1),Jf(If))),Zf.Round,th(If,Kf(1,1),Jf(If))),Zf.Sin,th(If,Kf(1,1),Jf(If))),Zf.Cos,th(If,Kf(1,1),Jf(If))),jf(jf(jf(jf(jf(jf(jf(jf(jf(jf(gf,Zf.Atan,th(If,Kf(1,2),Jf(If))),Zf.Sqrt,th(If,Kf(1,1),Jf(If))),Zf.Match,th((function(t){for(var e=Df,r=2;r<t.length;r+=2)e&=t[r].type;return e&t[t.length-1].type}),Kf(4,1/0),Qf,(function(t,e,r,n){for(var o=t.length-1,i=Yf(t[1],e).type,a=Yf(t[t.length-1],e),s=void 0!==n?n&a.type:a.type,u=new Array(o-2),l=0;l<o-2;l+=2){var c=Yf(t[l+2],e),f=Yf(t[l+3],e);i&=c.type,s&=f.type,u[l]=c,u[l+1]=f}var h=Lf|If|Rf;if(!Gf(h,i))throw new Error("Expected an input of type ".concat(zf(h)," for the interpolate operation")+", got ".concat(zf(i)," instead"));if(Uf(s,Tf))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(var p=0;p<o-2;p+=2){var y=Yf(t[p+2],e,i),d=Yf(t[p+3],e,s);u[p]=y,u[p+1]=d}return[Yf(t[1],e,i)].concat(u,[Yf(t[t.length-1],e,s)])}))),Zf.Between,th(Rf,Kf(3,3),Jf(If))),Zf.Interpolate,th((function(t){for(var e=Mf|If,r=3;r<t.length;r+=2)e&=t[r].type;return e}),Kf(6,1/0),Qf,(function(t,e,r,n){var o,i=t[1];switch(i[0]){case"linear":o=1;break;case"exponential":if("number"!=typeof(o=i[1]))throw new Error("Expected a number base for exponential interpolation"+", got ".concat(JSON.stringify(o)," instead"));break;default:o=null}if(!o)throw new Error("Invalid interpolation type: ".concat(JSON.stringify(i)));o=Yf(o,e);var a=Yf(t[2],e);if(!Gf(If,a.type))throw new Error("Expected an input of type number for the interpolate operation"+", got ".concat(zf(a.type)," instead"));a=Yf(t[2],e,If);for(var s=new Array(t.length-3),u=0;u<s.length;u+=2){var l=Yf(t[u+3],e);if(!Gf(If,l.type))throw new Error("Expected all stop input values in the interpolate operation to be of type number"+", got ".concat(zf(l.type)," at position ").concat(u+2," instead"));var c=Yf(t[u+4],e);if(!Gf(If|Mf,c.type))throw new Error("Expected all stop output values in the interpolate operation to be a number or color"+", got ".concat(zf(c.type)," at position ").concat(u+3," instead"));l=Yf(t[u+3],e,If),c=Yf(t[u+4],e,If|Mf),s[u]=l,s[u+1]=c}return[o,a].concat(s)}))),Zf.Case,th((function(t){for(var e=Df,r=1;r<t.length;r+=2)e&=t[r].type;return e&t[t.length-1].type}),Kf(3,1/0),(function(t,e){var r=t[0],n=t.length-1;if(n%2==0)throw new Error("An odd amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(n)," instead"))}),(function(t,e,r,n){for(var o=Yf(t[t.length-1],e),i=void 0!==n?n&o.type:o.type,a=new Array(t.length-1),s=0;s<a.length-1;s+=2){var u=Yf(t[s+1],e),l=Yf(t[s+2],e);if(!Gf(Rf,u.type))throw new Error("Expected all conditions in the case operation to be of type boolean"+", got ".concat(zf(u.type)," at position ").concat(s," instead"));i&=l.type,a[s]=u,a[s+1]=l}if(Uf(i,Tf))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(var c=0;c<a.length-1;c+=2)a[c+1]=Yf(t[c+2],e,i);return a[a.length-1]=Yf(t[t.length-1],e,i),a}))),Zf.In,th(Rf,Kf(2,2),(function(t,e){var r=t[2];if(!Array.isArray(r))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof r[0]){if("literal"!==r[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(r[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');r=r[1]}for(var n=Lf|If,o=new Array(r.length),i=0;i<o.length;i++){var a=Yf(r[i],e);n&=a.type,o[i]=a}if(Uf(n,Tf))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[Yf(t[1],e,n)].concat(o)}))),Zf.Number,th(If,Kf(1,1/0),Jf(Df))),Zf.String,th(Lf,Kf(1,1/0),Jf(Df))),Zf.Array,th((function(t){return 3===t.length||4===t.length?Ff|Mf:Ff}),Kf(1,1/0),Jf(If))),jf(jf(jf(gf,Zf.Color,th(Mf,Kf(3,4),Jf(If))),Zf.Band,th(If,Kf(1,3),Jf(If))),Zf.Palette,th(Mf,Kf(2,2),(function(t,e){var r=Yf(t[1],e,If);if(r.type!==If)throw new Error("The first argument of palette must be an number, got ".concat(zf(r.type)," instead"));var n=t[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=new Array(n.length),i=0;i<o.length;i++){var a=Yf(n[i],e,Mf);if(!(a instanceof qf))throw new Error("The palette color at index ".concat(i," must be a literal value"));if(!Gf(a.type,Mf))throw new Error("The palette color at index ".concat(i," should be of type color, got ").concat(zf(a.type)," instead"));o[i]=a}return[r].concat(o)}))));function Hf(t,e){var r=t[0];if(1!==t.length)throw new Error("Expected no arguments for ".concat(r," operation"));return[]}function Kf(t,e){return function(r,n){var o=r[0],i=r.length-1;if(t===e){if(i!==t){var a=1===t?"":"s";throw new Error("Expected ".concat(t," argument").concat(a," for ").concat(o,", got ").concat(i))}}else if(i<t||i>e){var s=e===1/0?"".concat(t," or more"):"".concat(t," to ").concat(e);throw new Error("Expected ".concat(s," arguments for ").concat(o,", got ").concat(i))}}}function Jf(t){return function(e,r){for(var n=e[0],o=e.length-1,i=new Array(o),a=0;a<o;++a){var s=Yf(e[a+1],r);if(!Gf(t,s.type)){var u=zf(t),l=zf(s.type);throw new Error("Unexpected type for argument ".concat(a," of ").concat(n," operation")+", got ".concat(u," but expected ").concat(l))}s.type&=t,i[a]=s}return i}}function $f(t,e,r){for(var n=t[0],o=t.length-1,i=Df,a=0;a<r.length;++a)i&=r[a].type;if(i===Tf)throw new Error("No common type could be found for arguments of ".concat(n," operation"));for(var s=new Array(o),u=0;u<o;++u)s[u]=Yf(t[u+1],e,i);return s}function Qf(t,e){var r=t[0],n=t.length-1;if(n%2==1)throw new Error("An even amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(n)," instead"))}function th(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return function(e,n,o){for(var i=e[0],a=[],s=0;s<r.length;s++)a=r[s](e,n,a,o)||a;var u,l="function"==typeof t?t(a):t;if(void 0!==o){if(!Gf(l,o))throw new Error("The following expression was expected to return ".concat(zf(o),", but returns ").concat(zf(l)," instead: ").concat(JSON.stringify(e)));l&=o}if(l===Tf)throw new Error("No matching type was found for the following expression: ".concat(JSON.stringify(e)));return mf(Wf,[l,i].concat(function(t){if(Array.isArray(t))return Pf(t)}(u=a)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(u)||Ef(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}function eh(t){return eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(t)}function rh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nh(t,e,r){var n=Yf(t,r);if(!Gf(e,n.type)){var o=zf(e),i=zf(n.type);throw new Error("Expected expression to be of type ".concat(o,", got ").concat(i))}return oh(n,r)}function oh(t,e){if(t instanceof qf){if(t.type===Mf&&"string"==typeof t.value){var r=bu(t.value);return function(){return r}}return function(){return t.value}}var n=t.operator;switch(n){case Zf.Number:case Zf.String:return function(t,e){for(var r=t.operator,n=t.args.length,o=new Array(n),i=0;i<n;++i)o[i]=oh(t.args[i],e);switch(r){case Zf.Number:case Zf.String:return function(t){for(var e=0;e<n;++e){var i=o[e](t);if(eh(i)===r)return i}throw new Error("Expected one of the values to be a ".concat(r))};default:throw new Error("Unsupported assertion operator ".concat(r))}}(t,e);case Zf.Get:case Zf.Var:return function(t,e){var r=t.args[0].value;switch(t.operator){case Zf.Get:return function(t){return t.properties[r]};case Zf.Var:return function(t){return t.variables[r]};default:throw new Error("Unsupported accessor operator ".concat(t.operator))}}(t);case Zf.Id:return function(t){return t.featureId};case Zf.Concat:var o=t.args.map((function(t){return oh(t,e)}));return function(t){var e,r;return(e="").concat.apply(e,function(t){if(Array.isArray(t))return rh(t)}(r=o.map((function(e){return e(t).toString()})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return rh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rh(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};case Zf.Resolution:return function(t){return t.resolution};case Zf.Any:case Zf.All:case Zf.Not:return function(t,e){for(var r=t.operator,n=t.args.length,o=new Array(n),i=0;i<n;++i)o[i]=oh(t.args[i],e);switch(r){case Zf.Any:return function(t){for(var e=0;e<n;++e)if(o[e](t))return!0;return!1};case Zf.All:return function(t){for(var e=0;e<n;++e)if(!o[e](t))return!1;return!0};case Zf.Not:return function(t){return!o[0](t)};default:throw new Error("Unsupported logical operator ".concat(r))}}(t,e);case Zf.Equal:case Zf.NotEqual:case Zf.LessThan:case Zf.LessThanOrEqualTo:case Zf.GreaterThan:case Zf.GreaterThanOrEqualTo:return function(t,e){var r=t.operator,n=oh(t.args[0],e),o=oh(t.args[1],e);switch(r){case Zf.Equal:return function(t){return n(t)===o(t)};case Zf.NotEqual:return function(t){return n(t)!==o(t)};case Zf.LessThan:return function(t){return n(t)<o(t)};case Zf.LessThanOrEqualTo:return function(t){return n(t)<=o(t)};case Zf.GreaterThan:return function(t){return n(t)>o(t)};case Zf.GreaterThanOrEqualTo:return function(t){return n(t)>=o(t)};default:throw new Error("Unsupported comparison operator ".concat(r))}}(t,e);case Zf.Multiply:case Zf.Divide:case Zf.Add:case Zf.Subtract:case Zf.Clamp:case Zf.Mod:case Zf.Pow:case Zf.Abs:case Zf.Floor:case Zf.Ceil:case Zf.Round:case Zf.Sin:case Zf.Cos:case Zf.Atan:case Zf.Sqrt:return function(t,e){for(var r=t.operator,n=t.args.length,o=new Array(n),i=0;i<n;++i)o[i]=oh(t.args[i],e);switch(r){case Zf.Multiply:return function(t){for(var e=1,r=0;r<n;++r)e*=o[r](t);return e};case Zf.Divide:return function(t){return o[0](t)/o[1](t)};case Zf.Add:return function(t){for(var e=0,r=0;r<n;++r)e+=o[r](t);return e};case Zf.Subtract:return function(t){return o[0](t)-o[1](t)};case Zf.Clamp:return function(t){var e=o[0](t),r=o[1](t);if(e<r)return r;var n=o[2](t);return e>n?n:e};case Zf.Mod:return function(t){return o[0](t)%o[1](t)};case Zf.Pow:return function(t){return Math.pow(o[0](t),o[1](t))};case Zf.Abs:return function(t){return Math.abs(o[0](t))};case Zf.Floor:return function(t){return Math.floor(o[0](t))};case Zf.Ceil:return function(t){return Math.ceil(o[0](t))};case Zf.Round:return function(t){return Math.round(o[0](t))};case Zf.Sin:return function(t){return Math.sin(o[0](t))};case Zf.Cos:return function(t){return Math.cos(o[0](t))};case Zf.Atan:return 2===n?function(t){return Math.atan2(o[0](t),o[1](t))}:function(t){return Math.atan(o[0](t))};case Zf.Sqrt:return function(t){return Math.sqrt(o[0](t))};default:throw new Error("Unsupported numeric operator ".concat(r))}}(t,e);case Zf.Match:return function(t,e){for(var r=t.args.length,n=new Array(r),o=0;o<r;++o)n[o]=oh(t.args[o],e);return function(t){for(var e=n[0](t),o=1;o<r;o+=2)if(e===n[o](t))return n[o+1](t);return n[r-1](t)}}(t,e);case Zf.Interpolate:return function(t,e){for(var r=t.args.length,n=new Array(r),o=0;o<r;++o)n[o]=oh(t.args[o],e);return function(t){for(var e,o,i=n[0](t),a=n[1](t),s=2;s<r;s+=2){var u=n[s](t),l=n[s+1](t),c=Array.isArray(l);if(c&&(l=gu(l)),u>=a)return 2===s?l:c?ah(i,a,e,o,u,l):ih(i,a,e,o,u,l);e=u,o=l}return o}}(t,e);default:throw new Error("Unsupported operator ".concat(n))}}function ih(t,e,r,n,o,i){var a=o-r;if(0===a)return n;var s=e-r;return n+(1===t?s/a:(Math.pow(t,s)-1)/(Math.pow(t,a)-1))*(i-n)}function ah(t,e,r,n,o,i){if(0==o-r)return n;var a,s,u=mu(n),l=mu(i),c=l[2]-u[2];return c>180?c-=360:c<-180&&(c+=360),_u((a=[ih(t,e,r,u[0],o,l[0]),ih(t,e,r,u[1],o,l[1]),u[2]+ih(t,e,r,0,o,c),ih(t,e,r,n[3],o,i[3])],(s=ou.rgb(su.xyz(a)))[3]=a[3],s))}function sh(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return uh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uh(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function uh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lh(t){return!0}function ch(t){for(var e=Vf(),r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=fh(t[o],e);var i={variables:{},properties:{},resolution:NaN,featureId:null},a=new Array(r);return function(t,o){if(i.properties=t.getPropertiesInternal(),i.resolution=o,e.featureId){var s=t.getId();i.featureId=void 0!==s?s:null}for(var u=0,l=0;l<r;++l){var c=n[l](i);c&&(a[u]=c,u+=1)}return a.length=u,a}}function fh(t,e){var r=hh(t,"",e),n=ph(t,"",e),o=function(t,e){var r="text-",n=dh(t,r+"value",e);if(!n)return null;var o=hh(t,r,e),i=hh(t,r+"background-",e),a=ph(t,r,e),s=ph(t,r+"background-",e),u=dh(t,r+"font",e),l=yh(t,r+"max-angle",e),c=yh(t,r+"offset-x",e),f=yh(t,r+"offset-y",e),h=vh(t,r+"overflow",e),p=dh(t,r+"placement",e),y=yh(t,r+"repeat",e),d=wh(t,r+"scale",e),v=vh(t,r+"rotate-with-view",e),g=yh(t,r+"rotation",e),m=dh(t,r+"align",e),b=dh(t,r+"justify",e),w=dh(t,r+"baseline",e),_=mh(t,r+"padding",e),x=new vf({});return function(t){if(x.setText(n(t)),o&&x.setFill(o(t)),i&&x.setBackgroundFill(i(t)),a&&x.setStroke(a(t)),s&&x.setBackgroundStroke(s(t)),u&&x.setFont(u(t)),l&&x.setMaxAngle(l(t)),c&&x.setOffsetX(c(t)),f&&x.setOffsetY(f(t)),h&&x.setOverflow(h(t)),p){var e=p(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");x.setPlacement(e)}if(y&&x.setRepeat(y(t)),d&&x.setScale(d(t)),v&&x.setRotateWithView(v(t)),g&&x.setRotation(g(t)),m){var r=m(t);if("left"!==r&&"center"!==r&&"right"!==r&&"end"!==r&&"start"!==r)throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(r)}if(b){var S=b(t);if("left"!==S&&"right"!==S&&"center"!==S)throw new Error("Expected left, right, or center for text-justify");x.setJustify(S)}if(w){var k=w(t);if("bottom"!==k&&"top"!==k&&"middle"!==k&&"alphabetic"!==k&&"hanging"!==k)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(k)}return _&&x.setPadding(_(t)),x}}(t,e),i=function(t,e){return"icon-src"in t?function(t,e){var r="icon-",n=r+"src",o=Eh(t[n],n),i=bh(t,r+"anchor",e),a=wh(t,r+"scale",e),s=yh(t,r+"opacity",e),u=bh(t,r+"displacement",e),l=yh(t,r+"rotation",e),c=vh(t,r+"rotate-with-view",e),f=xh(t,r+"anchor-origin"),h=Sh(t,r+"anchor-x-units"),p=Sh(t,r+"anchor-y-units"),y=function(t,e){var r=t[e];if(void 0!==r)return jh(r,e)}(t,r+"color"),d=function(t,e){var r=t[e];if(void 0!==r){if("string"!=typeof r)throw new Error("Expected a string for ".concat(e));return r}}(t,r+"cross-origin"),v=function(t,e){var r=t[e];if(void 0!==r)return Oh(r,e)}(t,r+"offset"),g=xh(t,r+"offset-origin"),m=_h(t,r+"width"),b=_h(t,r+"height"),w=function(t,e){var r=t[e];if(void 0!==r){if("number"==typeof r)return El(r);if(!Array.isArray(r))throw new Error("Expected a number or size array for ".concat(e));if(2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])throw new Error("Expected a number or size array for ".concat(e));return r}}(t,r+"size"),_=kh(t,r+"declutter"),x=new hf({src:o,anchorOrigin:f,anchorXUnits:h,anchorYUnits:p,color:y,crossOrigin:d,offset:v,offsetOrigin:g,height:b,width:m,size:w,declutterMode:_});return function(t){return s&&x.setOpacity(s(t)),u&&x.setDisplacement(u(t)),l&&x.setRotation(l(t)),c&&x.setRotateWithView(c(t)),a&&x.setScale(a(t)),i&&x.setAnchor(i(t)),x}}(t,e):"shape-points"in t?function(t,e){var r="shape-",n=r+"points",o=Ph(t[n],n),i=hh(t,r,e),a=ph(t,r,e),s=wh(t,r+"scale",e),u=bh(t,r+"displacement",e),l=yh(t,r+"rotation",e),c=vh(t,r+"rotate-with-view",e),f=_h(t,r+"radius"),h=_h(t,r+"radius1"),p=_h(t,r+"radius2"),y=_h(t,r+"angle"),d=kh(t,r+"declutter-mode"),v=new Sc({points:o,radius:f,radius1:h,radius2:p,angle:y,declutterMode:d});return function(t){return i&&v.setFill(i(t)),a&&v.setStroke(a(t)),u&&v.setDisplacement(u(t)),l&&v.setRotation(l(t)),c&&v.setRotateWithView(c(t)),s&&v.setScale(s(t)),v}}(t,e):"circle-radius"in t?function(t,e){var r="circle-",n=hh(t,r,e),o=ph(t,r,e),i=yh(t,r+"radius",e),a=wh(t,r+"scale",e),s=bh(t,r+"displacement",e),u=yh(t,r+"rotation",e),l=vh(t,r+"rotate-with-view",e),c=kh(t,r+"declutter-mode"),f=new Cc({radius:5,declutterMode:c});return function(t){return i&&f.setRadius(i(t)),n&&f.setFill(n(t)),o&&f.setStroke(o(t)),s&&f.setDisplacement(s(t)),u&&f.setRotation(u(t)),l&&f.setRotateWithView(l(t)),a&&f.setScale(a(t)),f}}(t,e):null}(t,e),a=yh(t,"z-index",e);if(!(r||n||o||i||Ge(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));var s=new Vc;return function(t){var e=!0;if(r){var u=r(t);u&&(e=!1),s.setFill(u)}if(n){var l=n(t);l&&(e=!1),s.setStroke(l)}if(o){var c=o(t);c&&(e=!1),s.setText(c)}if(i){var f=i(t);f&&(e=!1),s.setImage(f)}return a&&s.setZIndex(a(t)),e?null:s}}function hh(t,e,r){var n=gh(t,e+"fill-color",r);if(!n)return null;var o=new Ic;return function(t){var e=n(t);return"none"===e?null:(o.setColor(e),o)}}function ph(t,e,r){var n=yh(t,e+"stroke-width",r),o=gh(t,e+"stroke-color",r);if(!n&&!o)return null;var i=dh(t,e+"stroke-line-cap",r),a=dh(t,e+"stroke-line-join",r),s=mh(t,e+"stroke-line-dash",r),u=yh(t,e+"stroke-line-dash-offset",r),l=yh(t,e+"stroke-miter-limit",r),c=new Dc;return function(t){if(o){var e=o(t);if("none"===e)return null;c.setColor(e)}if(n&&c.setWidth(n(t)),i){var r=i(t);if("butt"!==r&&"round"!==r&&"square"!==r)throw new Error("Expected butt, round, or square line cap");c.setLineCap(r)}if(a){var f=a(t);if("bevel"!==f&&"round"!==f&&"miter"!==f)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return s&&c.setLineDash(s(t)),u&&c.setLineDashOffset(u(t)),l&&c.setMiterLimit(l(t)),c}}function yh(t,e,r){if(e in t){var n=nh(t[e],If,r);return function(t){return Ph(n(t),e)}}}function dh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Lf,r);return function(t){return Eh(n(t),e)}}function vh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Rf,r);return function(t){var r=n(t);if("boolean"!=typeof r)throw new Error("Expected a boolean for ".concat(e));return r}}function gh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Mf|Lf,r);return function(t){return jh(n(t),e)}}function mh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Ff,r);return function(t){return Oh(n(t),e)}}function bh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Ff,r);return function(t){var r=Oh(n(t),e);if(2!==r.length)throw new Error("Expected two numbers for ".concat(e));return r}}function wh(t,e,r){if(!(e in t))return null;var n=nh(t[e],Ff|If,r);return function(t){return function(t,e){if("number"==typeof t)return t;var r=Oh(t,e);if(2!==r.length)throw new Error("Expected an array of two numbers for ".concat(e));return r}(n(t),e)}}function _h(t,e){var r=t[e];if(void 0!==r){if("number"!=typeof r)throw new Error("Expected a number for ".concat(e));return r}}function xh(t,e){var r=t[e];if(void 0!==r){if("bottom-left"!==r&&"bottom-right"!==r&&"top-left"!==r&&"top-right"!==r)throw new Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(e));return r}}function Sh(t,e){var r=t[e];if(void 0!==r){if("pixels"!==r&&"fraction"!==r)throw new Error("Expected pixels or fraction for ".concat(e));return r}}function kh(t,e){var r=t[e];if(void 0!==r){if("string"!=typeof r)throw new Error("Expected a string for ".concat(e));if("declutter"!==r&&"obstacle"!==r&&"none"!==r)throw new Error("Expected declutter, obstacle, or none for ".concat(e));return r}}function Oh(t,e){if(!Array.isArray(t))throw new Error("Expected an array for ".concat(e));for(var r=t.length,n=0;n<r;++n)if("number"!=typeof t[n])throw new Error("Expected an array of numbers for ".concat(e));return t}function Eh(t,e){if("string"!=typeof t)throw new Error("Expected a string for ".concat(e));return t}function Ph(t,e){if("number"!=typeof t)throw new Error("Expected a number for ".concat(e));return t}function jh(t,e){if("string"==typeof t)return t;var r=Oh(t,e),n=r.length;if(n<3||n>4)throw new Error("Expected a color with 3 or 4 values for ".concat(e));return r}function Ch(t){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(t)}function Ah(t){var e=function(t,e){if("object"!=Ch(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ch(e)?e:String(e)}function Th(){return Th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Th.apply(this,arguments)}function Rh(t){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rh(t)}function Ih(t,e){return Ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ih(t,e)}var Lh="renderOrder",Mh=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);return delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,(r=function(t,e,r){return e=Rh(e),function(t,e){if(e&&("object"===Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Rh(t).constructor):e.apply(t,r))}(this,e,[n])).declutter_=void 0!==t.declutter&&t.declutter,r.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(t.style),r.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,r.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ih(t,e)}(e,t),r=e,(n=[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(t){return Th(Rh(e.prototype),"getFeatures",this).call(this,t)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(Lh)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(t){t.declutterTree||(t.declutterTree=new zl(9)),this.getRenderer().renderDeclutter(t)}},{key:"setRenderOrder",value:function(t){this.set(Lh,t)}},{key:"setStyle",value:function(t){this.style_=function(t){if(void 0===t)return Uc;if(!t)return null;if("function"==typeof t)return t;if(t instanceof Vc)return t;if(!Array.isArray(t))return ch([t]);if(0===t.length)return[];var e=t.length,r=t[0];if(r instanceof Vc){for(var n=new Array(e),o=0;o<e;++o){var i=t[o];if(!(i instanceof Vc))throw new Error("Expected a list of style instances");n[o]=i}return n}if("style"in r){for(var a=new Array(e),s=0;s<e;++s){var u=t[s];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[s]=u}return function(t){var e=Vf(),r=function(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;++o){var i=t[o],a="filter"in i?nh(i.filter,Rf,e):lh,s=void 0;if(Array.isArray(i.style)){var u=i.style.length;s=new Array(u);for(var l=0;l<u;++l)s[l]=fh(i.style[l],e)}else s=[fh(i.style,e)];n[o]={filter:a,styles:s}}return function(e){for(var o=[],i=!1,a=0;a<r;++a)if((0,n[a].filter)(e)&&(!t[a].else||!i)){i=!0;var s,u=sh(n[a].styles);try{for(u.s();!(s=u.n()).done;){var l=(0,s.value)(e);l&&o.push(l)}}catch(t){u.e(t)}finally{u.f()}}return o}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null};return function(t,o){if(n.properties=t.getPropertiesInternal(),n.resolution=o,e.featureId){var i=t.getId();n.featureId=void 0!==i?i:null}return r(n)}}(a)}return ch(t)}(t),this.styleFunction_=null===t?void 0:function(t){var e,r;return"function"==typeof t?e=t:(Array.isArray(t)?r=t:(Mr("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),r=[t]),e=function(){return r}),e}(this.style_),this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ah(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ls);const Fh=Mh;var Dh={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Bh=[Dh.FILL],Nh=[Dh.STROKE],zh=[Dh.BEGIN_PATH],Gh=[Dh.CLOSE_PATH];const Uh=Dh;function qh(t){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(t)}function Wh(t){var e=function(t,e){if("object"!=qh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qh(e)?e:String(e)}const Vh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"drawCustom",value:function(t,e,r,n){}},{key:"drawGeometry",value:function(t){}},{key:"setStyle",value:function(t){}},{key:"drawCircle",value:function(t,e){}},{key:"drawFeature",value:function(t,e){}},{key:"drawGeometryCollection",value:function(t,e){}},{key:"drawLineString",value:function(t,e){}},{key:"drawMultiLineString",value:function(t,e){}},{key:"drawMultiPoint",value:function(t,e){}},{key:"drawMultiPolygon",value:function(t,e){}},{key:"drawPoint",value:function(t,e){}},{key:"drawPolygon",value:function(t,e){}},{key:"drawText",value:function(t,e){}},{key:"setFillStrokeStyle",value:function(t,e){}},{key:"setImageStyle",value:function(t,e){}},{key:"setTextStyle",value:function(t,e){}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wh(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yh(t){return Yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(t)}function Zh(t){var e=function(t,e){if("object"!=Yh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yh(e)?e:String(e)}function Xh(t){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xh(t)}function Hh(t,e){return Hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hh(t,e)}var Kh=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=Xh(e),function(t,e){if(e&&("object"===Yh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xh(t).constructor):e.apply(t,void 0))}(this,e)).tolerance=t,i.maxExtent=r,i.pixelRatio=o,i.maxLineWidth=0,i.resolution=n,i.beginGeometryInstruction1_=null,i.beginGeometryInstruction2_=null,i.bufferedMaxExtent_=null,i.instructions=[],i.coordinates=[],i.tmpCoordinate_=[],i.hitDetectionInstructions=[],i.state={},i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hh(t,e)}(e,t),r=e,n=[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates,i=o.length,a=0,s=t.length;a<s;a+=e)n[0]=t[a],n[1]=t[a+1],wn(r,n)&&(o[i++]=n[0],o[i++]=n[1]);return i}},{key:"appendFlatLineCoordinates",value:function(t,e,r,n,o,i){var a=this.coordinates,s=a.length,u=this.getBufferedMaxExtent();i&&(e+=n);var l,c,f,h=t[e],p=t[e+1],y=this.tmpCoordinate_,d=!0;for(l=e+n;l<r;l+=n)y[0]=t[l],y[1]=t[l+1],(f=Sn(u,y))!==c?(d&&(a[s++]=h,a[s++]=p,d=!1),a[s++]=y[0],a[s++]=y[1]):f===yn.INTERSECTING?(a[s++]=y[0],a[s++]=y[1],d=!1):d=!0,h=y[0],p=y[1],c=f;return(o&&d||l===e+n)&&(a[s++]=h,a[s++]=p),s}},{key:"drawCustomCoordinates_",value:function(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i],u=this.appendFlatLineCoordinates(t,e,s,n,!1,!1);o.push(u),e=s}return e}},{key:"drawCustom",value:function(t,e,r,n){this.beginGeometry(t,e);var o,i,a,s,u,l=t.getType(),c=t.getStride(),f=this.coordinates.length;switch(l){case"MultiPolygon":o=t.getOrientedFlatCoordinates(),s=[];var h=t.getEndss();u=0;for(var p=0,y=h.length;p<y;++p){var d=[];u=this.drawCustomCoordinates_(o,u,h[p],c,d),s.push(d)}this.instructions.push([Uh.CUSTOM,f,s,t,r,La]),this.hitDetectionInstructions.push([Uh.CUSTOM,f,s,t,n||r,La]);break;case"Polygon":case"MultiLineString":a=[],o="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(o,0,t.getEnds(),c,a),this.instructions.push([Uh.CUSTOM,f,a,t,r,Ia]),this.hitDetectionInstructions.push([Uh.CUSTOM,f,a,t,n||r,Ia]);break;case"LineString":case"Circle":o=t.getFlatCoordinates(),i=this.appendFlatLineCoordinates(o,0,o.length,c,!1,!1),this.instructions.push([Uh.CUSTOM,f,i,t,r,Ra]),this.hitDetectionInstructions.push([Uh.CUSTOM,f,i,t,n||r,Ra]);break;case"MultiPoint":o=t.getFlatCoordinates(),(i=this.appendFlatPointCoordinates(o,c))>f&&(this.instructions.push([Uh.CUSTOM,f,i,t,r,Ra]),this.hitDetectionInstructions.push([Uh.CUSTOM,f,i,t,n||r,Ra]));break;case"Point":o=t.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),i=this.coordinates.length,this.instructions.push([Uh.CUSTOM,f,i,t,r]),this.hitDetectionInstructions.push([Uh.CUSTOM,f,i,t,n||r])}this.endGeometry(e)}},{key:"beginGeometry",value:function(t,e){this.beginGeometryInstruction1_=[Uh.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Uh.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,o=e.length,i=-1;for(t=0;t<o;++t)(n=(r=e[t])[0])==Uh.END_GEOMETRY?i=t:n==Uh.BEGIN_GEOMETRY&&(r[2]=t,Re(this.hitDetectionInstructions,i,t),i=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=Vl(n||rc)}else r.fillStyle=void 0;if(e){var o=e.getColor();r.strokeStyle=Vl(o||ac);var i=e.getLineCap();r.lineCap=void 0!==i?i:nc;var a=e.getLineDash();r.lineDash=a?a.slice():oc;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:ic;var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}},{key:"createFill",value:function(t){var e=t.fillStyle,r=[Uh.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(t){return[Uh.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)}},{key:"updateStrokeStyle",value:function(t,e){var r=t.strokeStyle,n=t.lineCap,o=t.lineDash,i=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!Le(t.currentLineDash,o)||t.currentLineDashOffset!=i||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=i,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)}},{key:"endGeometry",value:function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Uh.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=mn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;gn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zh(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vh);const Jh=Kh;function $h(t){return $h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(t)}function Qh(t){var e=function(t,e){if("object"!=$h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$h(e)?e:String(e)}function tp(){return tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ep(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},tp.apply(this,arguments)}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ep(t)}function rp(t,e){return rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rp(t,e)}var np=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=ep(e),function(t,e){if(e&&("object"===$h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],ep(t).constructor):e.apply(t,r))}(this,e,[t,r,n,o])).hitDetectionImage_=null,i.image_=null,i.imagePixelRatio_=void 0,i.anchorX_=void 0,i.anchorY_=void 0,i.height_=void 0,i.opacity_=void 0,i.originX_=void 0,i.originY_=void 0,i.rotateWithView_=void 0,i.rotation_=void 0,i.scale_=void 0,i.width_=void 0,i.declutterMode_=void 0,i.declutterImageWithText_=void 0,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rp(t,e)}(e,t),r=e,n=[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,i=this.appendFlatPointCoordinates(r,n);this.instructions.push([Uh.DRAW_IMAGE,o,i,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Uh.DRAW_IMAGE,o,i,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),o=this.coordinates.length,i=this.appendFlatPointCoordinates(r,n);this.instructions.push([Uh.DRAW_IMAGE,o,i,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Uh.DRAW_IMAGE,o,i,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,tp(ep(e.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,e){var r=t.getAnchor(),n=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qh(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Jh);const op=np;function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function ap(t){var e=function(t,e){if("object"!=ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ip(e)?e:String(e)}function sp(){return sp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=up(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},sp.apply(this,arguments)}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},up(t)}function lp(t,e){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lp(t,e)}var cp=function(t){function e(t,r,n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,s=[t,r,n,o],a=up(a=e),function(t,e){if(e&&("object"===ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(i,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(a,s||[],up(i).constructor):a.apply(i,s));var i,a,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lp(t,e)}(e,t),r=e,n=[{key:"drawFlatCoordinates_",value:function(t,e,r,n){var o=this.coordinates.length,i=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[Uh.MOVE_TO_LINE_TO,o,i];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}},{key:"drawLineString",value:function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Uh.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,oc,0],zh);var i=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(i,0,i.length,a),this.hitDetectionInstructions.push(Nh),this.endGeometry(e)}}},{key:"drawMultiLineString",value:function(t,e){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Uh.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,oc,0],zh);for(var i=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=i.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,i[l],s);this.hitDetectionInstructions.push(Nh),this.endGeometry(e)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Nh),this.reverseHitDetectionInstructions(),this.state=null,sp(up(e.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Nh),t.lastStroke=this.coordinates.length),t.lastStroke=0,sp(up(e.prototype),"applyStroke",this).call(this,t),this.instructions.push(zh)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ap(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Jh);const fp=cp;function hp(t){return hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(t)}function pp(t){var e=function(t,e){if("object"!=hp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hp(e)?e:String(e)}function yp(){return yp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},yp.apply(this,arguments)}function dp(t){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dp(t)}function vp(t,e){return vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vp(t,e)}var gp=function(t){function e(t,r,n,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=this,s=[t,r,n,o],a=dp(a=e),function(t,e){if(e&&("object"===hp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(i,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(a,s||[],dp(i).constructor):a.apply(i,s));var i,a,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vp(t,e)}(e,t),r=e,n=[{key:"drawFlatCoordinatess_",value:function(t,e,r,n){var o=this.state,i=void 0!==o.fillStyle,a=void 0!==o.strokeStyle,s=r.length;this.instructions.push(zh),this.hitDetectionInstructions.push(zh);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,l,n,!0,!a),h=[Uh.MOVE_TO_LINE_TO,c,f];this.instructions.push(h),this.hitDetectionInstructions.push(h),a&&(this.instructions.push(Gh),this.hitDetectionInstructions.push(Gh)),e=l}return i&&(this.instructions.push(Bh),this.hitDetectionInstructions.push(Bh)),a&&(this.instructions.push(Nh),this.hitDetectionInstructions.push(Nh)),e}},{key:"drawCircle",value:function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Uh.SET_FILL_STYLE,rc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Uh.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,oc,0]);var i=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(i,0,i.length,a,!1,!1);var u=[Uh.CIRCLE,s];this.instructions.push(zh,u),this.hitDetectionInstructions.push(zh,u),void 0!==r.fillStyle&&(this.instructions.push(Bh),this.hitDetectionInstructions.push(Bh)),void 0!==r.strokeStyle&&(this.instructions.push(Nh),this.hitDetectionInstructions.push(Nh)),this.endGeometry(e)}}},{key:"drawPolygon",value:function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Uh.SET_FILL_STYLE,rc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Uh.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,oc,0]);var i=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,i,s),this.endGeometry(e)}}},{key:"drawMultiPolygon",value:function(t,e){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Uh.SET_FILL_STYLE,rc]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Uh.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,oc,0]);for(var i=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=i.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,i[l],s);this.endGeometry(e)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var r=this.coordinates,n=0,o=r.length;n<o;++n)r[n]=Ca(r[n],t);return yp(dp(e.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pp(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Jh);const mp=gp;function bp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wp(t,e,r,n,o){for(var i=[],a=r,s=0,u=e.slice(r,2);s<t&&a+o<n;){var l=function(t){if(Array.isArray(t))return t}(_=u.slice(-2))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(_)||function(t,e){if(t){if("string"==typeof t)return bp(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bp(t,2):void 0}}(_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=l[0],f=l[1],h=e[a+o],p=e[a+o+1],y=Math.sqrt((h-c)*(h-c)+(p-f)*(p-f));if((s+=y)>=t){var d=(t-s+y)/y,v=Gr(c,h,d),g=Gr(f,p,d);u.push(v,g),i.push(u),u=[v,g],s==t&&(a+=o),s=0}else if(s<t)u.push(e[a+o],e[a+o+1]),a+=o;else{var m=y-s,b=Gr(c,h,m/y),w=Gr(f,p,m/y);u.push(b,w),i.push(u),u=[b,w],s=0,a+=o}}var _;return s>0&&i.push(u),i}function _p(t,e,r,n,o){var i,a,s,u,l,c,f,h,p,y=r,d=r,v=0,g=0,m=r;for(i=r;i<n;i+=o){var b=e[i],w=e[i+1];void 0!==u&&(h=b-u,p=w-l,s=Math.sqrt(h*h+p*p),void 0!==c&&(g+=a,Math.acos((c*h+f*p)/(a*s))>t&&(g>v&&(v=g,y=m,d=i),g=0,m=i-o)),a=s,c=h,f=p),u=b,l=w}return(g+=s)>v?[m,i]:[y,d]}function xp(t){return xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(t)}function Sp(t){var e=function(t,e){if("object"!=xp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xp(e)?e:String(e)}function kp(){return kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Op(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},kp.apply(this,arguments)}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Op(t)}function Ep(t,e){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ep(t,e)}var Pp={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},jp=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=Op(e),function(t,e){if(e&&("object"===xp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Op(t).constructor):e.apply(t,r))}(this,e,[t,r,n,o])).labels_=null,i.text_="",i.textOffsetX_=0,i.textOffsetY_=0,i.textRotateWithView_=void 0,i.textRotation_=0,i.textFillState_=null,i.fillStates={},i.fillStates[rc]={fillStyle:rc},i.textStrokeState_=null,i.strokeStates={},i.textState_={},i.textStates={},i.textKey_="",i.fillKey_="",i.strokeKey_="",i.declutterImageWithText_=void 0,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ep(t,e)}(e,t),r=e,n=[{key:"finish",value:function(){var t=kp(Op(e.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,e){var r=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(r||n)){var i=this.coordinates,a=i.length,s=t.getType(),u=null,l=t.getStride();if("line"!==o.placement||"LineString"!=s&&"MultiLineString"!=s&&"Polygon"!=s&&"MultiPolygon"!=s){var c=o.overflow?null:[];switch(s){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),l=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||c.push(u[2]/this.resolution),l=3;break;case"MultiPolygon":var f=t.getFlatInteriorPoints();u=[];for(var h=0,p=f.length;h<p;h+=3)o.overflow||c.push(f[h+2]/this.resolution),u.push(f[h],f[h+1]);if(0===u.length)return;l=2}var y=this.appendFlatPointCoordinates(u,l);if(y===a)return;if(c&&(y-a)/2!=u.length/l){var d=a/2;c=c.filter((function(t,e){var r=i[2*(d+e)]===u[e*l]&&i[2*(d+e)+1]===u[e*l+1];return r||--d,r}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var v=o.padding;if(v!=lc&&(o.scale[0]<0||o.scale[1]<0)){var g=o.padding[0],m=o.padding[1],b=o.padding[2],w=o.padding[3];o.scale[0]<0&&(m=-m,w=-w),o.scale[1]<0&&(g=-g,b=-b),v=[g,m,b,w]}var _=this.pixelRatio;this.instructions.push([Uh.DRAW_IMAGE,a,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,v==lc?lc:v.map((function(t){return t*_})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var x=1/_,S=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=rc,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Uh.DRAW_IMAGE,a,y,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,void 0,this.declutterImageWithText_,v,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?rc:this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),o.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!Yn(this.getBufferedMaxExtent(),t.getExtent()))return;var k;if(u=t.getFlatCoordinates(),"LineString"==s)k=[u.length];else if("MultiLineString"==s)k=t.getEnds();else if("Polygon"==s)k=t.getEnds().slice(0,1);else if("MultiPolygon"==s){var O=t.getEndss();k=[];for(var E=0,P=O.length;E<P;++E)k.push(O[E][0])}this.beginGeometry(t,e);for(var j=o.repeat,C=j?void 0:o.textAlign,A=0,T=0,R=k.length;T<R;++T)for(var I,L=0,M=(I=j?wp(j*this.resolution,u,A,k[T],l):[u.slice(A,k[T])]).length;L<M;++L){var F=I[L],D=0,B=F.length;if(null==C){var N=_p(o.maxAngle,F,0,F.length,2);D=N[0],B=N[1]}for(var z=D;z<B;z+=l)i.push(F[z],F[z+1]);var G=i.length;A=k[T],this.drawChars_(a,G),a=G}this.endGeometry(e)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||sc,justify:e.justify,textBaseline:e.textBaseline||uc,scale:e.scale});var i=this.fillKey_;r&&(i in this.fillStates||(this.fillStates[i]={fillStyle:r.fillStyle}))}},{key:"drawChars_",value:function(t,e){var r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,i=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,u=Pp[n.textBaseline],l=this.textOffsetY_*s,c=this.text_,f=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Uh.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,s,l,o,f*s,c,i,1]),this.hitDetectionInstructions.push([Uh.DRAW_CHARS,t,e,u,n.overflow,a?rc:a,n.maxAngle,s,l,o,f*s,c,i,1/s])}},{key:"setTextStyle",value:function(t,e){var r,n,o;if(t){var i=t.getFill();i?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Vl(i.getColor()||rc)):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();o.lineCap=a.getLineCap()||nc,o.lineDash=s?s.slice():oc,o.lineDashOffset=void 0===u?0:u,o.lineJoin=a.getLineJoin()||ic,o.lineWidth=void 0===l?1:l,o.miterLimit=void 0===c?10:c,o.strokeStyle=Vl(a.getColor()||ac)}else o=null,this.textStrokeState_=o;r=this.textState_;var f=t.getFont()||ec;pc(f);var h=t.getScaleArray();r.overflow=t.getOverflow(),r.font=f,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.repeat=t.getRepeat(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||uc,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||lc,r.scale=void 0===h?[1,1]:h;var p=t.getOffsetX(),y=t.getOffsetY(),d=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===v?0:v,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:pr(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+pr(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sp(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Jh);function Cp(t){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(t)}function Ap(t){var e=function(t,e){if("object"!=Cp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Cp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cp(e)?e:String(e)}var Tp={Circle:mp,Default:Jh,Image:op,LineString:fp,Polygon:mp,Text:jp};const Rp=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=o,this.resolution_=n,this.buildersByZIndex_={}}var e,r;return e=t,(r=[{key:"finish",value:function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var o=r[n].finish();t[e][n]=o}}return t}},{key:"getBuilder",value:function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var o=n[e];return void 0===o&&(o=new(0,Tp[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=o),o}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ap(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ip(t,e,r,n,o,i,a,s,u,l,c,f){var h=t[e],p=t[e+1],y=0,d=0,v=0,g=0;function m(){y=h,d=p,h=t[e+=n],p=t[e+1],g+=v,v=Math.sqrt((h-y)*(h-y)+(p-d)*(p-d))}do{m()}while(e<r-n&&g+v<i);for(var b=0===v?0:(i-g)/v,w=Gr(y,h,b),_=Gr(d,p,b),x=e-n,S=g,k=i+s*u(l,o,c);e<r-n&&g+v<k;)m();var O,E=Gr(y,h,b=0===v?0:(k-g)/v),P=Gr(d,p,b);if(f){var j=[w,_,E,P];ra(j,0,4,2,f,j,j),O=j[0]>j[2]}else O=w>E;var C,A=Math.PI,T=[],R=x+n===e;if(v=0,g=S,h=t[e=x],p=t[e+1],R){m(),C=Math.atan2(p-d,h-y),O&&(C+=C>0?-A:A);var I=(E+w)/2,L=(P+_)/2;return T[0]=[I,L,(k-i)/2,C,o],T}for(var M=0,F=(o=o.replace(/\n/g," ")).length;M<F;){m();var D=Math.atan2(p-d,h-y);if(O&&(D+=D>0?-A:A),void 0!==C){var B=D-C;if(B+=B>A?-2*A:B<-A?2*A:0,Math.abs(B)>a)return null}C=D;for(var N=M,z=0;M<F;++M){var G=s*u(l,o[O?F-M-1:M],c);if(e+n<r&&g+v<i+z+G/2)break;z+=G}if(M!==N){var U=O?o.substring(F-N,F-M):o.substring(N,M),q=Gr(y,h,b=0===v?0:(i+z/2-g)/v),W=Gr(d,p,b);T.push([q,W,z/2,D,U]),i+=z}}return T}function Lp(t,e,r,n){for(var o=t[e],i=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-o)*(u-o)+(l-i)*(l-i)),o=u,i=l}return a}function Mp(t){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(t)}function Fp(t){var e=function(t,e){if("object"!=Mp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mp(e)?e:String(e)}var Dp=[1/0,1/0,-1/0,-1/0],Bp=[],Np=[],zp=[],Gp=[];function Up(t){return t[3].declutterBox}var qp=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Wp(t,e){return"start"===e?e=qp.test(t)?"right":"left":"end"===e&&(e=qp.test(t)?"left":"right"),Pp[e]}function Vp(t,e,r){return r>0&&t.push("\n",""),t.push(e,""),t}var Yp=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignFill_,this.instructions=o.instructions,this.coordinates=o.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=o.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=o.fillStates||{},this.strokeStates=o.strokeStates||{},this.textStates=o.textStates||{},this.widths_={},this.labels_={}}var e,r;return e=t,r=[{key:"createLabel",value:function(t,e,r,n){var o=t+e+r+n;if(this.labels_[o])return this.labels_[o];var i=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=[s.scale[0]*u,s.scale[1]*u],c=Array.isArray(t),f=s.justify?Pp[s.justify]:Wp(Array.isArray(t)?t[0]:t,s.textAlign||sc),h=n&&i.lineWidth?i.lineWidth:0,p=c?t:t.split("\n").reduce(Vp,[]),y=function(t,e){for(var r=[],n=[],o=[],i=0,a=0,s=0,u=0,l=0,c=e.length;l<=c;l+=2){var f=e[l];if("\n"!==f&&l!==c){var h=e[l+1]||t.font,p=vc(h,f);r.push(p),a+=p;var y=yc(h);n.push(y),u=Math.max(u,y)}else i=Math.max(i,a),o.push(a),a=0,s+=u}return{width:i,height:s,widths:r,heights:n,lineWidths:o}}(s,p),d=y.width,v=y.height,g=y.widths,m=y.heights,b=y.lineWidths,w=d+h,_=[],x=(w+2)*l[0],S=(v+h)*l[1],k={width:x<0?Math.floor(x):Math.ceil(x),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:_};1==l[0]&&1==l[1]||_.push("scale",l),n&&(_.push("strokeStyle",i.strokeStyle),_.push("lineWidth",h),_.push("lineCap",i.lineCap),_.push("lineJoin",i.lineJoin),_.push("miterLimit",i.miterLimit),_.push("setLineDash",[i.lineDash]),_.push("lineDashOffset",i.lineDashOffset)),r&&_.push("fillStyle",a.fillStyle),_.push("textBaseline","middle"),_.push("textAlign","center");for(var O,E=.5-f,P=f*w+E*h,j=[],C=[],A=0,T=0,R=0,I=0,L=0,M=p.length;L<M;L+=2){var F=p[L];if("\n"!==F){var D=p[L+1]||s.font;D!==O&&(n&&j.push("font",D),r&&C.push("font",D),O=D),A=Math.max(A,m[R]);var B=[F,P+E*g[R]+f*(g[R]-b[I]),.5*(h+A)+T];P+=g[R],n&&j.push("strokeText",B),r&&C.push("fillText",B),++R}else T+=A,A=0,P=f*w+E*h,++I}return Array.prototype.push.apply(_,j),Array.prototype.push.apply(_,C),this.labels_[o]=k,k}},{key:"replayTextBackground_",value:function(t,e,r,n,o,i,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,o),t.lineTo.apply(t,e),i&&(this.alignFill_=i[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(t,e,r,n,o,i,a,s,u,l,c,f,h,p,y,d){var v,g=r-(a*=f[0]),m=n-(s*=f[1]),b=o+u>t?t-u:o,w=i+l>e?e-l:i,_=p[3]+b*f[0]+p[1],x=p[0]+w*f[1]+p[2],S=g-p[3],k=m-p[0];return(y||0!==c)&&(Bp[0]=S,Gp[0]=S,Bp[1]=k,Np[1]=k,Np[0]=S+_,zp[0]=Np[0],zp[1]=k+x,Gp[1]=zp[1]),0!==c?(Ki(v=$i([1,0,0,1,0,0],r,n,1,1,c,-r,-n),Bp),Ki(v,Np),Ki(v,zp),Ki(v,Gp),kn(Math.min(Bp[0],Np[0],zp[0],Gp[0]),Math.min(Bp[1],Np[1],zp[1],Gp[1]),Math.max(Bp[0],Np[0],zp[0],Gp[0]),Math.max(Bp[1],Np[1],zp[1],Gp[1]),Dp)):kn(Math.min(S,S+_),Math.min(k,k+x),Math.max(S,S+_),Math.max(k,k+x),Dp),h&&(g=Math.round(g),m=Math.round(m)),{drawImageX:g,drawImageY:m,drawImageW:b,drawImageH:w,originX:u,originY:l,declutterBox:{minX:Dp[0],minY:Dp[1],maxX:Dp[2],maxY:Dp[3],value:d},canvasTransform:v,scale:f}}},{key:"replayImageOrLabel_",value:function(t,e,r,n,o,i,a){var s=!(!i&&!a),u=n.declutterBox,l=t.canvas,c=a?a[2]*n.scale[0]/2:0;return u.minX-c<=l.width/e&&u.maxX+c>=0&&u.minY-c<=l.height/e&&u.maxY+c>=0&&(s&&this.replayTextBackground_(t,Bp,Np,zp,Gp,i,a),function(t,e,r,n,o,i,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c[0],c[1]),function(t,e){for(var r=t.contextInstructions,n=0,o=r.length;n<o;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(u,l),t.scale(c[0],c[1]),t.drawImage(n,o,i,a,s,0,0,a,s)):t.drawImage(n,o,i,a,s,u,l,a*c[0],s*c[1]),t.restore()}(t,n.canvasTransform,o,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}},{key:"fill_",value:function(t){if(this.alignFill_){var e=Ki(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}},{key:"setStrokeStyle_",value:function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}},{key:"drawLabelWithPointPlacement_",value:function(t,e,r,n){var o=this.textStates[e],i=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=Wp(Array.isArray(t)?t[0]:t,o.textAlign||sc),l=Pp[o.textBaseline||uc],c=a&&a.lineWidth?a.lineWidth:0;return{label:i,anchorX:u*(i.width/s-2*o.scale[0])+2*(.5-u)*c,anchorY:l*i.height/s+2*(.5-l)*c}}},{key:"execute_",value:function(t,e,r,n,o,i,a,s){var u,l,c;this.pixelCoordinates_&&Le(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ea(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),c=r,(l=this.renderedTransform_)[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5]);for(var f,h,p,y,d,v,g,m,b,w,_,x,S,k,O,E,P=0,j=n.length,C=0,A=0,T=0,R=null,I=null,L=this.coordinateCache_,M=this.viewRotation_,F=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},B=this.instructions!=n||this.overlaps?0:200;P<j;){var N=n[P];switch(N[0]){case Uh.BEGIN_GEOMETRY:S=N[1],E=N[3],S.getGeometry()?void 0===a||Yn(a,E.getExtent())?++P:P=N[2]+1:P=N[2];break;case Uh.BEGIN_PATH:A>B&&(this.fill_(t),A=0),T>B&&(t.stroke(),T=0),A||T||(t.beginPath(),y=NaN,d=NaN),++P;break;case Uh.CIRCLE:var z=u[C=N[1]],G=u[C+1],U=u[C+2]-z,q=u[C+3]-G,W=Math.sqrt(U*U+q*q);t.moveTo(z+W,G),t.arc(z,G,W,0,2*Math.PI,!0),++P;break;case Uh.CLOSE_PATH:t.closePath(),++P;break;case Uh.CUSTOM:C=N[1],f=N[2];var V=N[3],Y=N[4],Z=6==N.length?N[5]:void 0;D.geometry=V,D.feature=S,P in L||(L[P]=[]);var X=L[P];Z?Z(u,C,f,2,X):(X[0]=u[C],X[1]=u[C+1],X.length=2),Y(X,D),++P;break;case Uh.DRAW_IMAGE:C=N[1],f=N[2],m=N[3],h=N[4],p=N[5];var H=N[6],K=N[7],J=N[8],$=N[9],Q=N[10],tt=N[11],et=N[12],rt=N[13],nt=N[14],ot=N[15];if(!m&&N.length>=20){b=N[19],w=N[20],_=N[21],x=N[22];var it=this.drawLabelWithPointPlacement_(b,w,_,x);m=it.label,N[3]=m;var at=N[23];h=(it.anchorX-at)*this.pixelRatio,N[4]=h;var st=N[24];p=(it.anchorY-st)*this.pixelRatio,N[5]=p,H=m.height,N[6]=H,rt=m.width,N[13]=rt}var ut=void 0;N.length>25&&(ut=N[25]);var lt=void 0,ct=void 0,ft=void 0;N.length>17?(lt=N[16],ct=N[17],ft=N[18]):(lt=lc,ct=!1,ft=!1),Q&&F?tt+=M:Q||F||(tt-=M);for(var ht=0;C<f;C+=2)if(!(ut&&ut[ht++]<rt/this.pixelRatio)){var pt=this.calculateImageOrLabelDimensions_(m.width,m.height,u[C],u[C+1],rt,H,h,p,J,$,tt,et,o,lt,ct||ft,S),yt=[t,e,m,pt,K,ct?R:null,ft?I:null];if(s){if("none"===nt)continue;if("obstacle"===nt){s.insert(pt.declutterBox);continue}var dt=void 0,vt=void 0;if(ot){var gt=f-C;if(!ot[gt]){ot[gt]=yt;continue}if(dt=ot[gt],delete ot[gt],vt=Up(dt),s.collides(vt))continue}if(s.collides(pt.declutterBox))continue;dt&&(s.insert(vt),this.replayImageOrLabel_.apply(this,dt)),s.insert(pt.declutterBox)}this.replayImageOrLabel_.apply(this,yt)}++P;break;case Uh.DRAW_CHARS:var mt=N[1],bt=N[2],wt=N[3],_t=N[4];x=N[5];var xt=N[6],St=N[7],kt=N[8];_=N[9];var Ot=N[10];b=N[11],w=N[12];var Et=[N[13],N[13]],Pt=this.textStates[w],jt=Pt.font,Ct=[Pt.scale[0]*St,Pt.scale[1]*St],At=void 0;jt in this.widths_?At=this.widths_[jt]:(At={},this.widths_[jt]=At);var Tt=Lp(u,mt,bt,2),Rt=Math.abs(Ct[0])*gc(jt,b,At);if(_t||Rt<=Tt){var It=Ip(u,mt,bt,2,b,(Tt-Rt)*Wp(b,this.textStates[w].textAlign),xt,Math.abs(Ct[0]),gc,jt,At,F?0:this.viewRotation_);t:if(It){var Lt=[],Mt=void 0,Ft=void 0,Dt=void 0,Bt=void 0,Nt=void 0;if(_)for(Mt=0,Ft=It.length;Mt<Ft;++Mt){Dt=(Nt=It[Mt])[4],Bt=this.createLabel(Dt,w,"",_),h=Nt[2]+(Ct[0]<0?-Ot:Ot),p=wt*Bt.height+2*(.5-wt)*Ot*Ct[1]/Ct[0]-kt;var zt=this.calculateImageOrLabelDimensions_(Bt.width,Bt.height,Nt[0],Nt[1],Bt.width,Bt.height,h,p,0,0,Nt[3],Et,!1,lc,!1,S);if(s&&s.collides(zt.declutterBox))break t;Lt.push([t,e,Bt,zt,1,null,null])}if(x)for(Mt=0,Ft=It.length;Mt<Ft;++Mt){Dt=(Nt=It[Mt])[4],Bt=this.createLabel(Dt,w,x,""),h=Nt[2],p=wt*Bt.height-kt;var Gt=this.calculateImageOrLabelDimensions_(Bt.width,Bt.height,Nt[0],Nt[1],Bt.width,Bt.height,h,p,0,0,Nt[3],Et,!1,lc,!1,S);if(s&&s.collides(Gt.declutterBox))break t;Lt.push([t,e,Bt,Gt,1,null,null])}s&&s.load(Lt.map(Up));for(var Ut=0,qt=Lt.length;Ut<qt;++Ut)this.replayImageOrLabel_.apply(this,Lt[Ut])}}++P;break;case Uh.END_GEOMETRY:if(void 0!==i){var Wt=i(S=N[1],E);if(Wt)return Wt}++P;break;case Uh.FILL:B?A++:this.fill_(t),++P;break;case Uh.MOVE_TO_LINE_TO:for(C=N[1],f=N[2],k=u[C],g=(O=u[C+1])+.5|0,(v=k+.5|0)===y&&g===d||(t.moveTo(k,O),y=v,d=g),C+=2;C<f;C+=2)v=(k=u[C])+.5|0,g=(O=u[C+1])+.5|0,C!=f-2&&v===y&&g===d||(t.lineTo(k,O),y=v,d=g);++P;break;case Uh.SET_FILL_STYLE:R=N,this.alignFill_=N[2],A&&(this.fill_(t),A=0,T&&(t.stroke(),T=0)),t.fillStyle=N[1],++P;break;case Uh.SET_STROKE_STYLE:I=N,T&&(t.stroke(),T=0),this.setStrokeStyle_(t,N),++P;break;case Uh.STROKE:B?T++:t.stroke(),++P;break;default:++P}}A&&this.fill_(t),T&&t.stroke()}},{key:"execute",value:function(t,e,r,n,o,i){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,o,void 0,void 0,i)}},{key:"executeHitDetection",value:function(t,e,r,n,o){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,o)}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fp(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Zp=Yp;function Xp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hp(t){return Hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(t)}function Kp(t){var e=function(t,e){if("object"!=Hp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hp(e)?e:String(e)}var Jp=["Polygon","Circle","LineString","Image","Text","Default"],$p=function(){function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}var e,r;return e=t,r=[{key:"clip",value:function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}},{key:"createExecutors_",value:function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var o in n){var i=n[o];r[o]=new Zp(this.resolution_,this.pixelRatio_,this.overlaps_,i)}}}},{key:"hasExecutors",value:function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,o=t.length;n<o;++n)if(t[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,o,i){var a=2*(n=Math.round(n))+1,s=$i(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Su(a,a,void 0,{willReadFrequently:!0}));var l,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(An(l=[1/0,1/0,-1/0,-1/0],t),gn(l,e*(this.renderBuffer_+n),l));var f,h=function(t){if(void 0!==Qp[t])return Qp[t];for(var e=2*t+1,r=t*t,n=new Array(r+1),o=0;o<=t;++o)for(var i=0;i<=t;++i){var a=o*o+i*i;if(a>r)break;var s=n[a];s||(s=[],n[a]=s),s.push(4*((t+o)*e+(t+i))+3),o>0&&s.push(4*((t-o)*e+(t+i))+3),i>0&&(s.push(4*((t+o)*e+(t-i))+3),o>0&&s.push(4*((t-o)*e+(t-i))+3))}for(var u=[],l=0,c=n.length;l<c;++l)n[l]&&u.push.apply(u,function(t){if(Array.isArray(t))return Xp(t)}(f=n[l])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||function(t,e){if(t){if("string"==typeof t)return Xp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xp(t,e):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var f;return Qp[t]=u,u}(n);function p(t,e){for(var r=c.getImageData(0,0,a,a).data,s=0,u=h.length;s<u;s++)if(r[h[s]]>0){if(!i||"Image"!==f&&"Text"!==f||i.includes(t)){var l=(h[s]-3)/4,p=n-l%a,y=n-(l/a|0),d=o(t,e,p*p+y*y);if(d)return d}c.clearRect(0,0,a,a);break}}var y,d,v,g,m,b=Object.keys(this.executorsByZIndex_).map(Number);for(b.sort(Ae),y=b.length-1;y>=0;--y){var w=b[y].toString();for(v=this.executorsByZIndex_[w],d=Jp.length-1;d>=0;--d)if(void 0!==(g=v[f=Jp[d]])&&(m=g.executeHitDetection(c,s,r,p,l)))return m}}},{key:"getClipCoords",value:function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],o=e[2],i=e[3],a=[r,n,r,i,o,i,o,n];return ea(a,0,8,2,t,a),a}},{key:"isEmpty",value:function(){return Ge(this.executorsByZIndex_)}},{key:"execute",value:function(t,e,r,n,o,i,a){var s,u,l,c,f,h,p=Object.keys(this.executorsByZIndex_).map(Number);for(p.sort(Ae),this.maxExtent_&&(t.save(),this.clip(t,r)),i=i||Jp,a&&p.reverse(),s=0,u=p.length;s<u;++s){var y=p[s].toString();for(f=this.executorsByZIndex_[y],l=0,c=i.length;l<c;++l)void 0!==(h=f[i[l]])&&h.execute(t,e,r,n,o,a)}this.maxExtent_&&t.restore()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kp(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Qp={};const ty=$p;function ey(t){return ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(t)}function ry(t){var e=function(t,e){if("object"!=ey(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ey(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ey(e)?e:String(e)}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ny(t)}function oy(t,e){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oy(t,e)}var iy=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=function(t,e,r){return e=ny(e),function(t,e){if(e&&("object"===ey(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ny(t).constructor):e.apply(t,void 0))}(this,e)).context_=t,u.pixelRatio_=r,u.extent_=n,u.transform_=o,u.transformRotation_=o?Ur(Math.atan2(o[1],o[0]),10):0,u.viewRotation_=i,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oy(t,e)}(e,t),r=e,n=[{key:"drawImages_",value:function(t,e,r,n){if(this.image_){var o=ea(t,e,r,n,this.transform_,this.pixelCoordinates_),i=this.context_,a=this.tmpLocalTransform_,s=i.globalAlpha;1!=this.imageOpacity_&&(i.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=o.length;l<c;l+=2){var f=o[l]-this.imageAnchorX_,h=o[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=f+this.imageAnchorX_,y=h+this.imageAnchorY_;$i(a,p,y,1,1,u,-p,-y),i.save(),i.transform.apply(i,a),i.translate(p,y),i.scale(this.imageScale_[0],this.imageScale_[1]),i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),i.restore()}else i.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,h,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(i.globalAlpha=s)}}},{key:"drawText_",value:function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=ea(t,e,r,n,this.transform_,this.pixelCoordinates_),i=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=o[e]+this.textOffsetX_,u=o[e+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(i.save(),i.translate(s-this.textOffsetX_,u-this.textOffsetY_),i.rotate(a),i.translate(this.textOffsetX_,this.textOffsetY_),i.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&i.strokeText(this.text_,0,0),this.textFillState_&&i.fillText(this.text_,0,0),i.restore()):(this.textStrokeState_&&i.strokeText(this.text_,s,u),this.textFillState_&&i.fillText(this.text_,s,u))}}}},{key:"moveToLineTo_",value:function(t,e,r,n,o){var i=this.context_,a=ea(t,e,r,n,this.transform_,this.pixelCoordinates_);i.moveTo(a[0],a[1]);var s=a.length;o&&(s-=2);for(var u=2;u<s;u+=2)i.lineTo(a[u],a[u+1]);return o&&i.closePath(),r}},{key:"drawRings_",value:function(t,e,r,n){for(var o=0,i=r.length;o<i;++o)e=this.moveToLineTo_(t,e,r[o],n,!0);return e}},{key:"drawCircle",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yn(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(!n)return null;var o=t.getStride();return ea(n,0,n.length,o,e,r)}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],o=Math.sqrt(r*r+n*n),i=this.context_;i.beginPath(),i.arc(e[0],e[1],o,0,2*Math.PI),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var r=e.getGeometryFunction()(t);r&&(this.setStyle(e),this.drawGeometry(r))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yn(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Yn(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),o=0,i=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=i.length;s<u;++s)o=this.moveToLineTo_(n,o,i[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Yn(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,o=t.getEndss(),i=t.getStride();e.beginPath();for(var a=0,s=o.length;a<s;++a){var u=o[a];n=this.drawRings_(r,n,u,i)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),Le(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:sc;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,e){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:Vl(n||rc)}}else this.fillState_=null;if(e){var o=e.getColor(),i=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),u=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),f=a||oc;this.strokeState_={lineCap:void 0!==i?i:nc,lineDash:1===this.pixelRatio_?f:f.map((function(t){return t*r.pixelRatio_})),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==u?u:ic,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:Vl(o||ac)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var r=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=e[1]*r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var i=t.getScaleArray();this.imageScale_=[i[0]*this.pixelRatio_/r,i[1]*this.pixelRatio_/r],this.imageWidth_=e[0]*r}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Vl(r||rc)}}else this.textFillState_=null;var n=t.getStroke();if(n){var o=n.getColor(),i=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:nc,lineDash:a||oc,lineDashOffset:s||0,lineJoin:void 0!==u?u:ic,lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Vl(o||ac)}}else this.textStrokeState_=null;var f=t.getFont(),h=t.getOffsetX(),p=t.getOffsetY(),y=t.getRotateWithView(),d=t.getRotation(),v=t.getScaleArray(),g=t.getText(),m=t.getTextAlign(),b=t.getTextBaseline();this.textState_={font:void 0!==f?f:ec,textAlign:void 0!==m?m:sc,textBaseline:void 0!==b?b:uc},this.text_=void 0!==g?Array.isArray(g)?g.reduce((function(t,e,r){return t+(r%2?" ":e)}),""):g:"",this.textOffsetX_=void 0!==h?this.pixelRatio_*h:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0!==d?d:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ry(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vh);const ay=iy;var sy=.5;function uy(t,e,r,n,o,i,a){var s=Su(t[0]*sy,t[1]*sy);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new ay(s,sy,o,null,a),c=r.length,f=Math.floor(16777215/c),h={},p=1;p<=c;++p){var y=r[p-1],d=y.getStyleFunction()||n;if(d){var v=d(y,i);if(v){Array.isArray(v)||(v=[v]);for(var g=(p*f).toString(16).padStart(7,"#00000"),m=0,b=v.length;m<b;++m){var w=v[m],_=w.getGeometryFunction()(y);if(_&&Yn(o,_.getExtent())){var x=w.clone(),S=x.getFill();S&&S.setColor(g);var k=x.getStroke();k&&(k.setColor(g),k.setLineDash(null)),x.setText(void 0);var O=w.getImage();if(O){var E=O.getImageSize();if(!E)continue;var P=Su(E[0],E[1],void 0,{alpha:!1}),j=P.canvas;P.fillStyle=g,P.fillRect(0,0,j.width,j.height),x.setImage(new hf({img:j,anchor:O.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:O.getOrigin(),opacity:1,size:O.getSize(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}var C=x.getZIndex()||0,A=h[C];A||(A={},h[C]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]);var T=_.getType();if("GeometryCollection"===T)for(var R=_.getGeometriesArrayRecursive(),I=0,L=R.length;I<L;++I){var M=R[I];A[M.getType().replace("Multi","")].push(M,x)}else A[T.replace("Multi","")].push(_,x)}}}}}for(var F=Object.keys(h).map(Number).sort(Ae),D=0,B=F.length;D<B;++D){var N=h[F[D]];for(var z in N)for(var G=N[z],U=0,q=G.length;U<q;U+=2){l.setStyle(G[U+1]);for(var W=0,V=e.length;W<V;++W)l.setTransform(e[W]),l.drawGeometry(G[U])}}return s.getImageData(0,0,u.width,u.height)}function ly(t,e,r){var n=[];if(r){var o=Math.floor(Math.round(t[0])*sy),i=Math.floor(Math.round(t[1])*sy),a=4*(Fr(o,0,r.width-1)+Fr(i,0,r.height-1)*r.width),s=r.data[a],u=r.data[a+1],l=r.data[a+2]+256*(u+256*s),c=Math.floor(16777215/e.length);l&&l%c==0&&n.push(e[l/c-1])}return n}var cy=.5,fy={Point:function(t,e,r,n,o){var i,a=r.getImage(),s=r.getText();if(a){if(2!=a.getImageState())return;var u=t;if(o){var l=a.getDeclutterMode();if("none"!==l)if(u=o,"obstacle"===l){var c=t.getBuilder(r.getZIndex(),"Image");c.setImageStyle(a,i),c.drawPoint(e,n)}else s&&s.getText()&&(i={})}var f=u.getBuilder(r.getZIndex(),"Image");f.setImageStyle(a,i),f.drawPoint(e,n)}if(s&&s.getText()){var h=t;o&&(h=o);var p=h.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s,i),p.drawText(e,n)}},LineString:function(t,e,r,n,o){var i=r.getStroke();if(i){var a=t.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,i),a.drawLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(o||t).getBuilder(r.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,n)}},Polygon:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(i||a){var s=t.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(i,a),s.drawPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}},MultiPoint:function(t,e,r,n,o){var i,a=r.getImage(),s=r.getText();if(a){if(2!=a.getImageState())return;var u=t;if(o){var l=a.getDeclutterMode();if("none"!==l)if(u=o,"obstacle"===l){var c=t.getBuilder(r.getZIndex(),"Image");c.setImageStyle(a,i),c.drawMultiPoint(e,n)}else s&&s.getText()&&(i={})}var f=u.getBuilder(r.getZIndex(),"Image");f.setImageStyle(a,i),f.drawMultiPoint(e,n)}if(s&&s.getText()){var h=t;o&&(h=o);var p=h.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s,i),p.drawText(e,n)}},MultiLineString:function(t,e,r,n,o){var i=r.getStroke();if(i){var a=t.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,i),a.drawMultiLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(o||t).getBuilder(r.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,n)}},MultiPolygon:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(a||i){var s=t.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(i,a),s.drawMultiPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}},GeometryCollection:function(t,e,r,n,o){var i,a,s=e.getGeometriesArray();for(i=0,a=s.length;i<a;++i)(0,fy[s[i].getType()])(t,s[i],r,n,o)},Circle:function(t,e,r,n,o){var i=r.getFill(),a=r.getStroke();if(i||a){var s=t.getBuilder(r.getZIndex(),"Circle");s.setFillStrokeStyle(i,a),s.drawCircle(e,n)}var u=r.getText();if(u&&u.getText()){var l=(o||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}}};function hy(t,e){return parseInt(pr(t),10)-parseInt(pr(e),10)}function py(t,e){var r=yy(t,e);return r*r}function yy(t,e){return cy*t/e}function dy(t,e,r,n,o,i,a){var s=!1,u=r.getImage();if(u){var l=u.getImageState();2==l||3==l?u.unlistenImageChange(o):(0==l&&u.load(),u.listenImageChange(o),s=!0)}return function(t,e,r,n,o,i){var a=r.getGeometryFunction()(e);if(a){var s=a.simplifyTransformed(n,o);r.getRenderer()?vy(t,s,r,e):(0,fy[s.getType()])(t,s,r,e,i)}}(t,e,r,n,i,a),s}function vy(t,e,r,n){if("GeometryCollection"!=e.getType())t.getBuilder(r.getZIndex(),"Default").drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer());else for(var o=e.getGeometries(),i=0,a=o.length;i<a;++i)vy(t,o[i],r,n)}function gy(t){return gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(t)}function my(t){var e=function(t,e){if("object"!=gy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gy(e)?e:String(e)}function by(t){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},by(t)}function wy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _y(t,e){return _y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_y(t,e)}var xy=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=by(e),function(t,e){if(e&&("object"===gy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wy(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],by(t).constructor):e.apply(t,r))}(this,e,[t])).boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(wy(r)),r.animatingOrInteracting_,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r.compositionContext_=null,r.opacity_=1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_y(t,e)}(e,t),r=e,n=[{key:"renderWorlds",value:function(t,e,r){var n=e.extent,o=e.viewState,i=o.center,a=o.resolution,s=o.projection,u=o.rotation,l=s.getExtent(),c=this.getLayer().getSource(),f=e.pixelRatio,h=e.viewHints,p=!(h[0]||h[1]),y=this.compositionContext_,d=Math.round(e.size[0]*f),v=Math.round(e.size[1]*f),g=c.getWrapX()&&s.canWrapX(),m=g?Vn(l):null,b=g?Math.ceil((n[2]-l[2])/m)+1:1,w=g?Math.floor((n[0]-l[0])/m):0;do{var _=this.getRenderTransform(i,a,u,f,d,v,w*m);t.execute(y,1,_,u,p,void 0,r)}while(++w<b)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var t=Su(this.context.canvas.width,this.context.canvas.height,Mu);this.compositionContext_=t}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,ku(this.compositionContext_),Mu.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){Hi(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),Qi(this.inversePixelTransform,this.pixelTransform);var o=ta(this.pixelTransform);this.useContainer(e,o,this.getBackground(t));var i=this.context,a=i.canvas,s=this.replayGroup_,u=this.declutterExecutorGroup,l=s&&!s.isEmpty()||u&&!u.isEmpty();if(!l&&!this.getLayer().hasListener(lo)&&!this.getLayer().hasListener(co))return null;var c=Math.round(t.size[0]*r),f=Math.round(t.size[1]*r);a.width!=c||a.height!=f?(a.width=c,a.height=f,a.style.transform!==o&&(a.style.transform=o)):this.containerReused||i.clearRect(0,0,c,f),this.preRender(i,t);var h=t.viewState,p=h.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var y=!1;if(l&&n.extent&&this.clipping){var d=ki(n.extent,p);(y=(l=Yn(d,t.extent))&&!_n(d,t.extent))&&this.clipUnrotated(this.compositionContext_,t,d)}return l&&this.renderWorlds(s,t),y&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(i,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(t){var e=this;return new Promise((function(r){if(!e.hitDetectionImageData_&&!e.animatingOrInteracting_){var n=[e.context.canvas.width,e.context.canvas.height];Ki(e.pixelTransform,n);var o=e.renderedCenter_,i=e.renderedResolution_,a=e.renderedRotation_,s=e.renderedProjection_,u=e.wrappedRenderedExtent_,l=e.getLayer(),c=[],f=n[0]*sy,h=n[1]*sy;c.push(e.getRenderTransform(o,i,a,sy,f,h,0).slice());var p=l.getSource(),y=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!_n(y,u)){for(var d,v=u[0],g=Vn(y),m=0;v<y[0];)d=g*--m,c.push(e.getRenderTransform(o,i,a,sy,f,h,d).slice()),v+=g;for(m=0,v=u[2];v>y[2];)d=g*++m,c.push(e.getRenderTransform(o,i,a,sy,f,h,d).slice()),v-=g}e.hitDetectionImageData_=uy(n,c,e.renderedFeatures_,l.getStyleFunction(),u,i,a)}r(ly(t,e.renderedFeatures_,e.hitDetectionImageData_))}))}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,o){var i=this;if(this.replayGroup_){var a,s=e.viewState.resolution,u=e.viewState.rotation,l=this.getLayer(),c={},f=function(t,e,r){var i=pr(t),a=c[i];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[i]=!0,o.splice(o.lastIndexOf(a),1),n(t,l,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return c[i]=!0,n(t,l,e);o.push(c[i]={feature:t,layer:l,geometry:e,distanceSq:r,callback:n})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((function(n){return a=n.forEachFeatureAtCoordinate(t,s,u,r,f,n===i.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),a}}},{key:"handleFontsChanged",value:function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}},{key:"handleStyleImageChange_",value:function(t){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var e=this,r=this.getLayer(),n=r.getSource();if(!n)return!1;var o=t.viewHints[0],i=t.viewHints[1],a=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();if(this.ready&&!a&&o||!s&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,l=t.viewState,c=l.projection,f=l.resolution,h=t.pixelRatio,p=r.getRevision(),y=r.getRenderBuffer(),d=r.getRenderOrder();void 0===d&&(d=hy);var v=l.center.slice(),g=gn(u,y*f),m=g.slice(),b=[g.slice()],w=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!_n(w,t.extent)){var _=Vn(w),x=Math.max(Vn(g)/2,_);g[0]=w[0]-x,g[2]=w[2]+x,Xo(v,c);var S=Hn(b[0],c);S[0]<w[0]&&S[2]<w[2]?b.push([S[0]+_,S[1],S[2]+_,S[3]]):S[0]>w[0]&&S[2]>w[2]&&b.push([S[0]-_,S[1],S[2]-_,S[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&_n(this.wrappedRenderedExtent_,g))return Le(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var k,O=new Rp(yy(f,h),g,f,h);this.getLayer().getDeclutter()&&(k=new Rp(yy(f,h),g,f,h));var E,P=wi();if(P){for(var j=0,C=b.length;j<C;++j){var A=Si(b[j],c);n.loadFeatures(A,Oi(f,c),P)}E=hi(P,c)}else for(var T=0,R=b.length;T<R;++T)n.loadFeatures(b[T],f,c);var I=py(f,h),L=!0,M=function(t){var n,o=t.getStyleFunction()||r.getStyleFunction();if(o&&(n=o(t,f)),n){var i=e.renderFeature(t,I,n,O,E,k);L=L&&!i}},F=Si(g,c),D=n.getFeaturesInExtent(F);d&&D.sort(d);for(var B=0,N=D.length;B<N;++B)M(D[B]);this.renderedFeatures_=D,this.ready=L;var z=O.finish(),G=new ty(g,f,h,n.getOverlaps(),z,r.getRenderBuffer());return k&&(this.declutterExecutorGroup=new ty(g,f,h,n.getOverlaps(),k.finish(),r.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=m,this.wrappedRenderedExtent_=g,this.renderedCenter_=v,this.renderedProjection_=c,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(t,e,r,n,o,i){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,u=r.length;s<u;++s)a=dy(n,t,r[s],e,this.boundHandleStyleImageChange_,o,i)||a;else a=dy(n,t,r,e,this.boundHandleStyleImageChange_,o,i);return a}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,my(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Bu);const Sy=xy;function ky(t){return ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(t)}function Oy(t){var e=function(t,e){if("object"!=ky(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ky(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ky(e)?e:String(e)}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ey(t)}function Py(t,e){return Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Py(t,e)}var jy=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[t],n=Ey(n=e),function(t,e){if(e&&("object"===ky(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],Ey(r).constructor):n.apply(r,o));var r,n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Py(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Sy(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oy(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fh);const Cy=jy;function Ay(t){return Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(t)}function Ty(t){var e=function(t,e){if("object"!=Ay(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ay(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ay(e)?e:String(e)}function Ry(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iy(){return Iy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ly(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Iy.apply(this,arguments)}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ly(t)}function My(t,e){return My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},My(t,e)}var Fy={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Dy={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},By=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Ly(e),function(t,e){if(e&&("object"===Ay(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ry(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Ly(t).constructor):e.apply(t,r))}(this,e,[t])).boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(Ry(r)),r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.tmpTransform_=[1,0,0,1,0,0],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&My(t,e)}(e,t),r=e,n=[{key:"prepareTile",value:function(t,e,r){var n,o=t.getState();return o!==Nu.LOADED&&o!==Nu.ERROR||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t)&&(n=!0)),n}},{key:"getTile",value:function(t,r,n,o){var i=o.pixelRatio,a=o.viewState,s=a.resolution,u=a.projection,l=this.getLayer(),c=l.getSource().getTile(t,r,n,i,u),f=o.viewHints,h=!(f[0]||f[1]);return!h&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,i,u)&&(h||Date.now()-o.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(c,o),Iy(Ly(e.prototype),"getTile",this).call(this,t,r,n,o)}},{key:"isDrawableTile",value:function(t){var r=this.getLayer();return Iy(Ly(e.prototype),"isDrawableTile",this).call(this,t)&&("vector"===r.getRenderMode()?pr(r)in t.executorGroups:t.hasContext(r))}},{key:"getTileImage",value:function(t){return t.getImage(this.getLayer())}},{key:"prepareFrame",value:function(t){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!==r&&(this.renderedLayerRevision_=r,this.renderedTiles.length=0),Iy(Ly(e.prototype),"prepareFrame",this).call(this,t)}},{key:"updateExecutorGroup_",value:function(t,e,r){var n=this,o=this.getLayer(),i=o.getRevision(),a=o.getRenderOrder()||null,s=t.wantedResolution,u=t.getReplayState(o);if(u.dirty||u.renderedResolution!==s||u.renderedRevision!=i||u.renderedRenderOrder!=a){var l=o.getSource(),c=o.getDeclutter(),f=l.getTileGrid(),h=l.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),p=l.getSourceTiles(e,r,t),y=pr(o);delete t.hitDetectionImageData[y],t.executorGroups[y]=[],c&&(t.declutterExecutorGroups[y]=[]),u.dirty=!1;for(var d=function(){var r=p[v];if(r.getState()!=Nu.LOADED)return 1;var i=r.tileCoord,d=f.getTileCoordExtent(i),g=Un(h,d),m=gn(g,o.getRenderBuffer()*s,n.tmpExtent),b=jn(d,g)?null:m,w=new Rp(0,m,s,e),_=c?new Rp(0,g,s,e):void 0,x=py(s,e),S=function(t){var e,r=t.getStyleFunction()||o.getStyleFunction();if(r&&(e=r(t,s)),e){var n=this.renderFeature(t,x,e,w,_);u.dirty=u.dirty||n}},k=r.getFeatures();a&&a!==u.renderedRenderOrder&&k.sort(a);for(var O=0,E=k.length;O<E;++O){var P=k[O];b&&!Yn(b,P.getGeometry().getExtent())||S.call(n,P)}var j=w.finish(),C="vector"!==o.getRenderMode()&&c&&1===p.length?null:g,A=new ty(C,s,e,l.getOverlaps(),j,o.getRenderBuffer());if(t.executorGroups[y].push(A),_){var T=new ty(null,s,e,l.getOverlaps(),_.finish(),o.getRenderBuffer());t.declutterExecutorGroups[y].push(T)}},v=0,g=p.length;v<g;++v)d();u.renderedRevision=i,u.renderedRenderOrder=a,u.renderedResolution=s}}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,o){var i=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s=this.getLayer(),u=s.getSource().getTileGridForProjection(e.viewState.projection),l=vn([t]);gn(l,i*r,l);for(var c,f={},h=function(t,e,r){var i=t.getId();void 0===i&&(i=pr(t));var a=f[i];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return f[i]=!0,o.splice(o.lastIndexOf(a),1),n(t,s,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return f[i]=!0,n(t,s,e);o.push(f[i]={feature:t,layer:s,geometry:e,distanceSq:r,callback:n})}},p=this.renderedTiles,y=function(){var n=p[d];if(!Yn(u.getTileCoordExtent(n.wrappedTileCoord),l))return 1;var o=pr(s),f=[n.executorGroups[o]],y=n.declutterExecutorGroups[o];y&&f.push(y),f.some((function(n){for(var o=n===y?e.declutterTree.all().map((function(t){return t.value})):null,s=0,u=n.length;s<u;++s){var l=n[s];if(c=l.forEachFeatureAtCoordinate(t,i,a,r,h,o))return!0}}))},d=0,v=p.length;!c&&d<v;++d)y();return c}},{key:"getFeatures",value:function(t){var e=this;return new Promise((function(r,n){for(var o,i=e.getLayer(),a=pr(i),s=i.getSource(),u=e.renderedProjection,l=u.getExtent(),c=e.renderedResolution,f=s.getTileGridForProjection(u),h=Ki(e.renderedPixelToCoordinateTransform_,t.slice()),p=f.getTileCoordForCoordAndResolution(h,c),y=0,d=e.renderedTiles.length;y<d;++y)if(p.toString()===e.renderedTiles[y].tileCoord.toString()){if((o=e.renderedTiles[y]).getState()===Nu.LOADED){var v=f.getTileCoordExtent(o.tileCoord);s.getWrapX()&&u.canWrapX()&&!_n(l,v)&&Xo(h,u);break}o=void 0}if(!o||o.loadingSourceTiles>0)r([]);else{var g=qn(f.getTileCoordExtent(o.wrappedTileCoord)),m=[(h[0]-g[0])/c,(g[1]-h[1])/c],b=o.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),w=o.hitDetectionImageData[a];if(!w){var _=El(f.getTileSize(f.getZForResolution(c,s.zDirection))),x=e.renderedRotation_;w=uy(_,[e.getRenderTransform(f.getTileCoordCenter(o.wrappedTileCoord),c,0,sy,_[0]*sy,_[1]*sy,0)],b,i.getStyleFunction(),f.getTileCoordExtent(o.wrappedTileCoord),o.getReplayState(i).renderedResolution,x),o.hitDetectionImageData[a]=w}r(ly(m,b,w))}}))}},{key:"handleFontsChanged",value:function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}},{key:"handleStyleImageChange_",value:function(t){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(t){var e=this.context,r=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var n=t.viewHints,o=!(n[0]||n[1]),i=this.renderedTiles,a=0,s=i.length;a<s;++a){var u=i[a],l=u.declutterExecutorGroups[pr(this.getLayer())];if(l)for(var c=l.length-1;c>=0;--c)l[c].execute(this.context,1,this.getTileRenderTransform(u,t),t.viewState.rotation,o,void 0,t.declutterTree)}e.globalAlpha=r}},{key:"getTileRenderTransform",value:function(t,e){var r=e.pixelRatio,n=e.viewState,o=n.center,i=n.resolution,a=n.rotation,s=e.size,u=Math.round(s[0]*r),l=Math.round(s[1]*r),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),f=t.tileCoord,h=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(f,this.tmpExtent)[0]-h[0];return Xi(Ji(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,i,a,r,u,l,p))}},{key:"postRender",value:function(t,r){var n=r.viewHints,o=!(n[0]||n[1]);this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice(),this.renderedRotation_=r.viewState.rotation;var i=this.getLayer(),a=i.getRenderMode(),s=t.globalAlpha;t.globalAlpha=i.getOpacity();for(var u=Dy[a],l=r.viewState,c=l.rotation,f=i.getSource(),h=f.getTileGridForProjection(l.projection).getZForResolution(l.resolution,f.zDirection),p=this.renderedTiles,y=[],d=[],v=!0,g=p.length-1;g>=0;--g){var m=p[g];v=v&&!m.getReplayState(i).dirty;var b=m.executorGroups[pr(i)].filter((function(t){return t.hasExecutors(u)}));if(0!==b.length){var w=this.getTileRenderTransform(m,r),_=m.tileCoord[0],x=!1,S=b[0].getClipCoords(w);if(S){for(var k=0,O=y.length;k<O;++k)if(h!==_&&_<d[k]){var E=y[k];Yn([S[0],S[3],S[4],S[7]],[E[0],E[3],E[4],E[7]])&&(x||(t.save(),x=!0),t.beginPath(),t.moveTo(S[0],S[1]),t.lineTo(S[2],S[3]),t.lineTo(S[4],S[5]),t.lineTo(S[6],S[7]),t.moveTo(E[6],E[7]),t.lineTo(E[4],E[5]),t.lineTo(E[2],E[3]),t.lineTo(E[0],E[1]),t.clip())}y.push(S),d.push(_)}for(var P=0,j=b.length;P<j;++P)b[P].execute(t,1,w,c,o,u);x&&t.restore()}}t.globalAlpha=s,this.ready=v,Iy(Ly(e.prototype),"postRender",this).call(this,t,r)}},{key:"renderFeature",value:function(t,e,r,n,o){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)i=dy(n,t,r[a],e,this.boundHandleStyleImageChange_,void 0,o)||i;else i=dy(n,t,r,e,this.boundHandleStyleImageChange_,void 0,o);return i}},{key:"tileImageNeedsRender_",value:function(t){var e=this.getLayer();if("vector"===e.getRenderMode())return!1;var r=t.getReplayState(e),n=e.getRevision(),o=t.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}},{key:"renderTileImage_",value:function(t,e){var r=this.getLayer(),n=t.getReplayState(r),o=r.getRevision(),i=t.executorGroups[pr(r)];n.renderedTileRevision=o;var a=t.wrappedTileCoord,s=a[0],u=r.getSource(),l=e.pixelRatio,c=e.viewState.projection,f=u.getTileGridForProjection(c),h=f.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*h,y=f.getResolution(s),d=t.getContext(r);l=Math.round(Math.max(l,p/l));var v=u.getTilePixelSize(s,l,c);d.canvas.width=v[0],d.canvas.height=v[1];var g=l/p;if(1!==g){var m=Zi(this.tmpTransform_);Ji(m,g,g),d.setTransform.apply(d,m)}var b=f.getTileCoordExtent(a,this.tmpExtent),w=p/y,_=Zi(this.tmpTransform_);Ji(_,w,-w),function(t,e,r){Xi(t,Hi(Yi,1,0,0,1,e,r))}(_,-b[0],-b[3]);for(var x=0,S=i.length;x<S;++x)i[x].execute(d,g,_,0,!0,Fy[r.getRenderMode()]);n.renderedTileResolution=t.wantedResolution}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ty(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Il);const Ny=By;function zy(t){return zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(t)}function Gy(t){var e=function(t,e){if("object"!=zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zy(e)?e:String(e)}function Uy(){return Uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Uy.apply(this,arguments)}function qy(t){return qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qy(t)}function Wy(t,e){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wy(t,e)}var Vy=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,(r=function(t,e,r){return e=qy(e),function(t,e){if(e&&("object"===zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],qy(t).constructor):e.apply(t,r))}(this,e,[n])).on,r.once,r.un;var o=t.renderMode||"hybrid";return Mr("hybrid"==o||"vector"==o,"`renderMode` must be `'hybrid'` or `'vector'`"),r.renderMode_=o,r.setPreload(t.preload?t.preload:0),r.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),r.getBackground,r.setBackground,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wy(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Ny(this)}},{key:"getFeatures",value:function(t){return Uy(qy(e.prototype),"getFeatures",this).call(this,t)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(Ms)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(Fs)}},{key:"setPreload",value:function(t){this.set(Ms,t)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(Fs,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gy(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fh);const Yy=Vy;function Zy(t){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(t)}function Xy(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zy(e)?e:String(e)}function Hy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ky(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function Jy(t,e,r){return t+"/"+e+"/"+r}function $y(t){return Jy(t[0],t[1],t[2])}function Qy(t){return t.split("/").map(Number)}function td(t){return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(t)}function ed(t){var e=function(t,e){if("object"!=td(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=td(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==td(e)?e:String(e)}function rd(){return rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},rd.apply(this,arguments)}function nd(t){return nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nd(t)}function od(t,e){return od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},od(t,e)}const id=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=arguments,r=nd(r=e),function(t,e){if(e&&("object"===td(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,n||[],nd(t).constructor):r.apply(t,n));var t,r,n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&od(t,e)}(e,t),r=e,(n=[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();rd(nd(e.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}},{key:"pruneExceptNewestZ",value:function(){var t=this;if(0!==this.getCount()){var e=Qy(this.peekFirstKey())[0];this.forEach((function(r){r.tileCoord[0]!==e&&(t.remove($y(r.tileCoord)),r.release())}))}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ed(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}var e,r;return e=t,(r=[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(t){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(t){return this.entries_.hasOwnProperty(t)}},{key:"forEach",value:function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer}},{key:"get",value:function(t,e){var r=this.entries_[t];return Mr(void 0!==r,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}},{key:"remove",value:function(t){var e=this.entries_[t];return Mr(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e}},{key:"getValues",value:function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(t){var e;return null===(e=this.entries_[t])||void 0===e?void 0:e.value_}},{key:"pop",value:function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}},{key:"replace",value:function(t,e){this.get(t),this.entries_[t].value_=e}},{key:"set",value:function(t,e){Mr(!(t in this.entries_),"Tried to set a value for a key that is used already");var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}},{key:"setSize",value:function(t){this.highWaterMark=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xy(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function ad(t){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(t)}function sd(t){var e=function(t,e){if("object"!=ad(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ad(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ad(e)?e:String(e)}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ud(t)}function ld(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cd(t,e){return cd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cd(t,e)}var fd=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=ud(e),function(t,e){if(e&&("object"===ad(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ld(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],ud(t).constructor):e.apply(t,void 0))}(this,e)).projection=ii(t.projection),r.attributions_=hd(t.attributions),r.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,r.loading=!1,r.state_=void 0!==t.state?t.state:"ready",r.wrapX_=void 0!==t.wrapX&&t.wrapX,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var n=ld(r);return r.viewPromise_=new Promise((function(t,e){n.viewResolver=t,n.viewRejector=e})),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cd(t,e)}(e,t),r=e,(n=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(t){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=hd(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);function hd(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const pd=fd;function yd(t){return yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yd(t)}function dd(t){var e=function(t,e){if("object"!=yd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yd(e)?e:String(e)}var vd=[0,0,0],gd=function(){function t(e){var r,n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,Mr(function(t,e,r){var n=function(t,e){return e-t}||Ae;return t.every((function(e,r){if(0===r)return!0;var o=n(t[r-1],e);return!(o>0||0===o)}))}(this.resolutions_),"`resolutions` must be sorted in descending order"),!e.origins)for(var o=0,i=this.resolutions_.length-1;o<i;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,Mr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));var a=e.extent;void 0===a||this.origin_||this.origins_||(this.origin_=qn(a)),Mr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,Mr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:vo,Mr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((function(t,e){var r=new kl(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=n.getTileRangeForExtentAndZ(a,e);r.minX=Math.max(o.minX,r.minX),r.maxX=Math.min(o.maxX,r.maxX),r.minY=Math.max(o.minY,r.minY),r.maxY=Math.min(o.maxY,r.maxY)}return r})):a&&this.calculateTileRanges_(a)}var e,r;return e=t,r=[{key:"forEachTileCoord",value:function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),o=n.minX,i=n.maxX;o<=i;++o)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,o,a])}},{key:"forEachTileCoordParentTileRange",value:function(t,e,r,n){var o,i,a=null,s=t[0]-1;for(2===this.zoomFactor_?(o=t[1],i=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,void 0!==o&&void 0!==i?Sl(o=Math.floor(o/2),o,i=Math.floor(i/2),i,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(t){return this.origin_?this.origin_:this.origins_[t]}},{key:"getResolution",value:function(t){return this.resolutions_[t]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],o=2*t[2];return Sl(n,n+1,o,o+1,e)}var i=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var n=t[0],o=t[1],i=t[2];if(e===n)return Sl(o,i,o,i,r);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-n),s=Math.floor(o*a),u=Math.floor(i*a);return e<n?Sl(s,s,u,u,r):Sl(s,Math.floor(a*(o+1))-1,u,Math.floor(a*(i+1))-1,r)}var l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e,r)}},{key:"getTileRangeForExtentAndZ",value:function(t,e,r){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,vd);var n=vd[1],o=vd[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,vd),Sl(n,vd[1],o,vd[2],r)}},{key:"getTileCoordCenter",value:function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=El(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]}},{key:"getTileCoordExtent",value:function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=El(this.getTileSize(t[0]),this.tmpSize_),i=r[0]+t[1]*o[0]*n,a=r[1]-(t[2]+1)*o[1]*n;return kn(i,a,i+o[0]*n,a+o[1]*n,e)}},{key:"getTileCoordForCoordAndResolution",value:function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)}},{key:"getTileCoordForXYAndResolution_",value:function(t,e,r,n,o){var i=this.getZForResolution(r),a=r/this.getResolution(i),s=this.getOrigin(i),u=El(this.getTileSize(i),this.tmpSize_),l=a*(t-s[0])/r/u[0],c=a*(s[1]-e)/r/u[1];return n?(l=Wr(l,5)-1,c=Wr(c,5)-1):(l=qr(l,5),c=qr(c,5)),Ky(i,l,c,o)}},{key:"getTileCoordForXYAndZ_",value:function(t,e,r,n,o){var i=this.getOrigin(r),a=this.getResolution(r),s=El(this.getTileSize(r),this.tmpSize_),u=(t-i[0])/a/s[0],l=(i[1]-e)/a/s[1];return n?(u=Wr(u,5)-1,l=Wr(l,5)-1):(u=qr(u,5),l=qr(l,5)),Ky(r,u,l,o)}},{key:"getTileCoordForCoordAndZ",value:function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)}},{key:"getTileCoordResolution",value:function(t){return this.resolutions_[t[0]]}},{key:"getTileSize",value:function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}},{key:"getFullTileRange",value:function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}},{key:"getZForResolution",value:function(t,e){return Fr(Te(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(t,e){return rs(e,0,e.length,2,this.getTileCoordExtent(t))}},{key:"calculateTileRanges_",value:function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dd(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const md=gd;function bd(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,r,n){return function(t,e,r,n){n=void 0!==n?n:"top-left";var o=_d(t,void 0,r);return new md({extent:t,origin:Bn(t,n),resolutions:o,tileSize:r})}(xd(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function wd(t){var e=t||{},r=e.extent||ii("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:_d(r,e.maxZoom,e.tileSize,e.maxResolution)};return new md(n)}function _d(t,e,r,n){e=void 0!==e?e:yo,r=El(void 0!==r?r:vo);var o=Gn(t),i=Vn(t);n=n>0?n:Math.max(i/r[0],o/r[1]);for(var a=e+1,s=new Array(a),u=0;u<a;++u)s[u]=n/Math.pow(2,u);return s}function xd(t){var e=(t=ii(t)).getExtent();if(!e){var r=180*go.degrees/t.getMetersPerUnit();e=kn(-r,-r,r,r)}return e}function Sd(t){return Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(t)}function kd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pd(n.key),n)}}function Ed(t,e,r){return e&&Od(t.prototype,e),r&&Od(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pd(t){var e=function(t,e){if("object"!=Sd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sd(e)?e:String(e)}function jd(t,e,r){return e=Ad(e),function(t,e){if(e&&("object"===Sd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Ad(t).constructor):e.apply(t,r))}function Cd(){return Cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ad(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Cd.apply(this,arguments)}function Ad(t){return Ad=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ad(t)}function Td(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rd(t,e)}function Rd(t,e){return Rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rd(t,e)}var Id=function(t){function e(t){var r;return kd(this,e),(r=jd(this,e,[{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}])).on,r.once,r.un,r.opaque_=void 0!==t.opaque&&t.opaque,r.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,r.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,r.tileGrid&&El(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),[256,256]),r.tileCache=new id(t.cacheSize||0),r.tmpSize=[0,0],r.key_=t.key||"",r.tileOptions={transition:t.transition,interpolate:t.interpolate},r.zDirection=t.zDirection?t.zDirection:0,r}return Td(e,t),Ed(e,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)}},{key:"forEachLoadedTile",value:function(t,e,r,n){var o=this.getTileCacheForProjection(t);if(!o)return!1;for(var i,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=Jy(e,l,c),s=!1,o.containsKey(a)&&(s=(i=o.get(a)).getState()===Nu.LOADED)&&(s=!1!==n(i)),s||(u=!1);return u}},{key:"getGutterForProjection",value:function(t){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(t){this.key_!==t&&(this.key_=t,this.changed())}},{key:"getOpaque",value:function(t){return this.opaque_}},{key:"getResolutions",value:function(t){var e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}},{key:"getTile",value:function(t,e,r,n,o){return fr()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(t){return this.tileGrid?this.tileGrid:bd(t)}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();return Mr(null===e||fi(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}},{key:"getTilePixelRatio",value:function(t){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(t,e,r){var n,o,i,a=this.getTileGridForProjection(r),s=this.getTilePixelRatio(e),u=El(a.getTileSize(t),this.tmpSize);return 1==s?u:(n=u,o=s,void 0===(i=this.tmpSize)&&(i=[0,0]),i[0]=n[0]*o+.5|0,i[1]=n[1]*o+.5|0,i)}},{key:"getTileCoordForTileUrlFunction",value:function(t,e){e=void 0!==e?e:this.getProjection();var r=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,r){var n=e[0],o=t.getTileCoordCenter(e),i=xd(r);if(!wn(i,o)){var a=Vn(i),s=Math.ceil((i[0]-o[0])/a);return o[0]+=a*s,t.getTileCoordForCoordAndZ(o,n)}return e}(r,t,e)),function(t,e){var r=t[0],n=t[1],o=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var i=e.getFullTileRange(r);return!i||i.containsXY(n,o)}(t,r)?t:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),Cd(Ad(e.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)}},{key:"useTile",value:function(t,e,r,n){}}]),e}(pd),Ld=function(t){function e(t,r){var n;return kd(this,e),(n=jd(this,e,[t])).tile=r,n}return Td(e,t),Ed(e)}(Oe);const Md=Id;function Fd(t,e){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,s,u){if(a)return t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,(function(){var t=a[0],r=e.getFullTileRange(t);if(!r)throw new Error("The {-y} placeholder requires a tile grid with extent");return(r.getHeight()-a[2]-1).toString()}))}}function Dd(t,e){for(var r=t.length,n=new Array(r),o=0;o<r;++o)n[o]=Fd(t[o],e);return function(t){return 1===t.length?t[0]:function(e,r,n){if(e){var o=function(t){return(t[1]<<t[0])+t[2]}(e),i=zr(o,t.length);return t[i](e,r,n)}}}(n)}function Bd(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n,o=r[1].charCodeAt(0),i=r[2].charCodeAt(0);for(n=o;n<=i;++n)e.push(t.replace(r[0],String.fromCharCode(n)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}function Nd(t){return Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nd(t)}function zd(t){var e=function(t,e){if("object"!=Nd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Nd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nd(e)?e:String(e)}function Gd(t){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gd(t)}function Ud(t,e){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ud(t,e)}var qd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Gd(e),function(t,e){if(e&&("object"===Nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Gd(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(r.tileUrlFunction=t.tileUrlFunction),r.urls=null,t.urls?r.setUrls(t.urls):t.url&&r.setUrl(t.url),r.tileLoadingKeys_={},r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ud(t,e)}(e,t),r=e,(n=[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(t){var e,r=t.target,n=pr(r),o=r.getState();o==Nu.LOADING?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=o==Nu.ERROR?"tileloaderror":o==Nu.LOADED?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Ld(e,r))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=Bd(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Dd(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,r){}},{key:"useTile",value:function(t,e,r){var n=Jy(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Md);const Wd=qd;function Vd(t){return Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(t)}function Yd(t){var e=function(t,e){if("object"!=Vd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vd(e)?e:String(e)}function Zd(){return Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Zd.apply(this,arguments)}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xd(t)}function Hd(t,e){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hd(t,e)}var Kd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Xd(e),function(t,e){if(e&&("object"===Vd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Xd(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Jd,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,r.tileClass=void 0!==t.tileClass?t.tileClass:rl,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hd(t,e)}(e,t),r=e,n=[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[n];o.expireCache(o==r?e:{})}}},{key:"getGutterForProjection",value:function(t){return this.getProjection()&&t&&!fi(this.getProjection(),t)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var t=Zd(Xd(e.prototype),"getKey",this).call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t}},{key:"getOpaque",value:function(t){return!(this.getProjection()&&t&&!fi(this.getProjection(),t))&&Zd(Xd(e.prototype),"getOpaque",this).call(this,t)}},{key:"getTileGridForProjection",value:function(t){var e=this.getProjection();if(this.tileGrid&&(!e||fi(e,t)))return this.tileGrid;var r=pr(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=bd(t)),this.tileGridForProjection[r]}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();if(!e||fi(e,t))return this.tileCache;var r=pr(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new id(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}},{key:"createTile_",value:function(t,e,r,n,o,i){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,o),u=s?this.tileUrlFunction(s,n,o):void 0,l=new this.tileClass(a,void 0!==u?Nu.IDLE:Nu.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=i,l.addEventListener(Xe,this.handleTileChange.bind(this)),l}},{key:"getTile",value:function(t,e,r,n,o){var i=this,a=this.getProjection();if(!a||!o||fi(a,o))return this.getTileInternal(t,e,r,n,a||o);var s,u=this.getTileCacheForProjection(o),l=[t,e,r],c=$y(l);u.containsKey(c)&&(s=u.get(c));var f=this.getKey();if(s&&s.key==f)return s;var h=this.getTileGridForProjection(a),p=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(l,o),d=new bl(a,h,o,p,l,y,this.getTilePixelRatio(n),this.getGutter(),(function(t,e,r,n){return i.getTileInternal(t,e,r,n,a)}),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return d.key=f,s?(d.interimTile=s,d.refreshInterimChain(),u.replace(c,d)):u.set(c,d),d}},{key:"getTileInternal",value:function(t,e,r,n,o){var i=null,a=Jy(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((i=this.tileCache.get(a)).key!=s){var u=i;i=this.createTile_(t,e,r,n,o,s),u.getState()==Nu.IDLE?i.interimTile=u.interimTile:i.interimTile=u,i.refreshInterimChain(),this.tileCache.replace(a,i)}}else i=this.createTile_(t,e,r,n,o,s),this.tileCache.set(a,i);return i}},{key:"setRenderReprojectionEdges",value:function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(t,e){var r=ii(t);if(r){var n=pr(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},{key:"clear",value:function(){for(var t in Zd(Xd(e.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Wd);function Jd(t,e){t.getImage().src=e}const $d=Kd;function Qd(t){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(t)}function tv(t){var e=function(t,e){if("object"!=Qd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qd(e)?e:String(e)}function ev(t){return ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ev(t)}function rv(t,e){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rv(t,e)}var nv=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:wd({extent:xd(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});return(r=function(t,e,r){return e=ev(e),function(t,e){if(e&&("object"===Qd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],ev(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).gutter_=void 0!==t.gutter?t.gutter:0,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rv(t,e)}(e,t),r=e,(n=[{key:"getGutter",value:function(){return this.gutter_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($d);const ov=nv;function iv(t,e,r,n,o,i,a){var s,u,l=(r-e)/n;if(1===l)s=e;else if(2===l)s=e,u=o;else if(0!==l){for(var c=t[e],f=t[e+1],h=0,p=[0],y=e+n;y<r;y+=n){var d=t[y],v=t[y+1];h+=Math.sqrt((d-c)*(d-c)+(v-f)*(v-f)),p.push(h),c=d,f=v}var g=o*h,m=function(t,e,r){var n,o;r=r||Ae;for(var i=0,a=t.length,s=!1;i<a;)(o=+r(t[n=i+(a-i>>1)],e))<0?i=n+1:(a=n,s=!o);return s?i:~i}(p,g);m<0?(u=(g-p[-m-2])/(p[-m-1]-p[-m-2]),s=e+(-m-2)*n):s=e+m*n}a=a>1?a:2,i=i||new Array(a);for(var b=0;b<a;++b)i[b]=void 0===s?NaN:void 0===u?t[s+b]:Gr(t[s+b],t[s+n+b],u);return i}function av(t,e,r,n,o,i){if(r==e)return null;var a;if(o<t[e+n-1])return i?((a=t.slice(e,e+n))[n-1]=o,a):null;if(t[r-1]<o)return i?((a=t.slice(r-n,r))[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;o<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(o==c)return t.slice((s-1)*n,(s-1)*n+n);var f=(o-c)/(t[(s+1)*n-1]-c);a=[];for(var h=0;h<n-1;++h)a.push(Gr(t[(s-1)*n+h],t[s*n+h],f));return a.push(o),a}function sv(t,e,r,n){for(var o=[],i=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];i=Pn(t,e,u[0],n),o.push((i[0]+i[2])/2,(i[1]+i[3])/2),e=u[u.length-1]}return o}function uv(t){return uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uv(t)}function lv(t){var e=function(t,e){if("object"!=uv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uv(e)?e:String(e)}var cv=[1,0,0,1,0,0],fv=function(){function t(e,r,n,o,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=i,this.squaredTolerance_,this.stride_=o,this.simplifiedGeometry_}var e,r;return e=t,r=[{key:"get",value:function(t){return this.properties_[t]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?En(this.flatCoordinates_):Pn(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){if(!this.flatInteriorPoints_){var t=Dn(this.getExtent());this.flatInteriorPoints_=$a(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){if(!this.flatInteriorPoints_){var t=cs(this.flatCoordinates_,this.ends_),e=sv(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Qa(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=iv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,o=r.length;n<o;++n){var i=r[n],a=iv(t,e,i,2,.5);Ie(this.flatMidpoints_,a),e=i}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(t){return this}},{key:"simplifyTransformed",value:function(t,e){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getPropertiesInternal",value:function(){return this.properties_}},{key:"getStride",value:function(){return this.stride_}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(t){var e=(t=ii(t)).getExtent(),r=t.getWorldExtent();if(e&&r){var n=Gn(r)/Gn(e);$i(cv,r[0],r[3],n,-n,0,0,0),ea(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cv,this.flatCoordinates_)}}},{key:"applyTransform",value:function(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}},{key:"clone",value:function(){return new t(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}},{key:"getEnds",value:function(){return this.ends_}},{key:"enableSimplifyTransformed",value:function(){var e=this;return this.simplifyTransformed=Be((function(r,n){if(r===e.squaredTolerance_)return e.simplifiedGeometry_;e.simplifiedGeometry_=e.clone(),n&&e.simplifiedGeometry_.applyTransform(n);var o,i=e.simplifiedGeometry_.getFlatCoordinates();switch(e.type_){case"LineString":i.length=Pa(i,0,e.simplifiedGeometry_.flatCoordinates_.length,e.simplifiedGeometry_.stride_,r,i,0),o=[i.length];break;case"MultiLineString":o=[],i.length=ja(i,0,e.simplifiedGeometry_.ends_,e.simplifiedGeometry_.stride_,r,i,0,o);break;case"Polygon":o=[],i.length=Ta(i,0,e.simplifiedGeometry_.ends_,e.simplifiedGeometry_.stride_,Math.sqrt(r),i,0,o)}return o&&(e.simplifiedGeometry_=new t(e.type_,i,o,2,e.properties_,e.id_)),e.squaredTolerance_=r,e.simplifiedGeometry_})),this}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lv(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();fv.prototype.getFlatCoordinates=fv.prototype.getOrientedFlatCoordinates;const hv=fv;function pv(t){return pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(t)}function yv(t){var e=function(t,e){if("object"!=pv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pv(e)?e:String(e)}function dv(t){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dv(t)}function vv(t,e){return vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vv(t,e)}var gv=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function(t,e,r){return e=dv(e),function(t,e){if(e&&("object"===pv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],dv(t).constructor):e.apply(t,r))}(this,e,[t,r,a])).extent=null,s.format_=o,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=i,s.url_=n,s.key=n,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vv(t,e)}(e,t),r=e,(n=[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==Nu.IDLE&&(this.setState(Nu.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(t,e){this.setFeatures(t)}},{key:"onError",value:function(){this.setState(Nu.ERROR)}},{key:"setFeatures",value:function(t){this.features_=t,this.setState(Nu.LOADED)}},{key:"setLoader",value:function(t){this.loader_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vu);const mv=gv;function bv(t){return bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(t)}function wv(t){var e=function(t,e){if("object"!=bv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bv(e)?e:String(e)}function _v(t){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_v(t)}function xv(t,e){return xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xv(t,e)}var Sv=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=_v(e),function(t,e){if(e&&("object"===bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],_v(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;r.setGeometry(n)}else{var o=t;r.setProperties(o)}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xv(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&(nr(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=er(t,Xe,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(t){this.set(this.geometryName_,t)}},{key:"setStyle",value:function(t){var e,r;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?r=e:(Mr("function"==typeof e.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),r=[e]),function(){return r}):void 0,this.changed()}},{key:"setId",value:function(t){this.id_=t,this.changed()}},{key:"setGeometryName",value:function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const kv=Sv;function Ov(t){return Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(t)}function Ev(t){var e=function(t,e){if("object"!=Ov(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ov(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ov(e)?e:String(e)}function Pv(t){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pv(t)}function jv(t,e){return jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jv(t,e)}var Cv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=Pv(e),function(t,e){if(e&&("object"===Ov(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Pv(t).constructor):e.apply(t,void 0))}(this,e)).flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(t[0])?n.setCoordinates(t,r):n.setFlatCoordinates(r,t),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jv(t,e)}(e,t),r=e,n=[{key:"appendCoordinate",value:function(t){Ie(this.flatCoordinates,t),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<bn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ba(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))}},{key:"forEachSegment",value:function(t){return ts(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,av(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return Ra(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return iv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return Lp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){var t;return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,null!==(t=this.flatMidpoint_)&&void 0!==t?t:void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[];return r.length=Pa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return es(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ka(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ev(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Av=Cv;function Tv(t){return Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(t)}function Rv(t){var e=function(t,e){if("object"!=Tv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tv(e)?e:String(e)}function Iv(t){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Iv(t)}function Lv(t,e){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lv(t,e)}var Mv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e,r){return e=Iv(e),function(t,e){if(e&&("object"===Tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Iv(t).constructor):e.apply(t,void 0))}(this,e),r&&!Array.isArray(t[0])?n.setFlatCoordinates(r,t):n.setCoordinates(t,r),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lv(t,e)}(e,t),r=e,n=[{key:"appendPoint",value:function(t){Ie(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){if(n<bn(this.getExtent(),t,e))return n;for(var o=this.flatCoordinates,i=this.stride,a=0,s=o.length;a<s;a+=i){var u=Br(t,e,o[a],o[a+1]);if(u<n){n=u;for(var l=0;l<i;++l)r[l]=o[a+l];r.length=i}}return n}},{key:"getCoordinates",value:function(){return Ra(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(t){var e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Xa(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],o=0,i=t.length;o<i;o+=r){var a=new Xa(t.slice(o,o+r),e);n.push(a)}return n}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,o=e.length;n<o;n+=r)if(xn(t,e[n],e[n+1]))return!0;return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ka(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Fv=Mv;function Dv(t){return Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(t)}function Bv(t){var e=function(t,e){if("object"!=Dv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dv(e)?e:String(e)}function Nv(t){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nv(t)}function zv(t,e){return zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zv(t,e)}var Gv=function(t){function e(t,r,n){var o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e,r){return e=Nv(e),function(t,e){if(e&&("object"===Dv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Nv(t).constructor):e.apply(t,void 0))}(this,e)).ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,r);else if(void 0!==r&&n)o.setFlatCoordinates(r,t),o.ends_=n;else{for(var i=t,a=[],s=[],u=0,l=i.length;u<l;++u)Ie(a,i[u].getFlatCoordinates()),s.push(a.length);var c=0===i.length?o.getLayout():i[0].getLayout();o.setFlatCoordinates(c,a),o.ends_=s}return o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zv(t,e)}(e,t),r=e,n=[{key:"appendLineString",value:function(t){Ie(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<bn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wa(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xa(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))}},{key:"getCoordinateAtM",value:function(t,e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,r=void 0!==r&&r,function(t,e,r,n,o,i,a){if(a)return av(t,e,r[r.length-1],n,o,i);var s;if(o<t[n-1])return i?((s=t.slice(0,n))[n-1]=o,s):null;if(t[t.length-1]<o)return i?((s=t.slice(t.length-n))[n-1]=o,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(o<t[e+n-1])return null;if(o<=t[c-1])return av(t,e,c,n,o,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}},{key:"getCoordinates",value:function(){return Ia(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(t){return t<0||this.ends_.length<=t?null:new Av(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLineStrings",value:function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],o=0,i=0,a=e.length;i<a;++i){var s=e[i],u=new Av(t.slice(o,s),r);n.push(u),o=s}return n}},{key:"getFlatMidpoints",value:function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,o=this.stride,i=0,a=n.length;i<a;++i){var s=n[i];Ie(t,iv(e,r,s,o,.5)),r=s}return t}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=ja(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,"XY",n)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(t){return function(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){if(es(t,e,r[i],n,o))return!0;e=r[i]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Oa(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Uv=Gv;function qv(t){return qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(t)}function Wv(t){var e=function(t,e){if("object"!=qv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qv(e)?e:String(e)}function Vv(t){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vv(t)}function Yv(t,e){return Yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yv(t,e)}var Zv=function(t){function e(t,r,n){var o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e,r){return e=Vv(e),function(t,e){if(e&&("object"===qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Vv(t).constructor):e.apply(t,void 0))}(this,e)).endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){for(var i=t,a=[],s=[],u=0,l=i.length;u<l;++u){for(var c=i[u],f=a.length,h=c.getEnds(),p=0,y=h.length;p<y;++p)h[p]+=f;Ie(a,c.getFlatCoordinates()),s.push(h)}r=0===i.length?o.getLayout():i[0].getLayout(),t=a,n=s}return void 0!==r&&n?(o.setFlatCoordinates(r,t),o.endss_=n):o.setCoordinates(t,r),o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yv(t,e)}(e,t),r=e,n=[{key:"appendPolygon",value:function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;Ie(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();var o=new e(this.flatCoordinates.slice(),this.layout,r);return o.applyProperties(this),o}},{key:"closestPointXY",value:function(t,e,r,n){return n<bn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i];o=wa(t,e,s,n,o),e=s[s.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,o,i,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=xa(t,e,p,n,o,!0,a,s,u,l,c),e=p[p.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,r,n))}},{key:"containsXY",value:function(t,e){return function(t,e,r,n,o,i){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(Ja(t,e,u,n,o,i))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return function(t,e,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var s=r[i];o+=Fa(t,e,s,n),e=s[s.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?ls(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,La(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=sv(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Qa(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new Fv(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;ss(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ls(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=function(t,e,r,n,o,i,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],f=[];a=Ta(t,e,c,n,o,i,a,f),s.push(f),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,"XY",n)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),o=n[n.length-1];if(0!==e)for(var i=0,a=n.length;i<a;++i)n[i]-=e;return new vs(this.flatCoordinates.slice(e,o),this.layout,n)}},{key:"getPolygons",value:function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],o=0,i=0,a=r.length;i<a;++i){var s=r[i].slice(),u=s[s.length-1];if(0!==o)for(var l=0,c=s.length;l<c;++l)s[l]-=o;var f=new vs(e.slice(o,u),t,s);n.push(f),o=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(t){return function(t,e,r,n,o){for(var i=0,a=r.length;i<a;++i){var s=r[i];if(ns(t,e,s,n,o))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ea(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);const Xv=Zv;function Hv(t){return Hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(t)}function Kv(t){var e=function(t,e){if("object"!=Hv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hv(e)?e:String(e)}function Jv(){return Jv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$v(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Jv.apply(this,arguments)}function $v(t){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$v(t)}function Qv(t,e){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qv(t,e)}function tg(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}const eg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=$v(e),function(t,e){if(e&&("object"===Hv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],$v(t).constructor):e.apply(t,void 0))}(this,e)).geometries_=t||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qv(t,e)}(e,t),r=e,(n=[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(nr),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(er(this.geometries_[t],Xe,this.changed,this))}},{key:"clone",value:function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){if(n<bn(this.getExtent(),t,e))return n;for(var o=this.geometries_,i=0,a=o.length;i<a;++i)n=o[i].closestPointXY(t,e,r,n);return n}},{key:"containsXY",value:function(t,e){for(var r=this.geometries_,n=0,o=r.length;n<o;++n)if(r[n].containsXY(t,e))return!0;return!1}},{key:"computeExtent",value:function(t){On(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Cn(t,e[r].getExtent());return t}},{key:"getGeometries",value:function(){return tg(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,o=!1,i=0,a=n.length;i<a;++i){var s=n[i],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(o=!0)}if(o){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(t,e){for(var r=this.geometries_,n=0,o=r.length;n<o;++n)r[n].rotate(t,e);this.changed()}},{key:"scale",value:function(t,e,r){r||(r=Dn(this.getExtent()));for(var n=this.geometries_,o=0,i=n.length;o<i;++o)n[o].scale(t,e,r);this.changed()}},{key:"setGeometries",value:function(t){this.setGeometriesArray(tg(t))}},{key:"setGeometriesArray",value:function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()}},{key:"translate",value:function(t,e){for(var r=this.geometries_,n=0,o=r.length;n<o;++n)r[n].translate(t,e);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),Jv($v(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(la);function rg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ng(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rg(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=ig(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function og(t){return og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(t)}function ig(t){var e=function(t,e){if("object"!=og(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=og(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==og(e)?e:String(e)}var ag=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=kv,this.supportedMediaTypes=null}var e,r;return e=t,r=[{key:"getReadOptions",value:function(t,e){if(e){var r=e.dataProjection?ii(e.dataProjection):this.readProjection(t);e.extent&&r&&"tile-pixels"===r.getUnits()&&(r=ii(r)).setWorldExtent(e.extent),e={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(e)}},{key:"adaptOptions",value:function(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}},{key:"getType",value:function(){return fr()}},{key:"readFeature",value:function(t,e){return fr()}},{key:"readFeatures",value:function(t,e){return fr()}},{key:"readGeometry",value:function(t,e){return fr()}},{key:"readProjection",value:function(t){return fr()}},{key:"writeFeature",value:function(t,e){return fr()}},{key:"writeFeatures",value:function(t,e){return fr()}},{key:"writeGeometry",value:function(t,e){return fr()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ig(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const sg=ag;function ug(t,e,r){var n=r?ii(r.featureProjection):null,o=r?ii(r.dataProjection):null,i=t;if(n&&o&&!fi(n,o)){e&&(i=t.clone());var a=e?n:o,s=e?o:n;"tile-pixels"===a.getUnits()?i.transform(a,s):i.applyTransform(pi(a,s))}if(e&&r&&void 0!==r.decimals){var u=Math.pow(10,r.decimals);i===t&&(i=t.clone()),i.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t}))}return i}var lg={Point:Xa,LineString:Av,Polygon:vs,MultiPoint:Fv,MultiLineString:Uv,MultiPolygon:Xv};function cg(t,e){var r,n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map((function(e){return cg(ng(ng({},t),{},{geometry:e}))})).flat();var o="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===o||"Circle"===o)throw new Error("Unsupported geometry type: "+o);var i=n.layout.length;return ug(new hv(o,"Polygon"===o?function(t,e,r){return Array.isArray(e[0])?(ss(t,0,e,r)||ls(t=t.slice(),0,e,r),t):(as(t,0,e,r)||us(t=t.slice(),0,e,r),t)}(n.flatCoordinates,n.ends,i):n.flatCoordinates,null===(r=n.ends)||void 0===r?void 0:r.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function fg(t,e){if(!t)return null;if(Array.isArray(t)){var r=t.map((function(t){return fg(t,e)}));return new eg(r)}return ug(new(0,lg[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}function hg(t){return hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hg(t)}function pg(t){var e=function(t,e){if("object"!=hg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hg(e)?e:String(e)}function yg(t){return yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yg(t)}function dg(t,e){return dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dg(t,e)}var vg=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=yg(r=e),function(t,e){if(e&&("object"===hg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(r,[],yg(t).constructor):r.apply(t,undefined));var t,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dg(t,e)}(e,t),r=e,n=[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(t,e){return this.readFeatureFromObject(gg(t),this.getReadOptions(t,e))}},{key:"readFeatures",value:function(t,e){return this.readFeaturesFromObject(gg(t),this.getReadOptions(t,e))}},{key:"readFeatureFromObject",value:function(t,e){return fr()}},{key:"readFeaturesFromObject",value:function(t,e){return fr()}},{key:"readGeometry",value:function(t,e){return this.readGeometryFromObject(gg(t),this.getReadOptions(t,e))}},{key:"readGeometryFromObject",value:function(t,e){return fr()}},{key:"readProjection",value:function(t){return this.readProjectionFromObject(gg(t))}},{key:"readProjectionFromObject",value:function(t){return fr()}},{key:"writeFeature",value:function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}},{key:"writeFeatureObject",value:function(t,e){return fr()}},{key:"writeFeatures",value:function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}},{key:"writeFeaturesObject",value:function(t,e){return fr()}},{key:"writeGeometry",value:function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}},{key:"writeGeometryObject",value:function(t,e){return fr()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(sg);function gg(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}function mg(t){return mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(t)}function bg(t){var e=function(t,e){if("object"!=mg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mg(e)?e:String(e)}function wg(t){return wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wg(t)}function _g(t,e){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_g(t,e)}var xg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=wg(e),function(t,e){if(e&&("object"===mg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],wg(t).constructor):e.apply(t,void 0))}(this,e)).dataProjection=ii(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(r.defaultFeatureProjection=ii(t.featureProjection)),t.featureClass&&(r.featureClass=t.featureClass),r.geometryName_=t.geometryName,r.extractGeometryName_=t.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_g(t,e)}(e,t),r=e,n=[{key:"readFeatureFromObject",value:function(t,e){var r,n=Sg((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry);if(this.featureClass===hv)return cg({geometry:n,id:r.id,properties:r.properties},e);var o=new kv;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(fg(n,e)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}},{key:"readFeaturesFromObject",value:function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,o=0,i=n.length;o<i;++o){var a=this.readFeatureFromObject(n[o],e);a&&r.push(a)}}else r=[this.readFeatureFromObject(t,e)];return r.flat()}},{key:"readGeometryFromObject",value:function(t,e){return function(t,e){return fg(Sg(t),e)}(t,e)}},{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"==r.type)e=ii(r.properties.name);else{if("EPSG"!==r.type)throw new Error("Unknown SRS type");e=ii("EPSG:"+r.properties.code)}else e=this.dataProjection;return e}},{key:"writeFeatureObject",value:function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(r.id=n),!t.hasProperties())return r;var o=t.getProperties(),i=t.getGeometry();return i&&(r.geometry=kg(i,e),delete o[t.getGeometryName()]),Ge(o)||(r.properties=o),r}},{key:"writeFeaturesObject",value:function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,o=t.length;n<o;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(t,e){return kg(t,this.adaptOptions(e))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(vg);function Sg(t,e){if(!t)return null;var r;switch(t.type){case"Point":r=function(t){var e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:da(e.length)}}(t);break;case"LineString":r=function(t){var e=t.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:da(e[0].length)}}(t);break;case"Polygon":r=function(t){var e=t.coordinates,r=[],n=e[0][0].length;return{type:"Polygon",flatCoordinates:r,ends:Oa(r,0,e,n),layout:da(n)}}(t);break;case"MultiPoint":r=function(t){var e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:da(e[0].length)}}(t);break;case"MultiLineString":r=function(t){var e=t.coordinates,r=e[0][0].length,n=[];return{type:"MultiLineString",flatCoordinates:n,ends:Oa(n,0,e,r),layout:da(r)}}(t);break;case"MultiPolygon":r=function(t){var e=t.coordinates,r=[],n=e[0][0][0].length;return{type:"MultiPolygon",flatCoordinates:r,ends:Ea(r,0,e,n),layout:da(n)}}(t);break;case"GeometryCollection":r=function(t,e){return t.geometries.map((function(t){return Sg(t)}))}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r}function kg(t,e){var r,n=(t=ug(t,!0,e)).getType();switch(n){case"Point":r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case"MultiPoint":r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case"GeometryCollection":r=function(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return kg(t,e)}))}}(t,e);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}const Og=xg;function Eg(t){return Eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(t)}function Pg(t){return Pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pg(t)}function jg(t,e){return jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jg(t,e)}var Cg=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[t=t||{}],n=Pg(n=e),function(t,e){if(e&&("object"===Eg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],Pg(r).constructor):n.apply(r,o));var r,n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jg(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Ls);const Ag=Cg;function Tg(t){return Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg(t)}function Rg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ig(t){var e=function(t,e){if("object"!=Tg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tg(e)?e:String(e)}function Lg(t){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lg(t)}function Mg(t,e){return Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mg(t,e)}var Fg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Lg(e),function(t,e){if(e&&("object"===Tg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Lg(t).constructor):e.apply(t,r))}(this,e,[t])).image_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mg(t,e)}(e,t),r=e,n=[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,o=n.resolution,i=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=Un(s,ki(e.extent,n.projection))),!a[0]&&!a[1]&&!Zn(s))if(i){var u=n.projection,l=i.getImage(s,o,r,u);l&&(this.loadImage(l)?this.image_=l:4===l.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=Ki(e.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!wn(o,n))return null;var i=this.image_.getExtent(),a=this.image_.getImage(),s=Vn(i),u=Math.floor(a.width*((n[0]-i[0])/s));if(u<0||u>=a.width)return null;var l=Gn(i),c=Math.floor(a.height*((i[3]-n[1])/l));return c<0||c>=a.height?null:this.getImageData(a,u,c)}},{key:"renderFrame",value:function(t,e){var r,n=this.image_,o=n.getExtent(),i=n.getResolution(),a=function(t){if(Array.isArray(t))return t}(r=Array.isArray(i)?i:[i,i])||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(r)||function(t,e){if(t){if("string"==typeof t)return Rg(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rg(t,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],u=a[1],l=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],f=t.pixelRatio,h=t.viewState,p=h.center,y=h.resolution,d=f*s/(y*l),v=f*u/(y*l),g=t.extent,m=h.resolution,b=h.rotation,w=Math.round(Vn(g)/m*f),_=Math.round(Gn(g)/m*f);$i(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,b,-w/2,-_/2),Qi(this.inversePixelTransform,this.pixelTransform);var x=ta(this.pixelTransform);this.useContainer(e,x,this.getBackground(t));var S=this.context,k=S.canvas;k.width!=w||k.height!=_?(k.width=w,k.height=_):this.containerReused||S.clearRect(0,0,w,_);var O=!1,E=!0;if(c.extent){var P=ki(c.extent,h.projection);(O=(E=Yn(P,t.extent))&&!_n(P,t.extent))&&this.clipUnrotated(S,t,P)}var j=n.getImage(),C=$i(this.tempTransform,w/2,_/2,d,v,0,l*(o[0]-p[0])/s,l*(p[1]-o[3])/u);this.renderedResolution=u*f/l;var A=j.width*C[0],T=j.height*C[3];if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t),E&&A>=.5&&T>=.5){var R,I=C[4],L=C[5],M=c.opacity;1!==M&&(R=S.globalAlpha,S.globalAlpha=M),S.drawImage(j,0,0,+j.width,+j.height,I,L,A,T),1!==M&&(S.globalAlpha=R)}return this.postRender(S,t),O&&S.restore(),S.imageSmoothingEnabled=!0,x!==k.style.transform&&(k.style.transform=x),this.container}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ig(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Bu);const Dg=Fg;function Bg(t){return Bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bg(t)}function Ng(t){var e=function(t,e){if("object"!=Bg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bg(e)?e:String(e)}function zg(){return zg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zg.apply(this,arguments)}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gg(t)}function Ug(t,e){return Ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ug(t,e)}var qg=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[t],n=Gg(n=e),function(t,e){if(e&&("object"===Bg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],Gg(r).constructor):n.apply(r,o));var r,n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ug(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Dg(this)}},{key:"getData",value:function(t){return zg(Gg(e.prototype),"getData",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ng(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ag);const Wg=qg;var Vg=s(584);function Yg(t){return Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(t)}function Zg(t){var e=function(t,e){if("object"!=Yg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yg(e)?e:String(e)}function Xg(t){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xg(t)}function Hg(t,e){return Hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hg(t,e)}var Kg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=Xg(e),function(t,e){if(e&&("object"===Yg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xg(t).constructor):e.apply(t,void 0))}(this,e)).dataProjection=new _o({code:"",units:"tile-pixels"}),r.featureClass_=t.featureClass?t.featureClass:hv,r.geometryName_=t.geometryName,r.layerName_=t.layerName?t.layerName:"layer",r.layers_=t.layers?t.layers:null,r.idProperty_=t.idProperty,r.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hg(t,e)}(e,t),r=e,n=[{key:"readRawGeometry_",value:function(t,e,r,n){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,i=1,a=0,s=0,u=0,l=0,c=0;t.pos<o;){if(!a){var f=t.readVarint();i=7&f,a=f>>3}if(a--,1===i||2===i)s+=t.readSVarint(),u+=t.readSVarint(),1===i&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2;else{if(7!==i)throw new Error("Invalid command found in the PBF");l>c&&(r.push(r[c],r[c+1]),l+=2)}}l>c&&(n.push(l),c=l)}},{key:"createFeature_",value:function(t,e,r){var n,o=e.type;if(0===o)return null;var i,a=e.properties;this.idProperty_?(i=a[this.idProperty_],delete a[this.idProperty_]):i=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;return 1===t?r=1===e?"Point":"MultiPoint":2===t?r=1===e?"LineString":"MultiLineString":3===t&&(r="Polygon"),r}(o,u.length);if(this.featureClass_===hv)(n=new this.featureClass_(l,s,u,2,a,i)).transform(r.dataProjection);else{var c;if("Polygon"==l){var f=cs(s,u);c=f.length>1?new Xv(s,"XY",f):new vs(s,"XY",u)}else c="Point"===l?new Xa(s,"XY"):"LineString"===l?new Av(s,"XY"):"MultiPoint"===l?new Fv(s,"XY"):"MultiLineString"===l?new Uv(s,"XY",u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var h=ug(c,!1,r);n.setGeometry(h),void 0!==i&&n.setId(i),n.setProperties(a,!0)}return n}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(t,e){var r=this.layers_,n=ii((e=this.adaptOptions(e)).dataProjection);n.setWorldExtent(e.extent),e.dataProjection=n;var o=new Vg(t),i=o.readFields(Jg,{}),a=[];for(var s in i)if(!r||r.includes(s)){var u=i[s],l=u?[0,0,u.extent,u.extent]:null;n.setExtent(l);for(var c=0,f=u.length;c<f;++c){var h=tm(o,u,c),p=this.createFeature_(o,h,e);null!==p&&a.push(p)}}return a}},{key:"readProjection",value:function(t){return this.dataProjection}},{key:"setLayers",value:function(t){this.layers_=t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(sg);function Jg(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},o=r.readVarint()+r.pos;r.readFields($g,n,o),n.length=n.features.length,n.length&&(e[n.name]=n)}}function $g(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,o=r.readVarint()+r.pos;r.pos<o;)n=1==(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function Qg(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var o=e.layer.keys[r.readVarint()],i=e.layer.values[r.readVarint()];e.properties[o]=i}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function tm(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,o={layer:e,type:0,properties:{}};return t.readFields(Qg,o,n),o}const em=Kg;function rm(t){return rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(t)}function nm(t){var e=function(t,e){if("object"!=rm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rm(e)?e:String(e)}function om(t){return om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},om(t)}function im(t,e){return im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},im(t,e)}var am=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=om(e),function(t,e){if(e&&("object"===rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],om(t).constructor):e.apply(t,void 0))}(this,e)).map_=t,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&im(t,e)}(e,t),r=e,n=[{key:"dispatchRenderEvent",value:function(t,e){fr()}},{key:"calculateMatrices2D",value:function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;$i(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Qi(n,r)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,o,i,a,s){var u,l=e.viewState;function c(t,e,r,n){return o.call(i,e,t?r:null,n)}var f=l.projection,h=Xo(t.slice(),f),p=[[0,0]];if(f.canWrapX()&&n){var y=Vn(f.getExtent());p.push([-y,0],[y,0])}for(var d=e.layerStatesArray,v=d.length,g=[],m=[],b=0;b<p.length;b++)for(var w=v-1;w>=0;--w){var _=d[w],x=_.layer;if(x.hasRenderer()&&Is(_,l)&&a.call(s,x)){var S=x.getRenderer(),k=x.getSource();if(S&&k){var O=k.getWrapX()?h:t,E=c.bind(null,_.managed);m[0]=O[0]+p[b][0],m[1]=O[1]+p[b][1],u=S.forEachFeatureAtCoordinate(m,e,r,E,g)}if(u)return u}}if(0!==g.length){var P=1/g.length;return g.forEach((function(t,e){return t.distanceSq+=e*P})),g.sort((function(t,e){return t.distanceSq-e.distanceSq})),g.some((function(t){return u=t.callback(t.feature,t.layer,t.geometry)})),u}}},{key:"hasFeatureAtCoordinate",value:function(t,e,r,n,o,i){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,Me,this,o,i)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(t){fr()}},{key:"flushDeclutterItems",value:function(t){}},{key:"scheduleExpireIconCache",value:function(t){Hc.canExpireCache()&&t.postRenderFunctions.push(sm)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ce);function sm(t,e){Hc.expire()}function um(t){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(t)}function lm(t){var e=function(t,e){if("object"!=um(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=um(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==um(e)?e:String(e)}function cm(){return cm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},cm.apply(this,arguments)}function fm(t){return fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fm(t)}function hm(t,e){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hm(t,e)}var pm=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=fm(e),function(t,e){if(e&&("object"===um(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],fm(t).constructor):e.apply(t,r))}(this,e,[t])).fontChangeListenerKey_=er(cc,Ee,t.redrawText.bind(t)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=Hl+" ol-layers";var o=t.getViewport();return o.insertBefore(r.element_,o.firstChild||null),r.children_=[],r.renderedVisible_=!0,r.declutterLayers_=[],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hm(t,e)}(e,t),r=e,n=[{key:"dispatchRenderEvent",value:function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new eu(t,void 0,e);r.dispatchEvent(n)}}},{key:"disposeInternal",value:function(){nr(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),cm(fm(e.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(fo,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),r=t.viewState;this.children_.length=0;var n=this.declutterLayers_;n.length=0;for(var o=null,i=0,a=e.length;i<a;++i){var s=e[i];t.layerIndex=i;var u=s.layer,l=u.getSourceState();if(!Is(s,r)||"ready"!=l&&"undefined"!=l)u.unrender();else{var c=u.render(t,o);c&&(c!==o&&(this.children_.push(c),o=c),"getDeclutter"in u&&n.push(u))}}this.flushDeclutterItems(t),function(t,e){for(var r=t.childNodes,n=0;;++n){var o=r[n],i=e[n];if(!o&&!i)break;o!==i&&(o?i?t.insertBefore(i,o):(t.removeChild(o),--n):t.appendChild(i))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"flushDeclutterItems",value:function(t){for(var e=this.declutterLayers_,r=e.length-1;r>=0;--r)e[r].renderDeclutter(t);e.length=0}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(am);const ym=pm;function dm(t){return dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dm(t)}function vm(t){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vm(t)}function gm(t,e){return gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gm(t,e)}var mm=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e,r){return e=vm(e),function(t,e){if(e&&("object"===dm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],vm(t).constructor):e.apply(t,r))}(this,e,[t])).map=r,o.frameState=void 0!==n?n:null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gm(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Oe);const bm=mm;function wm(t){return wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(t)}function _m(t){var e=function(t,e){if("object"!=wm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wm(e)?e:String(e)}function xm(){return xm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},xm.apply(this,arguments)}function Sm(t){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sm(t)}function km(t,e){return km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},km(t,e)}var Om=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function(t,e,r){return e=Sm(e),function(t,e){if(e&&("object"===wm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Sm(t).constructor):e.apply(t,r))}(this,e,[t,r,i])).originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==o&&o,s.activePointers=a,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&km(t,e)}(e,t),r=e,(n=[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){xm(Sm(e.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){xm(Sm(e.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_m(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bm);const Em=Om,Pm={SINGLECLICK:"singleclick",CLICK:Ke,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jm="pointerdown";function Cm(t){return Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(t)}function Am(t){var e=function(t,e){if("object"!=Cm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cm(e)?e:String(e)}function Tm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rm(){return Rm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Im(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Rm.apply(this,arguments)}function Im(t){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Im(t)}function Lm(t,e){return Lm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lm(t,e)}var Mm=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=Im(e),function(t,e){if(e&&("object"===Cm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tm(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Im(t).constructor):e.apply(t,r))}(this,e,[t])).map_=t,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=void 0===r?1:r,n.down_=null;var o=n.map_.getViewport();return n.activePointers_=[],n.trackedTouches_={},n.element_=o,n.pointerdownListenerKey_=er(o,jm,n.handlePointerDown_,Tm(n)),n.originalPointerMoveEvent_,n.relayedListenerKey_=er(o,"pointermove",n.relayMoveEvent_,Tm(n)),n.boundHandleTouchMove_=n.handleTouchMove_.bind(Tm(n)),n.element_.addEventListener(Qe,n.boundHandleTouchMove_,!!Vi&&{passive:!1}),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lm(t,e)}(e,t),r=e,(n=[{key:"emulateClick_",value:function(t){var e=this,r=new Em(Pm.CLICK,this.map_,t);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new Em(Pm.DBLCLICK,this.map_,t),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout((function(){e.clickTimeoutId_=void 0;var r=new Em(Pm.SINGLECLICK,e.map_,t);e.dispatchEvent(r)}),250)}},{key:"updateActivePointers_",value:function(t){var e=t,r=e.pointerId;if(e.type==Pm.POINTERUP||e.type==Pm.POINTERCANCEL){for(var n in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else e.type!=Pm.POINTERDOWN&&e.type!=Pm.POINTERMOVE||(this.trackedTouches_[r]=e);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(t){this.updateActivePointers_(t);var e=new Em(Pm.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(nr),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(t){return 0===t.button}},{key:"handlePointerDown_",value:function(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);var e=new Em(Pm.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(er(r,Pm.POINTERMOVE,this.handlePointerMove_,this),er(r,Pm.POINTERUP,this.handlePointerUp_,this),er(this.element_,Pm.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(er(this.element_.getRootNode(),Pm.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var e=new Em(Pm.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}},{key:"relayMoveEvent_",value:function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Em(Pm.POINTERMOVE,this.map_,t,e))}},{key:"handleTouchMove_",value:function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}},{key:"isMoving_",value:function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&(nr(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Qe,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(nr(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(nr),this.dragListenerKeys_.length=0,this.element_=null,Rm(Im(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Am(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ze);const Fm=Mm,Dm="postrender",Bm="loadstart",Nm="loadend",zm="layergroup",Gm="size",Um="target",qm="view";function Wm(t){return Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(t)}function Vm(t){var e=function(t,e){if("object"!=Wm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Wm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wm(e)?e:String(e)}var Ym=1/0;function Zm(t){return Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(t)}function Xm(t){var e=function(t,e){if("object"!=Zm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zm(e)?e:String(e)}function Hm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Km(){return Km="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Km.apply(this,arguments)}function Jm(t){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jm(t)}function $m(t,e){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$m(t,e)}const Qm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,r){return e=Jm(e),function(t,e){if(e&&("object"===Zm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hm(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Jm(t).constructor):e.apply(t,r))}(this,e,[function(e){return t.apply(null,e)},function(t){return t[0].getKey()}])).boundHandleTileChange_=n.handleTileChange.bind(Hm(n)),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$m(t,e)}(e,t),r=e,(n=[{key:"enqueue",value:function(t){var r=Km(Jm(e.prototype),"enqueue",this).call(this,t);return r&&t[0].addEventListener(Xe,this.boundHandleTileChange_),r}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var e=t.target,r=e.getState();if(r===Nu.LOADED||r===Nu.ERROR||r===Nu.EMPTY){r!==Nu.ERROR&&e.removeEventListener(Xe,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(t,e){for(var r,n,o=0;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==Nu.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,r.load())}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var e,r;return e=t,(r=[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,ze(this.queuedElements_)}},{key:"dequeue",value:function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r}},{key:"enqueue",value:function(t){Mr(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");var e=this.priorityFunction_(t);return e!=Ym&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(t){return 2*t+1}},{key:"getRightChildIndex_",value:function(t){return 2*t+2}},{key:"getParentIndex_",value:function(t){return t-1>>1}},{key:"heapify_",value:function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(t){return t in this.queuedElements_}},{key:"isQueued",value:function(t){return this.isKeyQueued(this.keyFunction_(t))}},{key:"siftUp_",value:function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,o=e[t],i=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=o,r[t]=i,this.siftDown_(a,t)}},{key:"siftDown_",value:function(t,e){for(var r=this.elements_,n=this.priorities_,o=r[e],i=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>i))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=o,n[e]=i}},{key:"reprioritize",value:function(){var t,e,r,n=this.priorityFunction_,o=this.elements_,i=this.priorities_,a=0,s=o.length;for(e=0;e<s;++e)(r=n(t=o[e]))==Ym?delete this.queuedElements_[this.keyFunction_(t)]:(i[a]=r,o[a++]=t);o.length=a,i.length=a,this.heapify_()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vm(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function tb(t){return tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tb(t)}function eb(t){var e=function(t,e){if("object"!=tb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tb(e)?e:String(e)}function rb(){return rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},rb.apply(this,arguments)}function nb(t){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nb(t)}function ob(t,e){return ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ob(t,e)}var ib=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e,r){return e=nb(e),function(t,e){if(e&&("object"===tb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],nb(t).constructor):e.apply(t,void 0))}(this,e);var n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ob(t,e)}(e,t),r=e,n=[{key:"disposeInternal",value:function(){ju(this.element),rb(nb(e.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(t){this.map_&&ju(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)nr(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==De&&this.listenerKeys.push(er(t,Dm,this.render,this)),t.render())}},{key:"render",value:function(t){}},{key:"setTarget",value:function(t){this.target_="string"==typeof t?document.getElementById(t):t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const ab=ib;function sb(t){return sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sb(t)}function ub(t){var e=function(t,e){if("object"!=sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sb(e)?e:String(e)}function lb(t){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lb(t)}function cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fb(t,e){return fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fb(t,e)}var hb=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=lb(e),function(t,e){if(e&&("object"===sb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cb(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],lb(t).constructor):e.apply(t,r))}(this,e,[{element:document.createElement("div"),render:t.render,target:t.target}])).ulElement_=document.createElement("ul"),r.collapsed_=void 0===t.collapsed||t.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==t.collapsible,r.collapsible_=void 0===t.collapsible||t.collapsible,r.collapsible_||(r.collapsed_=!1);var n=void 0!==t.className?t.className:"ol-attribution",o=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:n+"-expand",a=void 0!==t.collapseLabel?t.collapseLabel:"›",s=void 0!==t.collapseClassName?t.collapseClassName:n+"-collapse";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a,r.collapseLabel_.className=s):r.collapseLabel_=a;var u=void 0!==t.label?t.label:"i";"string"==typeof u?(r.label_=document.createElement("span"),r.label_.textContent=u,r.label_.className=i):r.label_=u;var l=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=o,r.toggleButton_.appendChild(l),r.toggleButton_.addEventListener(Ke,r.handleClick_.bind(cb(r)),!1);var c=n+" "+Hl+" "+Kl+(r.collapsed_&&r.collapsible_?" "+Jl:"")+(r.collapsible_?"":" ol-uncollapsible"),f=r.element;return f.className=c,f.appendChild(r.toggleButton_),f.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fb(t,e)}(e,t),r=e,(n=[{key:"collectSourceAttributions_",value:function(t){var e=Array.from(new Set(this.getMap().getAllLayers().flatMap((function(e){return e.getAttributions(t)})))),r=!this.getMap().getAllLayers().some((function(t){return t.getSource()&&!1===t.getSource().getAttributionsCollapsible()}));return this.overrideCollapsible_||this.setCollapsible(r),e}},{key:"updateElement_",value:function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Le(e,this.renderedAttributions_)){Cu(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var i=document.createElement("li");i.innerHTML=e[n],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(Jl),this.collapsed_?Pu(this.collapseLabel_,this.label_):Pu(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(t){this.updateElement_(t.frameState)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ub(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ab);const pb=hb;function yb(t){return yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(t)}function db(t){var e=function(t,e){if("object"!=yb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yb(e)?e:String(e)}function vb(t){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vb(t)}function gb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mb(t,e){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mb(t,e)}var bb=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},r=function(t,e,r){return e=vb(e),function(t,e){if(e&&("object"===yb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gb(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],vb(t).constructor):e.apply(t,r))}(this,e,[{element:document.createElement("div"),render:t.render,target:t.target}]);var n=void 0!==t.className?t.className:"ol-rotate",o=void 0!==t.label?t.label:"⇧",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className=i,r.label_.textContent=o):(r.label_=o,r.label_.classList.add(i));var a=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(Ke,r.handleClick_.bind(gb(r)),!1);var u=n+" "+Hl+" "+Kl,l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=t.resetNorth?t.resetNorth:void 0,r.duration_=void 0!==t.duration?t.duration:250,r.autoHide_=void 0===t.autoHide||t.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(Xl),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mb(t,e)}(e,t),r=e,n=[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Li}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var o=this.element.classList.contains(Xl);o||0!==r?o&&0!==r&&this.element.classList.remove(Xl):this.element.classList.add(Xl)}this.label_.style.transform=n}this.rotation_=r}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,db(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ab);const wb=bb;function _b(t){return _b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_b(t)}function xb(t){var e=function(t,e){if("object"!=_b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_b(e)?e:String(e)}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sb(t)}function kb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ob(t,e){return Ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ob(t,e)}var Eb=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},r=function(t,e,r){return e=Sb(e),function(t,e){if(e&&("object"===_b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kb(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Sb(t).constructor):e.apply(t,r))}(this,e,[{element:document.createElement("div"),target:t.target}]);var n=void 0!==t.className?t.className:"ol-zoom",o=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:n+"-in",a=void 0!==t.zoomOutClassName?t.zoomOutClassName:n+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",u=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",l=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",c=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof s?document.createTextNode(s):s),f.addEventListener(Ke,r.handleClick_.bind(kb(r),o),!1);var h=document.createElement("button");h.className=a,h.setAttribute("type","button"),h.title=c,h.appendChild("string"==typeof u?document.createTextNode(u):u),h.addEventListener(Ke,r.handleClick_.bind(kb(r),-o),!1);var p=n+" "+Hl+" "+Kl,y=r.element;return y.className=p,y.appendChild(f),y.appendChild(h),r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ob(t,e)}(e,t),r=e,(n=[{key:"handleClick_",value:function(t,e){e.preventDefault(),this.zoomByDelta_(t)}},{key:"zoomByDelta_",value:function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Li})):e.setZoom(n)}}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ab);const Pb=Eb;function jb(t){t=t||{};var e=new pn;return(void 0===t.zoom||t.zoom)&&e.push(new Pb(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new wb(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new pb(t.attributionOptions)),e}const Cb="active";function Ab(t){return Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ab(t)}function Tb(t){var e=function(t,e){if("object"!=Ab(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ab(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ab(e)?e:String(e)}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rb(t)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ib(t,e)}var Lb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Rb(e),function(t,e){if(e&&("object"===Ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Rb(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un,t&&t.handleEvent&&(r.handleEvent=t.handleEvent),r.map_=null,r.setActive(!0),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}(e,t),r=e,n=[{key:"getActive",value:function(){return this.get(Cb)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(Cb,t)}},{key:"setMap",value:function(t){this.map_=t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);function Mb(t,e,r,n){var o=t.getZoom();if(void 0!==o){var i=t.getConstrainedZoom(o+e),a=t.getResolutionForZoom(i);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:Li})}}const Fb=Lb;function Db(t){return Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Db(t)}function Bb(t){var e=function(t,e){if("object"!=Db(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Db(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Db(e)?e:String(e)}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nb(t)}function zb(t,e){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zb(t,e)}var Gb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=Nb(e),function(t,e){if(e&&("object"===Db(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Nb(t).constructor):e.apply(t,void 0))}(this,e)).delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zb(t,e)}(e,t),r=e,n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==Pm.DBLCLICK){var r=t.originalEvent,n=t.map,o=t.coordinate,i=r.shiftKey?-this.delta_:this.delta_;Mb(n.getView(),i,o,this.duration_),r.preventDefault(),e=!0}return!e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fb);const Ub=Gb;function qb(t){return qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qb(t)}function Wb(t){var e=function(t,e){if("object"!=qb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qb(e)?e:String(e)}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vb(t)}function Yb(t,e){return Yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yb(t,e)}var Zb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e,r){return e=Vb(e),function(t,e){if(e&&("object"===qb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}(this,e,[t=t||{}]),t.handleDownEvent&&(r.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(r.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(r.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(r.handleUpEvent=t.handleUpEvent),t.stopDown&&(r.stopDown=t.stopDown),r.handlingDownUpSequence=!1,r.targetPointers=[],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yb(t,e)}(e,t),r=e,(n=[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(t){return!1}},{key:"handleDragEvent",value:function(t){}},{key:"handleEvent",value:function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Pm.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Pm.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Pm.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Pm.POINTERMOVE&&this.handleMoveEvent(t);return!e}},{key:"handleMoveEvent",value:function(t){}},{key:"handleUpEvent",value:function(t){return!1}},{key:"stopDown",value:function(t){return t}},{key:"updateTrackedPointers_",value:function(t){t.activePointers&&(this.targetPointers=t.activePointers)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fb);function Xb(t){for(var e=t.length,r=0,n=0,o=0;o<e;o++)r+=t[o].clientX,n+=t[o].clientY;return{clientX:r/e,clientY:n/e}}const Hb=Zb;function Kb(t){var e=arguments;return function(t){for(var r=!0,n=0,o=e.length;n<o&&(r=r&&e[n](t));++n);return r}}var Jb=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$b=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return e.contains(r)}(t)},Qb=Me,tw=function(t){var e=t.originalEvent;return 0==e.button&&!(zi&&Gi&&e.ctrlKey)},ew=Fe,rw=function(t){return t.type==Pm.SINGLECLICK},nw=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ow=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},iw=function(t){var e=t.originalEvent,r=e.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!e.target.isContentEditable},aw=function(t){var e=t.originalEvent;return Mr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},sw=function(t){var e=t.originalEvent;return Mr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};function uw(t){return uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uw(t)}function lw(t){var e=function(t,e){if("object"!=uw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uw(e)?e:String(e)}function cw(t){return cw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cw(t)}function fw(t,e){return fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fw(t,e)}var hw=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=cw(e),function(t,e){if(e&&("object"===uw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],cw(t).constructor):e.apply(t,r))}(this,e,[{stopDown:Fe}])).kinetic_=t.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var n=t.condition?t.condition:Kb(nw,sw);return r.condition_=t.onFocusOnly?Kb($b,n):n,r.noKinetic_=!1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fw(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());var r=this.targetPointers,n=e.getEventPixel(Xb(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var o=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Vo(o,i.getResolution()),Wo(o,i.getRotation()),i.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),i=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(i),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(o),a[1]-n*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:Li})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Hb);const pw=hw;function yw(t){return yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(t)}function dw(t){var e=function(t,e){if("object"!=yw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yw(e)?e:String(e)}function vw(t){return vw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vw(t)}function gw(t,e){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gw(t,e)}var mw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=vw(e),function(t,e){if(e&&("object"===yw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],vw(t).constructor):e.apply(t,r))}(this,e,[{stopDown:Fe}])).condition_=t.condition?t.condition:Jb,r.lastAngle_=void 0,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gw(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){if(aw(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==Ti){var n=e.getSize(),o=t.pixel,i=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=i-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=i}}}},{key:"handleUpEvent",value:function(t){return!aw(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!(!aw(t)||!tw(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Hb);const bw=mw;function ww(t){return ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ww(t)}function _w(t){var e=function(t,e){if("object"!=ww(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ww(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ww(e)?e:String(e)}function xw(t){return xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xw(t)}function Sw(t,e){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sw(t,e)}var kw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=xw(e),function(t,e){if(e&&("object"===ww(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],xw(t).constructor):e.apply(t,void 0))}(this,e)).geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+t,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sw(t,e)}(e,t),r=e,n=[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var t=this.startPixel_,e=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+r,n.top=Math.min(t[1],e[1])+r,n.width=Math.abs(e[0]-t[0])+r,n.height=Math.abs(e[1]-t[1])+r}},{key:"setMap",value:function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new vs([r])}},{key:"getGeometry",value:function(){return this.geometry_}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_w(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ce);const Ow=kw;function Ew(t){return Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ew(t)}function Pw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cw(n.key),n)}}function jw(t,e,r){return e&&Pw(t.prototype,e),r&&Pw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cw(t){var e=function(t,e){if("object"!=Ew(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ew(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ew(e)?e:String(e)}function Aw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tw(t,e,r){return e=Rw(e),function(t,e){if(e&&("object"===Ew(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Rw(t).constructor):e.apply(t,r))}function Rw(t){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rw(t)}function Iw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lw(t,e)}function Lw(t,e){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lw(t,e)}var Mw=function(t){function e(t,r,n){var o;return Aw(this,e),(o=Tw(this,e,[t])).coordinate=r,o.mapBrowserEvent=n,o}return Iw(e,t),jw(e)}(Oe),Fw=function(t){function e(t){var r;return Aw(this,e),(r=Tw(this,e)).on,r.once,r.un,t=t||{},r.box_=new Ow(t.className||"ol-dragbox"),r.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(r.onBoxEnd=t.onBoxEnd),r.startPixel_=null,r.condition_=t.condition?t.condition:tw,r.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:r.defaultBoxEndCondition,r}return Iw(e,t),jw(e,[{key:"defaultBoxEndCondition",value:function(t,e,r){var n=r[0]-e[0],o=r[1]-e[1];return n*n+o*o>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Mw("boxdrag",t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Mw(e?"boxend":"boxcancel",t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Mw("boxstart",t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),e}(Hb);function Dw(t){return Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(t)}function Bw(t){var e=function(t,e){if("object"!=Dw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dw(e)?e:String(e)}function Nw(t){return Nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nw(t)}function zw(t,e){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zw(t,e)}var Gw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Nw(e),function(t,e){if(e&&("object"===Dw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Nw(t).constructor):e.apply(t,r))}(this,e,[{condition:(t=t||{}).condition?t.condition:ow,className:t.className||"ol-dragzoom",minArea:t.minArea}])).duration_=void 0!==t.duration?t.duration:200,r.out_=void 0!==t.out&&t.out,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zw(t,e)}(e,t),r=e,(n=[{key:"onBoxEnd",value:function(t){var e=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=e.rotatedExtentForGeometry(r),o=e.getResolutionForExtentInternal(n),i=e.getResolution()/o;(r=r.clone()).scale(i*i)}e.fitInternal(r,{duration:this.duration_,easing:Li})}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fw);const Uw=Gw,qw="ArrowLeft",Ww="ArrowRight",Vw="ArrowDown";function Yw(t){return Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yw(t)}function Zw(t){var e=function(t,e){if("object"!=Yw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yw(e)?e:String(e)}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xw(t)}function Hw(t,e){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hw(t,e)}var Kw=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=Xw(e),function(t,e){if(e&&("object"===Yw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],Xw(t).constructor):e.apply(t,void 0))}(this,e)).defaultCondition_=function(t){return nw(t)&&iw(t)},r.condition_=void 0!==t.condition?t.condition:r.defaultCondition_,r.duration_=void 0!==t.duration?t.duration:100,r.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hw(t,e)}(e,t),r=e,(n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==Je){var r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==Vw||n==qw||n==Ww||"ArrowUp"==n)){var o=t.map.getView(),i=o.getResolution()*this.pixelDelta_,a=0,s=0;n==Vw?s=-i:n==qw?a=-i:n==Ww?a=i:s=i;var u=[a,s];Wo(u,o.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var o=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Fi,center:t.getConstrainedCenter(o)})}}(o,u,this.duration_),r.preventDefault(),e=!0}}return!e}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fb);const Jw=Kw;function $w(t){return $w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(t)}function Qw(t){var e=function(t,e){if("object"!=$w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$w(e)?e:String(e)}function t_(t){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t_(t)}function e_(t,e){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e_(t,e)}var r_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=t_(e),function(t,e){if(e&&("object"===$w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],t_(t).constructor):e.apply(t,void 0))}(this,e)).condition_=t.condition?t.condition:function(t){return!function(t){var e=t.originalEvent;return Gi?e.metaKey:e.ctrlKey}(t)&&iw(t)},r.delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:100,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e_(t,e)}(e,t),r=e,n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==Je||t.type==$e){var r=t.originalEvent,n=r.key;if(this.condition_(t)&&("+"===n||"-"===n)){var o=t.map,i="+"===n?this.delta_:-this.delta_;Mb(o.getView(),i,void 0,this.duration_),r.preventDefault(),e=!0}}return!e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fb);const n_=r_;function o_(t){return o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o_(t)}function i_(t){var e=function(t,e){if("object"!=o_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=o_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o_(e)?e:String(e)}const a_=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}var e,r;return e=t,(r=[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,e){this.points_.push(t,e,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var o=this.points_[e]-this.points_[r],i=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(i,o),this.initialVelocity_=Math.sqrt(o*o+i*i)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i_(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s_(t){return s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s_(t)}function u_(t){var e=function(t,e){if("object"!=s_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=s_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s_(e)?e:String(e)}function l_(t){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l_(t)}function c_(t,e){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c_(t,e)}var f_=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=l_(e),function(t,e){if(e&&("object"===s_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],l_(t).constructor):e.apply(t,r))}(this,e,[t=t||{}])).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,r.duration_=void 0!==t.duration?t.duration:250,r.timeout_=void 0!==t.timeout?t.timeout:80,r.useAnchor_=void 0===t.useAnchor||t.useAnchor,r.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var n=t.condition?t.condition:Qb;return r.condition_=t.onFocusOnly?Kb($b,n):n,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c_(t,e)}(e,t),r=e,n=[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(t){if(!this.condition_(t))return!0;if(t.type!==tr)return!0;var e,r=t.map,n=t.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==tr&&(e=n.deltaY,Ni&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Ui),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var i=r.getView();if("trackpad"===this.mode_&&!i.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(i.getAnimating()&&i.cancelAnimations(),i.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),i.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1}},{key:"handleWheelZoom_",value:function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-Fr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Mb(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fb);const h_=f_;function p_(t){return p_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p_(t)}function y_(t){var e=function(t,e){if("object"!=p_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=p_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p_(e)?e:String(e)}function d_(t){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d_(t)}function v_(t,e){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v_(t,e)}var g_=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t=t||{};return n.stopDown||(n.stopDown=Fe),(r=function(t,e,r){return e=d_(e),function(t,e){if(e&&("object"===p_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],d_(t).constructor):e.apply(t,r))}(this,e,[n])).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==t.threshold?t.threshold:.3,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v_(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],o=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var i=o-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=i}this.lastAngle_=o;var a=t.map,s=a.getView();s.getConstraints().rotation!==Ti&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Xb(this.targetPointers))),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_)))}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Hb);const m_=g_;function b_(t){return b_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b_(t)}function w_(t){var e=function(t,e){if("object"!=b_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=b_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b_(e)?e:String(e)}function __(t){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},__(t)}function x_(t,e){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x_(t,e)}var S_=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t=t||{};return n.stopDown||(n.stopDown=Fe),(r=function(t,e,r){return e=__(e),function(t,e){if(e&&("object"===b_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],__(t).constructor):e.apply(t,r))}(this,e,[n])).anchor_=null,r.duration_=void 0!==t.duration?t.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],o=r.clientX-n.clientX,i=r.clientY-n.clientY,a=Math.sqrt(o*o+i*i);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Xb(this.targetPointers))),s.render(),u.adjustResolutionInternal(e,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Hb);const k_=S_;function O_(t){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O_(t)}function E_(t){var e=function(t,e){if("object"!=O_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=O_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O_(e)?e:String(e)}function P_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j_(){return j_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},j_.apply(this,arguments)}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C_(t)}function A_(t,e){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A_(t,e)}function T_(t){t instanceof Ls?t.setMapInternal(null):t instanceof uo&&t.getLayers().forEach(T_)}function R_(t,e){if(t instanceof Ls)t.setMapInternal(e);else if(t instanceof uo)for(var r=t.getLayers().getArray(),n=0,o=r.length;n<o;++n)R_(r[n],e)}var I_=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=function(t,e,r){return e=C_(e),function(t,e){if(e&&("object"===O_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return P_(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],C_(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un;var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,o,i={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new uo({layers:t.layers});return i[zm]=a,i[Um]=t.target,i[qm]=t.view instanceof Es?t.view:new Es,void 0!==t.controls&&(Array.isArray(t.controls)?r=new pn(t.controls.slice()):(Mr("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new pn(t.interactions.slice()):(Mr("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new pn(t.overlays.slice()):(Mr("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new pn,{controls:r,interactions:n,keyboardEventTarget:e,overlays:o,values:i}}(t);r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(P_(r)),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Ui,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=r.animationDelay_.bind(P_(r)),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=t.moveTolerance,r.keyboardEventTarget_=n.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.targetElement_=null,r.resizeObserver_=new ResizeObserver((function(){return r.updateSize()})),r.controls=n.controls||jb(),r.interactions=n.interactions||function(t){t=t||{};var e=new pn,r=new a_(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new bw),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Ub({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new pw({onFocusOnly:t.onFocusOnly,kinetic:r})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new m_),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new k_({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Jw),e.push(new n_({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new h_({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Uw({duration:t.zoomDuration})),e}({onFocusOnly:!0}),r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new Qm(r.getTilePriority.bind(P_(r)),r.handleTileChange_.bind(P_(r))),r.addChangeListener(zm,r.handleLayerGroupChanged_),r.addChangeListener(qm,r.handleViewChanged_),r.addChangeListener(Gm,r.handleSizeChanged_),r.addChangeListener(Um,r.handleTargetChanged_),r.setProperties(n.values);var o=P_(r);return!t.view||t.view instanceof Es||t.view.then((function(t){o.setView(new Es(t))})),r.controls.addEventListener($r,(function(t){t.element.setMap(P_(r))})),r.controls.addEventListener(Qr,(function(t){t.element.setMap(null)})),r.interactions.addEventListener($r,(function(t){t.element.setMap(P_(r))})),r.interactions.addEventListener(Qr,(function(t){t.element.setMap(null)})),r.overlays_.addEventListener($r,(function(t){r.addOverlayInternal_(t.element)})),r.overlays_.addEventListener(Qr,(function(t){var e=t.element.getId();void 0!==e&&delete r.overlayIdIndex_[e.toString()],t.element.setMap(null)})),r.controls.forEach((function(t){t.setMap(P_(r))})),r.interactions.forEach((function(t){t.setMap(P_(r))})),r.overlays_.forEach(r.addOverlayInternal_.bind(P_(r))),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A_(t,e)}(e,t),r=e,n=[{key:"addControl",value:function(t){this.getControls().push(t)}},{key:"addInteraction",value:function(t){this.getInteractions().push(t)}},{key:"addLayer",value:function(t){this.getLayerGroup().getLayers().push(t)}},{key:"handleLayerAdd_",value:function(t){R_(t.layer,this)}},{key:"addOverlay",value:function(t){this.getOverlays().push(t)}},{key:"addOverlayInternal_",value:function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),j_(C_(e.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(t,e,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,i=void 0!==r.layerFilter?r.layerFilter:Me,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,o,a,e,null,i,null)}}},{key:"getFeaturesAtPixel",value:function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r}},{key:"getAllLayers",value:function(){var t=[];return function e(r){r.forEach((function(r){r instanceof uo?e(r.getLayers()):t.push(r)}))}(this.getLayers()),t}},{key:"hasFeatureAtPixel",value:function(t,e){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Me,o=void 0!==e.hitTolerance?e.hitTolerance:0,i=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,i,n,null)}},{key:"getEventCoordinate",value:function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}},{key:"getEventCoordinateInternal",value:function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}},{key:"getEventPixel",value:function(t){var e=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=e.width/r[0],o=e.height/r[1],i="changedTouches"in t?t.changedTouches[0]:t;return[(i.clientX-e.left)/n,(i.clientY-e.top)/o]}},{key:"getTarget",value:function(){return this.get(Um)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(t){return _i(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(t){var e=this.frameState_;return e?Ki(e.pixelToCoordinateTransform,t.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(zm)}},{key:"setLayers",value:function(t){var e=this.getLayerGroup();if(t instanceof pn)e.setLayers(t);else{var r=e.getLayers();r.clear(),r.extend(t)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e];if(n.visible){var o=n.layer.getRenderer();if(o&&!o.ready)return!0;var i=n.layer.getSource();if(i&&i.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(t){var e=xi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}},{key:"getPixelFromCoordinateInternal",value:function(t){var e=this.frameState_;return e?Ki(e.coordinateToPixelTransform,t.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(Gm)}},{key:"getView",value:function(){return this.get(qm)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var t=this.getTargetElement();return t?t.ownerDocument:document}},{key:"getTilePriority",value:function(t,e,r,n){return function(t,e,r,n,o){if(!t||!(r in t.wantedTiles))return Ym;if(!t.wantedTiles[r][e.getKey()])return Ym;var i=t.viewState.center,a=n[0]-i[0],s=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+s*s)/o}(this.frameState_,t,e,r,n)}},{key:"handleBrowserEvent",value:function(t,e){e=e||t.type;var r=new Em(e,this,t);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(t){if(this.frameState_){var e=t.originalEvent,r=e.type;if(r===jm||r===tr||r===Je){var n=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():n,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(o===n?n.documentElement:o).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var u=a[s];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(t)||t.propagationStopped))break}}}},{key:"handlePostRender",value:function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var o=t.viewHints;if(o[0]||o[1]){var i=Date.now()-t.time>8;r=i?0:8,n=i?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(ho)&&this.renderer_.dispatchRenderEvent(ho,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new bm(Nm,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new bm(Bm,this,t))));for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)nr(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(He,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(tr,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ju(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);var r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}var n=this.getTarget(),o="string"==typeof n?document.getElementById(n):n;if(this.targetElement_=o,o){for(var i in o.appendChild(this.viewport_),this.renderer_||(this.renderer_=new ym(this)),this.mapBrowserEventHandler_=new Fm(this,this.moveTolerance_),Pm)this.mapBrowserEventHandler_.addEventListener(Pm[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(He,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(tr,this.boundHandleBrowserEvent_,!!Vi&&{passive:!1});var a=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[er(a,Je,this.handleBrowserEvent,this),er(a,$e,this.handleBrowserEvent,this)];var s=o.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(o)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&(nr(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(nr(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=er(t,Ee,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=er(t,Xe,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(nr),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new io("addlayer",t)),this.layerGroupPropertyListenerKeys_=[er(t,Ee,this.render,this),er(t,Xe,this.render,this),er(t,"addlayer",this.handleLayerAdd_,this),er(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"flushDeclutterItems",value:function(){var t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}},{key:"removeControl",value:function(t){return this.getControls().remove(t)}},{key:"removeInteraction",value:function(t){return this.getInteractions().remove(t)}},{key:"removeLayer",value:function(t){return this.getLayerGroup().getLayers().remove(t)}},{key:"handleLayerRemove_",value:function(t){T_(t.layer)}},{key:"removeOverlay",value:function(t){return this.getOverlays().remove(t)}},{key:"renderFrame_",value:function(t){var e=this,r=this.getSize(),n=this.getView(),o=this.frameState_,i=null;if(void 0!==r&&Ol(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Nn(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:pr(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var u=isNaN(s.nextRotation)?s.rotation:s.nextRotation;i.nextExtent=Nn(s.nextCenter,s.nextResolution,u,r)}}this.frameState_=i,this.renderer_.renderFrame(i),i&&(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),o&&(!this.previousExtent_||!Zn(this.previousExtent_)&&!jn(i.extent,this.previousExtent_))&&(this.dispatchEvent(new bm("movestart",this,o)),this.previousExtent_=On(this.previousExtent_)),this.previousExtent_&&!i.viewHints[0]&&!i.viewHints[1]&&!jn(i.extent,this.previousExtent_)&&(this.dispatchEvent(new bm("moveend",this,i)),mn(i.extent,this.previousExtent_))),this.dispatchEvent(new bm(Dm,this,i)),this.renderComplete_=this.hasListener(Bm)||this.hasListener(Nm)||this.hasListener(ho)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))}},{key:"setLayerGroup",value:function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new io("removelayer",e)),this.set(zm,t)}},{key:"setSize",value:function(t){this.set(Gm,t)}},{key:"setTarget",value:function(t){this.set(Um,t)}},{key:"setView",value:function(t){if(!t||t instanceof Es)this.set(qm,t);else{this.set(qm,new Es);var e=this;t.then((function(t){e.setView(new Es(t))}))}}},{key:"updateSize",value:function(){var t=this.getTargetElement(),e=void 0;if(t){var r=getComputedStyle(t),n=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(o)||!Ol(e=[n,o])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Qo("No map visible because the map container's width or height are 0.")}var i=this.getSize();!e||i&&Le(e,i)||(this.setSize(e),this.updateViewportSize_(e))}},{key:"updateViewportSize_",value:function(t){var e=this.getView();e&&e.setViewportSize(t)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const L_=I_;function M_(t){return M_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M_(t)}function F_(t){var e=function(t,e){if("object"!=M_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=M_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M_(e)?e:String(e)}function D_(t){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D_(t)}function B_(t,e){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B_(t,e)}const N_=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=function(t,e,r){return e=D_(e),function(t,e){if(e&&("object"===M_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],D_(t).constructor):e.apply(t,r))}(this,e,[t,r,n,void 0!==i?0:2])).loader_=void 0!==i?i:null,a.canvas_=o,a.error_=null,a}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B_(t,e)}(e,t),r=e,(n=[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=3):this.state=2,this.changed()}},{key:"load",value:function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ku);function z_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function G_(t){return Array.isArray(t)?Math.min.apply(Math,function(t){if(Array.isArray(t))return z_(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return z_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z_(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t;var e}function U_(t){return U_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U_(t)}function q_(t){var e=function(t,e){if("object"!=U_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=U_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U_(e)?e:String(e)}function W_(){return W_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},W_.apply(this,arguments)}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V_(t)}function Y_(t,e){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y_(t,e)}var Z_=function(t){function e(t,r,n,o,i,a,s){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=t.getExtent();l&&t.canWrapX()&&((l=l.slice())[0]=-1/0,l[2]=1/0);var c=r.getExtent();c&&r.canWrapX()&&((c=c.slice())[0]=-1/0,c[2]=1/0);var f=c?Un(n,c):n,h=cl(t,r,Dn(f),o),p=new il(t,r,f,l,.5*h,o),y=p.calculateSourceExtent(),d=Zn(y)?null:a(y,h,i),v=d?0:4,g=d?d.getPixelRatio():1;return(u=function(t,e,r){return e=V_(e),function(t,e){if(e&&("object"===U_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],V_(t).constructor):e.apply(t,r))}(this,e,[n,o,g,v])).targetProj_=r,u.maxSourceExtent_=l,u.triangulation_=p,u.targetResolution_=o,u.targetExtent_=n,u.sourceImage_=d,u.sourcePixelRatio_=g,u.interpolate_=s,u.canvas_=null,u.sourceListenerKey_=null,u}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}(e,t),r=e,(n=[{key:"disposeInternal",value:function(){1==this.state&&this.unlistenSource_(),W_(V_(e.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var t=this.sourceImage_.getState();if(2==t){var e=Vn(this.targetExtent_)/this.targetResolution_,r=Gn(this.targetExtent_)/this.targetResolution_;this.canvas_=fl(e,r,this.sourcePixelRatio_,G_(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}},{key:"load",value:function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=er(this.sourceImage_,Xe,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){nr(this.sourceListenerKey_),this.sourceListenerKey_=null}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ku);const X_=Z_;function H_(t){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H_(t)}function K_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$_(n.key),n)}}function J_(t,e,r){return e&&K_(t.prototype,e),r&&K_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $_(t){var e=function(t,e){if("object"!=H_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=H_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==H_(e)?e:String(e)}function Q_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tx(t,e,r){return e=ex(e),function(t,e){if(e&&("object"===H_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],ex(t).constructor):e.apply(t,r))}function ex(t){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ex(t)}function rx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nx(t,e)}function nx(t,e){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nx(t,e)}var ox=function(t){function e(t,r){var n;return Q_(this,e),(n=tx(this,e,[t])).image=r,n}return rx(e,t),J_(e)}(Oe),ix=function(t){function e(t){var r;return Q_(this,e),(r=tx(this,e,[{attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}])).on,r.once,r.un,r.loader=t.loader||null,r.resolutions_=void 0!==t.resolutions?t.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r.image=null,r.wantedExtent_,r.wantedResolution_,r.static_=!!t.loader&&0===t.loader.length,r.wantedProjection_=null,r}return rx(e,t),J_(e,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(t){this.resolutions_=t}},{key:"findNearestResolution",value:function(t){var e=this.getResolutions();return e&&(t=e[Te(e,t,0)]),t}},{key:"getImage",value:function(t,e,r,n){var o=this,i=this.getProjection();if(!i||!n||fi(i,n))return i&&(n=i),this.getImageInternal(t,e,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&fi(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&jn(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new X_(i,n,t,e,r,(function(t,e,r){return o.getImageInternal(t,e,r,i)}),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(t,e,r,n){if(this.loader){var o=function(t,e,r,n){var o=e/r,i=Dn(t),a=Wr(Vn(t)/o,4),s=Wr(Gn(t)/o,4);return Nn(i,o,0,[a+2*Wr(0*a/2,4),s+2*Wr(0*s/2,4)])}(t,e,r),i=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&_n(this.wantedExtent_,o)||_n(this.image.getExtent(),o))&&(this.wantedResolution_&&G_(this.wantedResolution_)===i||G_(this.image.getResolution())===i)))return this.image;this.wantedProjection_=n,this.wantedExtent_=o,this.wantedResolution_=i,this.image=new Ku(o,i,r,this.loader),this.image.addEventListener(Xe,this.handleImageChange.bind(this))}return this.image}},{key:"handleImageChange",value:function(t){var e,r=t.target;switch(r.getState()){case 1:this.loading=!0,e="imageloadstart";break;case 2:this.loading=!1,e="imageloadend";break;case 3:this.loading=!1,e="imageloaderror";break;default:return}this.hasListener(e)&&this.dispatchEvent(new ox(e,r))}}]),e}(pd);const ax=ix;function sx(t){return sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(t)}function ux(){return ux="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ux.apply(this,arguments)}function lx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hx(n.key),n)}}function fx(t,e,r){return e&&cx(t.prototype,e),r&&cx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hx(t){var e=function(t,e){if("object"!=sx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sx(e)?e:String(e)}function px(t,e,r){return e=yx(e),function(t,e){if(e&&("object"===sx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dx(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],yx(t).constructor):e.apply(t,r))}function yx(t){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yx(t)}function dx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gx(t,e)}function gx(t,e){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gx(t,e)}var mx,bx=!0;try{new ImageData(10,10)}catch(t){bx=!1}function wx(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n=e.buffers,o=e.meta,i=e.imageOps,a=e.width,s=e.height,u=n.length,l=n[0].byteLength;if(i){for(var c=new Array(u),f=0;f<u;++f)c[f]=r(new Uint8ClampedArray(n[f]),a,s);return t(c,o).data.buffer}for(var h=new Uint8ClampedArray(l),p=new Array(u),y=new Array(u),d=0;d<u;++d)p[d]=new Uint8ClampedArray(n[d]),y[d]=[0,0,0,0];for(var v=0;v<l;v+=4){for(var g=0;g<u;++g){var m=p[g];y[g][0]=m[v],y[g][1]=m[v+1],y[g][2]=m[v+2],y[g][3]=m[v+3]}var b=t(y,o);h[v]=b[0],h[v+1]=b[1],h[v+2]=b[2],h[v+3]=b[3]}return h.buffer}}function _x(t,e){var r=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+wx.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(r.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",e),n}var xx=function(t){function e(t){var r,n;lx(this,e),(r=px(this,e))._imageOps=!!t.imageOps,n=0===t.threads?0:r._imageOps?1:t.threads||1;var o=new Array(n);if(n)for(var i=0;i<n;++i)o[i]=_x(t,r._onWorkerMessage.bind(dx(r),i));else o[0]=function(t,e){var r=wx(t.operation),n=!1;return{postMessage:function(t){setTimeout((function(){n||e({data:{buffer:r(t),meta:t.meta}})}),0)},terminate:function(){n=!0}}}(t,r._onWorkerMessage.bind(dx(r),0));return r._workers=o,r._queue=[],r._maxQueueLength=t.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return vx(e,t),fx(e,[{key:"process",value:function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),o=this._workers.length;if(this._running=o,1!==o)for(var i=t.inputs[0].data.length,a=4*Math.ceil(i/4/o),s=0;s<o;++s){for(var u=s*a,l=[],c=0,f=n.length;c<f;++c)l.push(n[c].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}else this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n)}}},{key:"_onWorkerMessage",value:function(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var t,e,r=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(n);for(var i=4*Math.ceil(o/4/n),a=0;a<n;++a){var s=this._dataLookup[a].buffer,u=a*i;t.set(new Uint8ClampedArray(s),u),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},r.callback(null,function(t,e,r){if(bx)return new ImageData(t,e,r);mx||(mx=document.createElement("canvas").getContext("2d"));var n=mx.createImageData(e,r);return n.data.set(t),n}(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()}},{key:"disposeInternal",value:function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0}}]),e}(Ce),Sx=function(t){function e(t,r,n){var o;return lx(this,e),(o=px(this,e,[t])).extent=r.extent,o.resolution=r.viewState.resolution/r.pixelRatio,o.data=n,o}return vx(e,t),fx(e)}(Oe),kx=function(t){function e(t){var r;lx(this,e),(r=px(this,e,[{projection:null}])).on,r.once,r.un,r.processor_=null,r.operationType_=void 0!==t.operationType?t.operationType:"pixel",r.threads_=void 0!==t.threads?t.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=(i=void 0,(o=t[n])instanceof pd?o instanceof Md?i=new Nl({source:o}):o instanceof ax&&(i=new Wg({source:o})):i=o,i);var o,i;return r}(t.sources);for(var n,o=r.changed.bind(dx(r)),i=0,a=r.layers_.length;i<a;++i)r.layers_[i].addEventListener(Xe,o);return r.useResolutions_=null!==t.resolutions,r.tileQueue_=new Qm((function(){return 1}),r.processSources_.bind(dx(r))),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:pr(dx(r)),renderTargets:{}},r.setAttributions((function(e){for(var r=[],n=0,o=t.sources.length;n<o;++n){var i=t.sources[n],a=i instanceof pd?i:i.getSource();if(a){var s=a.getAttributions();if("function"==typeof s){var u=s(e);r.push.apply(r,u)}}}return 0!==r.length?r:null})),void 0!==t.operation&&r.setOperation(t.operation,t.lib),r}return vx(e,t),fx(e,[{key:"setOperation",value:function(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new xx({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(t,e,r){var n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);var o=Dn(t);n.size[0]=Math.ceil(Vn(t)/e),n.size[1]=Math.ceil(Gn(t)/e),n.extent=[o[0]-n.size[0]*e/2,o[1]-n.size[1]*e/2,o[0]+n.size[0]*e/2,o[1]+n.size[1]*e/2],n.time=Date.now();var i=n.viewState;return i.center=o,i.projection=r,i.resolution=e,n}},{key:"allSourcesReady_",value:function(){for(var t,e=!0,r=0,n=this.layers_.length;r<n;++r)if(!(t=this.layers_[r].getSource())||"ready"!==t.getState()){e=!1;break}return e}},{key:"getImage",value:function(t,e,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e);var o=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=o,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===i&&jn(o.extent,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n,t.renderTargets={};var o=Ex(this.layers_[n],t);if(!o)return;r[n]=o}var i={};this.dispatchEvent(new Sx("beforeoperations",t,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,t))}},{key:"onWorkerComplete_",value:function(t,e,r,n){if(!e&&r){var o,i=t.extent,a=t.viewState.resolution;a===this.requestedFrameState_.viewState.resolution&&jn(i,this.requestedFrameState_.extent)&&(this.renderedImageCanvas_?o=this.renderedImageCanvas_.getImage().getContext("2d"):(o=Su(Math.round(Vn(i)/a),Math.round(Gn(i)/a)),this.renderedImageCanvas_=new N_(i,a,1,o.canvas)),o.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Sx("afteroperations",t,n)))}}},{key:"getResolutions",value:function(t){if(!this.useResolutions_)return null;var r=ux(yx(e.prototype),"getResolutions",this).call(this);if(!r)for(var n=0,o=this.layers_.length;n<o&&!(r=this.layers_[n].getSource().getResolutions(t));++n);return r}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),ux(yx(e.prototype),"disposeInternal",this).call(this)}}]),e}(ax);kx.prototype.dispose;var Ox=null;function Ex(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n=e.size[0],o=e.size[1];if(0===n||0===o)return null;var i,a=r.renderFrame(e,null);if(a instanceof HTMLCanvasElement)i=a;else{if(a&&(i=a.firstElementChild),!(i instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+i);if(i.width===n&&i.height===o)return i.getContext("2d").getImageData(0,0,n,o)}if(Ox){var s=Ox.canvas;s.width!==n||s.height!==o?Ox=Su(n,o,void 0,{willReadFrequently:!0}):Ox.clearRect(0,0,n,o)}else Ox=Su(n,o,void 0,{willReadFrequently:!0});return Ox.drawImage(i,0,0,n,o),Ox.getImageData(0,0,n,o)}const Px=kx;function jx(t){return jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(t)}function Cx(t){var e=function(t,e){if("object"!=jx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jx(e)?e:String(e)}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ax(t)}function Tx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rx(t,e){return Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rx(t,e)}var Ix=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=Ax(e),function(t,e){if(e&&("object"===jx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tx(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],Ax(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:ii("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}])).tileJSON_=null,r.tileSize_=t.tileSize,t.url)if(t.jsonp)!function(t,e,r,n){var o=document.createElement("script"),i="olc_"+pr(e);function a(){delete window[i],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(t.includes("?")?"&":"?")+"callback="+i;var s=setTimeout((function(){a(),r&&r()}),1e4);window[i]=function(t){clearTimeout(s),a(),e(t)},document.head.appendChild(o)}(t.url,r.handleTileJSONResponse.bind(Tx(r)),r.handleTileJSONError.bind(Tx(r)));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(Tx(r))),n.addEventListener("error",r.onXHRError_.bind(Tx(r))),n.open("GET",t.url),n.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");r.handleTileJSONResponse(t.tileJSON)}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rx(t,e)}(e,t),r=e,n=[{key:"onXHRLoad_",value:function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(t){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(t){var e,r=ii("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var o=hi(r,n);e=Xn(t.bounds,o)}var i=xd(n),a=t.minzoom||0,s=wd({extent:i,maxZoom:t.maxzoom||22,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=Dd(t.tiles,s),t.attribution&&!this.getAttributions()){var u=void 0!==e?e:i;this.setAttributions((function(e){return Yn(u,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cx(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($d);const Lx=Ix;function Mx(t){return Mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(t)}function Fx(t){var e=function(t,e){if("object"!=Mx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mx(e)?e:String(e)}var Dx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rbush_=new zl(e),this.items_={}}var e,r;return e=t,r=[{key:"insert",value:function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[pr(e)]=r}},{key:"load",value:function(t,e){for(var r=new Array(e.length),n=0,o=e.length;n<o;n++){var i=t[n],a=e[n],s={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],value:a};r[n]=s,this.items_[pr(a)]=s}this.rbush_.load(r)}},{key:"remove",value:function(t){var e=pr(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)}},{key:"update",value:function(t,e){var r=this.items_[pr(e)];jn([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))}},{key:"getAll",value:function(){return this.rbush_.all().map((function(t){return t.value}))}},{key:"getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}},{key:"forEach",value:function(t){return this.forEach_(this.getAll(),t)}},{key:"forEachInExtent",value:function(t,e){return this.forEach_(this.getInExtent(t),e)}},{key:"forEach_",value:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}},{key:"isEmpty",value:function(){return Ge(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(t){var e=this.rbush_.toJSON();return kn(e.minX,e.minY,e.maxX,e.maxY,t)}},{key:"concat",value:function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fx(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Bx=Dx,Nx="addfeature",zx="removefeature";function Gx(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Ux(t,e){return[t]}var qx=!1;function Wx(t,e,r,n,o,i,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,n,o):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.withCredentials=qx,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var n,u=e.getType();"json"==u?n=JSON.parse(s.responseText):"text"==u?n=s.responseText:"xml"==u?(n=s.responseXML)||(n=(new DOMParser).parseFromString(s.responseText,"application/xml")):"arraybuffer"==u&&(n=s.response),n?i(e.readFeatures(n,{extent:r,featureProjection:o}),e.readProjection(n)):a()}else a()},s.onerror=a,s.send()}function Vx(t,e){return function(r,n,o,i,a){var s=this;Wx(t,e,r,n,o,(function(t,e){s.addFeatures(t),void 0!==i&&i(t)}),a||De)}}function Yx(t){return Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(t)}function Zx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xx(){return Xx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Xx.apply(this,arguments)}function Hx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jx(n.key),n)}}function Kx(t,e,r){return e&&Hx(t.prototype,e),r&&Hx(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jx(t){var e=function(t,e){if("object"!=Yx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yx(e)?e:String(e)}function $x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qx(t,e,r){return e=tS(e),function(t,e){if(e&&("object"===Yx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],tS(t).constructor):e.apply(t,r))}function tS(t){return tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tS(t)}function eS(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rS(t,e)}function rS(t,e){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rS(t,e)}var nS=function(t){function e(t,r,n){var o;return $x(this,e),(o=Qx(this,e,[t])).feature=r,o.features=n,o}return eS(e,t),Kx(e)}(Oe),oS=function(t){function e(t){var r;$x(this,e),(r=Qx(this,e,[{attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}])).on,r.once,r.un,r.loader_=De,r.format_=t.format,r.overlaps_=void 0===t.overlaps||t.overlaps,r.url_=t.url,void 0!==t.loader?r.loader_=t.loader:void 0!==r.url_&&(Mr(r.format_,"`format` must be set when `url` is set"),r.loader_=Vx(r.url_,r.format_)),r.strategy_=void 0!==t.strategy?t.strategy:Gx;var n,o,i=void 0===t.useSpatialIndex||t.useSpatialIndex;return r.featuresRtree_=i?new Bx:null,r.loadedExtentsRtree_=new Bx,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(t.features)?o=t.features:t.features&&(o=(n=t.features).getArray()),i||void 0!==n||(n=new pn(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==n&&r.bindFeaturesCollection_(n),r}return eS(e,t),Kx(e,[{key:"addFeature",value:function(t){this.addFeatureInternal(t),this.changed()}},{key:"addFeatureInternal",value:function(t){var e=pr(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new nS(Nx,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)}},{key:"setupChangeEvents_",value:function(t,e){e instanceof hv||(this.featureChangeKeys_[t]=[er(e,Xe,this.handleFeatureChange_,this),er(e,Ee,this.handleFeatureChange_,this)])}},{key:"addToIndex_",value:function(t,e){var r=!0;if(void 0!==e.getId()){var n=String(e.getId());if(n in this.idIndex_)if(e instanceof hv){var o=this.idIndex_[n];o instanceof hv?Array.isArray(o)?o.push(e):this.idIndex_[n]=[o,e]:r=!1}else r=!1;else this.idIndex_[n]=e}return r&&(Mr(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),r}},{key:"addFeatures",value:function(t){this.addFeaturesInternal(t),this.changed()}},{key:"addFeaturesInternal",value:function(t){for(var e=[],r=[],n=[],o=0,i=t.length;o<i;o++){var a=t[o],s=pr(a);this.addToIndex_(s,a)&&r.push(a)}for(var u=0,l=r.length;u<l;u++){var c=r[u],f=pr(c);this.setupChangeEvents_(f,c);var h=c.getGeometry();if(h){var p=h.getExtent();e.push(p),n.push(c)}else this.nullGeometryFeatures_[f]=c}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(Nx))for(var y=0,d=r.length;y<d;y++)this.dispatchEvent(new nS(Nx,r[y]))}},{key:"bindFeaturesCollection_",value:function(t){var e=this,r=!1;this.addEventListener(Nx,(function(e){r||(r=!0,t.push(e.feature),r=!1)})),this.addEventListener(zx,(function(e){r||(r=!0,t.remove(e.feature),r=!1)})),t.addEventListener($r,(function(t){r||(r=!0,e.addFeature(t.element),r=!1)})),t.addEventListener(Qr,(function(t){r||(r=!0,e.removeFeature(t.element),r=!1)})),this.featuresCollection_=t}},{key:"clear",value:function(t){var e=this;if(t){for(var r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(nr);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach((function(t){e.removeFeatureInternal(t)})),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var o=new nS("clear");this.dispatchEvent(o),this.changed()}},{key:"forEachFeature",value:function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureAtCoordinateDirect",value:function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){var n=r.getGeometry();if(n instanceof hv||n.intersectsCoordinate(t))return e(r)}))}},{key:"forEachFeatureInExtent",value:function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureIntersectingExtent",value:function(t,e){return this.forEachFeatureInExtent(t,(function(r){var n=r.getGeometry();if(n instanceof hv||n.intersectsExtent(t)){var o=e(r);if(o)return o}}))}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Ge(this.nullGeometryFeatures_)||Ie(t,Object.values(this.nullGeometryFeatures_))),t}},{key:"getFeaturesAtCoordinate",value:function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}},{key:"getFeaturesInExtent",value:function(t,e){var r,n=this;if(this.featuresRtree_){var o;if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);var i=function(t,e){if(e.canWrapX()){var r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];Hn(t,e);var n=Vn(r);if(Vn(t)>n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+n,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-n,t[3]]]}return[t]}(t,e);return(o=[]).concat.apply(o,function(t){if(Array.isArray(t))return Zx(t)}(r=i.map((function(t){return n.featuresRtree_.getInExtent(t)})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return Zx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zx(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(t,e){var r=t[0],n=t[1],o=null,i=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return e=e||Me,this.featuresRtree_.forEachInExtent(s,(function(t){if(e(t)){var u=t.getGeometry(),l=a;if((a=u instanceof hv?0:u.closestPointXY(r,n,i,a))<l){o=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),o}},{key:"getExtent",value:function(t){return this.featuresRtree_.getExtent(t)}},{key:"getFeatureById",value:function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null}},{key:"getFeatureByUid",value:function(t){var e=this.uidIndex_[t];return void 0!==e?e:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(t){var e=t.target,r=pr(e),n=e.getGeometry();if(n){var o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var i=e.getId();if(void 0!==i){var a=i.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new nS("changefeature",e))}},{key:"hasFeature",value:function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:pr(t)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ge(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(t,e,r){for(var n=this,o=this.loadedExtentsRtree_,i=this.strategy_(t,e,r),a=function(){var t=i[s];o.forEachInExtent(t,(function(e){return _n(e.extent,t)}))||(++n.loadingExtentsCount_,n.dispatchEvent(new nS("featuresloadstart")),n.loader_.call(n,t,e,r,(function(t){--n.loadingExtentsCount_,n.dispatchEvent(new nS("featuresloadend",void 0,t))}),(function(){--n.loadingExtentsCount_,n.dispatchEvent(new nS("featuresloaderror"))})),o.insert(t,{extent:t.slice()}))},s=0,u=i.length;s<u;++s)a();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),Xx(tS(e.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(jn(r.extent,t))return e=r,!0})),e&&r.remove(e)}},{key:"removeFeature",value:function(t){if(t){var e=pr(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}}},{key:"removeFeatureInternal",value:function(t){var e=pr(t),r=this.featureChangeKeys_[e];if(r){r.forEach(nr),delete this.featureChangeKeys_[e];var n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new nS(zx,t)),t}}},{key:"removeFromIdIndex_",value:function(t){var e=!1;for(var r in this.idIndex_){var n=this.idIndex_[r];if(t instanceof hv&&Array.isArray(n)&&n.includes(t))n.splice(n.indexOf(t),1);else if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}}return e}},{key:"setLoader",value:function(t){this.loader_=t}},{key:"setUrl",value:function(t){Mr(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Vx(t,this.format_))}}]),e}(pd);const iS=oS;function aS(t){return aS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aS(t)}function sS(t){var e=function(t,e){if("object"!=aS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=aS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aS(e)?e:String(e)}function uS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lS(){return lS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},lS.apply(this,arguments)}function cS(t){return cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cS(t)}function fS(t,e){return fS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fS(t,e)}var hS=[],pS=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=cS(e),function(t,e){if(e&&("object"===aS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uS(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],cS(t).constructor):e.apply(t,r))}(this,e,[t,r,{transition:0}])).context_={},i.executorGroups={},i.declutterExecutorGroups={},i.loadingSourceTiles=0,i.hitDetectionImageData={},i.replayState_={},i.sourceTiles=[],i.errorTileKeys={},i.wantedResolution,i.getSourceTiles=o.bind(void 0,uS(i)),i.wrappedTileCoord=n,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fS(t,e)}(e,t),r=e,n=[{key:"getContext",value:function(t){var e=pr(t);return e in this.context_||(this.context_[e]=Su(1,1,hS)),this.context_[e]}},{key:"hasContext",value:function(t){return pr(t)in this.context_}},{key:"getImage",value:function(t){return this.hasContext(t)?this.getContext(t).canvas:null}},{key:"getReplayState",value:function(t){var e=pr(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var t in this.context_){var r=this.context_[t];ku(r),hS.push(r.canvas),delete this.context_[t]}lS(cS(e.prototype),"release",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vu);const yS=pS;function dS(t){return dS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dS(t)}function vS(t){var e=function(t,e){if("object"!=dS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dS(e)?e:String(e)}function gS(){return gS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},gS.apply(this,arguments)}function mS(t){return mS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mS(t)}function bS(t,e){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bS(t,e)}var wS=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.projection||"EPSG:3857",o=t.extent||xd(n),i=t.tileGrid||wd({extent:o,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});return(r=function(t,e,r){return e=mS(e),function(t,e){if(e&&("object"===dS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],mS(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:n,state:t.state,tileGrid:i,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:xS,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}])).format_=t.format?t.format:null,r.sourceTileCache=new id(r.tileCache.highWaterMark),r.overlaps_=null==t.overlaps||t.overlaps,r.tileClass=t.tileClass?t.tileClass:mv,r.tileGrids_={},r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bS(t,e)}(e,t),r=e,(n=[{key:"getFeaturesInExtent",value:function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=Qy(r.peekFirstKey())[0],o=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===Nu.LOADED)for(var i=r.getSourceTiles(),a=0,s=i.length;a<s;++a){var u=i[a],l=u.tileCoord;if(Yn(t,o.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var f=0,h=c.length;f<h;++f){var p=c[f],y=p.getGeometry();Yn(t,y.getExtent())&&e.push(p)}}}})),e}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(t,r){var n=this.getTileCacheForProjection(t),o=Object.keys(r).reduce((function(t,e){var r,o,i=Jy((o=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{for(i=(r=r.call(t)).next;!(u=(n=i.call(r)).done)&&(s.push(n.value),3!==s.length);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t)||function(t,e){if(t){if("string"==typeof t)return Hy(t,3);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hy(t,3):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((r=e).substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number)))[0],o[1],o[2]),a=n.peek(i);if(a)for(var s=a.sourceTiles,u=0,l=s.length;u<l;++u)t[s[u].getKey()]=!0;return t}),{});gS(mS(e.prototype),"expireCache",this).call(this,t,r),this.sourceTileCache.expireCache(o)}},{key:"getSourceTiles",value:function(t,e,r){var n=this;if(r.getState()===Nu.IDLE){r.setState(Nu.LOADING);var o=r.wrappedTileCoord,i=this.getTileGridForProjection(e),a=i.getTileCoordExtent(o),s=o[0],u=i.getResolution(s);gn(a,-u,a);var l=this.tileGrid,c=l.getExtent();c&&Un(a,c,a);var f=l.getZForResolution(u,this.zDirection);l.forEachTileCoord(a,f,(function(o){var i=n.tileUrlFunction(o,t,e),a=n.sourceTileCache.containsKey(i)?n.sourceTileCache.get(i):new n.tileClass(o,i?Nu.IDLE:Nu.EMPTY,i,n.format_,n.tileLoadFunction);r.sourceTiles.push(a);var s=a.getState();s<Nu.LOADED&&(a.addEventListener(Xe,(function t(e){n.handleTileChange(e);var o=a.getState();if(o===Nu.LOADED||o===Nu.ERROR){var i=a.getKey();i in r.errorTileKeys?a.getState()===Nu.LOADED&&delete r.errorTileKeys[i]:r.loadingSourceTiles--,o===Nu.ERROR?r.errorTileKeys[i]=!0:a.removeEventListener(Xe,t),0===r.loadingSourceTiles&&r.setState(Ge(r.errorTileKeys)?Nu.LOADED:Nu.ERROR)}})),r.loadingSourceTiles++),s===Nu.IDLE&&(a.extent=l.getTileCoordExtent(o),a.projection=e,a.resolution=l.getResolution(o[0]),n.sourceTileCache.set(i,a),a.load())})),r.loadingSourceTiles||r.setState(r.sourceTiles.some((function(t){return t.getState()===Nu.ERROR}))?Nu.ERROR:Nu.LOADED)}return r.sourceTiles}},{key:"getTile",value:function(t,e,r,n,o){var i,a=this,s=Jy(t,e,r),u=this.getKey();if(this.tileCache.containsKey(s)&&(i=this.tileCache.get(s)).key===u)return i;var l=[t,e,r],c=this.getTileCoordForTileUrlFunction(l,o),f=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(o);if(c&&f){var p=h.getTileCoordExtent(c);gn(p,-h.getResolution(t),p),Yn(f,p)||(c=null)}var y=!0;if(null!==c){var d=this.tileGrid,v=h.getResolution(t),g=d.getZForResolution(v,1),m=h.getTileCoordExtent(c);gn(m,-v,m),d.forEachTileCoord(m,g,(function(t){y=y&&!a.tileUrlFunction(t,n,o)}))}var b=new yS(l,y?Nu.EMPTY:Nu.IDLE,c,this.getSourceTiles.bind(this,n,o));return b.key=u,i?(b.interimTile=i,b.refreshInterimChain(),this.tileCache.replace(s,b)):this.tileCache.set(s,b),b}},{key:"getTileGridForProjection",value:function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){for(var n=this.tileGrid,o=n.getResolutions().slice(),i=o.map((function(t,e){return n.getOrigin(e)})),a=o.map((function(t,e){return n.getTileSize(e)})),s=yo+1,u=o.length;u<s;++u)o.push(o[u-1]/2),i.push(i[u-1]),a.push(a[u-1]);r=new md({extent:n.getExtent(),origins:i,resolutions:o,tileSizes:a}),this.tileGrids_[e]=r}return r}},{key:"getTilePixelRatio",value:function(t){return t}},{key:"getTilePixelSize",value:function(t,e,r){var n=El(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]}},{key:"updateCacheSize",value:function(t,r){gS(mS(e.prototype),"updateCacheSize",this).call(this,2*t,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Wd);const _S=wS;function xS(t,e){t.setLoader((function(r,n,o){Wx(e,t.getFormat(),r,n,o,t.onLoad.bind(t),t.onError.bind(t))}))}function SS(t){return function(t){if(Array.isArray(t))return LS(t)}(t)||kS(t)||IS(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kS(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function OS(t){var e="function"==typeof Map?new Map:void 0;return OS=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ES(t,arguments,jS(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),PS(r,t)},OS(t)}function ES(t,e,r){return ES=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&PS(o,r.prototype),o},ES.apply(null,arguments)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PS(t,e)}function jS(t){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jS(t)}function CS(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=IS(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function AS(t){return AS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AS(t)}function TS(t,e){return MS(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||IS(t,e)||RS()}function RS(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function IS(t,e){if(t){if("string"==typeof t)return LS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LS(t,e):void 0}}function LS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MS(t){if(Array.isArray(t))return t}function FS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NS(n.key),n)}}function BS(t,e,r){return e&&DS(t.prototype,e),r&&DS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function NS(t){var e=function(t,e){if("object"!=AS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=AS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==AS(e)?e:String(e)}function zS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var GS,US={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function qS(t){return(t=Math.round(t))<0?0:t>255?255:t}function WS(t){return t<0?0:t>1?1:t}function VS(t){return"%"===t[t.length-1]?qS(parseFloat(t)/100*255):qS(parseInt(t))}function YS(t){return"%"===t[t.length-1]?WS(parseFloat(t)/100):WS(parseFloat(t))}function ZS(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{GS={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in US)return US[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf("("),o=r.indexOf(")");if(-1!==n&&o+1===r.length){var i=r.substr(0,n),a=r.substr(n+1,o-(n+1)).split(","),s=1;switch(i){case"rgba":if(4!==a.length)return null;s=YS(a.pop());case"rgb":return 3!==a.length?null:[VS(a[0]),VS(a[1]),VS(a[2]),s];case"hsla":if(4!==a.length)return null;s=YS(a.pop());case"hsl":if(3!==a.length)return null;var u=(parseFloat(a[0])%360+360)%360/360,l=YS(a[1]),c=YS(a[2]),f=c<=.5?c*(l+1):c+l-c*l,h=2*c-f;return[qS(255*ZS(h,f,u+1/3)),qS(255*ZS(h,f,u)),qS(255*ZS(h,f,u-1/3)),s];default:return null}}return null}}catch(t){}var XS=function(){function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;FS(this,t),this.r=e,this.g=r,this.b=n,this.a=o}return BS(t,[{key:"toString",value:function(){var t=TS(this.toArray(),4),e=t[0],r=t[1],n=t[2],o=t[3];return"rgba(".concat(Math.round(e),",").concat(Math.round(r),",").concat(Math.round(n),",").concat(o,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}},{key:"toArray01",value:function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var r=GS(e);if(r)return new t(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}}}]),t}();XS.black=new XS(0,0,0,1),XS.white=new XS(1,1,1,1),XS.transparent=new XS(0,0,0,0),XS.red=new XS(1,0,0,1),XS.blue=new XS(0,0,1,1);var HS=XS;function KS(t){return"object"===AS(t)?["literal",t]:t}function JS(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function $S(t,e){var r,n,o=KS((r=t.default,n=e.default,void 0!==r?r:void 0!==n?n:void 0));return void 0===o&&"resolvedImage"===e.type?"":o}function QS(t,e,r){var n=rk(t,e),o=["get",t.property];if("categorical"===n&&"boolean"==typeof r[0][0]){var i,a=["case"],s=CS(r);try{for(s.s();!(i=s.n()).done;){var u=i.value;a.push(["==",o,u[0]],u[1])}}catch(t){s.e(t)}finally{s.f()}return a.push($S(t,e)),a}if("categorical"===n){var l,c=["match",o],f=CS(r);try{for(f.s();!(l=f.n()).done;){var h=l.value;ek(c,h[0],h[1],!1)}}catch(t){f.e(t)}finally{f.f()}return c.push($S(t,e)),c}if("interval"===n){var p,y=["step",["number",o]],d=CS(r);try{for(d.s();!(p=d.n()).done;){var v=p.value;ek(y,v[0],v[1],!0)}}catch(t){d.e(t)}finally{d.f()}return tk(y),void 0===t.default?y:["case",["==",["typeof",o],"number"],y,KS(t.default)]}if("exponential"===n){var g,m=void 0!==t.base?t.base:1,b=[JS(t),1===m?["linear"]:["exponential",m],["number",o]],w=CS(r);try{for(w.s();!(g=w.n()).done;){var _=g.value;ek(b,_[0],_[1],!1)}}catch(t){w.e(t)}finally{w.f()}return void 0===t.default?b:["case",["==",["typeof",o],"number"],b,KS(t.default)]}throw new Error("Unknown property function type ".concat(n))}function tk(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function ek(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(r))}function rk(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function nk(t){for(var e=["concat"],r=/{([^{}]+)}/g,n=0,o=r.exec(t);null!==o;o=r.exec(t)){var i=t.slice(n,r.lastIndex-o[0].length);n=r.lastIndex,i.length>0&&e.push(i),e.push(["get",o[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}var ok=function(t){function e(t,r){var n;return FS(this,e),(n=function(t,e,r){return e=jS(e),function(t,e){if(e&&("object"===AS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],jS(t).constructor):e.apply(t,r))}(this,e,[r])).message=r,n.key=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}(e,t),BS(e)}(OS(Error)),ik=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];FS(this,t),this.parent=e,this.bindings={};var n,o=CS(r);try{for(o.s();!(n=o.n()).done;){var i=TS(n.value,2),a=i[0],s=i[1];this.bindings[a]=s}}catch(t){o.e(t)}finally{o.f()}}return BS(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),ak={kind:"null"},sk={kind:"number"},uk={kind:"string"},lk={kind:"boolean"},ck={kind:"color"},fk={kind:"object"},hk={kind:"value"},pk={kind:"collator"},yk={kind:"formatted"},dk={kind:"resolvedImage"};function vk(t,e){return{kind:"array",itemType:t,N:e}}function gk(t){if("array"===t.kind){var e=gk(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var mk=[ak,sk,uk,lk,ck,yk,fk,vk(hk),dk];function bk(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!bk(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=mk;r<n.length;r++)if(!bk(n[r],e))return null}return"Expected ".concat(gk(t)," but found ").concat(gk(e)," instead.")}function wk(t,e){return e.some((function(e){return e.kind===t.kind}))}function _k(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"===AS(t):e===AS(t)}))}var xk=function(){function t(e,r,n){FS(this,t),this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return BS(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),Sk=BS((function t(e,r,n,o,i){FS(this,t),this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=o,this.textColor=i})),kk=function(){function t(e){FS(this,t),this.sections=e}return BS(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],r=CS(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.image)e.push(["image",n.image.name]);else{e.push(n.text);var o={};n.fontStack&&(o["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(o["font-scale"]=n.scale),n.textColor&&(o["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(o)}}}catch(t){r.e(t)}finally{r.f()}return e}}],[{key:"fromString",value:function(e){return new t([new Sk(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),Ok=function(){function t(e){FS(this,t),this.name=e.name,this.available=e.available}return BS(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function Ek(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([t,e,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Pk(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof HS)return!0;if(t instanceof xk)return!0;if(t instanceof kk)return!0;if(t instanceof Ok)return!0;if(Array.isArray(t)){var e,r=CS(t);try{for(r.s();!(e=r.n()).done;)if(!Pk(e.value))return!1}catch(t){r.e(t)}finally{r.f()}return!0}if("object"===AS(t)){for(var n in t)if(!Pk(t[n]))return!1;return!0}return!1}function jk(t){if(null===t)return ak;if("string"==typeof t)return uk;if("boolean"==typeof t)return lk;if("number"==typeof t)return sk;if(t instanceof HS)return ck;if(t instanceof xk)return pk;if(t instanceof kk)return yk;if(t instanceof Ok)return dk;if(Array.isArray(t)){var e,r,n=t.length,o=CS(t);try{for(o.s();!(r=o.n()).done;){var i=jk(r.value);if(e){if(e===i)continue;e=hk;break}e=i}}catch(t){o.e(t)}finally{o.f()}return vk(e||hk,n)}return fk}function Ck(t){var e=AS(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof HS||t instanceof kk||t instanceof Ok?t.toString():JSON.stringify(t)}var Ak=function(){function t(e,r){FS(this,t),this.type=e,this.value=r}return BS(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof HS?["rgba"].concat(this.value.toArray()):this.value instanceof kk?this.value.serialize():this.value}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Pk(e[1]))return r.error("invalid value");var n=e[1],o=jk(n),i=r.expectedType;return"array"!==o.kind||0!==o.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(o=i),new t(o,n)}}]),t}(),Tk=Ak,Rk=function(){function t(e){FS(this,t),this.name="ExpressionEvaluationError",this.message=e}return BS(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),Ik={string:uk,number:sk,boolean:lk,object:fk},Lk=function(){function t(e,r){FS(this,t),this.type=e,this.args=r}return BS(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!bk(this.type,jk(r)))return r;if(e===this.args.length-1)throw new Rk("Expected value to be of type ".concat(gk(this.type),", but found ").concat(gk(jk(r))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n,o=1,i=e[0];if("array"===i){var a,s;if(e.length>2){var u=e[1];if("string"!=typeof u||!(u in Ik)||"object"===u)return r.error('The item type argument of "array" must be one of string, number, boolean',1);a=Ik[u],o++}else a=hk;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);s=e[2],o++}n=vk(a,s)}else n=Ik[i];for(var l=[];o<e.length;o++){var c=r.parse(e[o],o,hk);if(!c)return null;l.push(c)}return new t(n,l)}}]),t}(),Mk=Lk,Fk=function(){function t(e){FS(this,t),this.type=yk,this.sections=e}return BS(t,[{key:"evaluate",value:function(t){return new kk(this.sections.map((function(e){var r=e.content.evaluate(t);return jk(r)===dk?new Sk("",r,null,null,null):new Sk(Ck(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,r=CS(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],r=CS(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.content.serialize());var o={};n.scale&&(o["font-scale"]=n.scale.serialize()),n.font&&(o["text-font"]=n.font.serialize()),n.textColor&&(o["text-color"]=n.textColor.serialize()),e.push(o)}}catch(t){r.e(t)}finally{r.f()}return e}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"===AS(n))return r.error("First argument must be an image or text section.");for(var o=[],i=!1,a=1;a<=e.length-1;++a){var s=e[a];if(i&&"object"===AS(s)&&!Array.isArray(s)){i=!1;var u=null;if(s["font-scale"]&&!(u=r.parse(s["font-scale"],1,sk)))return null;var l=null;if(s["text-font"]&&!(l=r.parse(s["text-font"],1,vk(uk))))return null;var c=null;if(s["text-color"]&&!(c=r.parse(s["text-color"],1,ck)))return null;var f=o[o.length-1];f.scale=u,f.font=l,f.textColor=c}else{var h=r.parse(e[a],1,hk);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,o.push({content:h,scale:null,font:null,textColor:null})}}return new t(o)}}]),t}(),Dk=function(){function t(e){FS(this,t),this.type=dk,this.input=e}return BS(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),r=Ok.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected two arguments.");var n=r.parse(e[1],1,uk);return n?new t(n):r.error("No image name provided.")}}]),t}(),Bk={"to-boolean":lk,"to-color":ck,"to-number":sk,"to-string":uk},Nk=function(){function t(e,r){FS(this,t),this.type=e,this.args=r}return BS(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,r,n,o=CS(this.args);try{for(o.s();!(n=o.n()).done;){if(e=n.value.evaluate(t),r=null,e instanceof HS)return e;if("string"==typeof e){var i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):Ek(e[0],e[1],e[2],e[3])))return new HS(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(t){o.e(t)}finally{o.f()}throw new Rk(r||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,u=CS(this.args);try{for(u.s();!(a=u.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(t){u.e(t)}finally{u.f()}throw new Rk("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?kk.fromString(Ck(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ok.fromString(Ck(this.args[0].evaluate(t))):Ck(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new Fk([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Dk(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return r.error("Expected one argument.");for(var o=Bk[n],i=[],a=1;a<e.length;a++){var s=r.parse(e[a],a,hk);if(!s)return null;i.push(s)}return new t(o,i)}}]),t}(),zk=Nk,Gk=["Unknown","Point","LineString","Polygon"],Uk=function(){function t(){FS(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return BS(t,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?Gk[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,e=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,o=r.y,i=n*e-t[0],a=o*e-t[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*a}return 0}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=HS.parse(t)),e}}]),t}(),qk=Uk,Wk=function(){function t(e,r,n,o){FS(this,t),this.name=e,this.type=r,this._evaluate=n,this.args=o}return BS(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,r){var n=e[0],o=t.definitions[n];if(!o)return r.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);var i,a=Array.isArray(o)?o[0]:o.type,s=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=s.filter((function(t){var r=TS(t,1)[0];return!Array.isArray(r)||r.length===e.length-1})),l=null,c=CS(u);try{for(c.s();!(i=c.n()).done;){var f=TS(i.value,2),h=f[0],p=f[1];l=new mO(r.registry,r.path,null,r.scope);for(var y=[],d=!1,v=1;v<e.length;v++){var g=e[v],m=Array.isArray(h)?h[v-1]:h.type,b=l.parse(g,1+y.length,m);if(!b){d=!0;break}y.push(b)}if(!d)if(Array.isArray(h)&&h.length!==y.length)l.error("Expected ".concat(h.length," arguments, but found ").concat(y.length," instead."));else{for(var w=0;w<y.length;w++){var _=Array.isArray(h)?h[w]:h.type,x=y[w];l.concat(w+1).checkSubtype(_,x.type)}if(0===l.errors.length)return new t(n,a,p,y)}}}catch(t){c.e(t)}finally{c.f()}if(1===u.length){var S;(S=r.errors).push.apply(S,SS(l.errors))}else{for(var k=(u.length?u:s).map((function(t){var e;return e=TS(t,1)[0],Array.isArray(e)?"(".concat(e.map(gk).join(", "),")"):"(".concat(gk(e.type),"...)")})).join(" | "),O=[],E=1;E<e.length;E++){var P=r.parse(e[E],1+O.length);if(!P)return null;O.push(gk(P.type))}r.error("Expected arguments of type ".concat(k,", but found (").concat(O.join(", "),") instead."))}return null}},{key:"register",value:function(e,r){for(var n in t.definitions=r,r)e[n]=t}}]),t}(),Vk=Wk,Yk=function(){function t(e,r,n){FS(this,t),this.type=pk,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}return BS(t,[{key:"evaluate",value:function(t){return new xk(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected one argument.");var n=e[1];if("object"!==AS(n)||Array.isArray(n))return r.error("Collator options argument must be an object.");var o=r.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,lk);if(!o)return null;var i=r.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,lk);if(!i)return null;var a=null;return n.locale&&!(a=r.parse(n.locale,1,uk))?null:new t(o,i,a)}}]),t}(),Zk=8192;function Xk(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Hk(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Kk(t,e){var r,n=(180+t[0])/360,o=(r=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360),i=Math.pow(2,e.z);return[Math.round(n*i*Zk),Math.round(o*i*Zk)]}function Jk(t,e,r){var n=t[0]-e[0],o=t[1]-e[1],i=t[0]-r[0],a=t[1]-r[1];return n*a-i*o==0&&n*i<=0&&o*a<=0}function $k(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function Qk(t,e){for(var r=!1,n=0,o=e.length;n<o;n++)for(var i=e[n],a=0,s=i.length;a<s-1;a++){if(Jk(t,i[a],i[a+1]))return!1;$k(t,i[a],i[a+1])&&(r=!r)}return r}function tO(t,e){for(var r=0;r<e.length;r++)if(Qk(t,e[r]))return!0;return!1}function eO(t,e,r,n){var o=t[0]-r[0],i=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],c=o*l-u*i,f=a*l-u*s;return c>0&&f<0||c<0&&f>0}function rO(t,e,r){var n,o,i,a,s,u,l,c,f=CS(r);try{for(f.s();!(n=f.n()).done;)for(var h=n.value,p=0;p<h.length-1;++p)if(o=t,i=e,a=h[p],s=h[p+1],c=[i[0]-o[0],i[1]-o[1]],0!=(u=[s[0]-a[0],s[1]-a[1]])[0]*(l=c)[1]-u[1]*l[0]&&eO(o,i,a,s)&&eO(a,s,o,i))return!0}catch(t){f.e(t)}finally{f.f()}return!1}function nO(t,e){for(var r=0;r<t.length;++r)if(!Qk(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(rO(t[n],t[n+1],e))return!1;return!0}function oO(t,e){for(var r=0;r<e.length;r++)if(nO(t,e[r]))return!0;return!1}function iO(t,e,r){for(var n=[],o=0;o<t.length;o++){for(var i=[],a=0;a<t[o].length;a++){var s=Kk(t[o][a],r);Xk(e,s),i.push(s)}n.push(i)}return n}function aO(t,e,r){for(var n=[],o=0;o<t.length;o++){var i=iO(t[o],e,r);n.push(i)}return n}function sO(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var o=.5*n,i=t[0]-r[0]>o?-n:r[0]-t[0]>o?n:0;0===i&&(i=t[0]-r[2]>o?-n:r[2]-t[0]>o?n:0),t[0]+=i}Xk(e,t)}function uO(t,e,r,n){var o=Math.pow(2,n.z)*Zk,i=[n.x*Zk,n.y*Zk],a=[];if(!t)return a;var s,u=CS(t);try{for(u.s();!(s=u.n()).done;){var l,c=CS(s.value);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=[f.x+i[0],f.y+i[1]];sO(h,e,r,o),a.push(h)}}catch(t){c.e(t)}finally{c.f()}}}catch(t){u.e(t)}finally{u.f()}return a}function lO(t,e,r,n){var o=Math.pow(2,n.z)*Zk,i=[n.x*Zk,n.y*Zk],a=[];if(!t)return a;var s,u=CS(t);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,f=[],h=CS(c);try{for(h.s();!(l=h.n()).done;){var p=l.value,y=[p.x+i[0],p.y+i[1]];Xk(e,y),f.push(y)}}catch(t){h.e(t)}finally{h.f()}a.push(f)}}catch(t){u.e(t)}finally{u.f()}if(e[2]-e[0]<=o/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(e);var d,v=CS(a);try{for(v.s();!(d=v.n()).done;){var g,m=CS(d.value);try{for(m.s();!(g=m.n()).done;)sO(g.value,e,r,o)}catch(t){m.e(t)}finally{m.f()}}}catch(t){v.e(t)}finally{v.f()}}return a}var cO=function(){function t(e,r){FS(this,t),this.type=lk,this.geojson=e,this.geometries=r}return BS(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if("Polygon"===e.type){var i=iO(e.coordinates,n,o),a=uO(t.geometry(),r,n,o);if(!Hk(r,n))return!1;var s,u=CS(a);try{for(u.s();!(s=u.n()).done;)if(!Qk(s.value,i))return!1}catch(t){u.e(t)}finally{u.f()}}if("MultiPolygon"===e.type){var l=aO(e.coordinates,n,o),c=uO(t.geometry(),r,n,o);if(!Hk(r,n))return!1;var f,h=CS(c);try{for(h.s();!(f=h.n()).done;)if(!tO(f.value,l))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if("Polygon"===e.type){var i=iO(e.coordinates,n,o),a=lO(t.geometry(),r,n,o);if(!Hk(r,n))return!1;var s,u=CS(a);try{for(u.s();!(s=u.n()).done;)if(!nO(s.value,i))return!1}catch(t){u.e(t)}finally{u.f()}}if("MultiPolygon"===e.type){var l=aO(e.coordinates,n,o),c=lO(t.geometry(),r,n,o);if(!Hk(r,n))return!1;var f,h=CS(c);try{for(h.s();!(f=h.n()).done;)if(!oO(f.value,l))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Pk(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var o=0;o<n.features.length;++o){var i=n.features[o].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new t(n,n.features[o].geometry)}else if("Feature"===n.type){var a=n.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new t(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}(),fO=cO;function hO(t){if(t instanceof Vk){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof fO)return!1;var e=!0;return t.eachChild((function(t){e&&!hO(t)&&(e=!1)})),e}function pO(t){if(t instanceof Vk&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!pO(t)&&(e=!1)})),e}function yO(t,e){if(t instanceof Vk&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!yO(t,e)&&(r=!1)})),r}var dO=function(){function t(e,r){FS(this,t),this.type=r.type,this.name=e,this.boundExpression=r}return BS(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,r){if(2!==e.length||"string"!=typeof e[1])return r.error("'var' expression requires exactly one string literal argument.");var n=e[1];return r.scope.has(n)?new t(n,r.scope.get(n)):r.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),vO=dO,gO=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ik,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];FS(this,t),this.registry=e,this.path=r,this.key=r.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=o,this.errors=i,this.expectedType=n}return BS(t,[{key:"parse",value:function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,r,n)._parse(t,o):this._parse(t,o)}},{key:"_parse",value:function(t,e){function r(t,e,r){return"assert"===r?new Mk(e,[t]):"coerce"===r?new zk(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(AS(n),' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var o=this.registry[n];if(o){var i=o.parse(t,this);if(!i)return null;if(this.expectedType){var a=this.expectedType,s=i.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else i=r(i,a,e.typeAnnotation||"coerce");else i=r(i,a,e.typeAnnotation||"assert")}if(!(i instanceof Tk)&&"resolvedImage"!==i.type.kind&&bO(i)){var u=new qk;try{i=new Tk(i.type,i.evaluate(u))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===AS(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found ".concat(AS(t)," instead."))}},{key:"concat",value:function(e,r,n){var o="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new t(this.registry,o,r||null,i,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var o="".concat(this.key).concat(r.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new ok(o,t))}},{key:"checkSubtype",value:function(t,e){var r=bk(t,e);return r&&this.error(r),r}}]),t}(),mO=gO;function bO(t){if(t instanceof vO)return bO(t.boundExpression);if(t instanceof Vk&&"error"===t.name)return!1;if(t instanceof Yk)return!1;if(t instanceof fO)return!1;var e=t instanceof zk||t instanceof Mk,r=!0;return t.eachChild((function(t){r=e?r&&bO(t):r&&t instanceof Tk})),!!r&&hO(t)&&yO(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function wO(t,e){for(var r,n,o=t.length-1,i=0,a=o,s=0;i<=a;)if(r=t[s=Math.floor((i+a)/2)],n=t[s+1],r<=e){if(s===o||e<n)return s;i=s+1}else{if(!(r>e))throw new Rk("Input is not a number.");a=s-1}return 0}var _O=function(){function t(e,r,n){FS(this,t),this.type=e,this.input=r,this.labels=[],this.outputs=[];var o,i=CS(n);try{for(i.s();!(o=i.n()).done;){var a=TS(o.value,2),s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}}catch(t){i.e(t)}finally{i.f()}}return BS(t,[{key:"evaluate",value:function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var o=e.length;return n>=e[o-1]?r[o-1].evaluate(t):r[wO(e,n)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,r=CS(this.outputs);try{for(r.s();!(e=r.n()).done;)t(e.value)}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var n=r.parse(e[1],1,sk);if(!n)return null;var o=[],i=null;r.expectedType&&"value"!==r.expectedType.kind&&(i=r.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],u=e[a+1],l=a,c=a+1;if("number"!=typeof s)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(o.length&&o[o.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=r.parse(u,c,i);if(!f)return null;i=i||f.type,o.push([s,f])}return new t(i,n,o)}}]),t}(),xO=_O,SO=kO;function kO(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}kO.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},kO.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},kO.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},kO.prototype.solveCurveX=function(t,e){var r,n,o,i,a;for(void 0===e&&(e=1e-6),o=t,a=0;a<8;a++){if(i=this.sampleCurveX(o)-t,Math.abs(i)<e)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=i/s}if((o=t)<(r=0))return r;if(o>(n=1))return n;for(;r<n;){if(i=this.sampleCurveX(o),Math.abs(i-t)<e)return o;t>i?r=o:n=o,o=.5*(n-r)+r}return o},kO.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var OO=zS(SO);function EO(t,e,r){return t*(1-r)+e*r}var PO=Object.freeze({__proto__:null,number:EO,color:function(t,e,r){return new HS(EO(t.r,e.r,r),EO(t.g,e.g,r),EO(t.b,e.b,r),EO(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,n){return EO(t,e[n],r)}))}}),jO=.95047,CO=1.08883,AO=4/29,TO=6/29,RO=3*TO*TO,IO=TO*TO*TO,LO=Math.PI/180,MO=180/Math.PI;function FO(t){return t>IO?Math.pow(t,1/3):t/RO+AO}function DO(t){return t>TO?t*t*t:RO*(t-AO)}function BO(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function NO(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zO(t){var e=NO(t.r),r=NO(t.g),n=NO(t.b),o=FO((.4124564*e+.3575761*r+.1804375*n)/jO),i=FO((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*i-16,a:500*(o-i),b:200*(i-FO((.0193339*e+.119192*r+.9503041*n)/CO)),alpha:t.a}}function GO(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*DO(e),r=jO*DO(r),n=CO*DO(n),new HS(BO(3.2404542*r-1.5371385*e-.4985314*n),BO(-.969266*r+1.8760108*e+.041556*n),BO(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function UO(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var qO={forward:zO,reverse:GO,interpolate:function(t,e,r){return{l:EO(t.l,e.l,r),a:EO(t.a,e.a,r),b:EO(t.b,e.b,r),alpha:EO(t.alpha,e.alpha,r)}}},WO=function(t){var e=zO(t),r=e.l,n=e.a,o=e.b,i=Math.atan2(o,n)*MO;return{h:i<0?i+360:i,c:Math.sqrt(n*n+o*o),l:r,alpha:t.a}},VO=function(){function t(e,r,n,o,i){FS(this,t),this.type=e,this.operator=r,this.interpolation=n,this.input=o,this.labels=[],this.outputs=[];var a,s=CS(i);try{for(s.s();!(a=s.n()).done;){var u=TS(a.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(t){s.e(t)}finally{s.f()}}return BS(t,[{key:"evaluate",value:function(e){var r=this.labels,n=this.outputs;if(1===r.length)return n[0].evaluate(e);var o=this.input.evaluate(e);if(o<=r[0])return n[0].evaluate(e);var i=r.length;if(o>=r[i-1])return n[i-1].evaluate(e);var a=wO(r,o),s=r[a],u=r[a+1],l=t.interpolationFactor(this.interpolation,o,s,u),c=n[a].evaluate(e),f=n[a+1].evaluate(e);return"interpolate"===this.operator?PO[this.type.kind.toLowerCase()](c,f,l):"interpolate-hcl"===this.operator?function(t){var e=t.h*LO,r=t.c;return GO({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}(function(t,e,r){return{h:UO(t.h,e.h,r),c:EO(t.c,e.c,r),l:EO(t.l,e.l,r),alpha:EO(t.alpha,e.alpha,r)}}(WO(c),WO(f),l)):qO.reverse(qO.interpolate(qO.forward(c),qO.forward(f),l))}},{key:"eachChild",value:function(t){t(this.input);var e,r=CS(this.outputs);try{for(r.s();!(e=r.n()).done;)t(e.value)}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e}}],[{key:"interpolationFactor",value:function(t,e,r,n){var o=0;if("exponential"===t.name)o=YO(e,t.base,r,n);else if("linear"===t.name)o=YO(e,1,r,n);else if("cubic-bezier"===t.name){var i=t.controlPoints;o=new OO(i[0],i[1],i[2],i[3]).solve(YO(e,1,r,n))}return o}},{key:"parse",value:function(e,r){var n,o=MS(n=e)||kS(n)||IS(n)||RS(),i=o[0],a=o[1],s=o[2],u=o.slice(3);if(!Array.isArray(a)||0===a.length)return r.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return r.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(s=r.parse(s,2,sk)))return null;var f=[],h=null;"interpolate-hcl"===i||"interpolate-lab"===i?h=ck:r.expectedType&&"value"!==r.expectedType.kind&&(h=r.expectedType);for(var p=0;p<u.length;p+=2){var y=u[p],d=u[p+1],v=p+3,g=p+4;if("number"!=typeof y)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(f.length&&f[f.length-1][0]>=y)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var m=r.parse(d,g,h);if(!m)return null;h=h||m.type,f.push([y,m])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new t(h,i,a,s,f):r.error("Type ".concat(gk(h)," is not interpolatable."))}}]),t}();function YO(t,e,r,n){var o=n-r,i=t-r;return 0===o?0:1===e?i/o:(Math.pow(e,i)-1)/(Math.pow(e,o)-1)}var ZO=VO,XO=function(){function t(e,r){FS(this,t),this.type=e,this.args=r}return BS(t,[{key:"evaluate",value:function(t){var e,r,n=null,o=0,i=CS(this.args);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(o++,(n=a.evaluate(t))&&n instanceof Ok&&!n.available&&(e||(e=n),n=null,o===this.args.length))return e;if(null!==n)break}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var n=null,o=r.expectedType;o&&"value"!==o.kind&&(n=o);var i,a=[],s=CS(e.slice(1));try{for(s.s();!(i=s.n()).done;){var u=i.value,l=r.parse(u,1+a.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,a.push(l)}}catch(t){s.e(t)}finally{s.f()}var c=o&&a.some((function(t){return bk(o,t.type)}));return new t(c?hk:n,a)}}]),t}(),HO=XO,KO=function(){function t(e,r){FS(this,t),this.type=r.type,this.bindings=[].concat(e),this.result=r}return BS(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,r=CS(this.bindings);try{for(r.s();!(e=r.n()).done;)t(e.value[1])}catch(t){r.e(t)}finally{r.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],r=CS(this.bindings);try{for(r.s();!(t=r.n()).done;){var n=TS(t.value,2),o=n[0],i=n[1];e.push(o,i.serialize())}}catch(t){r.e(t)}finally{r.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var n=[],o=1;o<e.length-1;o+=2){var i=e[o];if("string"!=typeof i)return r.error("Expected string, but found ".concat(AS(i)," instead."),o);if(/[^a-zA-Z0-9_]/.test(i))return r.error("Variable names must contain only alphanumeric characters or '_'.",o);var a=r.parse(e[o+1],o+1);if(!a)return null;n.push([i,a])}var s=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return s?new t(n,s):null}}]),t}(),JO=KO,$O=function(){function t(e,r,n){FS(this,t),this.type=e,this.index=r,this.input=n}return BS(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Rk("Array index out of bounds: ".concat(e," < 0."));if(e>=r.length)throw new Rk("Array index out of bounds: ".concat(e," > ").concat(r.length-1,"."));if(e!==Math.floor(e))throw new Rk("Array index must be an integer, but found ".concat(e," instead."));return r[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,sk),o=r.parse(e[2],2,vk(r.expectedType||hk));return n&&o?new t(o.type.itemType,n,o):null}}]),t}(),QO=$O,tE=function(){function t(e,r){FS(this,t),this.type=lk,this.needle=e,this.haystack=r}return BS(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!_k(e,["boolean","string","number","null"]))throw new Rk("Expected first argument to be of type boolean, string, number or null, but found ".concat(gk(jk(e))," instead."));if(!_k(r,["string","array"]))throw new Rk("Expected second argument to be of type array or string, but found ".concat(gk(jk(r))," instead."));return r.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,hk),o=r.parse(e[2],2,hk);return n&&o?wk(n.type,[lk,uk,sk,ak,hk])?new t(n,o):r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(gk(n.type)," instead")):null}}]),t}(),eE=tE,rE=function(){function t(e,r,n){FS(this,t),this.type=sk,this.needle=e,this.haystack=r,this.fromIndex=n}return BS(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!_k(e,["boolean","string","number","null"]))throw new Rk("Expected first argument to be of type boolean, string, number or null, but found ".concat(gk(jk(e))," instead."));if(!_k(r,["string","array"]))throw new Rk("Expected second argument to be of type array or string, but found ".concat(gk(jk(r))," instead."));if(this.fromIndex){var n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,hk),o=r.parse(e[2],2,hk);if(!n||!o)return null;if(!wk(n.type,[lk,uk,sk,ak,hk]))return r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(gk(n.type)," instead"));if(4===e.length){var i=r.parse(e[3],3,sk);return i?new t(n,o,i):null}return new t(n,o)}}]),t}(),nE=rE,oE=function(){function t(e,r,n,o,i,a){FS(this,t),this.inputType=e,this.type=r,this.input=n,this.cases=o,this.outputs=i,this.otherwise=a}return BS(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(jk(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,r=["match",this.input.serialize()],n=[],o={},i=CS(Object.keys(this.cases).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value,s=o[this.cases[a]];void 0===s?(o[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}}catch(t){i.e(t)}finally{i.f()}for(var u=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,c=n;l<c.length;l++){var f=TS(c[l],2),h=f[0],p=f[1];1===p.length?r.push(u(p[0])):r.push(p.map(u)),r.push(this.outputs[h].serialize())}return r.push(this.otherwise.serialize()),r}}],[{key:"parse",value:function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return r.error("Expected an even number of arguments.");var n,o;r.expectedType&&"value"!==r.expectedType.kind&&(o=r.expectedType);for(var i={},a=[],s=2;s<e.length-1;s+=2){var u=e[s],l=e[s+1];Array.isArray(u)||(u=[u]);var c=r.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var f,h=CS(u);try{for(h.s();!(f=h.n()).done;){var p=f.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,jk(p)))return null}else n=jk(p);if(void 0!==i[String(p)])return c.error("Branch labels must be unique.");i[String(p)]=a.length}}catch(t){h.e(t)}finally{h.f()}var y=r.parse(l,s,o);if(!y)return null;o=o||y.type,a.push(y)}var d=r.parse(e[1],1,hk);if(!d)return null;var v=r.parse(e[e.length-1],e.length-1,o);return v?"value"!==d.type.kind&&r.concat(1).checkSubtype(n,d.type)?null:new t(n,o,d,i,a,v):null}}]),t}(),iE=oE,aE=function(){function t(e,r,n){FS(this,t),this.type=e,this.branches=r,this.otherwise=n}return BS(t,[{key:"evaluate",value:function(t){var e,r=CS(this.branches);try{for(r.s();!(e=r.n()).done;){var n=TS(e.value,2),o=n[0],i=n[1];if(o.evaluate(t))return i.evaluate(t)}}catch(t){r.e(t)}finally{r.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,r=CS(this.branches);try{for(r.s();!(e=r.n()).done;){var n=TS(e.value,2),o=n[0],i=n[1];t(o),t(i)}}catch(t){r.e(t)}finally{r.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=TS(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&"value"!==r.expectedType.kind&&(n=r.expectedType);for(var o=[],i=1;i<e.length-1;i+=2){var a=r.parse(e[i],i,lk);if(!a)return null;var s=r.parse(e[i+1],i+1,n);if(!s)return null;o.push([a,s]),n=n||s.type}var u=r.parse(e[e.length-1],e.length-1,n);return u?new t(n,o,u):null}}]),t}(),sE=aE,uE=function(){function t(e,r,n,o){FS(this,t),this.type=e,this.input=r,this.beginIndex=n,this.endIndex=o}return BS(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!_k(e,["string","array"]))throw new Rk("Expected first argument to be of type array or string, but found ".concat(gk(jk(e))," instead."));if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,hk),o=r.parse(e[2],2,sk);if(!n||!o)return null;if(!wk(n.type,[vk(hk),uk,hk]))return r.error("Expected first argument to be of type array or string, but found ".concat(gk(n.type)," instead"));if(4===e.length){var i=r.parse(e[3],3,sk);return i?new t(n.type,n,o,i):null}return new t(n.type,n,o)}}]),t}(),lE=uE;function cE(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function fE(t,e,r,n){return 0===n.compare(e,r)}function hE(t,e,r){var n="=="!==t&&"!="!==t;return function(){function o(t,e,r){FS(this,o),this.type=lk,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return BS(o,[{key:"evaluate",value:function(o){var i=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){var s=jk(i),u=jk(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Rk('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){var l=jk(i),c=jk(a);if("string"!==l.kind||"string"!==c.kind)return e(o,i,a)}return this.collator?r(o,i,a,this.collator.evaluate(o)):e(o,i,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],i=e.parse(t[1],1,hk);if(!i)return null;if(!cE(r,i.type))return e.concat(1).error('"'.concat(r,"\" comparisons are not supported for type '").concat(gk(i.type),"'."));var a=e.parse(t[2],2,hk);if(!a)return null;if(!cE(r,a.type))return e.concat(2).error('"'.concat(r,"\" comparisons are not supported for type '").concat(gk(a.type),"'."));if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(gk(i.type),"' and '").concat(gk(a.type),"'."));n&&("value"===i.type.kind&&"value"!==a.type.kind?i=new Mk(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new Mk(i.type,[a])));var s=null;if(4===t.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,pk)))return null}return new o(i,a,s)}}]),o}()}var pE=hE("==",(function(t,e,r){return e===r}),fE),yE=hE("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!fE(0,e,r,n)})),dE=hE("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),vE=hE(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),gE=hE("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),mE=hE(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0})),bE=function(){function t(e,r,n,o,i,a){FS(this,t),this.type=uk,this.number=e,this.locale=r,this.currency=n,this.unit=o,this.minFractionDigits=i,this.maxFractionDigits=a}return BS(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected two arguments.");var n=r.parse(e[1],1,sk);if(!n)return null;var o=e[2];if("object"!==AS(o)||Array.isArray(o))return r.error("NumberFormat options argument must be an object.");var i=null;if(o.locale&&!(i=r.parse(o.locale,1,uk)))return null;var a=null;if(o.currency&&!(a=r.parse(o.currency,1,uk)))return null;var s=null;if(o.unit&&!(s=r.parse(o.unit,1,uk)))return null;var u=null;if(o["min-fraction-digits"]&&!(u=r.parse(o["min-fraction-digits"],1,sk)))return null;var l=null;return o["max-fraction-digits"]&&!(l=r.parse(o["max-fraction-digits"],1,sk))?null:new t(n,i,a,s,u,l)}}]),t}(),wE=function(){function t(e){FS(this,t),this.type=sk,this.input=e}return BS(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Rk("Expected value to be of type string or array, but found ".concat(gk(jk(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?r.error("Expected argument of type string or array, but found ".concat(gk(n.type)," instead.")):new t(n):null}}]),t}(),_E={"==":pE,"!=":yE,">":vE,"<":dE,">=":mE,"<=":gE,array:Mk,at:QO,boolean:Mk,case:sE,coalesce:HO,collator:Yk,format:Fk,image:Dk,in:eE,"index-of":nE,interpolate:ZO,"interpolate-hcl":ZO,"interpolate-lab":ZO,length:wE,let:JO,literal:Tk,match:iE,number:Mk,"number-format":bE,object:Mk,slice:lE,step:xO,string:Mk,"to-boolean":zk,"to-color":zk,"to-number":zk,"to-string":zk,var:vO,within:fO};function xE(t,e){var r=TS(e,4),n=r[0],o=r[1],i=r[2],a=r[3];n=n.evaluate(t),o=o.evaluate(t),i=i.evaluate(t);var s=a?a.evaluate(t):1,u=Ek(n,o,i,s);if(u)throw new Rk(u);return new HS(n/255*s,o/255*s,i/255*s,s)}function SE(t,e){return t in e}function kE(t,e){var r=e[t];return void 0===r?null:r}function OE(t){return{type:t}}Vk.register(_E,{error:[{kind:"error"},[uk],function(t,e){var r=TS(e,1)[0];throw new Rk(r.evaluate(t))}],typeof:[uk,[hk],function(t,e){return gk(jk(TS(e,1)[0].evaluate(t)))}],"to-rgba":[vk(sk,4),[ck],function(t,e){return TS(e,1)[0].evaluate(t).toArray()}],rgb:[ck,[sk,sk,sk],xE],rgba:[ck,[sk,sk,sk,sk],xE],has:{type:lk,overloads:[[[uk],function(t,e){return SE(TS(e,1)[0].evaluate(t),t.properties())}],[[uk,fk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return SE(n.evaluate(t),o.evaluate(t))}]]},get:{type:hk,overloads:[[[uk],function(t,e){return kE(TS(e,1)[0].evaluate(t),t.properties())}],[[uk,fk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return kE(n.evaluate(t),o.evaluate(t))}]]},"feature-state":[hk,[uk],function(t,e){return kE(TS(e,1)[0].evaluate(t),t.featureState||{})}],properties:[fk,[],function(t){return t.properties()}],"geometry-type":[uk,[],function(t){return t.geometryType()}],id:[hk,[],function(t){return t.id()}],zoom:[sk,[],function(t){return t.globals.zoom}],pitch:[sk,[],function(t){return t.globals.pitch||0}],"distance-from-center":[sk,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[sk,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[sk,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[sk,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[hk,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[sk,OE(sk),function(t,e){var r,n=0,o=CS(e);try{for(o.s();!(r=o.n()).done;)n+=r.value.evaluate(t)}catch(t){o.e(t)}finally{o.f()}return n}],"*":[sk,OE(sk),function(t,e){var r,n=1,o=CS(e);try{for(o.s();!(r=o.n()).done;)n*=r.value.evaluate(t)}catch(t){o.e(t)}finally{o.f()}return n}],"-":{type:sk,overloads:[[[sk,sk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return n.evaluate(t)-o.evaluate(t)}],[[sk],function(t,e){return-TS(e,1)[0].evaluate(t)}]]},"/":[sk,[sk,sk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return n.evaluate(t)/o.evaluate(t)}],"%":[sk,[sk,sk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return n.evaluate(t)%o.evaluate(t)}],ln2:[sk,[],function(){return Math.LN2}],pi:[sk,[],function(){return Math.PI}],e:[sk,[],function(){return Math.E}],"^":[sk,[sk,sk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return Math.pow(n.evaluate(t),o.evaluate(t))}],sqrt:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.sqrt(r.evaluate(t))}],log10:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.log(r.evaluate(t))}],log2:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.sin(r.evaluate(t))}],cos:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.cos(r.evaluate(t))}],tan:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.tan(r.evaluate(t))}],asin:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.asin(r.evaluate(t))}],acos:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.acos(r.evaluate(t))}],atan:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.atan(r.evaluate(t))}],min:[sk,OE(sk),function(t,e){return Math.min.apply(Math,SS(e.map((function(e){return e.evaluate(t)}))))}],max:[sk,OE(sk),function(t,e){return Math.max.apply(Math,SS(e.map((function(e){return e.evaluate(t)}))))}],abs:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.abs(r.evaluate(t))}],round:[sk,[sk],function(t,e){var r=TS(e,1)[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.floor(r.evaluate(t))}],ceil:[sk,[sk],function(t,e){var r=TS(e,1)[0];return Math.ceil(r.evaluate(t))}],"filter-==":[lk,[uk,hk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return t.properties()[n.value]===o.value}],"filter-id-==":[lk,[hk],function(t,e){var r=TS(e,1)[0];return t.id()===r.value}],"filter-type-==":[lk,[uk],function(t,e){var r=TS(e,1)[0];return t.geometryType()===r.value}],"filter-<":[lk,[uk,hk],function(t,e){var r=TS(e,2),n=r[0],o=r[1],i=t.properties()[n.value],a=o.value;return AS(i)===AS(a)&&i<a}],"filter-id-<":[lk,[hk],function(t,e){var r=TS(e,1)[0],n=t.id(),o=r.value;return AS(n)===AS(o)&&n<o}],"filter->":[lk,[uk,hk],function(t,e){var r=TS(e,2),n=r[0],o=r[1],i=t.properties()[n.value],a=o.value;return AS(i)===AS(a)&&i>a}],"filter-id->":[lk,[hk],function(t,e){var r=TS(e,1)[0],n=t.id(),o=r.value;return AS(n)===AS(o)&&n>o}],"filter-<=":[lk,[uk,hk],function(t,e){var r=TS(e,2),n=r[0],o=r[1],i=t.properties()[n.value],a=o.value;return AS(i)===AS(a)&&i<=a}],"filter-id-<=":[lk,[hk],function(t,e){var r=TS(e,1)[0],n=t.id(),o=r.value;return AS(n)===AS(o)&&n<=o}],"filter->=":[lk,[uk,hk],function(t,e){var r=TS(e,2),n=r[0],o=r[1],i=t.properties()[n.value],a=o.value;return AS(i)===AS(a)&&i>=a}],"filter-id->=":[lk,[hk],function(t,e){var r=TS(e,1)[0],n=t.id(),o=r.value;return AS(n)===AS(o)&&n>=o}],"filter-has":[lk,[hk],function(t,e){return TS(e,1)[0].value in t.properties()}],"filter-has-id":[lk,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[lk,[vk(uk)],function(t,e){return TS(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[lk,[vk(hk)],function(t,e){return TS(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[lk,[uk,vk(hk)],function(t,e){var r=TS(e,2),n=r[0];return r[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[lk,[uk,vk(hk)],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return function(t,e,r,n){for(;r<=n;){var o=r+n>>1;if(e[o]===t)return!0;e[o]>t?n=o-1:r=o+1}return!1}(t.properties()[n.value],o.value,0,o.value.length-1)}],all:{type:lk,overloads:[[[lk,lk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return n.evaluate(t)&&o.evaluate(t)}],[OE(lk),function(t,e){var r,n=CS(e);try{for(n.s();!(r=n.n()).done;)if(!r.value.evaluate(t))return!1}catch(t){n.e(t)}finally{n.f()}return!0}]]},any:{type:lk,overloads:[[[lk,lk],function(t,e){var r=TS(e,2),n=r[0],o=r[1];return n.evaluate(t)||o.evaluate(t)}],[OE(lk),function(t,e){var r,n=CS(e);try{for(n.s();!(r=n.n()).done;)if(r.value.evaluate(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}]]},"!":[lk,[lk],function(t,e){return!TS(e,1)[0].evaluate(t)}],"is-supported-script":[lk,[uk],function(t,e){var r=TS(e,1)[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[uk,[uk],function(t,e){return TS(e,1)[0].evaluate(t).toUpperCase()}],downcase:[uk,[uk],function(t,e){return TS(e,1)[0].evaluate(t).toLowerCase()}],concat:[uk,OE(hk),function(t,e){return e.map((function(e){return Ck(e.evaluate(t))})).join("")}],"resolved-locale":[uk,[pk],function(t,e){return TS(e,1)[0].evaluate(t).resolvedLocale()}]});var EE=_E;function PE(t){return{result:"success",value:t}}function jE(t){return{result:"error",value:t}}function CE(t){return"object"===AS(t)&&null!==t&&!Array.isArray(t)}var AE=function(){function t(e,r){FS(this,t),this.expression=e,this._warningHistory={},this._evaluator=new qk,this._defaultValue=r?function(t){return"color"===t.type&&(CE(t.default)||Array.isArray(t.default))?new HS(0,0,0,0):"color"===t.type?HS.parse(t.default)||null:void 0===t.default?null:t.default}(r):null,this._enumValues=r&&"enum"===r.type?r.values:null}return BS(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,o,i,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,r,n,o,i,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Rk("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(u)," instead."));return u}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}]),t}();function TE(t,e){var r=new mO(EE,[],e?function(t){var e={color:ck,string:uk,number:sk,enum:uk,boolean:lk,formatted:yk,resolvedImage:dk};return"array"===t.type?vk(e[t.value]||hk,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?PE(new AE(n,e)):jE(r.errors)}var RE=function(){function t(e,r){FS(this,t),this.kind=e,this._styleExpression=r,this.isStateDependent="constant"!==e&&!pO(r.expression)}return BS(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,o,i)}},{key:"evaluate",value:function(t,e,r,n,o,i){return this._styleExpression.evaluate(t,e,r,n,o,i)}}]),t}(),IE=function(){function t(e,r,n,o){FS(this,t),this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent="camera"!==e&&!pO(r.expression),this.interpolationType=o}return BS(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,o,i)}},{key:"evaluate",value:function(t,e,r,n,o,i){return this._styleExpression.evaluate(t,e,r,n,o,i)}},{key:"interpolationFactor",value:function(t,e,r){return this.interpolationType?ZO.interpolationFactor(this.interpolationType,t,e,r):0}}]),t}();function LE(t,e){if("error"===(t=TE(t,e)).result)return t;var r=t.value.expression,n=hO(r);if(!n&&!function(t){return"data-driven"===t["property-type"]}(e))return jE([new ok("","data expressions not supported")]);var o=yO(r,["zoom","pitch","distance-from-center"]);if(!o&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(e))return jE([new ok("","zoom expressions not supported")]);var i=ME(r);if(!i&&!o)return jE([new ok("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof ok)return jE([i]);if(i instanceof ZO&&!function(t){return!!t.expression&&t.expression.interpolated}(e))return jE([new ok("",'"interpolate" expressions cannot be used with this property')]);if(!i)return PE(new RE(n?"constant":"source",t.value));var a=i instanceof ZO?i.interpolation:void 0;return PE(new IE(n?"camera":"composite",t.value,i.labels,a))}function ME(t){var e=null;if(t instanceof JO)e=ME(t.result);else if(t instanceof HO){var r,n=CS(t.args);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(e=ME(o))break}}catch(t){n.e(t)}finally{n.f()}}else(t instanceof xO||t instanceof ZO)&&t.input instanceof Vk&&"zoom"===t.input.name&&(e=t);return e instanceof ok||t.eachChild((function(t){var r=ME(t);r instanceof ok?e=r:!e&&r?e=new ok("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new ok("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function FE(t){if(Array.isArray(t))return t.map(FE);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=FE(t[r]);return e}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}var DE={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function BE(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,r=CS(t.slice(1));try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!BE(n)&&"boolean"!=typeof n)return!1}}catch(t){r.e(t)}finally{r.f()}return!0;default:return!0}}function NE(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};BE(t)||(t=YE(t));var r=t,n=!0;try{n=function(t){if(!UE(t))return t;var e=FE(t);return GE(e),zE(e)}(r)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(r,null,2),"\n        "))}var o,i=DE["filter_".concat(e)],a=TE(n,i);if("error"===a.result)throw new Error(a.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));o=function(t,e,r){return a.value.evaluate(t,e,{},r)};var s=null,u=null;if(n!==r){var l=TE(r,i);if("error"===l.result)throw new Error(l.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));s=function(t,e,r,n,o){return l.value.evaluate(t,e,{},r,void 0,void 0,n,o)},u=!hO(l.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:VE(n),needFeature:!!u}}function zE(t){if(!Array.isArray(t))return t;var e=function(t){if(qE.has(t[0]))for(var e=1;e<t.length;e++)if(UE(t[e]))return!0;return t}(t);return!0===e?e:e.map((function(t){return zE(t)}))}function GE(t){var e=!1,r=[];if("case"===t[0]){for(var n=1;n<t.length-1;n+=2)e=e||UE(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if("match"===t[0]){e=e||UE(t[1]);for(var o=2;o<t.length-1;o+=2)r.push(t[o+1]);r.push(t[t.length-1])}else if("step"===t[0]){e=e||UE(t[1]);for(var i=1;i<t.length-1;i+=2)r.push(t[i+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var a=1;a<t.length;a++)GE(t[a])}function UE(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;for(var e,r=1;r<t.length;r++)if(UE(t[r]))return!0;return!1}var qE=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function WE(t,e){return t<e?-1:t>e?1:0}function VE(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(VE(t[e]))return!0;return!1}function YE(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?ZE(t[1],t[2],"=="):"!="===r?KE(ZE(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?ZE(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(YE))):"all"===r?["all"].concat(t.slice(1).map(YE)):"none"===r?["all"].concat(t.slice(1).map(YE).map(KE)):"in"===r?XE(t[1],t.slice(2)):"!in"===r?KE(XE(t[1],t.slice(2))):"has"===r?HE(t[1]):"!has"===r?KE(HE(t[1])):"within"!==r||t}function ZE(t,e,r){switch(t){case"$type":return["filter-type-".concat(r),e];case"$id":return["filter-id-".concat(r),e];default:return["filter-".concat(r),t,e]}}function XE(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return AS(t)!==AS(e[0])}))?["filter-in-large",t,["literal",e.sort(WE)]]:["filter-in-small",t,["literal",e]]}}function HE(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function KE(t){return["!",t]}var JE=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $E(t,e){var r={};for(var n in t)"ref"!==n&&(r[n]=t[n]);return JE.forEach((function(t){t in e&&(r[t]=e[t])})),r}function QE(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=$E(t[n],e[t[n].ref]));return t}var tP={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},eP=" ",rP=/(italic|oblique)$/i,nP={},oP=zS((function(t,e,r){var n=nP[t];if(!n){Array.isArray(t)||(t=[t]);for(var o=400,i="normal",a=[],s=0,u=t.length;s<u;++s){var l=t[s].split(" "),c=l[l.length-1].toLowerCase();for(var f in"normal"==c||"italic"==c||"oblique"==c?(i=c,l.pop(),c=l[l.length-1].toLowerCase()):rP.test(c)&&(c=c.replace(rP,""),i=l[l.length-1].replace(c,"")),tP){var h=l.length>1?l[l.length-2].toLowerCase():"";if(c==f||c==f.replace("-","")||h+"-"+c==f){o=tP[f],l.pop(),h&&f.startsWith(h)&&l.pop();break}}"number"==typeof c&&(o=c);var p=l.join(eP).replace("Klokantech Noto Sans","Noto Sans");-1!==p.indexOf(eP)&&(p='"'+p+'"'),a.push(p)}n=nP[t]=[i,o,a]}return n[0]+eP+n[1]+eP+e+"px"+(r?"/"+r:"")+eP+n[2]})),iP="https://api.mapbox.com";function aP(t){return 0!==t.indexOf("mapbox://")?"":t.slice(9)}function sP(t,e){var r=aP(t);if(!r)return decodeURI(new URL(t,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: ".concat(t));var n=r.slice(7);return"".concat(iP,"/styles/v1/").concat(n,"?&access_token=").concat(e)}function uP(t,e,r,n){var o=new URL(t,n),i=aP(t);if(!i)return e?(o.searchParams.has(r)||o.searchParams.set(r,e),decodeURI(o.href)):decodeURI(o.href);if("mapbox.satellite"===i){var a=window.devicePixelRatio>=1.5?"@2x":"";return"https://api.mapbox.com/v4/".concat(i,"/{z}/{x}/{y}").concat(a,".webp?access_token=").concat(e)}return"https://{a-d}.tiles.mapbox.com/v4/".concat(i,"/{z}/{x}/{y}.vector.pbf?access_token=").concat(e)}var lP={},cP={},fP=0;function hP(t){return t.id||(t.id=fP++),t.id}function pP(t){var e=lP[t.id];return e||(e={},lP[hP(t)]=e),e}function yP(t){return t*Math.PI/180}var dP=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}(),vP=new md({extent:ii("EPSG:3857").getExtent(),resolutions:dP});function gP(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}function mP(t,e){for(var r=0,n=e.length;r<n;++r)if(e[r]<t&&r+1<n){var o=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(o)}return n-1}var bP={};function wP(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(e in bP)return n&&(n.request=bP[e][0]),bP[e][1];var o=r.transformRequest&&r.transformRequest(e,t)||e,i=Ne((function(){return o})).then((function(t){return t instanceof Request||(t=new Request(t)),t.headers.get("Accept")||t.headers.set("Accept","application/json"),n&&(n.request=t),fetch(t).then((function(t){return delete bP[e],t.ok?t.json():Promise.reject(new Error("Error fetching source "+e))})).catch((function(t){return delete bP[e],Promise.reject(new Error("Error fetching source "+e))}))}));return bP[e]=[o,i],i}function _P(t,e){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return wP("Style",t=sP(t,e.accessToken),e);try{var r=JSON.parse(t);return Promise.resolve(r)}catch(t){return Promise.reject(t)}}var xP={};function SP(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[e,JSON.stringify(t)].toString(),o=xP[n];if(!o||r.transformRequest){var i;r.transformRequest&&(i=function(t,e){var n=r.transformRequest&&r.transformRequest(e,"Tiles")||e;if(t instanceof mv)t.setLoader((function(e,r,o){Ne((function(){return n})).then((function(r){fetch(r).then((function(t){return t.arrayBuffer()})).then((function(r){var n=t.getFormat().readFeatures(r,{extent:e,featureProjection:o});t.setFeatures(n)})).catch((function(e){return t.setState(Nu.ERROR)}))}))}));else{var o=t.getImage();Ne((function(){return n})).then((function(e){e instanceof Request?fetch(e).then((function(t){return t.blob()})).then((function(t){var e=URL.createObjectURL(t);o.addEventListener("load",(function(){return URL.revokeObjectURL(e)})),o.addEventListener("error",(function(){return URL.revokeObjectURL(e)})),o.src=e})).catch((function(e){return t.setState(Nu.ERROR)})):o.src=e}))}});var a=t.url;if(a&&!t.tiles){var s=uP(a,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))o=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:Bd(s)}),tileLoadFunction:i});else{var u={};o=wP("Source",s,r,u).then((function(t){return t.tiles=t.tiles.map((function(e){return"tms"===t.scheme&&(e=e.replace("{y}","{-y}")),uP(e,r.accessToken,r.accessTokenParam||"access_token",u.request.url)})),Promise.resolve({tileJson:t,tileLoadFunction:i})}))}}else t=Object.assign({},t,{tiles:t.tiles.map((function(n){return"tms"===t.scheme&&(n=n.replace("{y}","{-y}")),uP(n,r.accessToken,r.accessTokenParam||"access_token",e||location.href)}))}),o=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:i});xP[n]=o}return o}function kP(t,e,r,n){var o=document.createElement("canvas"),i=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height];o.width=i[0],o.height=i[1];var a=o.getContext("2d");a.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);var s=a.getImageData(0,0,i[0],i[1]);a.globalCompositeOperation="destination-over",a.fillStyle="rgba(".concat(255*n.r,",").concat(255*n.g,",").concat(255*n.b,",").concat(n.a,")");for(var u=s.data,l=0,c=s.width;l<c;++l)for(var f=0,h=s.height;f<h;++f)u[4*(f*c+l)+3]>0&&a.arc(l,f,r*e.pixelRatio,0,2*Math.PI);return a.fill(),o}function OP(t,e,r){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var o=n.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);for(var i,a,s=o.getImageData(0,0,e.width,e.height),u=s.data,l=0,c=s.width;l<c;++l)for(var f=0,h=s.height;f<h;++f){var p=4*(f*c+l),y=(i=u[p+3]/255,(a=Math.max(0,Math.min(1,(i-.65)/(.85-.65))))*a*(3-2*a));y>0?(u[p+0]=Math.round(255*r.r*y),u[p+1]=Math.round(255*r.g*y),u[p+2]=Math.round(255*r.b*y),u[p+3]=Math.round(255*y)):u[p+3]=0}return o.putImageData(s,0,0),n}var EP,PP=Array(256).join(" ");function jP(t,e){if(e>=.05){for(var r="",n=t.split("\n"),o=PP.slice(0,Math.round(e/.1)),i=0,a=n.length;i<a;++i)i>0&&(r+="\n"),r+=n[i].split("").join(o);return r}return t}function CP(){return EP||(EP=gP(1,1).getContext("2d")),EP}function AP(t,e){return CP().measureText(t).width+(t.length-1)*e}var TP={};function RP(t,e,r,n){if(-1!==t.indexOf("\n")){for(var o=t.split("\n"),i=[],a=0,s=o.length;a<s;++a)i.push(RP(o[a],e,r,n));return i.join("\n")}var u=r+","+e+","+t+","+n,l=TP[u];if(!l){var c=t.split(" ");if(c.length>1){var f=CP();f.font=e;for(var h=f.measureText("M").width*r,p="",y=[],d=0,v=c.length;d<v;++d){var g=c[d],m=p+(p?" ":"")+g;AP(m,n)<=h?p=m:(p&&y.push(p),p=g)}p&&y.push(p);for(var b=0,w=y.length;b<w&&w>1;++b){var _=y[b];if(AP(_,n)<.35*h){var x=b>0?AP(y[b-1],n):1/0,S=b<w-1?AP(y[b+1],n):1/0;y.splice(b,1),w-=1,x<S?(y[b-1]+=" "+_,b-=1):y[b]=_+" "+y[b]}}for(var k=0,O=y.length-1;k<O;++k){var E=y[k],P=y[k+1];if(AP(E,n)>.7*h&&AP(P,n)<.6*h){var j=E.split(" "),C=j.pop();AP(C,n)<.2*h&&(y[k]=j.join(" "),y[k+1]=C+" "+P),O-=1}}l=y.join("\n")}else l=t;l=jP(l,n),TP[u]=l}return l}var IP,LP=/font-family: ?([^;]*);/,MP=/("|')/g;function FP(t){if(!IP){IP={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var o=e[r];try{var i=o.rules||o.cssRules;if(i)for(var a=0,s=i.length;a<s;++a){var u=i[a];if(5==u.type){var l=u.cssText.match(LP);IP[l[1].replace(MP,"")]=!0}}}catch(t){}}}return t in IP}var DP={};function BP(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css",r=t.toString();if(r in DP)return DP[r];for(var n=[],o=0,i=t.length;o<i;++o){t[o]=t[o].replace("Arial Unicode MS","Arial");var a=t[o],s=oP(a,1);pc(s);var u=s.split(" ");n.push([u.slice(3).join(" ").replace(/"/g,""),u[1],u[0]])}for(var l=0,c=n.length;l<c;++l){var f=n[l],h=f[0];if(!FP(h)&&100!==cc.get("".concat(f[2],"\n").concat(f[1]," \n").concat(h))){var p=e.replace("{font-family}",h.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",h.replace(/ /g,"+")).replace("{fontweight}",f[1]).replace("{-fontstyle}",f[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",f[2]);if(!document.querySelector('link[href="'+p+'"]')){var y=document.createElement("link");y.href=p,y.rel="stylesheet",document.head.appendChild(y)}}}return DP[r]=t,t}var NP,zP,GP={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},UP={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},qP=function(t,e){var r=LE(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return r.value},WP={},VP={zoom:0};function YP(t,e,r,n,o,i,a){var s=t.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[s]||(i[s]={});var u,l=i[s];if(!l[r]){var c=(t[e]||WP)[r],f=DE["".concat(e,"_").concat(t.type)][r];void 0===c&&(c=f.default);var h=(u=c,Array.isArray(u)&&u.length>0&&"string"==typeof u[0]&&u[0]in EE);if(!h&&CE(c)&&(c=function(t,e){var r=t.stops;if(!r)return function(t,e){var r=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",r]:r;if("enum"===e.type)return["match",r,Object.keys(e.values),r,t.default];var n=["color"===e.type?"to-color":e.type,r,KS(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}(t,e);var n=r&&"object"===AS(r[0][0]),o=n||void 0!==t.property,i=n||!o;return r=r.map((function(t){return!o&&e.tokens&&"string"==typeof t[1]?[t[0],nk(t[1])]:[t[0],KS(t[1])]})),n?function(t,e,r){for(var n={},o={},i=[],a=0;a<r.length;a++){var s=r[a],u=s[0].zoom;void 0===n[u]&&(n[u]={zoom:u,type:t.type,property:t.property,default:t.default},o[u]=[],i.push(u)),o[u].push([s[0].value,s[1]])}if("exponential"===rk({},e)){var l,c=[JS(t),["linear"],["zoom"]],f=CS(i);try{for(f.s();!(l=f.n()).done;){var h=l.value;ek(c,h,QS(n[h],e,o[h]),!1)}}catch(t){f.e(t)}finally{f.f()}return c}var p,y=["step",["zoom"]],d=CS(i);try{for(d.s();!(p=d.n()).done;){var v=p.value;ek(y,v,QS(n[v],e,o[v]),!0)}}catch(t){d.e(t)}finally{d.f()}return tk(y),y}(t,e,r):i?function(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["zoom"],i=rk(t,e),a=!1;if("interval"===i)n=["step",o],a=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'.concat(i,'"'));var s=void 0!==t.base?t.base:1;n=[JS(t),1===s?["linear"]:["exponential",s],o]}var u,l=CS(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;ek(n,c[0],c[1],a)}}catch(t){l.e(t)}finally{l.f()}return tk(n),n}(t,e,r):QS(t,e,r)}(c,f),h=!0),h){var p=qP(c,f);l[r]=p.evaluate.bind(p)}else"color"==f.type&&(c=HS.parse(c)),l[r]=function(){return c}}return VP.zoom=n,l[r](VP,o,a)}var ZP=!1;function XP(t,e){if(t){if(!ZP&&(0===t.a||0===e))return;var r=t.a;return e=void 0===e?1:e,0===r?"transparent":"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*e+")"}return t}var HP=/\{[^{}}]*\}/g;function KP(t,e){return t.replace(HP,(function(t){return e[t.slice(1,-1)]||""}))}var JP=!1,$P={};function QP(t,e){var r,n,o,i,a,s,u,l,c,f,h,p,y,d,v,g,m,b,w,_,x=t[0],S=x.width,k=x.height,O=x.data,E=new Uint8ClampedArray(O.length),P=2*e.resolution,j=S-1,C=k-1,A=[0,0,0,0],T=2*Math.PI,R=Math.PI/2,I=Math.PI*e.sunEl/180,L=Math.PI*e.sunAz/180,M=Math.cos(I),F=Math.sin(I),D=e.highlightColor,B=e.shadowColor,N=e.accentColor,z=e.encoding;function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mapbox";return"mapbox"===e?.1*(256*t[0]*256+256*t[1]+t[2])-1e4:"terrarium"===e?256*t[0]+t[1]+t[2]/256-32768:void 0}for(n=0;n<=C;++n)for(i=0===n?0:n-1,a=n===C?C:n+1,r=0;r<=j;++r)o=r===j?j:r+1,s=4*(n*S+(0===r?0:r-1)),A[0]=O[s],A[1]=O[s+1],A[2]=O[s+2],A[3]=O[s+3],u=e.vert*G(A,z),s=4*(n*S+o),A[0]=O[s],A[1]=O[s+1],A[2]=O[s+2],A[3]=O[s+3],l=(e.vert*G(A,z)-u)/P,s=4*(i*S+r),A[0]=O[s],A[1]=O[s+1],A[2]=O[s+2],A[3]=O[s+3],u=e.vert*G(A,z),s=4*(a*S+r),A[0]=O[s],A[1]=O[s+1],A[2]=O[s+2],A[3]=O[s+3],c=(e.vert*G(A,z)-u)/P,h=(h=Math.atan2(c,-l))<0?R-h:h>R?T-h+R:R-h,f=Math.atan(Math.sqrt(l*l+c*c)),_=F*Math.cos(f)+M*Math.sin(f)*Math.cos(L-h),p=Math.cos(f),y=255*_,m=Math.min(Math.max(2*e.sunEl,0),1),b=1.875-1.75*e.opacity,w=.5!==e.opacity?R*((Math.pow(b,f)-1)/(Math.pow(b,R)-1)):f,v={r:(1-p)*N.r*m*255,g:(1-p)*N.g*m*255,b:(1-p)*N.b*m*255,a:(1-p)*N.a*m*255},d=Math.abs(((h+L)/Math.PI+.5)%2-1),g={r:(D.r*(1-d)+B.r*d)*y,g:(D.g*(1-d)+B.g*d)*y,b:(D.b*(1-d)+B.b*d)*y,a:(D.a*(1-d)+B.a*d)*y},E[s=4*(n*S+r)]=v.r*(1-d)+g.r,E[s+1]=v.g*(1-d)+g.g,E[s+2]=v.b*(1-d)+g.b,E[s+3]=O[s+3]*e.opacity*m*Math.sin(w);return new ImageData(E,S,k)}function tj(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return t.getExtent()?wd({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():dP}function ej(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((function(t,r){e.accessToken=t,e.accessTokenParam=r}))),e}function rj(t,e){var r,n,o,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=!0;return"string"==typeof a||Array.isArray(a)?i=a:(i=(o=a).source||o.layers,s=o),"string"==typeof s?(r=s,o={}):(r=s.styleUrl,o=s),!1===o.updateSource&&(l=!1),u||(u=o.resolutions),r||"string"!=typeof e||e.trim().startsWith("{")||(r=e),r&&(r=r.startsWith("data:")?location.href:sP(r,o.accessToken),o=ej(r,o)),new Promise((function(a,s){_P(e,o).then((function(e){if(8!=e.version)return s(new Error("glStyle version 8 required."));if(!(t instanceof Cy||t instanceof Yy))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,f,h,p=t instanceof Yy?"vector":"geojson";if(i?n=Array.isArray(i)?e.layers.find((function(t){return t.id===i[0]})).source:i:(n=Object.keys(e.sources).find((function(t){return e.sources[t].type===p})),i=n),!n)return s(new Error("No ".concat(p," source found in the glStyle.")));function y(){if(!l)return Promise.resolve();if(t instanceof Yy)return aj(e.sources[n],r,o).then((function(e){var r=t.getSource();if(r?e!==r&&(r.setTileUrlFunction(e.getTileUrlFunction()),"function"==typeof r.setUrls&&"function"==typeof e.getUrls&&r.setUrls(e.getUrls()),r.format_||(r.format_=e.format_),r.getAttributions()||r.setAttributions(e.getAttributions()),r.getTileLoadFunction()===xS&&r.setTileLoadFunction(e.getTileLoadFunction()),fi(r.getProjection(),e.getProjection())&&(r.tileGrid=e.getTileGrid())):t.setSource(e),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var n=t.getSource().getTileGrid();t.setMaxResolution(n.getResolution(n.getMinZoom()))}}));var i=e.sources[n],a=t.getSource();a&&a.get("mapbox-source")===i||(a=lj(i,r,o));var s=t.getSource();return s?a!==s&&(s.getAttributions()||s.setAttributions(a.getAttributions()),s.format_||(s.format_=a.getFormat()),s.url_=a.getUrl()):t.setSource(a),Promise.resolve()}function d(){if(h||e.sprite&&!c)h?(t.setStyle(h),y().then(a).catch(s)):s(new Error("Something went wrong trying to apply style."));else{if(o.projection&&!u){var r=ii(o.projection).getUnits();"m"!==r&&(u=dP.map((function(t){return t/go[r]})))}h=function(t,e,r){var n,o,i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dP,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if("string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");if($P[function(t,e){return hP(t)+"."+pr(e)}(e,t)]=Array.from(arguments),u)if("undefined"!=typeof Image){var f,h=new Image;Ne((function(){return u})).then((function(t){t instanceof Request?fetch(t).then((function(t){return t.blob()})).then((function(t){f=URL.createObjectURL(t),h.src=f})).catch((function(){})):(h.crossOrigin="anonymous",h.src=t,f&&URL.revokeObjectURL(f))})),h.onload=function(){n=h,o=[h.width,h.height],t.changed(),h.onload=null}}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var p=self;p.postMessage({action:"loadImage",src:u}),p.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===u&&(n=t.data.image,o=[n.width,n.height])}))}for(var y,d=QE(e.layers),v={},g=[],m={},b={},w=pP(e),_=function(t){var e=cP[t.id];return e||(e={},cP[hP(t)]=e),e}(e),x=0,S=d.length;x<S;++x){var k=d[x],O=k.id;if("string"==typeof r&&k.source==r||-1!==r.indexOf(O)){var E=k["source-layer"];if(y){if(k.source!==y)throw new Error('Layer "'.concat(O,'" does not use source "').concat(y))}else{y=k.source;var P=e.sources[y];if(!P)throw new Error('Source "'.concat(y,'" is not defined'));var j=P.type;if("vector"!==j&&"geojson"!==j)throw new Error('Source "'.concat(y,'" is not of type "vector" or "geojson", but "').concat(j,'"'))}var C=v[E];C||(C=[],v[E]=C),C.push({layer:k,index:x}),g.push(O)}}var A=new Dc,T=new Ic,R=[],I=function(r,u,f){var h=r.getProperties(),p=v[h.layer];if(p){var y=a.indexOf(u);-1==y&&(y=mP(u,a));for(var d,g=GP[r.getGeometry().getType()],x={id:r.getId(),properties:h,type:g},S=t.get("mapbox-featurestate")[r.getId()],k=-1,O=function(){var a=p[E],v=a.layer,O=v.id;if(void 0!==f&&f!==O)return 0;var P=v.layout||WP,j=v.paint||WP;if("none"===P.visibility||"minzoom"in v&&y<v.minzoom||"maxzoom"in v&&y>=v.maxzoom)return 0;var C=v.filter;if(!C||function(t,e,r,n,o){return o||console.warn("No filterCache provided to evaluateFilter()"),t in o||(o[t]=NE(e).filter),VP.zoom=n,o[t](VP,r)}(O,C,x,y,_)){var I,L,M,F,D,B;d=v;var N=a.index;if(3==g&&("fill"==v.type||"fill-extrusion"==v.type))if(L=YP(v,"paint",v.type+"-opacity",y,x,w,S),v.type+"-pattern"in j){var z=YP(v,"paint",v.type+"-pattern",y,x,w,S);if(z){var G="string"==typeof z?KP(z,h):z.toString();if(n&&s&&s[G]){++k,(B=R[k])&&B.getFill()&&!B.getStroke()&&!B.getText()||(B=new Vc({fill:new Ic}),R[k]=B),M=B.getFill(),B.setZIndex(N);var U=G+"."+L,q=b[U];if(!q){var W=s[G],V=gP(W.width,W.height),Y=V.getContext("2d");Y.globalAlpha=L,Y.drawImage(n,W.x,W.y,W.width,W.height,0,0,W.width,W.height),q=Y.createPattern(V,"repeat"),b[U]=q}M.setColor(q)}}}else I=XP(YP(v,"paint",v.type+"-color",y,x,w,S),L),v.type+"-outline-color"in j&&(D=XP(YP(v,"paint",v.type+"-outline-color",y,x,w,S),L)),D||(D=I),(I||D)&&(++k,(!(B=R[k])||I&&!B.getFill()||!I&&B.getFill()||D&&!B.getStroke()||!D&&B.getStroke()||B.getText())&&(B=new Vc({fill:I?new Ic:void 0,stroke:D?new Dc:void 0}),R[k]=B),I&&(M=B.getFill()).setColor(I),D&&((F=B.getStroke()).setColor(D),F.setWidth(.5)),B.setZIndex(N));if(1!=g&&"line"==v.type){I=!("line-pattern"in j)&&"line-color"in j?XP(YP(v,"paint","line-color",y,x,w,S),YP(v,"paint","line-opacity",y,x,w,S)):void 0;var Z=YP(v,"paint","line-width",y,x,w,S);I&&Z>0&&(++k,(B=R[k])&&B.getStroke()&&!B.getFill()&&!B.getText()||(B=new Vc({stroke:new Dc}),R[k]=B),(F=B.getStroke()).setLineCap(YP(v,"layout","line-cap",y,x,w,S)),F.setLineJoin(YP(v,"layout","line-join",y,x,w,S)),F.setMiterLimit(YP(v,"layout","line-miter-limit",y,x,w,S)),F.setColor(I),F.setWidth(Z),F.setLineDash(j["line-dasharray"]?YP(v,"paint","line-dasharray",y,x,w,S).map((function(t){return t*Z})):null),B.setZIndex(N))}var X,H,K,J,$,Q,tt,et,rt,nt=!1,ot=null,it=0;if((1==g||2==g)&&"icon-image"in P){var at=YP(v,"layout","icon-image",y,x,w,S);if(at){X="string"==typeof at?KP(at,h):at.toString();var st=void 0,ut=c?c(t,X):void 0;if(n&&s&&s[X]||ut){var lt=YP(v,"layout","icon-rotation-alignment",y,x,w,S);if(2==g){var ct=r.getGeometry();if(ct.getFlatMidpoint||ct.getFlatMidpoints){var ft=ct.getExtent();if(Math.sqrt(Math.max(Math.pow((ft[2]-ft[0])/u,2),Math.pow((ft[3]-ft[1])/u,2)))>150){var ht="MultiLineString"===ct.getType()?ct.getFlatMidpoints():ct.getFlatMidpoint();if(zP||(zP=new hv("Point",NP=[NaN,NaN],[],{},null)),st=zP,NP[0]=ht[0],NP[1]=ht[1],"line"===YP(v,"layout","symbol-placement",y,x,w,S)&&"map"===lt)for(var pt=ct.getStride(),yt=ct.getFlatCoordinates(),dt=0,vt=yt.length-pt;dt<vt;dt+=pt){var gt=yt[dt],mt=yt[dt+1],bt=yt[dt+pt],wt=yt[dt+pt+1],_t=Math.min(gt,bt),xt=Math.min(mt,wt),St=Math.max(gt,bt),kt=Math.max(mt,wt);if(ht[0]>=_t&&ht[0]<=St&&ht[1]>=xt&&ht[1]<=kt){it=Math.atan2(mt-wt,bt-gt);break}}}}}if(2!==g||st){var Ot=YP(v,"layout","icon-size",y,x,w,S),Et=void 0!==j["icon-color"]?YP(v,"paint","icon-color",y,x,w,S):null;if(!Et||0!==Et.a){var Pt=YP(v,"paint","icon-halo-color",y,x,w,S),jt=YP(v,"paint","icon-halo-width",y,x,w,S),Ct="".concat(X,".").concat(Ot,".").concat(jt,".").concat(Pt);if(null!==Et&&(Ct+=".".concat(Et)),!(H=m[Ct])){var At,Tt=function(t,e,r,n){return YP(t,"layout","icon-allow-overlap",e,r,n)?YP(t,"layout","icon-ignore-placement",e,r,n)?"none":"obstacle":"declutter"}(v,y,x,w);"icon-offset"in P&&((At=YP(v,"layout","icon-offset",y,x,w,S).slice(0))[1]*=-1);var Rt=Et?[255*Et.r,255*Et.g,255*Et.b,Et.a]:void 0;if(ut){var It={color:Rt,rotateWithView:"map"===lt,displacement:At,declutterMode:Tt,scale:Ot};"string"==typeof ut?It.src=ut:(It.img=ut,It.imgSize=[ut.width,ut.height]),H=new hf(It)}else{var Lt,Mt,Ft,Dt=s[X];jt?Dt.sdf?(Lt=kP(OP(n,Dt,Et),{x:0,y:0,width:Dt.width,height:Dt.height,pixelRatio:Dt.pixelRatio},jt,Pt),Rt=void 0):Lt=kP(n,Dt,jt,Pt):(Dt.sdf?(i||(i=OP(n,{x:0,y:0,width:o[0],height:o[1]},{r:1,g:1,b:1,a:1})),Lt=i):Lt=n,Mt=[Dt.width,Dt.height],Ft=[Dt.x,Dt.y]),H=new hf({color:Rt,img:Lt,imgSize:o,size:Mt,offset:Ft,rotateWithView:"map"===lt,scale:Ot/Dt.pixelRatio,displacement:At,declutterMode:Tt})}m[Ct]=H}}H&&(++k,(B=R[k])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new Vc,R[k]=B),B.setGeometry(st),H.setRotation(it+yP(YP(v,"layout","icon-rotate",y,x,w,S))),H.setOpacity(YP(v,"paint","icon-opacity",y,x,w,S)),H.setAnchor(UP[YP(v,"layout","icon-anchor",y,x,w,S)]),B.setImage(H),ot=B.getText(),B.setText(void 0),B.setZIndex(N),nt=!0,K=!1)}else K=!0}}}if(1==g&&"circle"===v.type){++k,(B=R[k])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new Vc,R[k]=B);var Bt="circle-radius"in j?YP(v,"paint","circle-radius",y,x,w,S):5,Nt=XP(YP(v,"paint","circle-stroke-color",y,x,w,S),YP(v,"paint","circle-stroke-opacity",y,x,w,S)),zt=XP(YP(v,"paint","circle-color",y,x,w,S),YP(v,"paint","circle-opacity",y,x,w,S)),Gt=YP(v,"paint","circle-stroke-width",y,x,w,S),Ut=Bt+"."+Nt+"."+zt+"."+Gt;(H=m[Ut])||(H=new Cc({radius:Bt,stroke:Nt&&Gt>0?new Dc({width:Gt,color:Nt}):void 0,fill:zt?new Ic({color:zt}):void 0,declutterMode:"none"}),m[Ut]=H),B.setImage(H),ot=B.getText(),B.setText(void 0),B.setGeometry(void 0),B.setZIndex(N),nt=!0}if("text-field"in P){tt=Math.round(YP(v,"layout","text-size",y,x,w,S));var qt=YP(v,"layout","text-font",y,x,w,S);Q=YP(v,"layout","text-line-height",y,x,w,S),($=oP(l?l(qt,e.metadata?e.metadata["ol:webfonts"]:void 0):qt,tt,Q)).includes("sans-serif")||($+=",sans-serif"),et=YP(v,"layout","text-letter-spacing",y,x,w,S),rt=YP(v,"layout","text-max-width",y,x,w,S);var Wt=YP(v,"layout","text-field",y,x,w,S);J="object"===AS(Wt)&&Wt.sections?1===Wt.sections.length?Wt.toString():Wt.sections.reduce((function(t,e,r){var n=e.fontStack?e.fontStack.split(","):qt,o=oP(l?l(n):n,tt*(e.scale||1),Q),i=e.text;if("\n"===i)return t.push("\n",""),t;if(2!=g){for(var a=0,s=(i=RP(i,o,rt,et).split("\n")).length;a<s;++a)a>0&&t.push("\n",""),t.push(i[a],o);return t}t.push(jP(i,et),o)}),[]):KP(Wt,h).trim(),L=YP(v,"paint","text-opacity",y,x,w,S)}if(J&&L&&!K){nt||(++k,(B=R[k])&&B.getText()&&!B.getFill()&&!B.getStroke()||(B=new Vc,R[k]=B),B.setImage(void 0),B.setGeometry(void 0)),B.getText()||B.setText(ot||new vf({padding:[2,2,2,2]})),ot=B.getText();var Vt=P["text-transform"];"uppercase"==Vt?J=Array.isArray(J)?J.map((function(t,e){return e%2?t:t.toUpperCase()})):J.toUpperCase():"lowercase"==Vt&&(J=Array.isArray(J)?J.map((function(t,e){return e%2?t:t.toLowerCase()})):J.toLowerCase());var Yt=Array.isArray(J)?J:2==g?jP(J,et):RP(J,$,rt,et);ot.setText(Yt),ot.setFont($),ot.setRotation(yP(YP(v,"layout","text-rotate",y,x,w,S)));var Zt,Xt=YP(v,"layout","text-anchor",y,x,w,S),Ht=nt||1==g?"point":YP(v,"layout","symbol-placement",y,x,w,S);if("line-center"===Ht?(ot.setPlacement("line"),Zt="center"):ot.setPlacement(Ht),"line"===Ht&&"function"==typeof ot.setRepeat){var Kt=YP(v,"layout","symbol-spacing",y,x,w,S);ot.setRepeat(2*Kt)}ot.setOverflow("point"===Ht);var Jt=YP(v,"paint","text-halo-width",y,x,w,S),$t=YP(v,"layout","text-offset",y,x,w,S),Qt=YP(v,"paint","text-translate",y,x,w,S),te=0,ee=0;if("point"==Ht){Zt="center",-1!==Xt.indexOf("left")?(Zt="left",ee=Jt):-1!==Xt.indexOf("right")&&(Zt="right",ee=-Jt);var re=YP(v,"layout","text-rotation-alignment",y,x,w,S);ot.setRotateWithView("map"==re)}else ot.setMaxAngle(yP(YP(v,"layout","text-max-angle",y,x,w,S))*J.length/Yt.length),ot.setRotateWithView(!1);ot.setTextAlign(Zt);var ne="middle";0==Xt.indexOf("bottom")?(ne="bottom",te=-Jt-.5*(Q-1)*tt):0==Xt.indexOf("top")&&(ne="top",te=Jt+.5*(Q-1)*tt),ot.setTextBaseline(ne);var oe=YP(v,"layout","text-justify",y,x,w,S);ot.setJustify("auto"===oe?void 0:oe),ot.setOffsetX($t[0]*tt+ee+Qt[0]),ot.setOffsetY($t[1]*tt+te+Qt[1]),T.setColor(XP(YP(v,"paint","text-color",y,x,w,S),L)),ot.setFill(T);var ie=XP(YP(v,"paint","text-halo-color",y,x,w,S),L);if(ie){A.setColor(ie),Jt*=2;var ae=.5*tt;A.setWidth(Jt<=ae?Jt:ae),ot.setStroke(A)}else ot.setStroke(void 0);var se=YP(v,"layout","text-padding",y,x,w,S),ue=ot.getPadding();se!==ue[0]&&(ue[0]=se,ue[1]=se,ue[2]=se,ue[3]=se),B.setZIndex(N)}}},E=0,P=p.length;E<P;++E)O();return k>-1?(R.length=k+1,JP&&("set"in r?r.set("mapbox-layer",d):r.getProperties()["mapbox-layer"]=d),R):void 0}};return t.setStyle(I),t.set("mapbox-source",y),t.set("mapbox-layers",g),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),I}(t,e,i,u,c,f,BP,o.getImage),t.getStyle()?y().then(a).catch(s):s(new Error("Nothing to show for source [".concat(n,"]")))}}if(e.sprite){var v=new URL(function(t,e,r){var n=aP(t);if(!n)return decodeURI(new URL(t,r).href);if(0!==n.indexOf("sprites/"))throw new Error("unexpected sprites url: ".concat(t));var o=n.slice(8);return"".concat(iP,"/styles/v1/").concat(o,"/sprite?access_token=").concat(e)}(e.sprite,o.accessToken,r||location.href)),g=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",m=v.origin+v.pathname+g+".json"+v.search;new Promise((function(t,e){wP("Sprite",m,o).then(t).catch((function(r){wP("Sprite",m=v.origin+v.pathname+".json"+v.search,o).then(t).catch(e)}))})).then((function(t){if(void 0===t&&s(new Error("No sprites found.")),c=t,f=v.origin+v.pathname+g+".png"+v.search,o.transformRequest){var e=o.transformRequest(f,"SpriteImage")||f;(e instanceof Request||e instanceof Promise)&&(f=e)}d()})).catch((function(t){s(new Error("Sprites cannot be loaded: ".concat(m,": ").concat(t.message)))}))}else d()})).catch(s)}))}var nj={};function oj(t,e){var r;return t.some((function(t){if(t.id==e)return r=t.source,!0})),r}function ij(t,e,r){var n=new Lx({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),o=n.getTileJSON(),i=n.getTileGrid(),a=ii(r.projection||"EPSG:3857"),s=function(t,e){var r=t.bounds;if(r){var n=li([r[0],r[1]],e),o=li([r[2],r[3]],e);return[n[0],n[1],o[0],o[1]]}return ii(e).getExtent()}(o,a),u=a.getExtent(),l=o.minzoom||0,c=o.maxzoom||22,f={attributions:n.getAttributions(),projection:a,tileGrid:new md({origin:u?qn(u):i.getOrigin(0),extent:s||i.getExtent(),minZoom:l,resolutions:tj(a,e.tileSize).slice(0,c+1),tileSize:i.getTileSize(0)})};return Array.isArray(o.tiles)?f.urls=o.tiles:f.url=o.tiles,f}function aj(t,e,r){return new Promise((function(n,o){SP(t,e,r).then((function(e){var o=e.tileJson,i=e.tileLoadFunction,a=ij(t,o,r);a.tileLoadFunction=i,a.format=new em,n(new _S(a))})).catch(o)}))}function sj(t){var e=t?t.getCode():"EPSG:3857";return"{bbox-".concat(e.toLowerCase().replace(/[^a-z0-9]/g,"-"),"}")}function uj(t,e,r){var n=new Nl;return function(t,e,r){return new Promise((function(n,o){SP(t,e,r).then((function(e){var o=e.tileJson,i=e.tileLoadFunction,a=new Lx({interpolate:void 0===r.interpolate||r.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:o});a.tileGrid=ij(t,o,r).tileGrid,r.projection&&(a.projection=ii(r.projection));var s=a.getTileUrlFunction();i&&a.setTileLoadFunction(i),a.setTileUrlFunction((function(t,e,r){var n=sj(r),o=s(t,e,r);if(-1!=o.indexOf(n)){var i=a.getTileGrid().getTileCoordExtent(t);o=o.replace(n,i.toString())}return o})),a.set("mapbox-source",t),n(a)})).catch((function(t){o(t)}))}))}(t,e,r).then((function(t){n.setSource(t)})).catch((function(){n.setSource(void 0)})),n}function lj(t,e,r){var n=r.projection?new Og({dataProjection:r.projection}):new Og,o=t.data,i={};if("string"==typeof o){var a=uP(o,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){var s=new iS({attributions:t.attribution,format:n,loader:function(t,e,n,o,i){wP("GeoJSON",function(t,e,r){var n=sj(r);return a.replace(n,"".concat(t.join(",")))}(t,0,n),r).then((function(t){var e=s.getFormat().readFeatures(t,{featureProjection:n});s.addFeatures(e),o(e)})).catch((function(e){s.removeLoadedExtent(t),i()}))},strategy:Ux});return s.set("mapbox-source",t),s}var u=new iS({attributions:t.attribution,format:n,url:a,loader:function(t,e,n,o,i){wP("GeoJSON",a,r).then((function(t){var e=u.getFormat().readFeatures(t,{featureProjection:n});u.addFeatures(e),o(e)})).catch((function(e){u.removeLoadedExtent(t),i()}))}});return u}i.features=n.readFeatures(o,{featureProjection:wi()||"EPSG:3857"});var l=new iS(Object.assign({attributions:t.attribution,format:n},i));return l.set("mapbox-source",t),l}function cj(t,e,r,n){var o,i=pP(t),a=t.layers,s=r.type,u=r.source||oj(a,r.ref),l=t.sources[u];if("background"==s)o=function(t,e,r){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new Ls({source:new pd({}),render:function(o){var i=function(t,e,r,n){var o={id:t.id,type:t.type},i=t.layout||{},a=t.paint||{};o.paint=a;var s,u,l=mP(e,r.resolutions||dP);return void 0!==a["background-color"]&&(s=YP(o,"paint","background-color",l,nj,n)),void 0!==a["background-opacity"]&&(u=YP(o,"paint","background-opacity",l,nj,n)),"none"==i.visibility?void 0:XP(s,u)}(t,o.viewState.resolution,e,r);return n.style.backgroundColor=i,n}})}(r,n,i);else if("vector"==l.type)o=function(t,e,r){var n=new Yy({declutter:!0,visible:!1});return aj(t,e,r).then((function(e){e.set("mapbox-source",t),n.setSource(e)})).catch((function(t){n.setSource(void 0)})),n}(l,e,n);else if("raster"==l.type)(o=uj(l,e,n)).setVisible(!r.layout||"none"!==r.layout.visibility),o.on("prerender",function(t,e,r){var n=null;return function(o){t.paint&&"raster-opacity"in t.paint&&o.frameState.viewState.zoom!==n&&(n=o.frameState.viewState.zoom,delete r[t.id],function(t,e,r,n){var o=YP(t,"paint","raster-opacity",r,nj,n);e.setOpacity(o)}(t,e,n,r))}}(r,o,i));else if("geojson"==l.type)o=function(t,e,r){return new Cy({declutter:!0,source:lj(t,e,r),visible:!1})}(l,e,n);else if("raster-dem"==l.type&&"hillshade"==r.type){var c=function(t,e,r){var n=uj(t,e,r);return new Wg({source:new Px({operationType:"image",operation:QP,sources:[n]})})}(l,e,n);o=c,c.getSource().on("beforeoperations",(function(t){var e=t.data;e.resolution=t.resolution;var o=mP(t.resolution,n.resolutions||dP);e.encoding=l.encoding,e.vert=5*YP(r,"paint","hillshade-exaggeration",o,nj,i),e.sunAz=YP(r,"paint","hillshade-illumination-direction",o,nj,i),e.sunEl=35,e.opacity=.3,e.highlightColor=YP(r,"paint","hillshade-highlight-color",o,nj,i),e.shadowColor=YP(r,"paint","hillshade-shadow-color",o,nj,i),e.accentColor=YP(r,"paint","hillshade-accent-color",o,nj,i)})),o.setVisible(!r.layout||"none"!==r.layout.visibility)}var f=u;return o&&o.set("mapbox-source",f),o}function fj(t,e,r,n){var o=[],i=null;if(e instanceof L_){if(!(i=e.getView()).isDef()&&!i.getRotation()&&!i.getResolutions()){var a=n.projection?ii(n.projection):i.getProjection();i=new Es(Object.assign(i.getProperties(),{maxResolution:dP[0]/go[a.getUnits()],projection:n.projection||i.getProjection()})),e.setView(i)}"center"in t&&!i.getCenter()&&i.setCenter(li(t.center,i.getProjection())),"zoom"in t&&void 0===i.getZoom()&&i.setResolution(dP[0]/go[i.getProjection().getUnits()]/Math.pow(2,t.zoom)),i.getCenter()&&void 0!==i.getZoom()||i.fit(i.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:r,options:n});for(var s,u,l,c=t.layers,f=[],h=0,p=c.length;h<p;++h){var y=c[h],d=y.type;if("heatmap"==d)throw new Error("".concat(d," layers are not supported"));(l=y.source||oj(c,y.ref))&&l==u||(f.length&&(o.push(pj(s,f,t,r,e,n)),f=[]),(s=cj(t,r,y,n))instanceof Cy||s instanceof Yy||(f=[]),u=s.get("mapbox-source")),f.push(y.id)}return o.push(pj(s,f,t,r,e,n)),Promise.all(o)}function hj(t,e){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n="string"==typeof t||t instanceof HTMLElement?new L_({target:t}):t,"string"==typeof e){var i=e.startsWith("data:")?location.href:sP(e,o.accessToken);o=ej(i,o),r=new Promise((function(t,r){_P(e,o).then((function(e){fj(e,n,i,o).then((function(){t(n)})).catch(r)})).catch((function(t){r(new Error("Could not load ".concat(e,": ").concat(t.message)))}))}))}else r=new Promise((function(t,r){fj(e,n,!o.styleUrl||o.styleUrl.startsWith("data:")?location.href:sP(o.styleUrl,o.accessToken),o).then((function(){t(n)})).catch(r)}));return r}function pj(t,e,r,n,o){for(var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=24,s=0,u=r.layers,l=0,c=u.length;l<c;++l){var f=u[l];-1!==e.indexOf(f.id)&&(a=Math.min("minzoom"in f?f.minzoom:0,a),s=Math.max("maxzoom"in f?f.maxzoom:24,s))}return new Promise((function(u,l){var c=function(){var c=t.getSource();if(c&&"error"!==c.getState()){if("getTileGrid"in c){var f=c.getTileGrid();if(f){var h=f.getMinZoom();(a>0||h>0)&&t.setMaxResolution(Math.min(vP.getResolution(a),f.getResolution(h))+1e-9),s<24&&t.setMinResolution(vP.getResolution(s)+1e-9)}}else a>0&&t.setMaxResolution(vP.getResolution(a)+1e-9);c instanceof iS||c instanceof _S?rj(t,r,e,Object.assign({styleUrl:n},i)).then((function(){!function(t,e){function r(){var r=e.get("mapbox-style");if(r){var n=QE(r.layers),o=t.get("mapbox-layers"),i=n.filter((function(t){return o.includes(t.id)})).some((function(t){return!t.layout||!t.layout.visibility||"visible"===t.layout.visibility}));t.get("visible")!==i&&t.setVisible(i)}}t.on("change",r),r()}(t,o),u()})).catch(l):u()}else l(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);var f=o.getLayers();-1===f.getArray().indexOf(t)&&f.push(t),t.getSource()?c():t.once("change:source",c)}))}var yj="mapbox-style",dj="baseLayerCache",vj="layerCache",gj="selectableLayers",mj="tooltipLayers",bj="defaultZoomLevel",wj="userLocation",_j="mapDB",xj="isOffline",Sj="offlineWorker",kj="tooManyRequests",Oj="lasso",Ej="followMode",Pj="followed",jj="pin",Cj="layerPickerConfigCache",Aj="layerPickerConfigBaseCache",Tj="layer",Rj="wmn-tooltip",Ij="tooltipBuffer",Lj="feature-picker",Mj="EPSG:4326";function Fj(t){return Fj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fj(t)}function Dj(){Dj=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Fj(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fj(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Bj(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Nj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bj(i,n,o,a,s,"next",t)}function s(t){Bj(i,n,o,a,s,"throw",t)}a(void 0)}))}}var zj,Gj=Object.getOwnPropertyDescriptor(Image.prototype,"src").set;function Uj(t){Object.defineProperty(Image.prototype,"src",{set:function(e){var r=this;if(t.get(xj)){var n=function(){var n=Nj(Dj().mark((function n(){var o,i,a,s;return Dj().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.get("mapDB"),n.next=3,o.tiles.get(e);case 3:(i=n.sent)?(a=URL.createObjectURL(i),s=r.onload,r.onload=function(){URL.revokeObjectURL(a),s()},Gj.call(r,a)):Gj.call(r,e);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else Gj.call(this,e)}})}function qj(){Object.defineProperty(Image.prototype,"src",{set:Gj})}function Wj(t){zj=window.fetch,window.fetch=function(){var e=Nj(Dj().mark((function e(r,n){var o,i,a,s,u;return Dj().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.get("isOffline")){e.next=7;break}return o=t.get("mapDB"),e.next=4,o.tiles.get(r.url);case 4:return i=e.sent,a=JSON.stringify(i),e.abrupt("return",new Response(a));case 7:return e.next=9,zj(r,n);case 9:return 429===(s=e.sent).status&&((u=t.get(kj)||[]).push(r.url),t.set(kj,u)),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function Vj(){window.fetch=zj}function Yj(t){return Yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yj(t)}function Zj(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Xj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xj(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Xj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hj(){Hj=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Yj(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Yj(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Kj(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Jj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kj(i,n,o,a,s,"next",t)}function s(t){Kj(i,n,o,a,s,"throw",t)}a(void 0)}))}}function $j(t){return Qj.apply(this,arguments)}function Qj(){return Qj=Jj(Hj().mark((function t(e){var r,n,o,i,a,s,u,l,c;return Hj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.baseLayers,o=e.isOffline,Array.isArray(n)){t.next=3;break}return t.abrupt("return");case 3:i={},r.set(dj,i),a={},r.set(Aj,a),u=Zj(n),t.prev=8,u.s();case 10:if((l=u.n()).done){t.next=40;break}if((c=l.value).layerId){t.next=15;break}return h.warn("Base layer id not configured"),t.abrupt("continue",38);case 15:if(!o||c.offlineCache){t.next=18;break}return h.warn("Base layer ".concat(c.layerId," is not available offline")),t.abrupt("continue",38);case 18:if(!i[c.layerId]){t.next=21;break}return h.warn("Duplicate base layer id configured: ".concat(c.layerId)),t.abrupt("continue",38);case 21:t.prev=21,t.t0=c.layerType,t.next="xyz"===t.t0?25:"mapbox"===t.t0||"mapbox-style"===t.t0?27:30;break;case 25:return iC(r,c),t.abrupt("break",32);case 27:return t.next=29,nC(r,c);case 29:return t.abrupt("break",32);case 30:return h.warn("Base layer type ".concat(c.layerType," is not supported")),t.abrupt("continue",38);case 32:s||(s=c.layerId),t.next=38;break;case 35:t.prev=35,t.t1=t.catch(21),h.error("Error adding layer: ".concat(t.t1));case 38:t.next=10;break;case 40:t.next=45;break;case 42:t.prev=42,t.t2=t.catch(8),u.e(t.t2);case 45:return t.prev=45,u.f(),t.finish(45);case 48:return t.next=50,tC(r,s);case 50:case"end":return t.stop()}}),t,null,[[8,42,45,48],[21,35]])}))),Qj.apply(this,arguments)}function tC(t,e){return eC.apply(this,arguments)}function eC(){return eC=Jj(Hj().mark((function t(e,r){var n,o,i,a,s,u;return Hj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&r){t.next=2;break}return t.abrupt("return");case 2:for(o in n=e.get(dj))o!==r&&n[o].group.setVisible(!1);if(i=n[r]){t.next=7;break}return t.abrupt("return");case 7:a=Zj(i.group.getLayers().getArray()),t.prev=8,a.s();case 10:if((s=a.n()).done){t.next=22;break}if(!((u=s.value)instanceof Cy||u instanceof Yy)){t.next=20;break}if(Uj(e),Wj(e),!i.style){t.next=18;break}return t.next=18,rj(u,i.style,u.get("mapbox-layers"),{accessToken:i.accessToken},void 0,e);case 18:qj(),Vj();case 20:t.next=10;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(8),a.e(t.t0);case 27:return t.prev=27,a.f(),t.finish(27);case 30:rC(e,i),i.group.setVisible(!0);case 32:case"end":return t.stop()}}),t,null,[[8,24,27,30]])}))),eC.apply(this,arguments)}function rC(t,e){var r=e.backgroundColor,n=e.opacity,o=t.getTargetElement();o&&(o.style.backgroundColor=r,o.style.opacity=n)}function nC(t,e){return oC.apply(this,arguments)}function oC(){return oC=Jj(Hj().mark((function t(e,r){var n,o,i,a,s,u,l,c,f;return Hj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.accessToken,Uj(e),Wj(e),"mapbox"!==r.layerType){t.next=8;break}return t.next=6,hj(e,r.styleUrl,{accessToken:o});case 6:t.next=10;break;case 8:return t.next=10,hj(e,r.styleJSON);case 10:qj(),Vj(),i=r.layerId,a=null===(n=r.offlineCache)||void 0===n?void 0:n.maxZoom,s=e.get(yj),u=e.getTargetElement(),l=u&&u.style.backgroundColor,c=u&&u.style.opacity,f=new uo({visible:!1}),e.addLayer(f),e.getLayers().getArray().slice().forEach((function(t){t instanceof uo||(e.removeLayer(t),f.getLayers().push(t),sC({layer:t,map:e,config:r}),!t.getSource().getAttributions()&&r.attributions&&t.getSource().setAttributions(r.attributions))})),e.get(dj)[i]={id:i,offlineMaxZoom:a,style:s,backgroundColor:l,opacity:c,group:f,accessToken:o},e.get(Aj)[i]={layerId:i,layerType:r.layerType,title:r.title,image:r.image};case 25:case"end":return t.stop()}}),t)}))),oC.apply(this,arguments)}function iC(t,e){var r=new Nl({source:new ov({url:e.source,attributions:e.attributions})}),n=new uo({visible:!0});t.addLayer(n),sC({layer:r,map:t,config:e}),n.getLayers().push(r),t.get(dj)[e.layerId]={id:e.layerId,group:n},t.get(Aj)[e.layerId]={layerId:e.layerId,layerType:e.layerType,title:e.title,image:e.image}}function aC(t){if(t){var e=t.get(dj);for(var r in e)if(e[r].group.getVisible())return r}}function sC(t){var e=t.layer,r=t.map,n=t.config;if(n.offlineCache)if(e instanceof Yy)e.getSource().setTileLoadFunction(uC(r,n));else if(e instanceof Nl){var o=e.getSource();o.setTileLoadFunction(lC(r,o))}else if(e instanceof Cy){var i=e.getSource(),a=i.getUrl();i.setLoader(cC(r,n,i,a))}}var uC=function(t,e){return function(r,n){r.setLoader(function(){var o=Jj(Hj().mark((function o(i,a,s){var u,l,c,f,p,y;return Hj().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!t.get(xj)){o.next=9;break}if(!(l=t.get(_j))){o.next=7;break}return o.next=6,l.tiles.get(n);case 6:u=o.sent;case 7:o.next=13;break;case 9:return o.next=11,xe({method:"GET",url:n,responseType:"arraybuffer"});case 11:c=o.sent,u=c.data;case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(0),h.error("Error loading tile: ".concat(o.t0)),429===(null===(f=o.t0.response)||void 0===f?void 0:f.status)&&t.dispatchEvent({type:"tooManyRequests",layerId:e.layerId});case 19:u?(p=r.getFormat(),y=p.readFeatures(u,{extent:i,featureProjection:s}),r.setFeatures(y)):r.setState(Nu.ERROR);case 20:case"end":return o.stop()}}),o,null,[[0,15]])})));return function(t,e,r){return o.apply(this,arguments)}}())}},lC=function(t,e){return function(){var r=Jj(Hj().mark((function r(n,o){var i,a,s,u,l;return Hj().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==o.indexOf("{bbox-epsg-3857}")&&(i=e.getTileGrid().getTileCoordExtent(n.getTileCoord()),o=o.replace("{bbox-epsg-3857}",i.toString())),a=n.getImage(),!t.get(xj)){r.next=17;break}if(s=t.get(_j),r.prev=4,!s){r.next=9;break}return r.next=8,s.tiles.get(o);case 8:u=r.sent;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),h.error("Error loading tile: ".concat(r.t0));case 14:u?(l=URL.createObjectURL(u),a.onload=function(){return URL.revokeObjectURL(l)},a.src=l):n.setState(Nu.ERROR),r.next=18;break;case 17:a.src=o;case 18:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(t,e){return r.apply(this,arguments)}}()},cC=function(t,e,r,n){return Jj(Hj().mark((function o(){var i,a,s,u;return Hj().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!t.get(xj)){o.next=9;break}if(!(a=t.get(_j))){o.next=7;break}return o.next=6,a.tiles.get(n);case 6:i=o.sent;case 7:o.next=13;break;case 9:return o.next=11,xe({method:"GET",url:n});case 11:s=o.sent,i=s.data;case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(0),h.error("Error loading data: ".concat(o.t0)),429===(null===(u=o.t0.response)||void 0===u?void 0:u.status)&&t.dispatchEvent({type:"tooManyRequests",layerId:e.layerId});case 19:i&&r.addFeatures(r.getFormat().readFeatures(i));case 20:case"end":return o.stop()}}),o,null,[[0,15]])})))},fC=s(280),hC=s.n(fC);function pC(t){return pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pC(t)}function yC(){yC=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==pC(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pC(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function dC(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function vC(){return gC.apply(this,arguments)}function gC(){return(t=yC().mark((function t(){return yC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hC().delete("MapDB");case 2:case"end":return t.stop()}}),t)})),gC=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dC(i,n,o,a,s,"next",t)}function s(t){dC(i,n,o,a,s,"throw",t)}a(void 0)}))}).apply(this,arguments);var t}function mC(t){return mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mC(t)}function bC(){bC=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==mC(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mC(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function wC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wC(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=mC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==mC(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xC(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}var SC=function(t,e,r){t.animate({center:e.getGeometry().flatCoordinates,duration:r,easing:Ii})},kC=function(){var t,e=(t=bC().mark((function t(e){var r,n,o,i,a,s,u,l,c,f;return bC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map,n=e.view,o=e.source,i=e.featureId,a=e.getFeature,s=e.animationDuration,t.next=3,a(i);case 3:u=t.sent,l=new Og,c=l.readFeature(u,{dataProjection:Mj,featureProjection:n.getProjection()}),f=o.getFeatureById(i),c.set(Tj,null==f?void 0:f.get(Tj)),c.set(Pj,!0),o.removeFeature(f),o.addFeature(c),SC(n,c,s),r.set(Ej,_C(_C({},r.get(Ej)),{},{feature:c}));case 13:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xC(i,n,o,a,s,"next",t)}function s(t){xC(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),OC=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.map,n=e.selected,o=e.getFeature,i=e.interval,a=void 0===i?1e3:i,s=e.animationDuration,u=void 0===s?200:s,l=null===(t=r.get(Ej))||void 0===t?void 0:t.followInterval;if(!l&&n){var c=n.getId(),f=r.get(gj),h=r.getView();n.set(Pj,!0);var p=n.get(Tj).get("source");r.set(gj,[]),SC(h,n,u),l=setInterval((function(){kC({map:r,view:h,source:p,featureId:c,animationDuration:u,getFeature:o})}),a),r.set(Ej,{followInterval:l,feature:n,selectableLayers:f})}},EC=function(t){var e=t.get(Ej),r=e.followInterval,n=e.feature,o=e.selectableLayers;t.set(gj,o),n.set(Pj,!1),clearInterval(r),t.set(Ej,{followInterval:void 0})},PC=s(813);function jC(t){return jC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jC(t)}function CC(t){var e=function(t,e){if("object"!=jC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jC(e)?e:String(e)}function AC(t){return AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AC(t)}function TC(t,e){return TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},TC(t,e)}function RC(t){return RC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RC(t)}function IC(t){var e=function(t,e){if("object"!=RC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=RC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==RC(e)?e:String(e)}function LC(t){return LC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LC(t)}function MC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FC(t,e){return FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FC(t,e)}var DC=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=LC(e),function(t,e){if(e&&("object"===RC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return MC(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],LC(t).constructor):e.apply(t,r))}(this,e,[t]))._previousPosition=null,r._currentPosition=null,r.handleWatchPositionSuccess=r.handleWatchPositionSuccess.bind(MC(r)),r.handleWatchPositionError=r.handleWatchPositionError.bind(MC(r)),r.watchId=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FC(t,e)}(e,t),r=e,(n=[{key:"watchPosition",value:function(){this.watchId=navigator.geolocation.watchPosition(this.handleWatchPositionSuccess,this.handleWatchPositionError,this.options)}},{key:"getWatchID",value:function(){return this.watchId}},{key:"handleWatchPositionSuccess",value:function(t){this._currentPosition?this._currentPosition=t:(this._currentPosition=t,this.firePositionEvent()),this._trackPosition&&(this._previousPosition?this.getDistanceTravelled()>=this.distance&&(this.firePositionEvent(),this._previousPosition=t):this._previousPosition=t)}},{key:"handleWatchPositionError",value:function(t){this.firePositionError(t)}},{key:"trackPosition",value:function(){this._trackPosition=!0}},{key:"getCurrentPosition",value:function(){return this._currentPosition}},{key:"getPreviousPosition",value:function(){return this._previousPosition}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IC(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=AC(e),function(t,e){if(e&&("object"===jC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],AC(t).constructor):e.apply(t,void 0))}(this,e)).constructor===e)throw new Error("Cannot create an instance of an abstract Class");return t&&(t.duration&&"number"==typeof t.duration&&(t.duration<5?r._duration=5:r._duration=t.duration,setInterval((function(){r.firePositionEvent()}),1e3*r._duration)),t.distance&&"number"==typeof t.distance&&(t.distance<250?r._distance=250:r._distance=t.distance,r.trackPosition()),r._options={enableHighAccuracy:!1,maximumAge:0,timeout:3e4},t.options&&Object.assign(r._options,t.options)),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TC(t,e)}(e,t),r=e,(n=[{key:"duration",get:function(){return this._duration}},{key:"distance",get:function(){return this._distance}},{key:"options",get:function(){return this._options}},{key:"firePositionEvent",value:function(){var t=this.getCurrentPosition();t&&this.emit("position",t)}},{key:"firePositionError",value:function(t){this.emit("positionError",t)}},{key:"getDistanceTravelled",value:function(){var t=this.getCurrentPosition(),e=this.getPreviousPosition();return t&&e?Ko([e.coords.longitude,e.coords.latitude],[t.coords.longitude,t.coords.latitude]):null}},{key:"watchPosition",value:function(){throw new Error("watchPosition() must be implemented in the inheriting Class")}},{key:"trackPosition",value:function(){throw new Error("trackPosition() must be implemented in the inheriting Class")}},{key:"getCurrentPosition",value:function(){throw new Error("getCurrentPosition() must be implemented in the inheriting Class")}},{key:"getPreviousPosition",value:function(){throw new Error("getPreviousPosition() must be implemented in the inheriting Class")}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CC(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(s.n(PC)()));function BC(t){return BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BC(t)}function NC(){NC=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==BC(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(BC(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function zC(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function GC(t,e){if(e){var r,n={className:"lm-layer-user-location",layerId:"UserLocationLayer",updateWhileAnimating:!0,updateWhileInteracting:!0,source:new iS,visible:e.enable,style:new Vc({image:new hf({anchor:[.5,.5],anchorOrigin:"top-left",anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNDQuMzc1cHgiIGhlaWdodD0iNDQuMzc1cHgiIHZpZXdCb3g9IjAgMCA0NC4zNzUgNDQuMzc1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0NC4zNzUgNDQuMzc1IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOS4zMywxMi43ODVjMC43NzEtMS4yNzYsMS4xOTMtMi43NjksMS4xOTMtNC4zMjdjMC00LjU2LTMuNzYzLTguMjctOC4zODctOC4yNw0KCWMtNC42MTEsMC04LjM2MywzLjcxLTguMzYzLDguMjdjMCwxLjU0MSwwLjQ3MiwzLjA0NSwxLjMyNSw0LjM1Yy0xLjgwNSwxLjIzLTIuNjQyLDMuMTg1LTIuNjQyLDUuMDI4djguNDY5DQoJYzAsMi40MDcsMS4yMiw0LjU3MywzLjE4Myw1Ljc3NGwyLjA3Niw4LjMzMmMwLjQ4MywyLjMzLDIuMTI5LDMuNzc2LDQuMjk2LDMuNzc2YzEuNjU4LDAsMy42MzYtMC45Nyw0LjI0Ni0zLjY4N2wyLjQxNC04LjQ1Nw0KCWMxLjk1MS0xLjI1MiwzLjI0Ni0zLjU5LDMuMjQ2LTYuMDA5di04LjQ3QzMxLjkxOCwxNS41MjQsMzAuOTc2LDEzLjg0OSwyOS4zMywxMi43ODV6Ii8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjMDA4MzhGIiBkPSJNMjQuNzg1LDE0LjA1NWgtNS4zNzVjLTIuMjIxLDAtNC4wODEsMS41NTgtNC4wODEsMy43ODJ2OC40NjljMCwxLjgwNiwxLjIyOCwzLjMxNiwyLjg2MiwzLjgyOWwyLjMyNCw5LjcNCgkJYzAuMjE3LDEuMDY3LDAuNjk1LDEuNTg4LDEuNTQxLDEuNTg4YzAuODQ4LDAsMS4zMTgtMC41NDUsMS41MzctMS41ODhsMi41NjgtOS43MjhjMS42LTAuNTMsMi44ODEtMi4wMjEsMi44ODEtMy44MDR2LTguNDY5DQoJCUMyOS4wNDMsMTUuNjEzLDI3LjAwNiwxNC4wNTUsMjQuNzg1LDE0LjA1NXoiLz4NCgk8ZWxsaXBzZSBmaWxsPSIjMDA4MzhGIiBjeD0iMjIuMDk2IiBjeT0iOC40NiIgcng9IjUuNTI1IiByeT0iNS40NTIiLz4NCjwvZz4NCjwvc3ZnPg0K",opacity:1,rotation:0,scale:1})})},o=new Cy(n);t.addLayer(o),"HTMLGeolocationAPI"===e.provider&&(r=function(t,e){var r=new DC(e);return r.on("position",(function(e){UC(t,e)})),r.on("positionError",(function(e){t.dispatchEvent({type:"positionError",error:e})})),navigator.permissions.query({name:"geolocation"}).then((function(t){"denied"===t.state?h.error("Geolocation permission denied"):"granted"===t.state?(h.info("Geolocation permission granted"),r.watchPosition()):"prompt"===t.state&&(h.info("Geolocation permission prompt"),r.watchPosition()),t.onchange=function(){"denied"===t.state?h.error("Geolocation permission denied"):"granted"===t.state?(h.info("Geolocation permission granted"),r.watchPosition()):"prompt"===t.state&&(h.info("Geolocation permission prompt"),r.watchPosition())}})),r}(t,e)),t.set(wj,{layer:o,config:e,following:null,showCurrentLocation:!1,geo:r})}}function UC(t,e){var r,n=t.get(wj),o=n.layer.getSource();0===o.getFeatures().length?((r=new kv).setId("userLocation"),r.setGeometry(new Xa(yi([e.coords.longitude,e.coords.latitude],"EPSG:4326","EPSG:3857"))),o.addFeature(r)):(r=o.getFeatures()[0]).getGeometry().setCoordinates(yi([e.coords.longitude,e.coords.latitude],"EPSG:4326","EPSG:3857")),n.showCurrentLocation&&(ZC(r,t),n.showCurrentLocation=!1,t.set(wj,n))}function qC(t){var e=t.get(wj);if(e){if(e.following)return;var r=e.layer.getSource().getFeatures()[0];if(r){var n=function(e){return function(t,e){ZC(e.target,t)}(t,e)};e.following={feature:r,handleChange:n},t.set(wj,e),r.on("change",n),ZC(r,t)}}else h.error("User Location Layer does not exists")}function WC(t){var e=t.get(wj);null!=e&&e.following&&(e.following.feature.un("change",e.following.handleChange),e.following=null,t.set(wj,e))}function VC(t,e){return YC.apply(this,arguments)}function YC(){var t;return t=NC().mark((function t(e,r){var n,o,i,a;return NC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.get(wj)).layer){t.next=27;break}if("function"!=typeof r){t.next=16;break}return t.prev=3,n.showCurrentLocation=!0,e.set(wj,n),t.next=8,r();case 8:o=t.sent,UC(e,o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),e.dispatchEvent({type:"positionError",error:t.t0});case 15:return t.abrupt("return");case 16:if("HTMLGeolocationAPI"!==n.config.provider){t.next=21;break}return i=n.layer.getSource(),(a=i.getFeatures()[0])?ZC(a,e,!0):(n.showCurrentLocation=!0,e.set(wj,n)),t.abrupt("return");case 21:if("Abstract"!==n.config.provider){t.next=25;break}return n.showCurrentLocation=!0,e.set(wj,n),t.abrupt("return",xe({method:"get",url:n.config.providers.Abstract.url}).then((function(t){var r={coords:{longitude:t.data.longitude,latitude:t.data.latitude}};UC(e,r)})).catch((function(t){h.error("User location not found: ".concat(t)),e.dispatchEvent({type:"positionError",error:t})})));case 25:t.next=28;break;case 27:h.error("User Location Layer does not exists");case 28:case"end":return t.stop()}}),t,null,[[3,12]])})),YC=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){zC(i,n,o,a,s,"next",t)}function s(t){zC(i,n,o,a,s,"throw",t)}a(void 0)}))},YC.apply(this,arguments)}function ZC(t,e,r){if(t){var n=e.getView();n.setCenter(t.getGeometry().flatCoordinates),r&&n.setZoom(e.get(bj))}else h.error("Feature to center on is not defined")}function XC(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function HC(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return XC({type:"LineString",coordinates:t},e,r)}function KC(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function JC(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function $C(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function QC(t){return"Feature"===t.type?t.geometry:t}function tA(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o=QC(e),i=o.type,a=e.bbox,s=o.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,a))return!1;"Polygon"===i&&(s=[s]);for(var u=!1,l=0;l<s.length&&!u;l++)if(eA(n,s[l][0],r.ignoreBoundary)){for(var c=!1,f=1;f<s[l].length&&!c;)eA(n,s[l][f],!r.ignoreBoundary)&&(c=!0),f++;c||(u=!0)}return u}function eA(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],s=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function rA(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function nA(t,e){!function(t,e){var r,n,o,i,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,y="Feature"===t.type,d=p?t.features.length:1;for(r=0;r<d;r++){for(s=p?t.features[r].geometry:y?t.geometry:t,l=p?t.features[r].properties:y?t.properties:{},c=p?t.features[r].bbox:y?t.bbox:void 0,f=p?t.features[r].id:y?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}(t,(function(t,r,n,o,i){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(XC(t,n,{bbox:o,id:i}),r,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(XC({type:a,coordinates:l},n),r,u))return!1}}))}const oA=function(t){if(!t)throw new Error("geojson is required");var e=[];return nA(t,(function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=$C(n);break;case"LineString":r=[$C(n)]}r.forEach((function(r){var n=function(t,e){var r=[];return t.reduce((function(t,n){var o,i,a,s,u,l,c=HC([t,n],e);return c.bbox=(i=n,a=(o=t)[0],s=o[1],[a<(u=i[0])?a:u,s<(l=i[1])?s:l,a>u?a:u,s>l?s:l]),r.push(c),n})),r}(r,t.properties);n.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),KC(e)};var iA=s(147);function aA(t,e){var r=$C(t),n=$C(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],i=r[0][1],a=r[1][0],s=r[1][1],u=n[0][0],l=n[0][1],c=n[1][0],f=n[1][1],h=(f-l)*(a-o)-(c-u)*(s-i);if(0===h)return null;var p=((c-u)*(i-l)-(f-l)*(o-u))/h,y=((a-o)*(i-l)-(s-i)*(o-u))/h;return p>=0&&p<=1&&y>=0&&y<=1?function(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!JC(t[0])||!JC(t[1]))throw new Error("coordinates must contain numbers");return XC({type:"Point",coordinates:t},void 0,r)}([o+p*(a-o),i+p*(s-i)]):null}const sA=function(t,e){var r={},n=[];if("LineString"===t.type&&(t=XC(t)),"LineString"===e.type&&(e=XC(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=aA(t,e);return o&&n.push(o),KC(n)}var i=iA();return i.load(oA(e)),rA(oA(t),(function(t){rA(i.search(t),(function(e){var o=aA(t,e);if(o){var i=$C(o).join(",");r[i]||(r[i]=!0,n.push(o))}}))})),KC(n)};function uA(t,e){void 0===e&&(e={});var r=QC(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return function(t,e){return void 0===e&&(e={}),lA(QC(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=QC(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return r.forEach((function(t){o.push(lA(t,n))})),KC(o)}(r,e);default:throw new Error("invalid poly")}}function lA(t,e){return t.length>1?function(t,e,r){return void 0===r&&(r={}),XC({type:"MultiLineString",coordinates:t},e,r)}(t,e):HC(t[0],e)}function cA(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(hA(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function fA(t,e){for(var r=0,n=e.coordinates;r<n.length;r++)if(tA(n[r],t))return!0;return sA(e,uA(t)).features.length>0}function hA(t,e,r){var n=r[0]-t[0],o=r[1]-t[1],i=e[0]-t[0],a=e[1]-t[1];return 0==n*a-o*i&&(Math.abs(i)>=Math.abs(a)?i>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}const pA=function(t,e){var r=!0;return nA(t,(function(t){nA(e,(function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!cA(e,t);case"Polygon":return!tA(t,e)}break;case"LineString":switch(e.type){case"Point":return!cA(t,e);case"LineString":return!(sA(t,e).features.length>0);case"Polygon":return!fA(e,t)}break;case"Polygon":switch(e.type){case"Point":return!tA(e,t);case"LineString":return!fA(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++)if(tA(n[r],e))return!0;for(var o=0,i=e.coordinates[0];o<i.length;o++)if(tA(i[o],t))return!0;return sA(uA(t),uA(e)).features.length>0}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)}))})),r};function yA(t){return yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yA(t)}function dA(t){var e=function(t,e){if("object"!=yA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yA(e)?e:String(e)}function vA(t){return vA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vA(t)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gA(t,e)}var mA=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(t,e,r){return e=vA(e),function(t,e){if(e&&("object"===yA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],vA(t).constructor):e.apply(t,void 0))}(this,e),void 0!==n&&void 0===r?o.setFlatCoordinates(n,t):(r=r||0,o.setCenterAndRadius(t,r,n)),o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}(e,t),r=e,(n=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var o=this.flatCoordinates,i=t-o[0],a=e-o[1],s=i*i+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=o[u];else{var l=this.getRadius()/Math.sqrt(s);r[0]=o[0]+l*i,r[1]=o[1]+l*a;for(var c=2;c<this.stride;++c)r[c]=o[c]}return r.length=this.stride,s}return n}},{key:"containsXY",value:function(t,e){var r=this.flatCoordinates,n=t-r[0],o=e-r[1];return n*n+o*o<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return kn(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(t){if(Yn(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||In(t,this.intersectsCoordinate.bind(this))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,o=Sa(n,0,t,this.stride);n[o++]=n[0]+e;for(var i=1,a=this.stride;i<a;++i)n[o++]=n[i];n.length=o,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(ra(r,0,r.length,n,t,e,r)),this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dA(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ga);mA.prototype.transform;const bA=mA;function wA(t){return wA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wA(t)}function _A(){return _A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_A.apply(this,arguments)}function xA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kA(n.key),n)}}function SA(t,e,r){return e&&xA(t.prototype,e),r&&xA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kA(t){var e=function(t,e){if("object"!=wA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wA(e)?e:String(e)}function OA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EA(t,e,r){return e=PA(e),function(t,e){if(e&&("object"===wA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],PA(t).constructor):e.apply(t,r))}function PA(t){return PA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PA(t)}function jA(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CA(t,e)}function CA(t,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CA(t,e)}var AA="drawstart",TA=function(t){function e(t,r){var n;return OA(this,e),(n=EA(this,e,[t])).feature=r,n}return jA(e,t),SA(e)}(Oe);function RA(t,e){return Br(t[0],t[1],e[0],e[1])}function IA(t,e){var r=t.length;return e<0?t[e+r]:e>=r?t[e-r]:t[e]}function LA(t,e,r){var n,o;e<r?(n=e,o=r):(n=r,o=e);var i=Math.ceil(n),a=Math.floor(o);if(i>a)return RA(zA(t,n),zA(t,o));var s=0;n<i&&(s+=RA(zA(t,n),IA(t,i))),a<o&&(s+=RA(IA(t,a),zA(t,o)));for(var u=i;u<a-1;++u)s+=RA(IA(t,u),IA(t,u+1));return s}function MA(t,e,r){if(e instanceof Av)DA(t,e.getCoordinates(),!1,r);else if(e instanceof Uv)for(var n=e.getCoordinates(),o=0,i=n.length;o<i;++o)DA(t,n[o],!1,r);else if(e instanceof vs)for(var a=e.getCoordinates(),s=0,u=a.length;s<u;++s)DA(t,a[s],!0,r);else if(e instanceof Xv)for(var l=e.getCoordinates(),c=0,f=l.length;c<f;++c)for(var h=l[c],p=0,y=h.length;p<y;++p)DA(t,h[p],!0,r);else if(e instanceof eg)for(var d=e.getGeometries(),v=0;v<d.length;++v)MA(t,d[v],r)}var FA={index:-1,endIndex:NaN};function DA(t,e,r,n){for(var o=t[0],i=t[1],a=0,s=e.length-1;a<s;++a){var u=NA(o,i,e[a],e[a+1]);if(0===u.squaredDistance){var l=a+u.along;return void n.push({coordinates:e,ring:r,startIndex:l,endIndex:l})}}}var BA={along:0,squaredDistance:0};function NA(t,e,r,n){var o=r[0],i=r[1],a=n[0]-o,s=n[1]-i,u=0,l=o,c=i;return 0===a&&0===s||(l+=a*(u=Fr(((t-o)*a+(e-i)*s)/(a*a+s*s),0,1)),c+=s*u),BA.along=u,BA.squaredDistance=Ur(Br(t,e,l,c),10),BA}function zA(t,e){var r=t.length,n=Math.floor(e),o=e-n;n>=r?n-=r:n<0&&(n+=r);var i=n+1;i>=r&&(i-=r);var a=t[n],s=a[0],u=a[1],l=t[i];return[s+(l[0]-s)*o,u+(l[1]-u)*o]}var GA=function(t){function e(t){var r;OA(this,e);var n=t;n.stopDown||(n.stopDown=Fe),(r=EA(this,e,[n])).on,r.once,r.un,r.shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.pointerType_,r.freehand_=!1,r.source_=t.source?t.source:null,r.features_=t.features?t.features:null,r.snapTolerance_=t.snapTolerance?t.snapTolerance:12,r.type_=t.type,r.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(r.type_),r.stopClick_=!!t.stopClick,r.minPoints_=t.minPoints?t.minPoints:"Polygon"===r.mode_?3:2,r.maxPoints_="Circle"===r.mode_?2:t.maxPoints?t.maxPoints:1/0,r.finishCondition_=t.finishCondition?t.finishCondition:Me,r.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";var o,i=t.geometryFunction;if(!i){var a,s=r.mode_;"Circle"===s?i=function(t,e,r){var n=e||new bA([NaN,NaN]),o=xi(t[0],r),i=Yo(o,xi(t[t.length-1],r));n.setCenterAndRadius(o,Math.sqrt(i),this.geometryLayout_);var a=wi();return a&&n.transform(r,a),n}:("Point"===s?a=Xa:"LineString"===s?a=Av:"Polygon"===s&&(a=vs),i=function(t,e,r){return e?"Polygon"===s?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])],this.geometryLayout_):e.setCoordinates([],this.geometryLayout_):e.setCoordinates(t,this.geometryLayout_):e=new a(t,this.geometryLayout_),e})}return r.geometryFunction_=i,r.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,r.overlay_=new Cy({source:new iS({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:(o=qc(),function(t,e){return o[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=t.geometryName,r.condition_=t.condition?t.condition:nw,r.freehandCondition_,t.freehand?r.freehandCondition_=Qb:r.freehandCondition_=t.freehandCondition?t.freehandCondition:ow,r.traceCondition_,r.setTrace(t.trace||!1),r.traceState_={active:!1},r.traceSource_=t.traceSource||t.source||null,r.addChangeListener(Cb,r.updateState_),r}return jA(e,t),SA(e,[{key:"setTrace",value:function(t){var e;e=t?!0===t?Qb:t:ew,this.traceCondition_=e}},{key:"setMap",value:function(t){_A(PA(e.prototype),"setMap",this).call(this,t),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(t){t.originalEvent.type===He&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);var r=t.type===Pm.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===Pm.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Pm.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===Pm.POINTERDOWN?n=!1:r&&this.getPointerCount()<2?(n=t.type===Pm.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===Pm.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===Pm.DBLCLICK&&(n=!1),_A(PA(e.prototype),"handleEvent",this).call(this,t)&&n}},{key:"handleDownEvent",value:function(t){var e=this;return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){e.handlePointerMove_(new Em(Pm.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"deactivateTrace_",value:function(){this.traceState_={active:!1}}},{key:"toggleTraceState_",value:function(t){if(this.traceSource_&&this.traceCondition_(t))if(this.traceState_.active)this.deactivateTrace_();else{var e=this.getMap(),r=vn([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(r);if(0!==n.length){var o=function(t,e){for(var r=[],n=0;n<e.length;++n)MA(t,e[n].getGeometry(),r);return r}(t.coordinate,n);o.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:o,targetIndex:-1})}}}},{key:"addOrRemoveTracedCoordinates_",value:function(t,e){var r=t.startIndex<=t.endIndex;r===t.startIndex<=e?r&&e>t.endIndex||!r&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(r&&e<t.endIndex||!r&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}},{key:"removeTracedCoordinates_",value:function(t,e){if(t!==e){var r=0;if(t<e){var n=Math.ceil(t),o=Math.floor(e);o===e&&(o-=1),r=o-n+1}else{var i=Math.floor(t),a=Math.ceil(e);a===e&&(a+=1),r=i-a+1}r>0&&this.removeLastPoints_(r)}}},{key:"addTracedCoordinates_",value:function(t,e,r){if(e!==r){var n=[];if(e<r){var o=Math.ceil(e),i=Math.floor(r);i===r&&(i-=1);for(var a=o;a<=i;++a)n.push(IA(t.coordinates,a))}else{var s=Math.floor(e),u=Math.ceil(r);u===r&&(u+=1);for(var l=s;l>=u;--l)n.push(IA(t.coordinates,l))}n.length&&this.appendCoordinates(n)}}},{key:"updateTrace_",value:function(t){var e=this.traceState_;if(e.active&&!(-1===e.targetIndex&&Zo(e.startPx,t.pixel)<this.snapTolerance_)){var r=function(t,e,r,n){for(var o=t[0],i=t[1],a=1/0,s=-1,u=NaN,l=0;l<e.targets.length;++l){for(var c=e.targets[l],f=c.coordinates,h=1/0,p=void 0,y=0;y<f.length-1;++y){var d=NA(o,i,f[y],f[y+1]);d.squaredDistance<h&&(h=d.squaredDistance,p=y+d.along)}h<a&&(a=h,c.ring&&e.targetIndex===l&&(c.endIndex>c.startIndex?p<c.startIndex&&(p+=f.length):c.endIndex<c.startIndex&&p>c.startIndex&&(p-=f.length)),u=p,s=l)}var v=e.targets[s],g=v.ring;if(e.targetIndex===s&&g){var m=zA(v.coordinates,u);Zo(r.getPixelFromCoordinate(m),e.startPx)>n&&(g=!1)}if(g){var b=v.coordinates,w=b.length,_=v.startIndex,x=u;if(_<x){var S=LA(b,_,x);LA(b,_,x-w)<S&&(u-=w)}else{var k=LA(b,_,x);LA(b,_,x+w)<k&&(u+=w)}}return FA.index=s,FA.endIndex=u,FA}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==r.index){if(-1!==e.targetIndex){var n=e.targets[e.targetIndex];this.removeTracedCoordinates_(n.startIndex,n.endIndex)}var o=e.targets[r.index];this.addTracedCoordinates_(o,o.startIndex,r.endIndex)}else{var i=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(i,r.endIndex)}e.targetIndex=r.index;var a=e.targets[e.targetIndex];a.endIndex=r.endIndex;var s=zA(a.coordinates,a.endIndex),u=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(u[0]),Math.round(u[1])]}}},{key:"handleUpEvent",value:function(t){var e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){var n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(t.pixel,r)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}},{key:"handlePointerMove_",value:function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],o=e[1]-r[1],i=n*n+o*o;if(this.shouldHandle_=this.freehand_?i>this.squaredClickTolerance_:i<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}},{key:"atFinish_",value:function(t,e){var r=!1;if(this.sketchFeature_){var n=!1,o=[this.finishCoordinate_],i=this.mode_;if("Point"===i)r=!0;else if("Circle"===i)r=2===this.sketchCoords_.length;else if("LineString"===i)n=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===i){var a=this.sketchCoords_;n=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],o=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(n)for(var s=this.getMap(),u=0,l=o.length;u<l;u++){var c=o[u],f=s.getPixelFromCoordinate(c),h=t[0]-f[0],p=t[1]-f[1],y=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(h*h+p*p)<=y){this.finishCoordinate_=c;break}}}return r}},{key:"createOrUpdateSketchPoint_",value:function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new kv(new Xa(t)),this.updateSketchFeatures_())}},{key:"createOrUpdateCustomSketchLine_",value:function(t){this.sketchLine_||(this.sketchLine_=new kv);var e=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),r.changed()):(r=new Av(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(r))}},{key:"startDrawing_",value:function(t){for(var e=this.getMap().getView().getProjection(),r=va(this.geometryLayout_);t.length<r;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new kv(new Av(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new kv,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new TA(AA,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(t){for(var e,r,n=this.getMap(),o=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),a=va(this.geometryLayout_);t.length<a;)t.push(0);"Point"===this.mode_?r=this.sketchCoords_:"Polygon"===this.mode_?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=t[0],r[1]=t[1],this.geometryFunction_(this.sketchCoords_,o,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===o.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(o):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(t){var e,r,n=this.sketchFeature_.getGeometry(),o=this.getMap().getView().getProjection(),i=this.mode_;"LineString"===i||"Circle"===i?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,o)):"Polygon"===i&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,o)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()}},{key:"removeLastPoints_",value:function(t){if(this.sketchFeature_){for(var e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_,o=0;o<t;++o){var i=void 0;if("LineString"===n||"Circle"===n){if((i=this.sketchCoords_).splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var a=this.finishCoordinate_.slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(i,e,r),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===n){(i=this.sketchCoords_[0]).splice(-2,1);var s=this.sketchLine_.getGeometry();if(i.length>=2){var u=i[i.length-2].slice();i[i.length-1]=u,this.createOrUpdateSketchPoint_(u)}s.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,e,r)}if(1===i.length){this.abortDrawing();break}}this.updateSketchFeatures_()}}},{key:"removeLastPoint",value:function(){this.removeLastPoints_(1)}},{key:"finishDrawing",value:function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,r,n)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new Fv([e])):"MultiLineString"===this.type_?t.setGeometry(new Uv([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Xv([e])),this.dispatchEvent(new TA("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}},{key:"abortDrawing",value:function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new TA("drawabort",t))}},{key:"appendCoordinates",value:function(t){var e,r=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(t[0]),"LineString"===r||"Circle"===r)e=this.sketchCoords_;else{if("Polygon"!==r)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&e.shift(),e.pop();for(var o=0;o<t.length;o++)this.addToDrawing_(t[o]);var i=t[t.length-1];this.addToDrawing_(i),this.modifyDrawing_(i)}},{key:"extend",value:function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new kv(new Xa(r)),this.updateSketchFeatures_(),this.dispatchEvent(new TA(AA,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}},{key:"updateState_",value:function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}]),e}(Hb);const UA=GA;function qA(t){return qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qA(t)}function WA(){return WA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},WA.apply(this,arguments)}function VA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZA(n.key),n)}}function YA(t,e,r){return e&&VA(t.prototype,e),r&&VA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZA(t){var e=function(t,e){if("object"!=qA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qA(e)?e:String(e)}function XA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HA(t,e,r){return e=JA(e),function(t,e){if(e&&("object"===qA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return KA(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],JA(t).constructor):e.apply(t,r))}function KA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JA(t){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JA(t)}function $A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QA(t,e)}var tT=function(t){function e(t,r,n,o){var i;return XA(this,e),(i=HA(this,e,[t])).selected=r,i.deselected=n,i.mapBrowserEvent=o,i}return $A(e,t),YA(e)}(Oe),eT={},rT=function(t){function e(t){var r,n,o;if(XA(this,e),(r=HA(this,e)).on,r.once,r.un,t=t||{},r.boundAddFeature_=r.addFeature_.bind(KA(r)),r.boundRemoveFeature_=r.removeFeature_.bind(KA(r)),r.condition_=t.condition?t.condition:rw,r.addCondition_=t.addCondition?t.addCondition:ew,r.removeCondition_=t.removeCondition?t.removeCondition:ew,r.toggleCondition_=t.toggleCondition?t.toggleCondition:ow,r.multi_=!!t.multi&&t.multi,r.filter_=t.filter?t.filter:Me,r.hitTolerance_=t.hitTolerance?t.hitTolerance:0,r.style_=void 0!==t.style?t.style:(Ie((n=qc()).Polygon,n.LineString),Ie(n.GeometryCollection,n.LineString),function(t){return t.getGeometry()?n[t.getGeometry().getType()]:null}),r.features_=t.features||new pn,t.layers)if("function"==typeof t.layers)o=t.layers;else{var i=t.layers;o=function(t){return i.includes(t)}}else o=Me;return r.layerFilter_=o,r.featureLayerAssociation_={},r}return $A(e,t),YA(e,[{key:"addFeatureLayerAssociation_",value:function(t,e){this.featureLayerAssociation_[pr(t)]=e}},{key:"getFeatures",value:function(){return this.features_}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(t){return this.featureLayerAssociation_[pr(t)]}},{key:"setHitTolerance",value:function(t){this.hitTolerance_=t}},{key:"setMap",value:function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),WA(JA(e.prototype),"setMap",this).call(this,t),t?(this.features_.addEventListener($r,this.boundAddFeature_),this.features_.addEventListener(Qr,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener($r,this.boundAddFeature_),this.features_.removeEventListener(Qr,this.boundRemoveFeature_))}},{key:"addFeature_",value:function(t){var e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){var r=this.getMap().getAllLayers().find((function(t){if(t instanceof Cy&&t.getSource()&&t.getSource().hasFeature(e))return t}));r&&this.addFeatureLayerAssociation_(e,r)}}},{key:"removeFeature_",value:function(t){this.style_&&this.restorePreviousStyle_(t.element)}},{key:"getStyle",value:function(){return this.style_}},{key:"applySelectedStyle_",value:function(t){var e=pr(t);e in eT||(eT[e]=t.getStyle()),t.setStyle(this.style_)}},{key:"restorePreviousStyle_",value:function(t){for(var r=this.getMap().getInteractions().getArray(),n=r.length-1;n>=0;--n){var o=r[n];if(o!==this&&o instanceof e&&o.getStyle()&&-1!==o.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(o.getStyle())}var i=pr(t);t.setStyle(eT[i]),delete eT[i]}},{key:"removeFeatureLayerAssociation_",value:function(t){delete this.featureLayerAssociation_[pr(t)]}},{key:"handleEvent",value:function(t){var e=this;if(!this.condition_(t))return!0;var r=this.addCondition_(t),n=this.removeCondition_(t),o=this.toggleCondition_(t),i=!r&&!n&&!o,a=t.map,s=this.getFeatures(),u=[],l=[];if(i){ze(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,(function(t,r){if(t instanceof kv&&e.filter_(t,r))return e.addFeatureLayerAssociation_(t,r),l.push(t),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;c>=0;--c){var f=s.item(c),h=l.indexOf(f);h>-1?l.splice(h,1):(s.remove(f),u.push(f))}0!==l.length&&s.extend(l)}else{a.forEachFeatureAtPixel(t.pixel,(function(t,i){if(t instanceof kv&&e.filter_(t,i))return!r&&!o||s.getArray().includes(t)?(n||o)&&s.getArray().includes(t)&&(u.push(t),e.removeFeatureLayerAssociation_(t)):(e.addFeatureLayerAssociation_(t,i),l.push(t)),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=u.length-1;p>=0;--p)s.remove(u[p]);s.extend(l)}return(l.length>0||u.length>0)&&this.dispatchEvent(new tT("select",l,u,t)),!0}}]),e}(Fb);const nT=rT;var oT=s(546),iT=s.n(oT);function aT(t){return aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aT(t)}function sT(t){var e=function(t,e){if("object"!=aT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=aT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aT(e)?e:String(e)}function uT(t){return uT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uT(t)}function lT(t,e){return lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lT(t,e)}var cT="element",fT="map",hT="offset",pT="position",yT="positioning",dT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=uT(e),function(t,e){if(e&&("object"===aT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,[],uT(t).constructor):e.apply(t,void 0))}(this,e)).on,r.once,r.un,r.options=t,r.id=t.id,r.insertFirst=void 0===t.insertFirst||t.insertFirst,r.stopEvent=void 0===t.stopEvent||t.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute",r.element.style.pointerEvents="auto",r.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(cT,r.handleElementChanged),r.addChangeListener(fT,r.handleMapChanged),r.addChangeListener(hT,r.handleOffsetChanged),r.addChangeListener(pT,r.handlePositionChanged),r.addChangeListener(yT,r.handlePositioningChanged),void 0!==t.element&&r.setElement(t.element),r.setOffset(void 0!==t.offset?t.offset:[0,0]),r.setPositioning(t.positioning||"top-left"),void 0!==t.position&&r.setPosition(t.position),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lT(t,e)}(e,t),r=e,n=[{key:"getElement",value:function(){return this.get(cT)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(fT)||null}},{key:"getOffset",value:function(){return this.get(hT)}},{key:"getPosition",value:function(){return this.get(pT)}},{key:"getPositioning",value:function(){return this.get(yT)}},{key:"handleElementChanged",value:function(){Cu(this.element);var t=this.getElement();t&&this.element.appendChild(t)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&(ju(this.element),nr(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=er(t,Dm,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(t){this.set(cT,t)}},{key:"setMap",value:function(t){this.set(fT,t)}},{key:"setOffset",value:function(t){this.set(hT,t)}},{key:"setPosition",value:function(t){this.set(pT,t)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(pT)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[Ou(n),Eu(n)]),i=void 0===(t=t||{}).margin?20:t.margin;if(!_n(r,o)){var a=o[0]-r[0],s=r[2]-o[2],u=o[1]-r[1],l=r[3]-o[3],c=[0,0];if(a<0?c[0]=a-i:s<0&&(c[0]=Math.abs(s)+i),u<0?c[1]=u-i:l<0&&(c[1]=Math.abs(l)+i),0!==c[0]||0!==c[1]){var f=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(f);if(!h)return;var p=[h[0]+c[0],h[1]+c[1]],y=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:y.duration,easing:y.easing})}}}}},{key:"getRect",value:function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]}},{key:"setPositioning",value:function(t){this.set(yT,t)}},{key:"setVisible",value:function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}},{key:"updatePixelPosition",value:function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?s="-100%":"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(s="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?u="-100%":"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(u="-50%");var l="translate(".concat(s,", ").concat(u,") translate(").concat(i,", ").concat(a,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l)}},{key:"getOptions",value:function(){return this.options}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sT(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Or);const vT=dT;function gT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mT(t){if(!t.getOverlayById(Lj)){var e=document.createElement("div");e.className="wmn-feature-picker",e.addEventListener("pointermove",(function(t){return t.stopPropagation()}));var r=new vT({id:Lj,element:e,positioning:"bottom-center"});t.addOverlay(r)}}function bT(t){var e,r=t.map,n=t.features,o=t.coordinates,i=t.featurePickerConfig,a=t.clickCallback;null!=i&&i.itemContent&&(e=iT().compile(i.itemContent));var s,u=[],l=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return gT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gT(t,e):void 0}}(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(n);try{var c=function(){var t=s.value,n=document.createElement("div");n.className="wmn-feature-picker-item",n.innerHTML=e?e(t.getProperties()):t.getId(),n.addEventListener("click",(function(){a({map:r,features:t}),wT(r)})),u.push(n)};for(l.s();!(s=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}var f=r.getOverlayById(Lj),h=f.getElement();h.style.display="",h.innerHTML="",h.append.apply(h,u),f.setPosition(o)}function wT(t){var e=t.getOverlayById(Lj).getElement();e.style.display="none",e.innerHTML=""}function _T(t){return _T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_T(t)}function xT(t){var e=function(t,e){if("object"!=_T(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_T(e)?e:String(e)}function ST(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kT(){return kT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},kT.apply(this,arguments)}function OT(t){return OT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OT(t)}function ET(t,e){return ET=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ET(t,e)}var PT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=OT(e),function(t,e){if(e&&("object"===_T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ST(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],OT(t).constructor):e.apply(t,r))}(this,e,[{attributions:t.attributions,wrapX:t.wrapX}])).resolution=void 0,r.distance=void 0!==t.distance?t.distance:20,r.minDistance=t.minDistance||0,r.interpolationRatio=0,r.features=[],r.geometryFunction=t.geometryFunction||function(t){var e=t.getGeometry();return Mr(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},r.createCustomCluster_=t.createCluster,r.source=null,r.boundRefresh_=r.refresh.bind(ST(r)),r.updateDistance(r.distance,r.minDistance),r.setSource(t.source||null),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ET(t,e)}(e,t),r=e,n=[{key:"clear",value:function(t){this.features.length=0,kT(OT(e.prototype),"clear",this).call(this,t)}},{key:"getDistance",value:function(){return this.distance}},{key:"getSource",value:function(){return this.source}},{key:"loadFeatures",value:function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.resolution=e,this.refresh())}},{key:"setDistance",value:function(t){this.updateDistance(t,this.minDistance)}},{key:"setMinDistance",value:function(t){this.updateDistance(this.distance,t)}},{key:"getMinDistance",value:function(){return this.minDistance}},{key:"setSource",value:function(t){this.source&&this.source.removeEventListener(Xe,this.boundRefresh_),this.source=t,t&&t.addEventListener(Xe,this.boundRefresh_),this.refresh()}},{key:"refresh",value:function(){this.clear(),this.cluster(),this.addFeatures(this.features)}},{key:"updateDistance",value:function(t,e){var r=0===t?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=e,this.interpolationRatio=r,n&&this.refresh()}},{key:"cluster",value:function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},o=0,i=r.length;o<i;o++){var a=r[o];if(!(pr(a)in n)){var s=this.geometryFunction(a);if(s){En(s.getCoordinates(),t),gn(t,e,t);var u=this.source.getFeaturesInExtent(t).filter((function(t){var e=pr(t);return!(e in n)&&(n[e]=!0,!0)}));this.features.push(this.createCluster(u,t))}}}}},{key:"createCluster",value:function(t,e){for(var r=[0,0],n=t.length-1;n>=0;--n){var o=this.geometryFunction(t[n]);o?Uo(r,o.getCoordinates()):t.splice(n,1)}Vo(r,1/t.length);var i=Dn(e),a=this.interpolationRatio,s=new Xa([r[0]*(1-a)+i[0]*a,r[1]*(1-a)+i[1]*a]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new kv({geometry:s,features:t})}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xT(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(iS);const jT=PT;function CT(t){return CT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CT(t)}function AT(){AT=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==CT(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(CT(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function TT(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function RT(t){var e=ci(Wn(t)),r=ci(Mn(t));return"".concat(r[0],",").concat(r[1],",").concat(e[0],",").concat(e[1])}function IT(t){return LT.apply(this,arguments)}function LT(){var t;return t=AT().mark((function t(e){var r,n,o,i,a,s,u,l,c,f,h,p,y,d,v,g,m,b,w,_;return AT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.source,n=e.fields,o=e.extent,i=e.serverUrl,a=e.retrieveAll,s=void 0!==a&&a,u=e.scrollCallbackAsync,l=e.getAccessToken,!r.internalSource){t.next=50;break}return c=r.maxResults||1e4,f=iT().compile(r.url),"bbox"===r.loadingStrategy&&(h=RT(o)),n&&Array.isArray(n[r.internalSource])&&(p=n[r.internalSource].join()),t.t0=xe,t.t1=i+f({bbox:h,fields:p,retrieveAll:s}),t.t2="Bearer ",t.next=11,l();case 11:return t.t3=t.sent,t.t4=t.t2.concat.call(t.t2,t.t3),t.t5={"Cache-Control":"no-cache",Authorization:t.t4},t.t6={method:"GET",url:t.t1,headers:t.t5},t.next=17,(0,t.t0)(t.t6);case 17:if(y=t.sent,!(d=y.data).scrollId){t.next=47;break}if(v=d.scrollId,g=v&&d.features.features.length===c,!u){t.next=25;break}return t.next=25,u(d.features,g);case 25:if(!g){t.next=46;break}return t.t7=xe,t.t8=i+f({bbox:h,fields:p,scrollId:v}),t.t9="Bearer ",t.next=31,l();case 31:return t.t10=t.sent,t.t11=t.t9.concat.call(t.t9,t.t10),t.t12={"Cache-Control":"no-cache",Authorization:t.t11},t.t13={method:"GET",url:t.t8,headers:t.t12},t.next=37,(0,t.t7)(t.t13);case 37:if(m=t.sent,b=m.data,v=b.scrollId,g=v&&b.features.features.length===c,!u){t.next=44;break}return t.next=44,u(b.features,g);case 44:t.next=25;break;case 46:return t.abrupt("return");case 47:return t.abrupt("return",d.features);case 50:return t.next=52,xe({method:"GET",url:r.url});case 52:return w=t.sent,_=w.data,t.abrupt("return",_);case 55:case"end":return t.stop()}}),t)})),LT=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){TT(i,n,o,a,s,"next",t)}function s(t){TT(i,n,o,a,s,"throw",t)}a(void 0)}))},LT.apply(this,arguments)}var MT=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function FT(t){return FT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FT(t)}function DT(t){var e=function(t,e){if("object"!=FT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=FT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==FT(e)?e:String(e)}function BT(t){return BT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BT(t)}function NT(t,e){return NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NT(t,e)}var zT=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},o=0;return t.stroke&&(o=t.stroke.getWidth()),(r=function(t,e,r){return e=BT(e),function(t,e){if(e&&("object"===FT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],BT(t).constructor):e.apply(t,r))}(this,e,[{radius:n.radius+o,fill:new Ic({color:[0,0,0]}),rotation:n.rotation,displacement:n.displacement,snapToPixel:n.snapToPixel,declutterMode:n.declutterMode}])).setScale(n.scale||1),r._stroke=n.stroke,r._radius=n.radius||20,r._donutratio=n.donutRatio||.5,r._type=n.type,r._offset=[n.offsetX?n.offsetX:0,n.offsetY?n.offsetY:0],r._animation="number"==typeof n.animation?{animate:!0,step:n.animation}:r._animation={animate:!1,step:1},r._max=n.max,r._data=n.data,n.colors instanceof Array?r._colors=n.colors:(r._colors=zT.colors[n.colors],r._colors||(r._colors=zT.colors.classic)),r.renderChart_(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NT(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new zT({type:this._type,radius:this._radius,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:!!this.getSnapToPixel&&this.getSnapToPixel(),stroke:this._stroke,colors:this._colors,offsetX:this._offset[0],offsetY:this._offset[1],animation:this._animation,declutterMode:this.getDeclutterMode?this.getDeclutterMode():null});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}},{key:"getData",value:function(){return this._data}},{key:"setData",value:function(t){this._data=t,this.renderChart_()}},{key:"getRadius",value:function(){return this._radius}},{key:"setRadius",value:function(t,e){this._radius=t,this.donuratio_=e||this.donuratio_,this.renderChart_()}},{key:"setAnimation",value:function(t){if(!1===t){if(0==this._animation.animate)return;this._animation.animate=!1}else{if(this._animation.step==t)return;this._animation.animate=!0,this._animation.step=t}this.renderChart_()}},{key:"renderChart_",value:function(t){if(t){var e,r=0;this._stroke&&(e=pu(this._stroke.getColor()),r=this._stroke.getWidth());var n=this.getImage(t),o=n.getContext("2d");o.save(),o.setTransform(t,0,0,t,0,0),o.clearRect(0,0,n.width,n.height),o.lineJoin="round";var i,a,s=0;for(i=0;i<this._data.length;i++)s+=this._data[i];o.translate(0,0);var u=this._animation.animate?this._animation.step:1;switch(this._type){case"donut":case"pie3D":case"pie":var l,c=Math.PI*(u-1.5);for(a=n.width/2/t,o.strokeStyle=e,o.lineWidth=r,o.save(),"pie3D"==this._type&&(o.translate(0,.3*a),o.scale(1,.7),o.beginPath(),o.fillStyle="#369",o.arc(a,1.4*a,this._radius*u,0,2*Math.PI),o.fill(),o.stroke()),"donut"==this._type&&(o.save(),o.beginPath(),o.rect(0,0,2*a,2*a),o.arc(a,a,this._radius*u*this._donutratio,0,2*Math.PI),o.clip("evenodd")),i=0;i<this._data.length;i++)o.beginPath(),o.moveTo(a,a),o.fillStyle=this._colors[i%this._colors.length],l=c+2*Math.PI*this._data[i]/s*u,o.arc(a,a,this._radius*u,c,l),o.closePath(),o.fill(),o.stroke(),c=l;"donut"==this._type&&(o.restore(),o.beginPath(),o.strokeStyle=e,o.lineWidth=r,o.arc(a,a,this._radius*u*this._donutratio,Math.PI*(u-1.5),c),o.stroke()),o.restore();break;default:var f=0;if(this._max)f=this._max;else for(i=0;i<this._data.length;i++)f<this._data[i]&&(f=this._data[i]);var h=Math.min(5,2*this._radius/this._data.length);a=n.width/2/t;var p,y=n.width/t-r,d=a-this._data.length*h/2;for(o.strokeStyle=e,o.lineWidth=r,i=0;i<this._data.length;i++){o.beginPath(),o.fillStyle=this._colors[i%this._colors.length],p=d+h;var v=this._data[i]/f*2*this._radius*u;o.rect(d,y-v,h,v),o.closePath(),o.fill(),o.stroke(),d=p}}if(o.restore(),!this.setDisplacement){var g=this.getAnchor();g[0]=a-this._offset[0],g[1]=a-this._offset[1]}}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderChart_(t),this.getPixelRatio&&1!==t&&this.renderChart_(1)):this.renderChart_(1)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DT(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Sc);zT.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};const GT=zT;var UT,qT,WT,VT,YT,ZT=s(369),XT=(UT=new Ic({color:"rgba(255,255,255,0.4)"}),qT=new Dc({color:"#3399CC",width:1.25}),[new Vc({image:new Cc({fill:UT,stroke:qT,radius:5}),fill:UT,stroke:qT})]),HT=(WT=[255,255,255,1],VT=[0,153,255,1],(YT={}).Polygon=[new Vc({fill:new Ic({color:[255,255,255,.5]}),stroke:new Dc({color:VT,width:3})})],YT.MultiPolygon=YT.Polygon,YT.LineString=[new Vc({stroke:new Dc({color:WT,width:5})}),new Vc({stroke:new Dc({color:VT,width:3})})],YT.MultiLineString=YT.LineString,YT.Point=[new Vc({image:new Cc({radius:6,fill:new Ic({color:VT}),stroke:new Dc({color:WT,width:1.5})}),zIndex:1/0})],YT.MultiPoint=YT.Point,YT.GeometryCollection=YT.Polygon.concat(YT.LineString,YT.Point),YT),KT={};function JT(t,e,r,n){if(t){var o,i,a,s,u=t.size;if(Object.prototype.hasOwnProperty.call(t,"geo"))o=new Dc({color:t.geo.outline,width:t.geo.outlineWidth,lineDash:t.geo.lineDash}),i=new Ic({color:t.geo.fill});else if(Object.prototype.hasOwnProperty.call(t,"icon")){var l;t.icon.key&&n&&(l=(0,ZT.getValueFromObj)(n,t.icon.key)),l||(l=t.icon.url),a={anchor:t.icon.anchor,anchorOrigin:t.icon.anchorOrigin,anchorXUnits:"fraction",anchorYUnits:"fraction",src:l,opacity:t.icon.opacity,rotation:t.rotation,offset:t.icon.offset,color:t.icon.color},"number"==typeof t.icon.width&&"number"==typeof t.icon.height&&(a.size=[t.icon.width,t.icon.height]),"number"==typeof t.icon.scale&&(a.scale=t.icon.scale)}if(s=$T(t.text,e,r),Object.prototype.hasOwnProperty.call(t,"type"))switch(t.type){case"geoStar":return new Vc({image:new Sc({fill:i,stroke:o,points:5,radius:u,radius2:u/2,angle:0}),text:s});case"geoCross":return new Vc({image:new Sc({fill:i,stroke:o,points:4,radius:u,radius2:0,angle:0}),text:s});case"geoSquare":return new Vc({image:new Sc({fill:i,stroke:o,points:4,radius:u,angle:Math.PI/4}),text:s});case"geoTriangle":return new Vc({image:new Sc({fill:i,stroke:o,points:3,radius:u,rotation:Math.PI/4,angle:0}),text:s});case"geoCircle":return new Vc({image:new Cc({radius:u,fill:i,stroke:o,displacement:t.geo.displacement}),text:s});case"geoDiamond":return new Vc({image:new Sc({fill:i,stroke:o,points:4,radius:u,angle:Math.PI/4,rotation:2}),text:s});case"icon":return a||(a=void 0),new Vc({image:new hf(a),text:s});case"text":return new Vc({text:s});default:return}}}function $T(t,e,r){var n,o;if(t){var i=function(t,e,r,n){var o;if(t&&t.indexOf("{{")>=0)if(Object.prototype.hasOwnProperty.call(KT,t))o=(0,KT[t])(e);else{var i=iT().compile(t);o=i(e),KT[t]=i}else o="function"==typeof r?r(t):t;return o}(t.text,e,r);return"uppercase"===t.transform&&(i=i.toUpperCase()),t.wrapWidth&&(i=eR(i,t.wrapWidth,"\n")),new vf({text:i,font:t.font,offsetX:t.offsetX,offsetY:t.offsetY,textAlign:t.align,padding:t.padding||[0,0,0,0],fill:new Ic({color:t.color||"#333"}),stroke:new Dc({color:t.outline||"transparent",width:t.outlineWidth||0}),backgroundFill:new Ic({color:t.backgroundColor||"transparent"}),backgroundStroke:new Dc({color:(null===(n=t.backgroundStroke)||void 0===n?void 0:n.color)||"transparent",width:(null===(o=t.backgroundStroke)||void 0===o?void 0:o.width)||0}),overflow:t.overflow,placement:t.placement||"point"})}}function QT(t,e,r){if(t){var n=$T(t.text,e,r);return new Vc({stroke:new Dc({color:t.outline,width:t.outlineWidth,lineDash:t.lineDash}),text:n})}}function tR(t,e,r){var n,o;if(t)return Object.prototype.hasOwnProperty.call(t,"fill")&&(n=new Ic({color:t.fill})),o=$T(t.text,e,r),new Vc({stroke:new Dc({color:t.outline,width:t.outlineWidth,lineDash:t.lineDash}),fill:n,text:o})}function eR(t,e,r){if(t.length>e){for(var n=e;n>0&&" "!=t[n]&&"-"!=t[n];)n--;if(n>0)return("-"==t.substring(n,n+1)?t.substring(0,n+1):t.substring(0,n))+r+eR(t.substring(n+1),e,r)}return t}var rR={};function nR(t,e,r){var n=rR.points[t];n||(n=JT(e,null,null,r),rR.points[t]=n)}function oR(t){return rR.points[t]}function iR(t,e){var r=rR.lines[t];r||(r=QT(e),rR.lines[t]=r)}function aR(t){return rR.lines[t]}function sR(t,e){var r=rR.polygons[t];r||(r=tR(e),rR.polygons[t]=r)}function uR(t){return rR.polygons[t]}function lR(t){return lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lR(t)}function cR(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function fR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pR(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hR(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=lR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==lR(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yR(t){var e,r=t.id,n=t.styleConfig,o=t.value,i=t.idTemplate,a=t.valuePath,s=t.feature,u=t.getLocale,l=t.images,c=r;return i&&(c=i.replace("{value}",o)),c?((e=oR(c))||(nR(c,dR(n,o,a),l),e=oR(c)),e):JT(dR(n,o,a),s,u,l)}function dR(t,e,r){var n;if(n=Object.assign({},{},JSON.parse(JSON.stringify(t.style))),r){var o=(0,ZT.getValueFromObj)(n,r);o?(0,ZT.setValueToObj)(n,r,o.replace("{value}",e)):(0,ZT.setValueToObj)(n,r,"")}return n}function vR(t){var e,r=t.id,n=t.styleConfig,o=t.feature,i=t.getLocale;return r?((e=uR(r))||(sR(r,gR(n)),e=uR(r)),e):tR(gR(n),o,i)}function gR(t){return Object.assign({},{outlineWidth:3},t.style)}function mR(t){var e,r=t.id,n=t.styleConfig,o=t.feature,i=t.getLocale;return r?((e=aR(r))||(iR(r,bR(n)),e=aR(r)),e):QT(bR(n),o,i)}function bR(t){return Object.assign({},{outline:"#000000",outlineWidth:3},t.style)}function wR(t,e){t&&(Array.isArray(t.pointStyles)&&t.pointStyles.forEach((function(t){nR(t.styleID,t.style,e)})),Array.isArray(t.lineStyles)&&t.lineStyles.forEach((function(t){iR(t.styleID,t.style)})),Array.isArray(t.polyStyles)&&t.polyStyles.forEach((function(t){sR(t.styleID,t.style)})))}function _R(t){var e=t.name,r=t.styleTemplates,n=t.layerStyles,o=t.getStringResource,i=t.select,a=t.images,s=0;return function(t){for(var u,l=!1,c=i.getFeatures().getArray(),f=t.get("hover"),p=t.get("followed"),y=0;y<c.length;y+=1){var d=c[y];if(t===d){l=!0;break}var v=t.get("features");if(v){var g=d.get("features");if(tI(v,g)){c[y]=t,l=!0;break}if(!g){var m,b=cR(v);try{for(b.s();!(m=b.n()).done;){var w=m.value;if(w===d){t=w;break}if(eI(w,d)){d=w,t=w,SI({select:i,index:y,feature:w});break}}}catch(t){b.e(t)}finally{b.f()}if(t===d){l=!0;break}}}else if(eI(t,d)){SI({select:i,index:y,feature:t}),l=!0;break}}var _=t.getGeometry().getType();if(!e||!n||!n[e])return l?HT[_]:XT;switch(_){case"Point":case"MultiPoint":u=p?n[e].pointStyleFollowed:l?n[e].pointStyleSelected:f&&n[e].pointStyleHover?n[e].pointStyleHover:n[e].pointStyle;break;case"LineString":case"LinearRing":case"MultiLineString":u=l?n[e].lineStyleSelected:f&&n[e].lineStyleHover?n[e].lineStyleHover:n[e].lineStyle;break;case"Polygon":case"MultiPolygon":u=l?n[e].polyStyleSelected:f&&n[e].polyStyleHover?n[e].polyStyleHover:n[e].polyStyle;break;default:h.info("Feature type not supported: ".concat(_))}if(!u)return l?HT[_]:XT;var x,S,k=[],O=t.get("features"),E=O&&O.length>1;if(!E&&O&&(t=O[0]),x=E?u.lookup.filter((function(t){return"cluster"===t.styleType})):u.lookup.filter((function(t){return"cluster"!==t.styleType})),E)return x.length>1?void h.warn("Cannot have more than 1 cluster style"):(l?S=1/0:(S=s,s=s===Number.MAX_VALUE?0:s+1),function(t){var e=t.lookup,r=t.styleTemplates,n=t.features,o=t.images,i=t.zIndex,a=[];if(!e[0])return a;var s,u=e[0];if(u.styleTemplate&&r[u.styleTemplate]&&(u=pR(pR({},r[u.styleTemplate]),u)),Array.isArray(u.outerClusterStyles)&&u.outerClusterStyles.forEach((function(t){var e=yR({id:t.styleID,styleConfig:t});e.setZIndex(i),a.push(e)})),Array.isArray(u.groupBy)){var l={},c=u.groupBy,f=[],h=[],p=0,y=0,d=0,v=void 0;n.forEach((function(t){var e=!1;c.forEach((function(r){e||(0,ZT.valueFromObjSatisfiesConditionsArray)(t,r.conditions)&&(l[r.groupID]=(l[r.groupID]||0)+1,e=!0)}))})),function(t){var e=Object.keys(t),r=100*Math.min(1/e.length,.125),n=0;e.forEach((function(e){n+=t[e]}));var o=0,i=0;if(e.forEach((function(e){var a=t[e]/n*100;a<r?o+=r-a:a>r&&(i+=1)})),0!==o){var a=o/i;e.forEach((function(e){var s=t[e]/n*100;s<=r?t[e]=r:s-a<r?(t[e]=r,o-=s-r,i-=1):(t[e]=s-a,o-=a)})),o>=1&&function n(){a=o/i,e.forEach((function(e){var n=t[e];n>r&&(n-a<r?(t[e]=r,o-=n-r,i-=1):(t[e]=n-a,o-=a))})),o>=1&&n()}()}}(l),u.groupIDsForRotation&&(Object.keys(l).forEach((function(t){u.groupIDsForRotation.indexOf(t)>=0&&(y+=l[t]||0),d+=l[t]||0})),y>0&&(v=(s=y/d)<.5?-Math.PI*s:-.5*Math.PI)),c.forEach((function(t){f[p]=l[t.groupID]||0,h[p]=t.color,p+=1})),a.push(new Vc({image:new GT({type:"pie",radius:u.groupRadius,data:f,colors:h,offsetX:u.groupOffsetX,offsetY:u.groupOffsetY,rotation:v,stroke:new Dc({color:"transparent",width:1})}),zIndex:i}))}return u.styles.forEach((function(t){var e;(e=yR({id:t.styleID,styleConfig:t,value:n.length,idTemplate:t.styleIDTemplate,valuePath:t.styleValuePath,images:o})).setZIndex(i),a.push(e)})),a}({lookup:x,styleTemplates:r,features:O,images:a,zIndex:S}));var P,j=cR(x);try{for(j.s();!(P=j.n()).done;){var C=P.value;if(C.styleTemplate&&r[C.styleTemplate]&&(C=pR(pR({},r[C.styleTemplate]),C)),(0,ZT.valueFromObjSatisfiesConditionsArray)(t,C.conditions)){var A,T=cR(C.styles);try{for(T.s();!(A=T.n()).done;){var R=A.value,I=R;if(R.styleTemplate&&r[R.styleTemplate]&&(I=pR(pR({},r[R.styleTemplate]),R)),Array.isArray(I.lookup)&&I.lookup.length>0){var L,M=void 0,F=cR(I.lookup);try{for(F.s();!(L=F.n()).done;){var D=L.value;if((0,ZT.valueFromObjSatisfiesConditionsArray)(t,D.conditions)){M=D;break}}}catch(t){F.e(t)}finally{F.f()}if(!M)continue;I=M}var B=void 0;switch(C.styleType){case"poly":B=vR({id:I.styleID,styleConfig:I,feature:t,getLocale:o});break;case"line":B=mR({id:I.styleID,styleConfig:I,feature:t,getLocale:o});break;default:B=yR({id:I.styleID,styleConfig:I,feature:t,getLocale:o,images:a})}"point"===C.styleType&&B.setZIndex(l?1/0:s),k.push(B)}}catch(t){T.e(t)}finally{T.f()}return l||(s=s===Number.MAX_VALUE?0:s+1),k}}}catch(t){j.e(t)}finally{j.f()}return k}}function xR(t){return xR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xR(t)}function SR(t){return function(t){if(Array.isArray(t))return kR(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return kR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kR(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OR(t,e){var r,n=function(r){ER(t),wT(t);var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).feature,n=t.forEachFeatureAtPixel(r.pixel,(function(t,n){if(!e||e===t){var o,i={};"function"==typeof t.getGeometry().getCoordinates&&(o=t.getGeometry().getCoordinates()),o&&Array.isArray(o)&&!Array.isArray(o[0])||(o=r.coordinate);var a=function(t,e){var r=t.get("tooltipTemplate"),n=t.get("tooltipFunction");if(n)try{return h.debug("Calling tooltip function"),n(e)}catch(t){h.error("The Tooltip callback threw an exception, no tooltip will be shown.",t)}else{if(r)return h.debug("Executing handlebar template"),r(e.getProperties());h.info("No tooltip handlebar template or function was found")}}(n,t);if(a)return i.innerHTML=a,i.coordinates=o,i.layer=n,i.feature=t,i.settings=n.get("tooltipSettings"),i}}),{layerFilter:function(e){return t.get(mj).includes(e.get("layerId"))}});!function(t,e){var r=e.getOverlayById(Rj);if(r){if(t&&t.innerHTML&&t.coordinates){r.getElement().innerHTML=t.innerHTML,r.getElement().style.display="",document.body.style.cursor="pointer";var n,o=e.getPixelFromCoordinate(t.coordinates),i=o[0],a=o[1],s=e.getSize(),u=r.get(Ij);t.settings.positioning?"default"===t.settings.positioning?(n="bottom-center",i<u.tooltipBufferLX?n=a<u.tooltipBufferY?"top-left":a>s[1]-u.tooltipBufferY?"bottom-left":"center-left":i>s[0]-u.tooltipBufferRX?n=a<u.tooltipBufferY?"top-right":a>s[1]-u.tooltipBufferY?"bottom-right":"center-right":a<u.tooltipBufferY&&(n="top-center")):n=t.settings.positioning:n="bottom-center",r.setPositioning(n);var l,c,f=void 0,p=void 0;if(t.settings.offset)if(Array.isArray(t.settings.offset))f=t.settings.offset;else if("function"==typeof t.settings.offset){p=t.settings.offset;try{f=p.apply(this,t.feature,n)}catch(t){h.error("The offset callback threw an exception, no offset will be applied.",t)}}else if("object"===xR(t.settings.offset))f=t.settings.offset[n];else{if("default"!==t.settings.offset)throw new Error("Unknown format of offset.");f={"bottom-center":[0,-20],"top-center":[0,20],"center-left":[20,0],"center-right":[-20,0],"top-left":[20,20],"top-right":[-20,20],"bottom-left":[20,-20],"bottom-right":[-20,-20]}[n]}if(Array.isArray(f)){if(2!==f.length)throw new Error("Offset must be an array of 2 numbers.");r.setOffset(f)}if(t.settings.containerCls)if(c=!0,"string"==typeof t.settings.containerCls&&t.settings.containerCls.length>0)l=t.settings.containerCls;else{if("function"!=typeof t.settings.containerCls)throw new Error("Custom CSS class name must be a string or a function.");p=t.settings.containerCls;try{l=p.apply(this,t.feature,n)}catch(t){h.error("The containerCls callback threw an exception, no custom CSS will be applied.",t)}if(!("string"==typeof l&&l.length>0))throw new Error("Result from Custom CSS function must be a string.")}else c=!1;c&&("string"==typeof l&&l.length>0?(r.getElement().classList.add(l),h.debug("Adding custom CSS: "+l),r.set("customCSSName",l)):h.error("Custom CSS Name must be a string.  No custom CSS will be applied")),r.setPosition(t.coordinates),r.set("feature",t.feature),r.set("layer",t.layer),e.dispatchEvent({type:"tooltipShow",element:r.getElement(),layer:t.layer,feature:t.feature})}}else h.info("Cannot show tooltip because the tooltip overlay is not setup.")}(n,t)},o=rI(t,r.pixel,(function(e){return t.get(mj).includes(e.get("layerId"))})),i=rI(t,r.pixel,(function(e){return t.get(gj).includes(e.get("layerId"))})),a=new Set([].concat(SR(o),SR(i))).values();o.length>1?bT({map:t,features:a,coordinates:r.coordinate,featurePickerConfig:e.featurePicker,clickCallback:function(e){var r=e.feature;o.includes(r)&&n({feature:r}),i.includes(r)&&_I({map:t,features:r})}}):n()};!function(t,e){var r=document.createElement("div");r.addEventListener("pointermove",(function(t){return t.stopPropagation()})),r.addEventListener("click",(function(e){var r=e.target.classList;if(r.length>0&&r.contains("wmn-map-tooltip-button")){var n=e.target.getAttribute("data-action");n?t.dispatchEvent({type:"tooltipButtonClick",action:n,target:e.target,element:t.getOverlayById(Rj).getElement(),layer:t.getOverlayById(Rj).get("layer"),feature:t.getOverlayById(Rj).get("feature")}):h.warn("No action associated with the tooltip button. To associate an action, add a data-action attribute to the tooltip button.")}})),r.classList.add("wmn-map-tooltip-container");var n=Object.assign({tooltipBufferRX:150,tooltipBufferLX:150,tooltipBufferY:150},e||{}),o={tooltipBufferRX:n.tooltipBufferRX,tooltipBufferLX:n.tooltipBufferLX,tooltipBufferY:n.tooltipBufferY},i=new vT({id:Rj,element:r,positioning:"bottom-center",offset:[0,-20],layer:null,feature:null,customCSSName:""});i.getElement().style.display="none",i.set(Ij,o),t.addOverlay(i)}(t,e),mT(t),t.on("pointermove",(function(e){e.dragging||"touch"===e.originalEvent.pointerType?e.dragging&&ER(t):(r&&(clearTimeout(r),r=void 0),r=setTimeout(n,250,e))})),t.on("longpress",(function(t){n(t)})),t.on("singleclick",(function(e){var r=rI(t,e.pixel,(function(e){return t.get(mj).includes(e.get("layerId"))}));rI(t,e.pixel,(function(e){return t.get(gj).includes(e.get("layerId"))})).length>1&&r.length>1&&n(e)}))}function ER(t){if(t.getOverlayById(Rj)&&t.getOverlayById(Rj).getElement()&&"none"!==t.getOverlayById(Rj).getElement().style.display){var e=t.getOverlayById(Rj).getElement();e.style.display="none",e.innerHTML="",document.body.style.cursor="";var r=t.getOverlayById(Rj).get("customCSSName");r&&e.classList.contains(r)&&(e.classList.remove(r),h.debug("Removing custom CSS: "+r)),t.dispatchEvent({type:"tooltipHide",element:e,layer:t.getOverlayById(Rj).get("layer"),feature:t.getOverlayById(Rj).get("feature")}),t.getOverlayById(Rj).set("feature",void 0),t.getOverlayById(Rj).set("layer",void 0)}}function PR(t,e){var r={},n={positioning:"default",offset:"default"};return t.html?"string"==typeof t.html&&t.html.length>0?(r.tooltip=t.html,r.tooltipTemplate=iT().compile(t.html),r.tooltipSettings=Object.assign(n,t)):h.error("Unknown format for html in the tooltip object. A string is expected."):e&&t.tooltipId?(r.tooltipFunction=function(r){return e(r,t.tooltipId)},r.tooltipSettings=Object.assign(n,t)):h.error("Unknown format for html in the tooltip object. A string is expected."),r}function jR(t){return jR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jR(t)}function CR(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return AR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function AR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function RR(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?TR(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=jR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==jR(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function IR(){IR=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==jR(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(jR(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function LR(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function MR(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){LR(i,n,o,a,s,"next",t)}function s(t){LR(i,n,o,a,s,"throw",t)}a(void 0)}))}}function FR(t){return DR.apply(this,arguments)}function DR(){return DR=MR(IR().mark((function t(e){var r,n,o,i,a,s,u,l,c,f,p,y,d,v,g,m,b,w,_,x,S,k,O,E,P,j,C,A,T,R;return IR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.layers,o=e.sources,i=e.fields,a=e.styleTemplates,s=e.layerStyles,u=e.serverUrl,l=e.getAccessToken,c=e.getStringResource,f=e.select,p=e.images,y=e.createOtherLayer,d=e.generateTooltip,v=e.getFeaturesInExtent,g={},r.set(vj,g),m=[],r.set(gj,m),b=[],r.set(mj,b),w={},r.set(Cj,w),Array.isArray(n)){t.next=11;break}return t.abrupt("return");case 11:if(o&&0!==Object.keys(o).length){t.next=14;break}return h.warn("No layer sources configured"),t.abrupt("return");case 14:_=function(){var t=MR(IR().mark((function t(e){var n;return IR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=e.layerType,t.next="geojson"===t.t0?4:"vector"===t.t0?6:"other"===t.t0?10:14;break;case 4:return n=WR({map:r,layer:e,source:o[e.source],fields:i,styleTemplates:a,layerStyles:s,serverUrl:u,getAccessToken:l,getStringResource:c,select:f,images:p,generateTooltip:d,getFeaturesInExtent:v}),t.abrupt("break",16);case 6:return t.next=8,ZR({map:r,layer:e,source:o[e.source],styleTemplates:a,layerStyles:s,getAccessToken:l,getStringResource:c,select:f,images:p,generateTooltip:d});case 8:return n=t.sent,t.abrupt("break",16);case 10:if(y){t.next=12;break}return t.abrupt("return");case 12:return n=y({map:r,layer:e,styleTemplates:a,layerStyles:s,getStringResource:c,select:f,images:p,generateTooltip:d}),t.abrupt("break",16);case 14:return h.warn("Layer type ".concat(e.layerType," is not supported")),t.abrupt("return");case 16:return e.selectable&&("geojson"===e.layerType||"other"===e.layerType?m.push(e.layerId):h.warn("Selecting features in layers of type ".concat(e.layerType," is currently not supported"))),t.abrupt("return",n);case 20:t.prev=20,t.t1=t.catch(0),h.error("Error creating layer: ".concat(t.t1));case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}(),x=CR(n),t.prev=16,x.s();case 18:if((S=x.n()).done){t.next=91;break}if((k=S.value).groupId){t.next=23;break}return h.warn("Group id not configured"),t.abrupt("continue",89);case 23:if(!g[k.groupId]){t.next=26;break}return h.warn("Duplicate group id configured: ".concat(k.groupId)),t.abrupt("continue",89);case 26:if(Array.isArray(k.groupItems)&&0!==k.groupItems.length){t.next=29;break}return h.warn("No layers configured for group: ".concat(k.groupId)),t.abrupt("continue",89);case 29:g[k.groupId]={group:new uo({groupId:k.groupId}),layers:{}},w[k.groupId]={groupId:k.groupId,groupTitle:k.groupTitle,layers:{}},O=CR(k.groupItems),t.prev=32,O.s();case 34:if((E=O.n()).done){t.next=80;break}if((P=E.value).layerId){t.next=39;break}return h.warn("Layer id not configured"),t.abrupt("continue",78);case 39:if(!g[k.groupId].layers[P.layerId]){t.next=42;break}return h.warn("Duplicate layer id configured: ".concat(P.layerId)),t.abrupt("continue",78);case 42:if(["other","multiLayer"].includes(P.layerType)||o[P.source]){t.next=45;break}return h.warn("Layer source not configured: ".concat(P.source)),t.abrupt("continue",78);case 45:if(j=void 0,"multiLayer"!==P.layerType){t.next=74;break}C=CR(P.layers),t.prev=48,C.s();case 50:if((A=C.n()).done){t.next=64;break}if((T=A.value).layerId){t.next=55;break}return h.warn("Layer id not configured"),t.abrupt("continue",62);case 55:if(o[T.source]){t.next=58;break}return h.warn("Layer source not configured: ".concat(T.source)),t.abrupt("continue",62);case 58:return t.next=60,_(T);case 60:(R=t.sent)&&(j||(j=new uo({layerId:P.layerId})),j.getLayers().push(R),T.tooltip&&b.push(T.layerId));case 62:t.next=50;break;case 64:t.next=69;break;case 66:t.prev=66,t.t0=t.catch(48),C.e(t.t0);case 69:return t.prev=69,C.f(),t.finish(69);case 72:t.next=77;break;case 74:return t.next=76,_(P);case 76:j=t.sent;case 77:j&&(P.tooltip&&b.push(P.layerId),g[k.groupId].group.getLayers().push(j),g[k.groupId].layers[P.layerId]=j,w[k.groupId].layers[P.layerId]={groupId:k.groupId,layerId:P.layerId,title:P.title,image:P.image,maxZoom:P.maxZoom,minZoom:P.minZoom});case 78:t.next=34;break;case 80:t.next=85;break;case 82:t.prev=82,t.t1=t.catch(32),O.e(t.t1);case 85:return t.prev=85,O.f(),t.finish(85);case 88:r.addLayer(g[k.groupId].group);case 89:t.next=18;break;case 91:t.next=96;break;case 93:t.prev=93,t.t2=t.catch(16),x.e(t.t2);case 96:return t.prev=96,x.f(),t.finish(96);case 99:case"end":return t.stop()}}),t,null,[[16,93,96,99],[32,82,85,88],[48,66,69,72]])}))),DR.apply(this,arguments)}function BR(t,e){var r,n=t.get(vj);return null==n||null===(r=n[e])||void 0===r?void 0:r.group}function NR(t,e){if(!t)return!1;var r=BR(t,e);return!!r&&r.getVisible()}function zR(t,e,r){var n=UR(t,e,r);n&&n.setVisible(!n.getVisible())}function GR(t,e,r){if(!t)return!1;var n=UR(t,e,r);return!!n&&n.getVisible()}function UR(t,e,r){var n=t.get(vj);if(n[e]&&n[e].layers[r])return n[e].layers[r]}function qR(t){var e=t.layerConfig,r=t.layerSource,n=t.getStringResource,o=t.styleTemplates,i=t.layerStyles,a=t.select,s=t.images,u=r;e.cluster&&(u=new jT({distance:"number"==typeof e.cluster?e.cluster:20,source:u}));var l=new Cy({className:"lm-layer-".concat(e.layerId),config:e,layerId:e.layerId,source:u,zIndex:e.zIndex,minZoom:e.minZoom,maxZoom:e.maxZoom,visible:e.visible,declutter:e.declutter,style:_R({name:e.style,styleTemplates:o,layerStyles:i,getStringResource:n,select:a,images:s})});return e.selectable&&(r.forEachFeature((function(t){return t.set(Tj,l)})),r.on("addfeature",(function(t){t.feature.set(Tj,l)}))),l}function WR(t){var e,r,n=t.map,o=t.layer,i=t.source,a=t.fields,s=t.styleTemplates,u=t.layerStyles,l=t.serverUrl,c=t.getAccessToken,f=t.getStringResource,p=t.select,y=t.images,d=t.generateTooltip,v=t.getFeaturesInExtent,g={},m=new iS({loader:function(t){r&&clearTimeout(r),r=setTimeout(MR(IR().mark((function r(){var s,u,f,p,y,d,g;return IR().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=m instanceof jT?m.getSource():m,u=n.get(xj),f=function(t){var r=[];s.getFormat().readFeatures(t).forEach((function(t){s.getFeatureById(t.getId())||(!o.cluster||t.getGeometry()instanceof Xa?(t.set(Tj,e),r.push(t)):h.warn("Clustering is supported for point features only, feature not added: ".concat(t.getId())))})),r.length>0&&s.addFeatures(r)},!u){r.next=39;break}if(!i.offlineCache){r.next=37;break}if("bbox"!==i.loadingStrategy||!v){r.next=18;break}return r.prev=6,r.next=9,v({name:o.source,extent:di(t,"EPSG:3857","EPSG:4326"),maxResults:i.maxResults||1e4});case 9:(p=r.sent)&&f(p),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),h.error("Error loading data for layer ".concat(o.layerId,". Error: ").concat(r.t0));case 16:r.next=37;break;case 18:if(!(y=n.get(_j))){r.next=37;break}return r.prev=20,r.next=23,y.layerSources.get(o.source);case 23:(d=r.sent)&&f(d);case 25:if(!d.nextKey){r.next=32;break}return r.next=28,y.layerSources.get(d.nextKey);case 28:(d=r.sent)&&f(d),r.next=25;break;case 32:r.next=37;break;case 34:r.prev=34,r.t1=r.catch(20),h.error("Error loading data for layer ".concat(o.layerId,". Error: ").concat(r.t1));case 37:r.next=50;break;case 39:return r.prev=39,r.next=42,IT({source:i,fields:a,extent:t,serverUrl:l,getAccessToken:c});case 42:g=r.sent,f(g),r.next=50;break;case 46:r.prev=46,r.t2=r.catch(39),h.error("Error loading data for layer ".concat(o.layerId,". Error: ").concat(r.t2)),n.dispatchEvent({type:"layerLoadError",layerId:o.layerId,error:r.t2});case 50:case"end":return r.stop()}}),r,null,[[6,13],[20,34],[39,46]])}))),100)},format:new Og({featureProjection:"EPSG:3857"}),strategy:"bbox"===i.loadingStrategy?Ux:Gx});return o.cluster&&(m=new jT({distance:"number"==typeof o.cluster?o.cluster:20,source:m})),o.tooltip&&(g=PR(o.tooltip,d)),e=new Cy(RR({className:"lm-layer-".concat(o.layerId),config:o,layerId:o.layerId,source:m,zIndex:o.zIndex,minZoom:o.minZoom,maxZoom:o.maxZoom,visible:o.visible,declutter:o.declutter,style:_R({name:o.style,styleTemplates:s,layerStyles:u,getStringResource:f,select:p,images:y})},g))}function VR(t){return YR.apply(this,arguments)}function YR(){return YR=MR(IR().mark((function t(e){var r,n,o,i,a;return IR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.url,!r.get(xj)){t.next=9;break}return i=r.get(_j),t.next=5,i.tiles.get(n);case 5:a=t.sent,o=new Lx({tileJSON:a}),t.next=10;break;case 9:o=new Lx({url:n});case 10:return t.abrupt("return",new Promise((function(t){var e=o.on("change",(function(){var r=o.getState();if("ready"===r){var i=o.getTileJSON(),a=Array.isArray(i.tiles)?i.tiles:[i.tiles];n&&(a=a.map((function(t){return decodeURI(new URL(t,n).href)})));var s,u=o.getTileGrid();if(i.bounds){var l=li([i.bounds[0],i.bounds[1]]),c=li([i.bounds[2],i.bounds[3]]);s=[l[0],l[1],c[0],c[1]]}var f=i.minzoom||0,h=i.maxzoom||22,p=new _S({attributions:o.getAttributions(),format:new em,tileGrid:new md({origin:u.getOrigin(0),extent:s||u.getExtent(),minZoom:f,resolutions:MT.slice(0,h+1),tileSize:512}),urls:a});lr(e),t(p)}else"error"===r&&(lr(e),t(void 0))}));"ready"===o.getState()&&o.changed()})));case 11:case"end":return t.stop()}}),t)}))),YR.apply(this,arguments)}function ZR(t){return XR.apply(this,arguments)}function XR(){return XR=MR(IR().mark((function t(e){var r,n,o,i,a,s,u,l,c,f,p,y,d,v;return IR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.layer,o=e.source,i=e.styleTemplates,a=e.layerStyles,s=e.getAccessToken,u=e.getStringResource,l=e.select,c=e.images,f=e.generateTooltip,!o.internalSource||!s){t.next=10;break}return t.t1="Bearer ",t.next=5,s();case 5:t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),t.t0={"Cache-Control":"no-cache",Authorization:t.t3},t.next=11;break;case 10:t.t0={};case 11:if(p=t.t0,y=function(t,e){t.setLoader(function(){var o=MR(IR().mark((function o(i,a,s){var u,l,c,f,y,d;return IR().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,!r.get(xj)){o.next=9;break}if(!(l=r.get(_j))){o.next=7;break}return o.next=6,l.tiles.get(e);case 6:u=o.sent;case 7:o.next=13;break;case 9:return o.next=11,xe({method:"GET",url:e,responseType:"arraybuffer",headers:p});case 11:c=o.sent,u=c.data;case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(0),404!==(null===(f=o.t0.response)||void 0===f?void 0:f.status)&&(h.error("Error loading tile: ".concat(o.t0)),r.dispatchEvent({type:"layerLoadError",layerId:n.layerId,error:o.t0}));case 18:u?(y=t.getFormat(),d=y.readFeatures(u,{extent:i,featureProjection:s}),t.setFeatures(d)):t.setState(Nu.ERROR);case 19:case"end":return o.stop()}}),o,null,[[0,15]])})));return function(t,e,r){return o.apply(this,arguments)}}())},!o.url.includes("tiles.json")){t.next=18;break}return t.next=16,VR({map:r,url:o.url});case 16:(d=t.sent).setTileLoadFunction(y);case 18:return v=n.tooltip?PR(n.tooltip,f):{},t.abrupt("return",new Yy(RR({className:"lm-layer-".concat(n.layerId),config:n,sourceConfig:o,layerId:n.layerId,source:d||new _S({format:new em,url:o.url,tileLoadFunction:y}),zIndex:n.zIndex,minZoom:n.minZoom,maxZoom:n.maxZoom,visible:n.visible,declutter:n.declutter,style:_R({name:n.style,styleTemplates:i,layerStyles:a,getStringResource:u,select:l,images:c})},v)));case 20:case"end":return t.stop()}}),t)}))),XR.apply(this,arguments)}function HR(t){return function(t){if(Array.isArray(t))return $R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||JR(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KR(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=JR(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function JR(t,e){if(t){if("string"==typeof t)return $R(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$R(t,e):void 0}}function $R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QR(t){var e=t.map,r=t.groupId,n=t.layerId,o=t.featureId,i=t.propName,a=t.propValue,s=UR(e,r,n);if(!s)return null;var u=function(t){var e,r=function(t){var e=t.getSource();return e instanceof jT&&(e=e.getSource()),e}(t);return r instanceof iS?(o?e=r.getFeatureById(o):i&&void 0!==a&&(e=r.forEachFeature((function(t){if(t.get(i)===a)return t}))),e||null):null};if(s instanceof uo){var l,c=KR(s.getLayers().getArray());try{for(c.s();!(l=c.n()).done;){var f=u(l.value);if(f)return f}}catch(t){c.e(t)}finally{c.f()}return null}return u(s)}function tI(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((function(t,r){return t===e[r]}))}function eI(t,e){return t.getId()===e.getId()}function rI(t,e,r){var n,o=[],i=KR(t.getFeaturesAtPixel(e,{layerFilter:r}));try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.get("features")||"Polygon"!==a.getGeometry().getType())return[];o.push(a)}}catch(t){i.e(t)}finally{i.f()}return o}function nI(t,e){var r=Xo([t[0],t[1]],e),n=Xo([t[2],t[3]],e);return[].concat(HR(r),HR(n))}function oI(t){return oI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oI(t)}function iI(t){return function(t){if(Array.isArray(t))return lI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uI(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aI(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uI(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function sI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||uI(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uI(t,e){if(t){if("string"==typeof t)return lI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lI(t,e):void 0}}function lI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cI(t){var e=function(t,e){if("object"!=oI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=oI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==oI(e)?e:String(e)}function fI(){return fI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},fI.apply(this,arguments)}function hI(t){return hI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hI(t)}function pI(t,e){return pI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pI(t,e)}rR.points={},rR.lines={},rR.polygons={},rR.clusters={};var yI=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=[t],n=hI(n=e),function(t,e){if(e&&("object"===oI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(n,o||[],hI(r).constructor):n.apply(r,o));var r,n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pI(t,e)}(e,t),r=e,(n=[{key:"handleEvent",value:function(t){if("singleclick"===t.type){var r=rI(t.map,t.pixel,(function(e){return t.map.get(gj).includes(e.get("layerId"))})),n=rI(t.map,t.pixel,(function(e){return t.map.get(mj).includes(e.get("layerId"))}));if(r.length>1)return n.length<=1&&bT({map:t.map,features:r,coordinates:t.coordinate,featurePickerConfig:this.get("featurePickerConfig"),clickCallback:_I}),!0;wT(t.map)}return fI(hI(e.prototype),"handleEvent",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cI(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(nT);function dI(t){if(!t.suppressEvent){var e=t.mapBrowserEvent.map,r=sI(vI(t.selected),2),n=r[0],o=r[1];e.dispatchEvent({type:"selectionChanged",selected:n,clusterFeatures:o})}}function vI(t){var e,r;if(1===t.length){var n=t[0].get("features");n&&n.length>1?(e=t[0],r=n):e=n?n[0]:t[0]}return[e,r]}function gI(t,e){var r=new yI({toggleCondition:ew,style:function(t){var e=t.get("features");return e?e[0].get(Tj).getStyle()(t):t.get(Tj).getStyle()(t)},filter:function(e,r){return t.get(gj).includes(r.get("layerId"))}});return r.set("featurePickerConfig",e),r.on("select",dI),t.addInteraction(r),mT(t),t.on("moveend",mI),r}function mI(t){var e=bI(t.map),r=e.getFeatures().getArray();if(0!==r.length){var n=sI(vI(r),2),o=n[0],i=n[1];if(Array.isArray(i)&&0!==i.length){var a,s=e.getLayer(o).get("layerId"),u=aI(t.map.getLayerGroup().getLayersArray());try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l.get("layerId")===s){var c=o.getGeometry().getCoordinates(),f=l.getSource().getFeaturesAtCoordinate(c);if(f.length>0&&f[0].get("features").length===i.length)return}}}catch(t){u.e(t)}finally{u.f()}wI(t.map)}}}function bI(t){var e,r=aI(t.getInteractions().getArray());try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n instanceof yI)return n}}catch(t){r.e(t)}finally{r.f()}}function wI(t){var e=bI(t),r=e.getFeatures(),n=iI(r.getArray());n.length>0&&(r.clear(),e.dispatchEvent({type:"select",selected:[],deselected:n,mapBrowserEvent:{map:t}}))}function _I(t){var e=t.map,r=t.features,n=t.suppressEvent;if(e&&r){Array.isArray(r)||(r=[r]);var o=bI(e),i=o.getFeatures(),a=iI(i.getArray());i.clear(),r.forEach((function(t){var e=a.indexOf(t);e>-1&&a.splice(e,1),i.push(t)})),o.dispatchEvent({type:"select",selected:r,deselected:a,mapBrowserEvent:{map:e},suppressEvent:n})}}function xI(t){var e=t.map,r=t.id,n=t.coordinates,o=t.type,i=void 0===o?"Point":o;if(e&&r&&Array.isArray(n)&&0!==n.length){var a,s=e.getView();if("Point"===i)a=li(n);else if("LineString"===i){var u=new Av(n);a=li(Dn(u.getExtent()))}else if("Polygon"===i){var l=new vs(n);a=li(Dn(l.getExtent()))}s.animate({center:a},{zoom:s.getMaxZoom()},(function(){var t,n=e.getPixelFromCoordinate(a),o=aI(e.getFeaturesAtPixel(n));try{for(o.s();!(t=o.n()).done;){var i=t.value,s=i.get("features");if(s){var u,l=aI(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.getId()===r)return void _I({map:e,features:c})}}catch(t){l.e(t)}finally{l.f()}}else if(i.getId()===r)return void _I({map:e,features:i})}}catch(t){o.e(t)}finally{o.f()}var f=new kv(new Xa(a));f.setId(r),_I({map:e,features:f,suppressEvent:!0})}))}}function SI(t){var e=t.select,r=t.index,n=t.feature,o=e.getFeatures().getArray();o[r]=n,dI({target:e,selected:o,mapBrowserEvent:{map:e.getMap()}})}function kI(t){var e=t.get(Oj);if(!e){var r=new iS;e={vectorSource:r,vectorLayer:new Cy({source:r,style:new Vc({fill:new Ic({color:"rgba(255, 255, 255, 0.5)"}),stroke:new Dc({color:"rgba(0, 153, 255, 1.0)",width:3})})}),draw:null},t.set(Oj,e)}return e}function OI(t,e,r,n){var o=n.get(gj);if(t.getVisible()&&!(t.get("minZoom")&&t.get("minZoom")>=n.getView().getZoom()))if(t.getLayers)t.getLayers().forEach((function(t){return OI(t,e,r,n)}));else try{null!=o&&o.includes(t.get("layerId"))&&function(t,e,r){var n=new Og,o=n.writeGeometryObject(e);if("Polygon"===e.getType()){var i=function(t,e,r){void 0===r&&(r={});for(var n=0,o=t;n<o.length;n++){var i=o[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return XC({type:"Polygon",coordinates:t},void 0,r)}(o.coordinates);t.forEachFeature((function(t){var e,o,a=n.writeFeatureObject(t);e=a,o=!1,nA(i,(function(t){nA(e,(function(e){if(!0===o)return!0;o=!pA(t.geometry,e.geometry)}))})),o&&r.push(t)}))}}(t.getSource(),e,r)}catch(t){h.warn("Error processing source from layer:",t)}}function EI(t,e){var r=kI(t);!function(t,e){t.getLayers().getArray().includes(e)||t.addLayer(e)}(t,r.vectorLayer),function(t){var e=kI(t),r=e.draw,n=e.vectorSource;r&&(t.removeInteraction(r),n.clear())}(t),function(t){var e=kI(t),r=new UA({source:e.vectorSource,type:"Polygon",freehand:!0});t.addInteraction(r),e.draw=r}(t),r.draw.on("drawstart",(function(){r.vectorSource.clear()})),r.draw.on("drawend",(function(r){var n=r.feature.getGeometry(),o=[];t.getLayers().forEach((function(e){OI(e,n,o,t)})),h.info(o),_I({map:t,features:o,suppressEvent:!0}),"function"==typeof e&&e(o)}))}function PI(t){var e=kI(t),r=e.draw,n=e.vectorSource,o=e.vectorLayer;r&&(t.removeInteraction(r),n.clear(),t.removeLayer(o),t.set(Oj,null)),wI(t)}var jI=s(481),CI=s.n(jI),AI=s(207),TI=s.n(AI),RI=s(798),II=s.n(RI),LI=s(43),MI=s.n(LI),FI=s(63),DI=s.n(FI),BI=s(463),NI=s.n(BI),zI=s(613),GI=s.n(zI),UI=s(442),qI=s.n(UI),WI=s(471),VI={};VI.styleTagTransform=qI(),VI.setAttributes=NI(),VI.insert=DI().bind(null,"head"),VI.domAPI=MI(),VI.insertStyleElement=GI(),II()(WI.Z,VI),WI.Z&&WI.Z.locals&&WI.Z.locals;var YI=s(143),ZI={};ZI.styleTagTransform=qI(),ZI.setAttributes=NI(),ZI.insert=DI().bind(null,"head"),ZI.domAPI=MI(),ZI.insertStyleElement=GI(),II()(YI.Z,ZI),YI.Z&&YI.Z.locals&&YI.Z.locals;var XI=s(214),HI={};HI.styleTagTransform=qI(),HI.setAttributes=NI(),HI.insert=DI().bind(null,"head"),HI.domAPI=MI(),HI.insertStyleElement=GI(),II()(XI.Z,HI),XI.Z&&XI.Z.locals&&XI.Z.locals;var KI,JI=s(807);function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$I.apply(this,arguments)}var QI,tL=function(t){return JI.createElement("svg",$I({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16"},t),KI||(KI=JI.createElement("path",{fillRule:"evenodd",d:"M.667 8C1.82 5.073 4.667 3 8 3s6.18 2.073 7.333 5c-1.153 2.927-4 5-7.333 5S1.82 10.927.667 8M13.88 8A6.51 6.51 0 0 0 8 4.333 6.51 6.51 0 0 0 2.12 8 6.51 6.51 0 0 0 8 11.667c2.527 0 4.78-1.42 5.88-3.667M8 6.333a1.667 1.667 0 1 1-.001 3.335A1.667 1.667 0 0 1 8 6.333M5 8c0-1.653 1.347-3 3-3s3 1.347 3 3-1.347 3-3 3-3-1.347-3-3",clipRule:"evenodd"})))};function eL(){return eL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eL.apply(this,arguments)}var rL=function(t){return JI.createElement("svg",eL({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16"},t),QI||(QI=JI.createElement("path",{fillRule:"evenodd",d:"M3.127 4.35 1.34 2.563l.94-.946L14.1 13.443l-.94.94-2.28-2.28A7.8 7.8 0 0 1 8 12.65c-3.333 0-6.18-2.073-7.333-5a7.8 7.8 0 0 1 2.46-3.3M8 3.983c2.527 0 4.78 1.42 5.88 3.667a6.4 6.4 0 0 1-1.607 2.08l.94.94a7.9 7.9 0 0 0 2.12-3.02c-1.153-2.927-4-5-7.333-5a7.9 7.9 0 0 0-2.427.38l1.1 1.1A6.7 6.7 0 0 1 8 3.983m-.713.76 1.38 1.38c.38.167.686.474.853.854l1.38 1.38c.053-.227.093-.467.093-.714A2.99 2.99 0 0 0 8 4.65c-.247 0-.48.033-.713.093m-.947 2.82 1.74 1.74q-.04.012-.08.014c-.92 0-1.667-.747-1.667-1.667q0-.024.004-.043zm-1.1-1.1L4.073 5.297A6.6 6.6 0 0 0 2.12 7.65 6.51 6.51 0 0 0 8 11.317a7 7 0 0 0 1.833-.254l-.653-.653a3.004 3.004 0 0 1-3.94-3.947",clipRule:"evenodd"})))},nL=["visible","className"];function oL(){return oL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oL.apply(this,arguments)}function iL(t){var e=t.visible,r=t.className,n=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,nL);return React.createElement("button",oL({className:CI()("layer-visibility-button",r)},n),e?React.createElement(tL,null):React.createElement(rL,null))}iL.propTypes={visible:TI().bool,className:TI().string};var aL=["layers","visibleLayers","layersInView","getLayerIconSrc","getStringResource","onLayerVisibilityToggle","className"];function sL(){return sL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sL.apply(this,arguments)}function uL(t){var e=t.layers,r=t.visibleLayers,n=void 0===r?{}:r,o=t.layersInView,i=void 0===o?{}:o,a=t.getLayerIconSrc,s=t.getStringResource,u=t.onLayerVisibilityToggle,l=t.className,c=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,aL);return e.length?React.createElement("ul",sL({},c,{className:CI()("layer-list",l)}),e.map((function(t){var e=(null==s?void 0:s(t.title))||t.title||t.layerId;return React.createElement("li",{key:t.layerId,className:CI()("layer-list-item",{"layer-list-item-not-in-view":!1===(null==i?void 0:i[t.layerId]),"layer-list-item-disabled":!1===(null==n?void 0:n[t.layerId])})},a?React.createElement("img",{src:null==a?void 0:a(t),alt:t.image}):null,React.createElement("div",{className:"layer-list-item-title"},React.createElement("span",{title:e},e),React.createElement(iL,{visible:n[t.layerId],onClick:function(){return null==u?void 0:u(t)}})))}))):null}function lL(t){return lL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lL(t)}function cL(){cL=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==lL(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(lL(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function fL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fL(Object(r),!0).forEach((function(e){pL(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pL(t,e,r){var n;return n=function(t,e){if("object"!=lL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==lL(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yL(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function dL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return vL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vL(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gL(t,e){for(var r in t){var n=t[r];for(var o in n.layers)e(n.layers[o])}}uL.propTypes={layers:TI().arrayOf(TI().object).isRequired,visibleLayers:TI().object,layersInView:TI().object,getLayerIconSrc:TI().func,getStringResource:TI().func,onLayerVisibilityToggle:TI().func,className:TI().string};const mL=function(t){var e=dL(React.useState({}),2),r=e[0],n=e[1],o=dL(React.useState({}),2),i=o[0],a=o[1],s=dL(React.useState({}),2),u=s[0],l=s[1];function c(){var e;return e=cL().mark((function e(r){var o,i,a,s;return cL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.get(Aj),aC(t)!==r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,tC(t,r);case 6:for(s in i={},a=aC(t),o)i[s]=a===s;n(i);case 10:case"end":return e.stop()}}),e)})),c=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){yL(i,n,o,a,s,"next",t)}function s(t){yL(i,n,o,a,s,"throw",t)}a(void 0)}))},c.apply(this,arguments)}return React.useEffect((function(){if(t){var e=t.get(Cj),r=t.get(Aj);return a(function(){var r={};for(var n in gL(e,(function(e){r[e.layerId]=GR(t,e.groupId,e.layerId)})),e)r[n]=NR(t,n);return r}()),o(),function(){var e={},o=aC(t);for(var i in r)e[i]=o===i;n(e)}(),t.on("moveend",o),function(){t.un("moveend",o)}}function o(){l(function(){var r={},n=t.getView().getZoom(),o=t.getView().getMaxZoom();return gL(e,(function(t){r[t.layerId]=n>(t.minZoom||0)&&n<=(t.maxZoom||o)})),r}())}}),[t]),{visibleBaseLayers:r,toggleBaseLayer:function(t){return c.apply(this,arguments)},visibleLayers:i,toggleLayerVisibility:function(e,r){zR(t,e,r);var n=t.get(Cj),o=GR(t,e,r);a((function(i){var a=o;for(var s in null==n||null===(u=n[e])||void 0===u?void 0:u.layers){var u;r!==s&&(a=a||i[s])}var l=BR(t,e);return null==l||l.setVisible(a),hL(hL({},i),{},pL(pL({},e,a),r,o))}))},layersInView:u,toggleGroupVisibility:function(e){!function(t,e){var r=BR(t,e);r&&r.setVisible(!r.getVisible())}(t,e);var r=t.get(Cj),n=NR(t,e);a((function(o){var i={};for(var a in null==r||null===(s=r[e])||void 0===s?void 0:s.layers){var s;i[a]=n;var u=UR(t,e,a);null==u||u.setVisible(n)}return hL(hL(hL({},o),i),{},pL({},e,n))}))}}};var bL=["map","getStringResource","getLayerIconSrc","className"];function wL(){return wL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wL.apply(this,arguments)}function _L(t){var e=t.map,r=t.getStringResource,n=t.getLayerIconSrc,o=t.className,i=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,bL),a=mL(e),s=a.visibleBaseLayers,u=a.toggleBaseLayer,l=a.visibleLayers,c=a.toggleLayerVisibility,f=a.layersInView,h=a.toggleGroupVisibility;if(!e)return null;var p=e.get(Cj),y=e.get(Aj)||{},d=(null==r?void 0:r("map.baseLayers.title"))||"Base Layers";return React.createElement("div",wL({},i,{className:CI()("layer-picker",o)}),React.createElement("div",{className:"layer-header-group"},React.createElement("span",{title:d},d)),React.createElement(uL,{layers:Object.values(y),visibleLayers:s,getLayerIconSrc:n,getStringResource:r,onLayerVisibilityToggle:function(t){return u(t.layerId)}}),Object.values(p).map((function(t){var e=(null==r?void 0:r(t.groupTitle))||t.groupTitle;return React.createElement("div",{key:t.groupId},React.createElement("div",{className:CI()("layer-header-group",{"layer-header-group-disabled":!1===l[t.groupId]})},React.createElement("span",{title:e},e),React.createElement(iL,{visible:l[t.groupId],onClick:function(){return h(t.groupId)}})),React.createElement(uL,{layers:Object.values(t.layers),getLayerIconSrc:n,visibleLayers:l,layersInView:f,getStringResource:r,onLayerVisibilityToggle:function(e){return c(t.groupId,e.layerId)}}))})))}function xL(t){return xL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xL(t)}function SL(t){return SL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},SL(t)}function kL(t,e){return kL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kL(t,e)}_L.propTypes={map:TI().object,className:TI().string,getLayerIconSrc:TI().func,getStringResource:TI().func};var OL=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e,r){return e=SL(e),function(t,e){if(e&&("object"===xL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],SL(t).constructor):e.apply(t,r))}(this,e,[{opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var n=t.getTileCoord()[0],o=El(r.tileGrid.getTileSize(n)),i=Su(o[0],o[1]);i.strokeStyle="grey",i.strokeRect(.5,.5,o[0]+.5,o[1]+.5),i.fillStyle="grey",i.strokeStyle="white",i.textAlign="center",i.textBaseline="middle",i.font="24px sans-serif",i.lineWidth=4,i.strokeText(e,o[0]/2,o[1]/2,o[0]),i.fillText(e,o[0]/2,o[1]/2,o[0]),t.setImage(i.canvas)}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kL(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(ov);const EL=OL;var PL=s(0),jL={};jL.styleTagTransform=qI(),jL.setAttributes=NI(),jL.insert=DI().bind(null,"head"),jL.domAPI=MI(),jL.insertStyleElement=GI(),II()(PL.Z,jL),PL.Z&&PL.Z.locals&&PL.Z.locals;var CL=s(625),AL={};function TL(t){var e=function(e){return t.get(gj).includes(e.get("layerId"))},r=null;t.on(["pointermove","longpress"],(function(n){var o=t.getTargetElement(),i=t.forEachFeatureAtPixel(n.pixel,(function(t){return function(t,e,r){if(null!==r){if(r===t)return;RL(r)}t.set("hover",!0),t.setStyle(),e.style.cursor="pointer"}(t,o,r),r=t,!0}),{layerFilter:e});i||null===r||(o.style.cursor="",RL(r),r=null)}))}function RL(t){t.set("hover",!1),t.setStyle()}function IL(t){return IL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IL(t)}function LL(t){var e=function(t,e){if("object"!=IL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=IL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==IL(e)?e:String(e)}function ML(t){return ML=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ML(t)}function FL(t,e){return FL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FL(t,e)}AL.styleTagTransform=qI(),AL.setAttributes=NI(),AL.insert=DI().bind(null,"head"),AL.domAPI=MI(),AL.insertStyleElement=GI(),II()(CL.Z,AL),CL.Z&&CL.Z.locals&&CL.Z.locals;var DL=function(t){function e(t){var r,n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e,r){return e=ML(e),function(t,e){if(e&&("object"===IL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,r||[],ML(t).constructor):e.apply(t,r))}(this,e,[{handleEvent:BL}])).longPressTimeInMS_=(null==t||null===(r=t.options)||void 0===r?void 0:r.longPressTime)||0,i.longPressMapDraggable_=(null==t||null===(n=t.options)||void 0===n?void 0:n.longPressMapDraggable)||!1,i.timeoutId_=null,i.isLongPress_=!1,i.down_=null,i.moveTolerance_=null==t||null===(o=t.options)||void 0===o?void 0:o.moveTolerance,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FL(t,e)}(e,t),r=e,n=[{key:"timeoutId",get:function(){return this.timeoutId_}},{key:"isLongPress",get:function(){return this.isLongPress_}},{key:"getDragPanInteraction",value:function(t){return t.getInteractions().getArray().find((function(t){return t instanceof pw}))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LL(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Hb);function BL(t){var e=this,r=t.map;switch(t.type){case"pointerdown":if(this.longPressTimeInMS_<=0||this.getPointerCount()>1)return!0;this.down_=t.originalEvent,this.timeoutId_=setTimeout((function(){e.longPressMapDraggable_||e.getDragPanInteraction(r).setActive(!1),e.isLongPress_=!0,t.type="longpress",r.dispatchEvent(t)}),this.longPressTimeInMS_);break;case"pointerup":case"pointercancel":case"pointermove":case"pointerdrag":case"pointerleave":case"pointerout":if("pointermove"===t.type&&this.down_){var n=t.originalEvent;if(Math.abs(n.clientX-this.down_.clientX)<=this.moveTolerance_&&Math.abs(n.clientY-this.down_.clientY)<=this.moveTolerance_)return!0}this.down_=null,this.longPressMapDraggable_||this.getDragPanInteraction(r).setActive(!0),this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=null);break;case"singleclick":if(this.isLongPress_)return this.isLongPress_=!1,!1}return!0}var NL=function(t,e){t.addInteraction(new DL(e))},zL="https://api.mapbox.com";function GL(t,e){var r=function(t){return 0!==t.indexOf("mapbox://")?"":t.slice(9)}(t);if(!r)return decodeURI(new URL(t,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: ".concat(t));var n=r.slice(7);return"".concat(zL,"/styles/v1/").concat(n,"?&access_token=").concat(e)}function UL(t){return UL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UL(t)}function qL(){qL=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==UL(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(UL(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function WL(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function VL(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return YL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YL(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function YL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZL(t,e){var r;t.get(xj)!==e&&(t.set(xj,e),e&&t.set(_j,((r=new(hC())("MapDB")).version(1).stores({values:"",tiles:"",layerSources:""}),r.open(),r)),XL(t,e))}function XL(t,e){var r=t.get(dj);if(r)for(var n=0,o=Object.values(r);n<o.length;n++){var i=o[n];if(i.offlineMaxZoom){var a,s=VL(i.group.getLayers().getArray());try{for(s.s();!(a=s.n()).done;){var u=a.value.getSource();if(u instanceof _S||u instanceof Lx){var l=u.getTileGrid(),c=l._origMaxZoom||l.getMaxZoom(),f=e&&i.offlineMaxZoom<c?i.offlineMaxZoom:c,h=void 0;u instanceof _S?h=MT.slice(0,f+1):u instanceof Lx&&(h=wd({maxZoom:f,tileSize:l.getTileSize()}).getResolutions()),u.tileGrid=new md({origin:l.getOrigin(0),extent:l.getExtent(),minZoom:l.getMinZoom(),resolutions:h,tileSize:l.getTileSize()}),u.tileGrid._origMaxZoom=c}}}catch(t){s.e(t)}finally{s.f()}}}}function HL(t,e){var r=new Worker(new URL(s.p+s.u(280),s.b),{type:void 0});return t.set(Sj,r),r.postMessage({action:"startDownload",options:e}),new Promise((function(e,n){return function(t,e,r,n){t.onmessage=function(o){var i=o.data,a=i.action,s=i.success,u=i.error,l=i.msg;"startDownload"===a?(function(t,e,r,n){if(t)r();else{var o;if(e.includes("AxiosError"))try{o=JSON.parse(e)}catch(t){}n(o?new Error("Map download failed.",{cause:o}):new Error(e))}}(s,u,r,n),t.terminate(),e.set(Sj,null)):"logInfo"===a&&h.info(l)}}(r,t,e,n)}))}function KL(t){return JL.apply(this,arguments)}function JL(){var t;return t=qL().mark((function t(e){var r,n,o,i,a,s,u,l,c,f,p,y,d,v,g,m,b;return qL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.config,n=e.map,o=e.extent,i=e.serverUrl,a=e.getAccessToken,s=e.maxConcurrentRequest,u=void 0===s?100:s,l=e.maxTiles,c=void 0===l?3e4:l,f=e.resumeDownload,p=e.isUnitTest,y=void 0!==p&&p,o=nI(o,n.getView().getProjection()),d=QL(r.baseLayers),v=rM({baseLayers:r.baseLayers,map:n,extent:o,maxTiles:c}),g=eM({sources:r.sources,map:n,extent:o,maxTiles:c}),m=v.vectorTilesToDownload.size+v.rasterTilesToDownload.size+g.tilesToDownload.size,h.debug("Total number of map tiles to download: ".concat(m)),!(m>c)){t.next=11;break}throw b="".concat(m," map tiles to download exceeded the maximum of ").concat(c),h.error(b),new Error(b,{cause:"MAX_TILES_EXCEEDED"});case 11:if(!y){t.next=13;break}return t.abrupt("return",{styleJson:d,mapTiles:v,offlineSources:g});case 13:return t.t0=HL,t.t1=n,t.t2=d,t.t3=v,t.t4=g,t.t5=r.fields,t.t6=o,t.t7=i,t.next=23,a();case 23:return t.t8=t.sent,t.t9=devicePixelRatio,t.t10=u,t.t11=f,t.t12={styleJson:t.t2,mapTiles:t.t3,offlineSources:t.t4,fields:t.t5,extent:t.t6,serverUrl:t.t7,accessToken:t.t8,devicePixelRatio:t.t9,maxConcurrentRequest:t.t10,resumeDownload:t.t11},t.next=30,(0,t.t0)(t.t1,t.t12);case 30:case"end":return t.stop()}}),t)})),JL=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){WL(i,n,o,a,s,"next",t)}function s(t){WL(i,n,o,a,s,"throw",t)}a(void 0)}))},JL.apply(this,arguments)}function $L(t){var e=t.get(Sj);e&&(e.terminate(),t.set(Sj,null))}function QL(t){var e,r=[],n=VL(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.offlineCache){if("xyz"===o.layerType)continue;"mapbox"===o.layerType?r.push(GL(o.styleUrl,o.accessToken)):r.push(o.styleJSON)}}}catch(t){n.e(t)}finally{n.f()}return r}function tM(t,e){var r,n=function(t){return t instanceof Yy&&t.get("sourceConfig").url===e},o=function(t){var e,r=VL(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(n(o))return o}}catch(t){r.e(t)}finally{r.f()}},i=VL(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a instanceof uo){var s=o(a.getLayers().getArray());if(s)return s}else if(n(a))return a}}catch(t){i.e(t)}finally{i.f()}}function eM(t){var e=t.sources,r=t.map,n=t.extent,o=t.maxTiles,i={},a=new Set,s=new Set,u=function(t){var e,i,a=function(t,e){for(var r=t.get(vj),n=0,o=Object.values(r);n<o.length;n++){var i=o[n],a=tM(Object.values(i.layers),e);if(a)return a}}(r,t.url);a&&nM({map:r,layer:a,extent:n,minZoom:null===(e=t.offlineCache)||void 0===e?void 0:e.minZoom,maxZoom:null===(i=t.offlineCache)||void 0===i?void 0:i.maxZoom,tilesToDownload:s,maxTiles:o})};for(var l in e){var c=e[l];c.offlineCache&&("geojson"===c.sourceType?i[l]=c:"vector"===c.sourceType&&(c.url.includes("tiles.json")&&a.add(c.url),u(c)))}return{geojson:i,tilejson:a,tilesToDownload:s}}function rM(t){var e,r=t.baseLayers,n=t.map,o=t.extent,i=t.maxTiles,a=new Set,s=new Set,u=new Set,l=function(t,e){var r,l=VL(e);try{for(l.s();!(r=l.n()).done;){var c,f,h=r.value;if(h instanceof Yy)nM({map:n,layer:h,extent:o,minZoom:null===(c=t.offlineCache)||void 0===c?void 0:c.minZoom,maxZoom:null===(f=t.offlineCache)||void 0===f?void 0:f.maxZoom,tilesToDownload:a,maxTiles:i});else if(h instanceof Nl){var p,y;nM({map:n,layer:h,extent:o,minZoom:null===(p=t.offlineCache)||void 0===p?void 0:p.minZoom,maxZoom:null===(y=t.offlineCache)||void 0===y?void 0:y.maxZoom,tilesToDownload:s,maxTiles:i})}else if(h instanceof Cy){var d=h.getSource().getUrl();d&&u.add(d)}}}catch(t){l.e(t)}finally{l.f()}},c=n.get(dj),f=VL(r);try{for(f.s();!(e=f.n()).done;){var h=e.value;h.offlineCache&&l(h,c[h.layerId].group.getLayers().getArray())}}catch(t){f.e(t)}finally{f.f()}return{vectorTilesToDownload:a,rasterTilesToDownload:s,geojsonToDownload:u}}function nM(t){var e=t.map,r=t.layer,n=t.extent,o=t.minZoom,i=void 0===o?0:o,a=t.maxZoom,s=void 0===a?14:a,u=t.tilesToDownload,l=t.maxTiles,c=r.getSource(),f=c.getTileGrid(),h=f.getExtent(),p=e.getView().getProjection(),y=c.getTileUrlFunction();if(Zn(h)||Yn(h,n)){i=Math.max(i,f.getMinZoom()),s=Math.min(s,f.getMaxZoom());for(var d=i;d<=s&&!(u.size>l);d+=1)f.forEachTileCoord(n,d,(function(t){if(Zn(h)||wn(h,t)){var e=y(t,devicePixelRatio,p);u.add(e)}}))}}function oM(t){return oM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oM(t)}function iM(){iM=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new A(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",y="executing",d="completed",v={};function g(){}function m(){}function b(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var S=b.prototype=g.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==oM(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=h;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=P(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(oM(e)+" is not iterable")}return m.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function aM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function sM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?aM(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=oM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=oM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==oM(a)?a:String(a))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uM(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return lM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function lM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cM(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function fM(t){return hM.apply(this,arguments)}function hM(){var t;return t=iM().mark((function t(e){var r,n,o,i,a,s,u,l,c,f,p,y,d,v,g,m,b;return iM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.mapConfig,n=void 0===r?{}:r,o=e.serverUrl,i=e.getAccessToken,a=e.getStringResource,s=e.images,u=e.isOffline,l=e.createOtherLayer,c=e.generateTooltip,f=e.getFeaturesInExtent,p=e.enableTileDebug,y=sM({center:[0,0],zoom:4,target:"map",minZoom:3,maxZoom:20,moveTolerance:7,enableFeatureHover:!1,enableZoomControl:!0},n.options),t.prev=2,(m=new L_({target:y.target,controls:jb({attributionOptions:{collapsible:!1},rotate:!1,zoom:y.enableZoomControl}),view:new Es({center:y.center,zoom:y.zoom,minZoom:y.minZoom,maxZoom:y.maxZoom,enableRotation:!1}),moveTolerance:y.moveTolerance})).set(bj,y.zoom),u&&ZL(m,!0),b=gI(m,n.featurePicker),t.next=9,$j({map:m,baseLayers:n.baseLayers,isOffline:u});case 9:return u&&XL(m,u),GC(m,n.userLocation),null!==(d=n.styles)&&void 0!==d&&d.commonStyles&&wR(n.styles.commonStyles,s),t.next=14,FR({map:m,layers:n.layers,sources:n.sources,fields:n.fields,styleTemplates:null===(v=n.styles)||void 0===v?void 0:v.styleTemplates,layerStyles:null===(g=n.styles)||void 0===g?void 0:g.layerStyles,serverUrl:o,getAccessToken:i,getStringResource:a,select:b,images:s,createOtherLayer:l,generateTooltip:c,getFeaturesInExtent:f});case 14:return p&&m.addLayer(new Nl({source:new EL})),y.enableFeatureHover&&TL(m),y.enableTooltip&&OR(m,n),y.enableLongPress&&NL(m,n),t.abrupt("return",m);case 21:throw t.prev=21,t.t0=t.catch(2),h.error("Create map error: ".concat(t.t0)),new Error("Error creating map");case 25:case"end":return t.stop()}}),t,null,[[2,21]])})),hM=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cM(i,n,o,a,s,"next",t)}function s(t){cM(i,n,o,a,s,"throw",t)}a(void 0)}))},hM.apply(this,arguments)}function pM(t){for(var e=t.get(dj),r=0,n=Object.values(e);r<n.length;r++){var o,i=uM(n[r].group.getLayers().getArray());try{for(i.s();!(o=i.n()).done;)o.value.getSource().refresh()}catch(t){i.e(t)}finally{i.f()}}for(var a=t.get(vj),s=0,u=Object.values(a);s<u.length;s++)for(var l=u[s],c=0,f=Object.values(l.layers);c<f.length;c++){var h=f[c],p=h.get("config");if(null!=p&&p.source){var y=h.getSource();y instanceof jT&&(y=y.getSource()),y.refresh()}}}function yM(t){var e=t.get("userLocation");null!=e&&e.geo&&navigator.geolocation.clearWatch(e.geo.getWatchID())}function dM(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=t.getView(),i=di(vn([[e[0],e[1]],[e[2],e[3]]]),Mj,o.getProjection()),a=Dn(i),s=o.getResolutionForExtent(i,t.getSize());vM(t,a,s,r,n)}function vM(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=t.getView(),a=t.getSize(),s=i.getCenter(),u=vn([s,e]),l=i.getResolutionForExtent(u,a),c=[{resolution:2*Math.max(l,r),center:[(s[0]+e[0])/2,(s[1]+e[1])/2],duration:n/2},{resolution:r,center:e,duration:n/2}];"function"==typeof o&&c.push(o),i.animate.apply(i,c)}function gM(t,e,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,a=t.getView().getProjection(),s=yi(li([r,e],Mj),Mj,a);n&&(o=t.getView().getResolutionForZoom(n)),vM(t,s,o,i)}function mM(t){var e=t.get(jj);if(!e){var r=new iS;e={vectorSource:r,vectorLayer:new Cy({source:r,style:new Vc({image:new hf({anchor:[.5,.5],anchorOrigin:"top-left",anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz48L2RlZnM+CiAgPHBhdGggZD0iTTEyIDJDOC4xMyAyIDUgNS4xMyA1IDlDNSAxNC4yNSAxMiAyMiAxMiAyMkMxMiAyMiAxOSAxNC4yNSAxOSA5QzE5IDUuMTMgMTUuODcgMiAxMiAyWk0xMiAxMS41QzEwLjYyIDExLjUgOS41IDEwLjM4IDkuNSA5QzkuNSA3LjYyIDEwLjYyIDYuNSAxMiA2LjVDMTMuMzggNi41IDE0LjUgNy42MiAxNC41IDlDMTQuNSAxMC4zOCAxMy4zOCAxMS41IDEyIDExLjVaIiBzdHlsZT0iZmlsbDogcmdiKDAsIDEzMSwgMTQzKTsiPjwvcGF0aD4KPC9zdmc+",opacity:1,rotation:0,scale:1.5})}),className:"lm-layer-pin"})},t.set(jj,e)}return e}function bM(t,e,r){if(t){var n=mM(t);n.onClick&&wM(t),n.onClick=function(n){var o=n.coordinate;!function(t,e,r){if(e&&t instanceof Array){var n=mM(e),o=n.vectorSource,i=n.vectorLayer;o.clear();var a=new Xa(t),s=new kv(a);s.setStyle(r||i.getStyle()),o.addFeature(s),e.getLayers().getArray().includes(i)||e.addLayer(i)}else h.error("Invalid map object or coordinates")}(o,t,r),e({longitude:o[0],latitude:o[1]})},t.on("singleclick",n.onClick)}else h.error("Invalid map object")}function wM(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var r=mM(t);r.onClick&&(t.un("singleclick",r.onClick),r.onClick=null);var n=r.vectorSource,o=r.vectorLayer;n.clear(),e&&t.getLayers().getArray().includes(o)&&(t.removeLayer(o),t.set(jj,null))}else h.error("Invalid map object")}})(),u})()).apply(e,n))||(t.exports=o)}}]);