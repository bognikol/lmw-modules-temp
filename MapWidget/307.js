/*! For license information please see 307.js.LICENSE.txt */
(self.webpackChunkde_lmw_MapWidget=self.webpackChunkde_lmw_MapWidget||[]).push([[307],{6082:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(6141),i=r.n(n),o=r(4306),a=r.n(o)()(i());a.push([t.id,":root{--primary-80: #6CB1BD;--primary: #00838F;--primary-120: #005662;--secondary: #414141;--secondary-80: #6C6B6B;--secondary-60: #999;--brand: #C00;--atmo1: #FBFCFC;--atmo2: #F4F5F5;--atmo2s: #E2F0F1;--atmo3: #E8E8E8;--atmo4: #CCCED0;--atmo5: #999;--neutral: #4D8AC0;--neutral-20: #D8E6F1;--positive: #478B1A;--positive-20: #DFECD1;--positive-80: #709C27;--positive-120: #227A10;--warning: #F9C846;--warning-20: #FBF2D8;--warning-80: #F8AC39;--warning-140: #F27C27;--negative: #D43136;--negative-20: #F4D3D4;--negative-80: #ED4747;--negative-120: #B41B3A;--catastrophic: #930A80;--content-bg-color-alt2: #F3F4F6;--background-color-content-bg-color-alt2: #E9ECEF;--content-bg-color-pressed: #CED4DA;--border-light: #E5E7EB;--border-color-border-light: #DEE2E6}.MapWidget__widgetRoot__dWxKD{width:100%;height:100%;box-sizing:border-box}.MapWidget__widgetRoot__dWxKD *{box-sizing:border-box}.MapWidget__mapContainer__KtfXX{width:100%;height:100%}.MapWidget__buttonAddPin__PoeWC{position:absolute;right:20px;top:20px;z-index:10000000}","",{version:3,sources:["webpack://./node_modules/de-lmw-Common/common-sass/colorScheme.sass","webpack://./src/components/MapWidget.sass"],names:[],mappings:"AAAA,MACE,qBAAA,CACA,kBAAA,CACA,sBAAA,CAEA,oBAAA,CACA,uBAAA,CACA,oBAAA,CAEA,aAAA,CAEA,gBAAA,CACA,gBAAA,CACA,iBAAA,CACA,gBAAA,CACA,gBAAA,CACA,aAAA,CAEA,kBAAA,CACA,qBAAA,CACA,mBAAA,CACA,sBAAA,CACA,sBAAA,CACA,uBAAA,CACA,kBAAA,CACA,qBAAA,CACA,qBAAA,CACA,sBAAA,CACA,mBAAA,CACA,sBAAA,CACA,sBAAA,CACA,uBAAA,CACA,uBAAA,CAEA,gCAAA,CACA,iDAAA,CACA,mCAAA,CACA,uBAAA,CACA,oCAAA,CCpCF,8BACE,UAAA,CACA,WAAA,CACA,qBAAA,CAEA,gCACE,qBAAA,CAEJ,gCACE,UAAA,CACA,WAAA,CAEF,gCACE,iBAAA,CACA,UAAA,CACA,QAAA,CACA,gBAAA",sourcesContent:[":root\r\n  --primary-80: #6CB1BD\r\n  --primary: #00838F\r\n  --primary-120: #005662\r\n\r\n  --secondary: #414141\r\n  --secondary-80: #6C6B6B\r\n  --secondary-60: #999\r\n\r\n  --brand: #C00\r\n\r\n  --atmo1: #FBFCFC\r\n  --atmo2: #F4F5F5\r\n  --atmo2s: #E2F0F1\r\n  --atmo3: #E8E8E8\r\n  --atmo4: #CCCED0\r\n  --atmo5: #999\r\n\r\n  --neutral: #4D8AC0\r\n  --neutral-20: #D8E6F1\r\n  --positive: #478B1A\r\n  --positive-20: #DFECD1\r\n  --positive-80: #709C27\r\n  --positive-120: #227A10\r\n  --warning: #F9C846\r\n  --warning-20: #FBF2D8\r\n  --warning-80: #F8AC39\r\n  --warning-140: #F27C27\r\n  --negative: #D43136\r\n  --negative-20: #F4D3D4\r\n  --negative-80: #ED4747\r\n  --negative-120: #B41B3A\r\n  --catastrophic: #930A80\r\n  \r\n  --content-bg-color-alt2: #F3F4F6\r\n  --background-color-content-bg-color-alt2: #E9ECEF\r\n  --content-bg-color-pressed: #CED4DA\r\n  --border-light: #E5E7EB\r\n  --border-color-border-light: #DEE2E6",'@import "../../node_modules/de-lmw-Common/common-sass/colorScheme"\r\n\r\n.widgetRoot\r\n  width: 100%\r\n  height: 100%\r\n  box-sizing: border-box\r\n\r\n  & *\r\n    box-sizing: border-box\r\n\r\n.mapContainer\r\n  width: 100%\r\n  height: 100%\r\n\r\n.buttonAddPin\r\n  position: absolute\r\n  right: 20px\r\n  top: 20px\r\n  z-index: 10000000\r\n'],sourceRoot:""}]),a.locals={widgetRoot:"MapWidget__widgetRoot__dWxKD",mapContainer:"MapWidget__mapContainer__KtfXX",buttonAddPin:"MapWidget__buttonAddPin__PoeWC"};const s=a},4334:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(6141),i=r.n(n),o=r(4306),a=r.n(o)()(i());a.push([t.id,'.de-lmw-MapWidget-tooltip-root{width:fit-content;background:#fff;display:flex;font-size:14px;flex-flow:column nowrap;padding:11px;font-family:"Open Sans",sans-serif;border-radius:4px;color:var(--secondary);box-shadow:0 2px 12px 0 rgba(0,0,0,.2)}.de-lmw-MapWidget-tooltip-firstRow{display:flex;flex-flow:column nowrap;margin-bottom:10px}.de-lmw-MapWidget-tooltip-statusAndName{display:flex;flex-flow:row nowrap}.de-lmw-MapWidget-tooltip-statusCircle{margin:6px;height:12px;width:12px;border-radius:6px}.de-lmw-MapWidget-tooltip-aspName{height:24px;line-height:24px;font-size:16px;font-weight:600}.de-lmw-MapWidget-tooltip-aspId{height:22px;line-height:22px}.de-lmw-MapWidget-tooltip-secondRow{display:flex;flex-flow:row nowrap;align-items:stretch}.de-lmw-MapWidget-tooltip-aspCurrentOperatingStatus{line-height:21px}.de-lmw-MapWidget-tooltip-boldStatus{font-weight:600}',"",{version:3,sources:["webpack://./src/components/Tooltip/AspTooltip.sass"],names:[],mappings:"AACE,+BACE,iBAAA,CACA,eAAA,CACA,YAAA,CACA,cAAA,CACA,uBAAA,CACA,YAAA,CACA,kCAAA,CACA,iBAAA,CACA,sBAAA,CACA,sCAAA,CAEF,mCACE,YAAA,CACA,uBAAA,CACA,kBAAA,CAEF,wCACE,YAAA,CACA,oBAAA,CAEF,uCACE,UAAA,CACA,WAAA,CACA,UAAA,CACA,iBAAA,CAEF,kCACE,WAAA,CACA,gBAAA,CACA,cAAA,CACA,eAAA,CAEF,gCACE,WAAA,CACA,gBAAA,CAEF,oCACE,YAAA,CACA,oBAAA,CACA,mBAAA,CAEF,oDACE,gBAAA,CAEF,qCACE,eAAA",sourcesContent:[":global\r\n  .de-lmw-MapWidget-tooltip-root\r\n    width: fit-content\r\n    background: white\r\n    display: flex\r\n    font-size: 14px\r\n    flex-flow: column nowrap\r\n    padding: 11px\r\n    font-family: 'Open Sans', sans-serif\r\n    border-radius: 4px\r\n    color: var(--secondary)\r\n    box-shadow: 0 2px 12px 0 rgba(0 0 0 / 20%)\r\n\r\n  .de-lmw-MapWidget-tooltip-firstRow\r\n    display: flex\r\n    flex-flow: column nowrap\r\n    margin-bottom: 10px\r\n\r\n  .de-lmw-MapWidget-tooltip-statusAndName\r\n    display: flex\r\n    flex-flow: row nowrap\r\n\r\n  .de-lmw-MapWidget-tooltip-statusCircle\r\n    margin: 6px\r\n    height: 12px\r\n    width: 12px\r\n    border-radius: 6px\r\n\r\n  .de-lmw-MapWidget-tooltip-aspName\r\n    height: 24px\r\n    line-height: 24px\r\n    font-size: 16px\r\n    font-weight: 600\r\n\r\n  .de-lmw-MapWidget-tooltip-aspId\r\n    height: 22px\r\n    line-height: 22px\r\n\r\n  .de-lmw-MapWidget-tooltip-secondRow\r\n    display: flex\r\n    flex-flow: row nowrap\r\n    align-items: stretch\r\n\r\n  .de-lmw-MapWidget-tooltip-aspCurrentOperatingStatus\r\n    line-height: 21px\r\n\r\n  .de-lmw-MapWidget-tooltip-boldStatus\r\n    font-weight: 600"],sourceRoot:""}]),a.locals={};const s=a},6438:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(8894),i=r.n(n),o=r(9379),a=r.n(o),s=r(5971),u=r.n(s),l=r(5723),c=r.n(l),f=r(7177),h=r.n(f),p=r(3038),d=r.n(p),y=r(6082),v={};v.styleTagTransform=d(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),i()(y.Z,v);const g=y.Z&&y.Z.locals?y.Z.locals:void 0},112:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>g});var n=r(8894),i=r.n(n),o=r(9379),a=r.n(o),s=r(5971),u=r.n(s),l=r(5723),c=r.n(l),f=r(7177),h=r.n(f),p=r(3038),d=r.n(p),y=r(4334),v={};v.styleTagTransform=d(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),i()(y.Z,v);const g=y.Z&&y.Z.locals?y.Z.locals:void 0},2397:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapConfig=void 0,e.MapConfig={options:{zoom:7,target:"lm-map-root",minZoom:3,maxZoom:20,moveTolerance:7,enableFeatureHover:!0,enableTooltip:!0,enableLongPress:!0,longPressTime:1e3},userLocation:{provider:"HTMLGeolocationAPI"},baseLayers:[{layerId:"mapbox-streets",layerType:"mapbox",styleUrl:"mapbox://styles/hitachi-powergrids/cknqm8ylu040217ofrgjf097a",accessToken:"pk.eyJ1IjoiaGl0YWNoaS1wb3dlcmdyaWRzIiwiYSI6ImNrazhzMjJscjBlNjUydW5zdDlrcHp2OWQifQ.xkmD6caBhcMQv_j_p4G4EQ",title:"map.baseLayers.mapboxStreet",image:"streetLayer",attributions:"© <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> © <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> <strong><a href='https://www.mapbox.com/map-feedback/' target='_blank'>Improve this map</a></strong>"}],layers:[{groupTitle:"map.layerGroups.layer",groupId:"aspGroup",groupItems:[{layerId:"asp-geojson",layerType:"geojson",offlineCache:!0,source:"asp-geojson",title:"map.layers.aspGroup.aspGeojson",image:"",minZoom:3,maxZoom:20,visible:!0,cluster:!1,selectable:!0,style:"aspStyle",tooltip:{tooltipId:"workOrderTooltip",positioning:"bottom-center",offset:[0,-15]}}]}],sources:{"asp-geojson":{sourceType:"geojson",url:"/v1/dataquery/asset/assetsystemposition/geo?status=Active&bbox={{bbox}}&retrieveAll={{retrieveAll}}&fields={{fields}}",offlineCache:!0,loadingStrategy:"bbox",internalSource:"asset-assetsystemposition"}},fields:{"asset-assetsystemposition":["assetsystempositionUUID","class","criticality","currentOperatingStatus","description","location.locationGIS","name","positionFilledBy","positionId","spatialType","status"]},styles:{layerStyles:{aspStyle:{pointStyle:{lookup:[{styleType:"point",styles:[{style:{type:"geoCircle",size:8,geo:{fill:"#6CB1BD",outline:"#00838F",outlineWidth:4}}}]}]},pointStyleHover:{lookup:[{styleType:"point",styles:[{style:{type:"geoCircle",size:8,geo:{fill:"#E2F0F1",outline:"#6CB1BD",outlineWidth:4}}}]}]},pointStyleSelected:{lookup:[{styleType:"point",styles:[{style:{type:"geoCircle",size:8,geo:{fill:"#E2F0F1",outline:"#005662",outlineWidth:4}}}]}]},lineStyle:{lookup:[{styleType:"line",styles:[{style:{outline:"#00838F",outlineWidth:3,lineDash:[0]}}]}]},lineStyleHover:{lookup:[{styleType:"line",styles:[{style:{outline:"#6CB1BD",outlineWidth:4,lineDash:[0]}}]}]},lineStyleSelected:{lookup:[{styleType:"line",styles:[{style:{outline:"#005662",outlineWidth:4,lineDash:[0]}}]}]},polyStyle:{lookup:[{styleType:"poly",styles:[{style:{fill:"#6CB1BD55",outline:"#00838F",outlineWidth:3}}]}]},polyStyleHover:{lookup:[{styleType:"poly",styles:[{style:{fill:"#6CB1BD55",outline:"#6CB1BD",outlineWidth:4}}]}]},polyStyleSelected:{lookup:[{styleType:"poly",styles:[{style:{fill:"#00838F55",outline:"#005662",outlineWidth:4}}]}]}}}}}},3186:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.MapWidget=void 0;var a,s,u=r(9980),l=r(5095),c=r(1013),f=r(4180),h=r(649),p=r(2397),d=o(r(6438));function y(t){switch(t){case s.Area:return a.Polygon;case s.Linear:return a.LineString;default:return a.Point}}!function(t){t.Point="Point",t.Polygon="Polygon",t.LineString="LineString"}(a||(a={})),function(t){t.Area="Area",t.Linear="Linear"}(s||(s={})),e.MapWidget=function(t){var e=(0,l.useMemo)((function(){return new c.DeLmwBff(new c.CommConfig(t.service?t.service.authService:null,t.service.config))}),[]);return(0,l.useEffect)((function(){var r=new c.CommConfig(t.service.authService,t.service.config);!function(){n(this,void 0,void 0,(function(){var o,a=this;return i(this,(function(u){switch(u.label){case 0:return[4,(0,f.createMap)({mapConfig:p.MapConfig,serverUrl:r.cluster,getAccessToken:function(){return t.service.authService.getToken()},generateTooltip:function(t){return h.Tooltip.generate(t)}})];case 1:return o=u.sent(),(0,f.showCurrentLocation)(o),o.on("selectionChanged",(function(e){var r,n,i=null===(n=null===(r=null==e?void 0:e.selected)||void 0===r?void 0:r.values_)||void 0===n?void 0:n.data;i&&"asset-assetsystemposition"==i.searchDomain&&t.service.communicationService.publish({channel:"MapWidget_select",payload:{uuid:i.assetsystempositionUUID,role:"default",subdomain:"assetsystemposition"}})})),t.service.communicationService.subscribeTo("HierarchyWidget_select",(function(t){return n(a,void 0,void 0,(function(){return i(this,(function(r){return e.getAsp(t.payload.uuid).then((function(t){var e;if((null==t?void 0:t.isOk)&&(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.location)){var r=function(t){switch(t.type){case s.Area:return[t.geometry.map((function(t){return[t.x,t.y]}))];case s.Linear:return t.geometry.map((function(t){return[t.x,t.y]}));default:return[t.geometry[0].x,t.geometry[0].y]}}(t.data.location.locationGIS);(0,f.selectFeatureByIdCoord)({map:o,id:t.data.assetsystempositionUUID,coordinates:r,type:y(t.data.location.locationGIS.type)})}})),[2]}))}))})),[2]}}))}))}()}),[]),(0,u.jsx)("div",{className:d.default.widgetRoot,children:(0,u.jsx)("div",{id:"lm-map-root",className:d.default.mapContainer})})}},3397:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.generateAspTooltip=void 0;var i=r(9610);r(112);var o=n(r(4041));e.generateAspTooltip=function(t){return e=function(t){var e,r,n,a=o.default.t("MapWidget.nameUnknown"),s=o.default.t("MapWidget.idUnknown"),u=o.default.t("MapWidget.unknown");if(!(t&&t.values_&&t.values_.data&&t.values_.data))return null;var l=t.values_.data;if("asset-assetsystemposition"!=l.searchDomain)return i.Log.warn("AspTooltipConfig cannot be generated because searchDomain property of passed deim data does not have value asset-assetsystemposition. "+"Actual searchDomain value: ".concat(l.searchDomain)),null;var c=l.status;return{statusCircleColorCssVariable:function(){switch(c.toUpperCase()){case"ACTIVE":return"--positive-120";case"DRAFT":default:return"--neutral";case"INACTIVE":return"--warning-80";case"CANCEL":return"--negative-120"}}(),aspName:null!==(e=l.name)&&void 0!==e?e:a,aspId:null!==(r=l.positionId)&&void 0!==r?r:s,aspCurrentOperatingStatusColorCssVariable:"--primary",aspCurrentOperatingStatus:null!==(n=l.currentOperatingStatus)&&void 0!==n?n:u}}(t),r=o.default.t("MapWidget.currentOperatingStatus"),'<div class="de-lmw-MapWidget-tooltip-root">\n  <div class="de-lmw-MapWidget-tooltip-firstRow">\n    <div class="de-lmw-MapWidget-tooltip-statusAndName">\n      <div \n        class="de-lmw-MapWidget-tooltip-statusCircle"\n        style="\n          background: var('.concat(e.statusCircleColorCssVariable,');\n      "></div>\n      <div class="de-lmw-MapWidget-tooltip-aspName">\n        ').concat(e.aspName,'\n      </div>\n    </div>\n    <div class="de-lmw-MapWidget-tooltip-aspId">\n      ').concat(e.aspId,'\n    </div>\n  </div>\n  <div class="de-lmw-MapWidget-tooltip-secondRow">\n    <div class="de-lmw-MapWidget-tooltip-aspCurrentOperatingStatus">\n      ').concat(r,'<br />\n      <span \n        class="de-lmw-MapWidget-tooltip-boldStatus"\n        style="color: var(').concat(e.aspCurrentOperatingStatusColorCssVariable,')">\n        ').concat(e.aspCurrentOperatingStatus,"\n      </span>\n    </div>\n  </div>\n</div>");var e,r}},649:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tooltip=void 0;var n=r(9610),i=r(3397),o=function(){function t(){}return t.generate=function(t){return t&&t.values_&&t.values_.data&&t.values_.data.searchDomain?"asset-assetsystemposition"===t.values_.data.searchDomain?(0,i.generateAspTooltip)(t):"":(n.Log.warn("Invalid feature data, tooltip cannot be generated. Feature object:"),n.Log.warn(t),"")},t}();e.Tooltip=o},4041:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.resources=e.defaultNS=void 0;var i=n(r(7502)),o=r(9349),a=n(r(6487)),s=n(r(6263)),u=n(r(8992));e.defaultNS="translation",e.resources={en:{translation:s.default},es:{translation:u.default}},i.default.use(o.initReactI18next).use(a.default).init({resources:e.resources,fallbackLng:"en",supportedLngs:["en","es"]}),e.default=i.default},1307:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3186);r(4041),e.default=n.MapWidget},9610:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Log=void 0;var n=r(1013);e.Log=new n.DeLmwLogger("de-lmw-MapWidget")},1013:(t,e,r)=>{var n,i;n=[r(5095),r(8667),r(995)],void 0===(i=((t,e,r)=>(()=>{"use strict";var n={898:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(912),i=r.n(n),o=r(259),a=r.n(o)()(i());a.push([t.id,'.InfoPopup__infoContainer__ejCoG{display:flex;flex-shrink:0;flex-direction:column;width:352px;font-size:14px;padding:8px 10px 16px 16px;border-radius:4px;color:var(--secondary);font-style:normal;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);font-family:"Open Sans",sans-serif;line-height:22px}.InfoPopup__errorBackground__KP2Rq{background:var(--negative-20)}.InfoPopup__warningBackground__MZeEH{background:var(--warning-20)}.InfoPopup__header__KFPuw{display:flex;align-items:center}.InfoPopup__title__DTzFO{margin-left:12px;font-weight:600}.InfoPopup__noTitle__BrPkf{margin-left:12px;font-weight:400}.InfoPopup__description__vBBCB{width:278px;margin-left:32px;margin-top:10px;font-weight:400}.InfoPopup__closeButton__jphpF{cursor:pointer;margin-left:auto;font-size:16px !important;align-self:flex-start}.InfoPopup__errorIcon__bp6yi{font-size:20px !important;align-self:flex-start}',"",{version:3,sources:["webpack://./src/components/InfoPopup.sass"],names:[],mappings:"AAAA,iCACE,YAAA,CACA,aAAA,CACA,qBAAA,CACA,WAAA,CACA,cAAA,CACA,0BAAA,CACA,iBAAA,CACA,sBAAA,CACA,iBAAA,CACA,iEAAA,CACA,kCAAA,CACA,gBAAA,CAEF,mCACE,6BAAA,CAEF,qCACE,4BAAA,CAEF,0BACE,YAAA,CACA,kBAAA,CAEF,yBACE,gBAAA,CACA,eAAA,CAEF,2BACE,gBAAA,CACA,eAAA,CAEF,+BACE,WAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CAEF,+BACE,cAAA,CACA,gBAAA,CACA,yBAAA,CACA,qBAAA,CAEF,6BACE,yBAAA,CACA,qBAAA",sourcesContent:[".infoContainer\r\n  display: flex\r\n  flex-shrink: 0\r\n  flex-direction: column\r\n  width: 352px\r\n  font-size: 14px\r\n  padding: 8px 10px 16px 16px\r\n  border-radius: 4px\r\n  color: var(--secondary)\r\n  font-style: normal\r\n  box-shadow: 0 1px 3px 0 rgba(0 0 0 / 10%), 0 1px 2px 0 rgba(0 0 0 / 6%)\r\n  font-family: 'Open Sans', sans-serif\r\n  line-height: 22px\r\n\r\n.errorBackground\r\n  background: var(--negative-20)\r\n\r\n.warningBackground\r\n  background: var(--warning-20)\r\n\r\n.header\r\n  display: flex\r\n  align-items: center\r\n\r\n.title\r\n  margin-left: 12px\r\n  font-weight: 600\r\n\r\n.noTitle\r\n  margin-left: 12px\r\n  font-weight: 400\r\n\r\n.description\r\n  width: 278px\r\n  margin-left: 32px\r\n  margin-top: 10px\r\n  font-weight: 400\r\n\r\n.closeButton\r\n  cursor: pointer\r\n  margin-left: auto\r\n  font-size: 16px !important\r\n  align-self: flex-start\r\n\r\n.errorIcon\r\n  font-size: 20px !important\r\n  align-self: flex-start\r\n"],sourceRoot:""}]),a.locals={infoContainer:"InfoPopup__infoContainer__ejCoG",errorBackground:"InfoPopup__errorBackground__KP2Rq",warningBackground:"InfoPopup__warningBackground__MZeEH",header:"InfoPopup__header__KFPuw",title:"InfoPopup__title__DTzFO",noTitle:"InfoPopup__noTitle__BrPkf",description:"InfoPopup__description__vBBCB",closeButton:"InfoPopup__closeButton__jphpF",errorIcon:"InfoPopup__errorIcon__bp6yi"};const s=a},611:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(912),i=r.n(n),o=r(259),a=r.n(o)()(i());a.push([t.id,".Spinner__spinner__qVWxQ .e-spinner-pane .e-spinner-inner .e-spin-bootstrap5{stroke:var(--primary) !important}","",{version:3,sources:["webpack://./src/components/Spinner.sass"],names:[],mappings:"AAEI,6EACE,gCAAA",sourcesContent:[".spinner\r\n  :global\r\n    .e-spinner-pane .e-spinner-inner .e-spin-bootstrap5\r\n      stroke: var(--primary) !important"],sourceRoot:""}]),a.locals={spinner:"Spinner__spinner__qVWxQ"};const s=a},259:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);n&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},912:t=>{t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},53:(t,e,r)=>{var n=r(650),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,r){var n,o={},l=null,c=null;for(n in void 0!==r&&(l=""+r),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,n)&&!u.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:l,ref:c,props:o,_owner:s.current}}e.Fragment=o,e.jsx=l,e.jsxs=l},458:(t,e,r)=>{t.exports=r(53)},427:(t,e,r)=>{r.r(e),r.d(e,{default:()=>g});var n=r(361),i=r.n(n),o=r(497),a=r.n(o),s=r(918),u=r.n(s),l=r(751),c=r.n(l),f=r(66),h=r.n(f),p=r(710),d=r.n(p),y=r(898),v={};v.styleTagTransform=d(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),i()(y.Z,v);const g=y.Z&&y.Z.locals?y.Z.locals:void 0},359:(t,e,r)=>{r.r(e),r.d(e,{default:()=>g});var n=r(361),i=r.n(n),o=r(497),a=r.n(o),s=r(918),u=r.n(s),l=r(751),c=r.n(l),f=r(66),h=r.n(f),p=r(710),d=r.n(p),y=r(611),v={};v.styleTagTransform=d(),v.setAttributes=c(),v.insert=u().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=h(),i()(y.Z,v);const g=y.Z&&y.Z.locals?y.Z.locals:void 0},361:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],l=n.base?u[0]+n.base:u[0],c=o[l]||0,f="".concat(l," ").concat(c);o[l]=c+1;var h=r(f),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var d=i(p,n);n.byIndex=s,e.splice(s,0,{identifier:f,updater:d,references:1})}a.push(f)}return a}function i(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var o=n(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=r(o[a]);e[s].references--}for(var u=n(t,i),l=0;l<o.length;l++){var c=r(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=u}}},918:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},66:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},751:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},497:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},710:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},770:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DeLmwLogger=e.DeLmwLogLevel=void 0,function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"}(r||(e.DeLmwLogLevel=r={}));var n=function(){function t(t,e){void 0===e&&(e=r.Debug),this.packageName=t,this.level=e}return t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level<r.Error||console.error(this.prepareLogData(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level<r.Warn||console.warn(this.prepareLogData(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level<r.Info||console.info(this.prepareLogData(t))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.level<r.Debug||console.debug(this.prepareLogData(t))},t.prototype.prepareLogData=function(t){if(t instanceof Array&&1==t.length){var e=t[0];return"string"==typeof e||e instanceof String?"[".concat(this.packageName,"] - ").concat(e):["[".concat(this.packageName,"]"),e]}return["[".concat(this.packageName,"]"),t]},t}();e.DeLmwLogger=n},980:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Log=void 0;var n=r(770);e.Log=new n.DeLmwLogger("de-lmw-Common")},486:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AspWorkOrdersFields=e.AspHistoryFields=e.DefaultAspFullViewColumns=e.DefaultAspNotFullViewColumns=e.AspMustColumns=void 0,e.AspMustColumns=["assetsystempositionUUID","parentPosition.assetsystempositionUUID"],e.DefaultAspNotFullViewColumns=["positionId","name","positionFilledBy","status","assetsystempositionUUID","parentPosition.assetsystempositionUUID","currentOperatingStatus"],e.DefaultAspFullViewColumns=["assetsystempositionUUID","name","positionId","description","status","parentPosition.name","parentPosition.assetsystempositionUUID","positionFilledBy","createdBy","createdTimestamp","location.locationDescription","site.name","currentOperatingStatus","assetSystemPositionModel.name","assetSystemPositionModel.positionMultiplicity","legalEntity.displayName","operator.displayName"],e.AspHistoryFields=["assetPositionHistoryUUID","action","actionDateTime","description","workOrder.workOrderId","asset.assetId"],e.AspWorkOrdersFields=["workOrderUUID","workOrderId","description","status","plannedStartDateTime","requiredByDateTime","plannedDuration"]},711:function(t,e){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function n(t){switch(t){case"Mandatory":return"1 required";case"Optional":return"0 or 1";case"Multiple":return"0 or many";default:return"Unknown value"}}Object.defineProperty(e,"__esModule",{value:!0}),e.convertPositionMultiplicity=void 0,e.convertPositionMultiplicity=function(t){return t.map((function(t){var e;return(null===(e=t.assetSystemPositionModel)||void 0===e?void 0:e.positionMultiplicity)?r(r({},t),{assetSystemPositionModel:r(r({},t.assetSystemPositionModel),{positionMultiplicity:n(t.assetSystemPositionModel.positionMultiplicity)})}):t}))}},884:function(t,e,r){var n=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CommConfig=void 0;var o=i(r(120)),a=r(980),s=r(486);e.CommConfig=function(t,e){this.timeout=15e3,this.authService=t,this.cluster="".concat(location.protocol,"//").concat(location.host);var r=((null==e?void 0:e.fullView)?e:o.default).fullView.map((function(t){return t.columnName}));this.fullViewColumns=Array.from(new Set(n(n([],s.AspMustColumns,!0),r,!0)));var i=((null==e?void 0:e.notFullView)?e:o.default).notFullView.map((function(t){return t.columnName}));this.notFullViewColumns=Array.from(new Set(n(n([],s.AspMustColumns,!0),i,!0))),this.pageSize=(null==e?void 0:e.loadRowsOnScroll)?e.loadRowsOnScroll:o.default.loadRowsOnScroll,this.sortBy=(null==e?void 0:e.sortBy)?e.sortBy:o.default.sortBy,this.fields=Array.from(new Set(n(n([],this.fullViewColumns,!0),this.notFullViewColumns,!0))),a.Log.debug("fields",this.fields)}},507:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)},i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.DeLmwBff=void 0;var a=r(980),s=r(711),u=r(813),l=function(){function t(t){this.commConfig=t,this.deLmwComm=new u.DeLmwComm(this.commConfig),a.Log.debug("DeLmwBff - constructor")}return t.prototype.getRootAsps=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=20),i(this,void 0,void 0,(function(){var r,n,i,u,l,c;return o(this,(function(o){switch(o.label){case 0:return a.Log.debug("getRootAsps",t,e),[4,this.deLmwComm.getAspRoot(t,e)];case 1:if(!(r=o.sent()).isOk||!r.data.result)return[3,5];o.label=2;case 2:for(o.trys.push([2,4,,5]),r.data.result=(0,s.convertPositionMultiplicity)(r.data.result),n=[],i=0,u=r.data.result;i<u.length;i++)l=u[i],a.Log.debug("Check children:",l.assetsystempositionUUID),n.push(this.hasChildren(l));return a.Log.debug("Promise.all - start"),[4,Promise.all(n)];case 3:return o.sent(),a.Log.debug("Promise.all - end"),[3,5];case 4:return c=o.sent(),a.Log.error("Promise.all - error",c),[3,5];case 5:return[2,r]}}))}))},t.prototype.getChildrenAsps=function(t){var e;return i(this,void 0,void 0,(function(){var r,n,i,u,l,c,f;return o(this,(function(o){switch(o.label){case 0:return a.Log.debug("getChildrenAsps",t),[4,this.deLmwComm.getChildrenForOneParent(t)];case 1:if(!(r=o.sent()).isOk||!(null===(e=r.data)||void 0===e?void 0:e.result))return[3,6];n=(0,s.convertPositionMultiplicity)(r.data.result),o.label=2;case 2:for(o.trys.push([2,4,,5]),i=[],u=0,l=n;u<l.length;u++)c=l[u],a.Log.debug("Check children:",c.assetsystempositionUUID),i.push(this.hasChildren(c));return a.Log.debug("Promise.all - start"),[4,Promise.all(i)];case 3:return o.sent(),a.Log.debug("Promise.all - end"),[3,5];case 4:return f=o.sent(),a.Log.error("Promise.all - error",f),[3,5];case 5:return[2,{data:n,isOk:!0,errorMsg:"",code:r.code}];case 6:return[2,{data:null,isOk:r.isOk,errorMsg:r.errorMsg,code:r.code}]}}))}))},t.prototype.getParentWithChildrenAsps=function(t){var e;return i(this,void 0,void 0,(function(){var r,n,i,u,l,c,f;return o(this,(function(o){switch(o.label){case 0:return a.Log.debug("getParentWithChildrenAsps",t),[4,this.deLmwComm.getParentWithChildren(t)];case 1:if(!(r=o.sent()).isOk||!(null===(e=r.data)||void 0===e?void 0:e.result))return[3,6];n=(0,s.convertPositionMultiplicity)(r.data.result),o.label=2;case 2:for(o.trys.push([2,4,,5]),i=[],u=0,l=n;u<l.length;u++)c=l[u],a.Log.debug("Check children:",c.assetsystempositionUUID),i.push(this.hasChildren(c));return a.Log.debug("Promise.all - start"),[4,Promise.all(i)];case 3:return o.sent(),a.Log.debug("Promise.all - end"),[3,5];case 4:return f=o.sent(),a.Log.error("Promise.all - error",f),[3,5];case 5:return[2,{data:n,isOk:!0,errorMsg:"",code:r.code}];case 6:return[2,{data:null,isOk:r.isOk,errorMsg:r.errorMsg,code:r.code}]}}))}))},t.prototype.searchAndFilter=function(t,e,r,n){return void 0===r&&(r=0),void 0===n&&(n=20),i(this,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return a.Log.debug("searchAndFilter",t,e,r,n),[4,this.deLmwComm.executeSearchAndFilter(t,e,r,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.getAsp=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return a.Log.debug("getAsp",t),[4,this.deLmwComm.getDeimRecord("asset","assetsystemposition",t)];case 1:return(e=r.sent()).isOk&&e.data?[2,{data:e.data.data,isOk:!0,errorMsg:"",code:e.code}]:[2,{data:null,isOk:!1,errorMsg:e.errorMsg,code:e.code}]}}))}))},t.prototype.getAspHistory=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return a.Log.debug("getAspHistory",t),[4,this.deLmwComm.getAspHistory(t)];case 1:return(e=r.sent()).isOk&&e.data?[2,e]:[2,{data:null,isOk:!1,errorMsg:e.errorMsg,code:e.code}]}}))}))},t.prototype.getAspFields=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return a.Log.debug("getAspFields"),[4,this.deLmwComm.getRefs("de.asset.assetsystemposition-1.0.0.json")];case 1:if((t=e.sent()).isOk&&t.data)try{return[2,{data:Object.keys(t.data.properties),isOk:!0,errorMsg:"",code:t.code}]}catch(e){return[2,{data:null,isOk:!1,errorMsg:e,code:t.code}]}return[2,{data:null,isOk:!1,errorMsg:t.errorMsg,code:t.code}]}}))}))},t.prototype.getAspWorkOrders=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return a.Log.debug("getAspWorkOrders"),[4,this.deLmwComm.getAspWorkOrders(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.getAvailableActionsForAsp=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return a.Log.debug("getAvailableActionsForAsp"),[4,this.deLmwComm.getAvailableActions("asset","assetsystemposition",t)];case 1:return[2,e.sent()]}}))}))},t.prototype.downloadOrOpenAttachment=function(t,e,r){return i(this,void 0,void 0,(function(){var n,i,s;return o(this,(function(o){switch(o.label){case 0:return a.Log.debug("downloadAttachment"),[4,this.deLmwComm.downloadAttachment(t,e)];case 1:return(n=o.sent())&&n.isOk&&n.data?(i=window.URL.createObjectURL(n.data),r?(s=document.createElement("a"),document.body.appendChild(s),s.href=i,s.download=r,s.click(),document.body.removeChild(s)):window.open(i),window.URL.revokeObjectURL(i),[2,{data:null,isOk:!0,errorMsg:"",code:n.code}]):[2,{data:null,isOk:!1,errorMsg:n.errorMsg,code:n.code}]}}))}))},t.prototype.getEffectiveMaintenanceStrategyForAsp=function(t){var e;return i(this,void 0,void 0,(function(){var r,i,s,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.deLmwComm.getEffectiveMaintenanceStrategy("assetsystemposition",t)];case 1:return r=o.sent(),i=null,r.isOk&&r.data&&(i=null===(e=null==r?void 0:r.data)||void 0===e?void 0:e.maintenancestrategyUUID),i?[4,this.deLmwComm.getDeimRecord("maintenancestrategy","maintenancestrategy",i)]:[2,{data:null,isOk:!1,errorMsg:r.errorMsg,code:r.code}];case 2:return(s=o.sent()).isOk&&s.data&&s.data.data?[2,{data:n(n({},r.data),s.data.data),isOk:!0,errorMsg:"",code:s.code}]:[2,{data:null,isOk:!1,errorMsg:s.errorMsg,code:s.code}];case 3:return u=o.sent(),a.Log.error(u),[2,{data:null,isOk:!1,errorMsg:"There was an error while obtaining effective maintenance strategy.",code:0}];case 4:return[2]}}))}))},t.prototype.downloadAttachmentThumbnail=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return a.Log.debug("downloadAttachmentThumbnail"),[4,this.deLmwComm.downloadAttachmentThumbnail(t)];case 1:return(e=r.sent())&&e.isOk&&e.data?[2,{data:window.URL.createObjectURL(e.data),isOk:!0,errorMsg:"",code:e.code}]:[2,{data:null,isOk:!1,errorMsg:e.errorMsg,code:e.code}]}}))}))},t.prototype.getI18n=function(t,e){return i(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return a.Log.debug("getI18n",t,e),[4,this.deLmwComm.getI18n(t,e)];case 1:if((r=n.sent()).isOk&&r.data)try{return[2,{data:r.data[t][e],isOk:!0,errorMsg:"",code:r.code}]}catch(t){return[2,{data:null,isOk:!1,errorMsg:t}]}return[2,{data:null,isOk:!1,errorMsg:r.errorMsg,code:r.code}]}}))}))},t.prototype.generateSummaryUiViewerUrl=function(t,e,r,n,i){var o;if(void 0===i&&(i=null),!(t&&e&&r&&n))return null;var a=JSON.stringify(((o={})[r]=[n],o)),s=encodeURIComponent(a),u="#".concat(t,"-").concat(e,"?filters=").concat(s);i&&(u="".concat(u,"&actionUUID=").concat(i));var l=new URL("summary/",this.commConfig.cluster).toString();return"".concat(l).concat(u)},t.prototype.hasChildren=function(t){var e;return i(this,void 0,void 0,(function(){var r,n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.deLmwComm.getHierarchy(t.assetsystempositionUUID,1,!1)];case 1:return(null==(r=i.sent())?void 0:r.isOk)&&(null===(e=r.data)||void 0===e?void 0:e.hierarchy)?t.hasChildren=r.data.hierarchy.hasChildren:(a.Log.debug("Check children - no response",t.assetsystempositionUUID),t.hasChildren=!1),[3,3];case 2:return n=i.sent(),a.Log.error("hasChildren - error:",n),t.hasChildren=!1,[3,3];case 3:return[2]}}))}))},t.emptyDataResult=u.DeLmwComm.emptyDataResult,t}();e.DeLmwBff=l},813:function(t,e,r){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.DeLmwComm=void 0;var l,c=a(r(328)),f=r(980),h=r(486),p={exists:{field:"parentPosition.assetsystempositionUUID"}},d={term:{status:{value:"Deleted"}}},y=15e3;!function(t){t[t.All=0]="All",t[t.OnlyRoots=1]="OnlyRoots",t[t.OnlyChildren=2]="OnlyChildren",t[t.ChildrenForOneParent=3]="ChildrenForOneParent",t[t.ParentWithChildren=4]="ParentWithChildren"}(l||(l={}));var v=function(){function t(t){var e;this.commConfig=t,this.headers={Authorization:"","Content-Type":"application/json","Cache-Control":"no-cache"},f.Log.debug("DeLmwComm - constructor",t),this.isOnLm=null!=t.authService,this.aspUrl="".concat(t.cluster).concat("/v1/dataquery/asset/assetsystemposition/search"),this.aspHistoryUrl="".concat(t.cluster).concat("/v1/dataquery/asset/assetpositionhistory/search"),this.aspWorkOrderUrl="".concat(t.cluster).concat("/v1/dataquery/workorder/workorder/search"),this.hierarchyUrl="".concat(t.cluster).concat("/v1/dataquery/asset/assetsystemposition/hierarchy?targetID=<UUID>"),this.refsUrl="".concat(t.cluster).concat("/v1/deimapi/refs?root="),this.deimRecordUrl="".concat(t.cluster).concat("/v1/dataquery/<domain>/<subdomain>/<uuid>"),this.attachmentUrl="".concat(t.cluster).concat("/v2/attachments/download/<uuid>"),this.attachmentThumbnailUrl="".concat(this.attachmentUrl,"?thumbNail=true"),this.i18nUrl="".concat(t.cluster).concat("/v1/i18n/resources"),this.findActionsUrl="".concat(t.cluster).concat("/v1/business-rules/actions/findActions?domain=<domain>&subdomain=<subdomain>&uuid=<uuid>"),this.maintenanceStrategyUrl="".concat(t.cluster).concat("/v1/mr/maintenancestrategy?subdomain=<subdomain>&uuid=<uuid>"),this.sortValue=[(e={},e[t.sortBy]="DESC",e)]}return t.prototype.getAspRoot=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.commConfig.pageSize),this.getAsp(l.OnlyRoots,t,e)},t.prototype.getAspChildren=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.commConfig.pageSize),this.getAsp(l.OnlyChildren,t,e)},t.prototype.getAspAll=function(){return this.getAsp(l.All,0,y)},t.prototype.getChildrenForOneParent=function(t){return this.getAsp(l.ChildrenForOneParent,0,y,t)},t.prototype.getParentWithChildren=function(t){return this.getAsp(l.ParentWithChildren,0,y,t)},t.prototype.getAsp=function(t,e,r,n){return void 0===t&&(t=l.All),void 0===e&&(e=0),void 0===r&&(r=this.commConfig.pageSize),void 0===n&&(n=""),s(this,void 0,void 0,(function(){var i,o;return u(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),f.Log.debug("getAsp",this.aspUrl,t,e,r),[4,this.setAuthorization()];case 1:return a.sent(),[4,c.default.post(this.aspUrl,this.createAspPayload(t,e,r,n),this.getAxiosConfig())];case 2:return[2,{data:{count:(i=a.sent()).data.total,result:i.data.results},isOk:!0,errorMsg:"",code:i.status}];case 3:return o=a.sent(),[2,this.processError("getAsp",o,!0)];case 4:return[2]}}))}))},t.prototype.getHierarchy=function(t,e,r){return void 0===e&&(e=10),void 0===r&&(r=!0),s(this,void 0,void 0,(function(){var n,i,o;return u(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),f.Log.debug("getHierarchy",t,e,r),n=this.hierarchyUrl.replace("<UUID>",t),n+="&depth=".concat(e),r&&(n+="&dataFields=all"),[4,this.setAuthorization()];case 1:return a.sent(),[4,c.default.get(n,this.getAxiosConfig())];case 2:return[2,{data:(i=a.sent()).data,isOk:!0,errorMsg:"",code:i.status}];case 3:return o=a.sent(),[2,this.processError("getHierarchy",o)];case 4:return[2]}}))}))},t.prototype.executeSearchAndFilter=function(t,e,r,n){return void 0===r&&(r=0),void 0===n&&(n=20),s(this,void 0,void 0,(function(){var i,o;return u(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),f.Log.debug("executeSearchAndFilter",t,r,n),[4,this.setAuthorization()];case 1:return a.sent(),[4,c.default.post(this.aspUrl,this.createSearchFilterPayload(t,e,r,n),this.getAxiosConfig())];case 2:return[2,{data:{count:(i=a.sent()).data.total,result:i.data.results},isOk:!0,errorMsg:"",code:i.status}];case 3:return o=a.sent(),[2,this.processError("executeSearchAndFilter",o,!0)];case 4:return[2]}}))}))},t.prototype.getAspHistory=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=5e3),s(this,void 0,void 0,(function(){var n,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),f.Log.debug("getAspHistory",t,e,r),[4,this.setAuthorization()];case 1:return o.sent(),[4,c.default.post(this.aspHistoryUrl,this.createAspHistoryPayload(t,e,r),this.getAxiosConfig())];case 2:return[2,{data:(n=o.sent()).data.results,isOk:!0,errorMsg:"",code:n.status}];case 3:return i=o.sent(),[2,this.processError("getAspHistory",i)];case 4:return[2]}}))}))},t.prototype.getAspWorkOrders=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=5e3),s(this,void 0,void 0,(function(){var n,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),f.Log.debug("searching workorders for asp: ",t),[4,this.setAuthorization()];case 1:return o.sent(),[4,c.default.post(this.aspWorkOrderUrl,this.createAspWorkOrdersPayload(t,e,r),this.getAxiosConfig())];case 2:return[2,{data:(n=o.sent()).data.results,isOk:!0,errorMsg:"",code:n.status}];case 3:return i=o.sent(),[2,this.processError("getAspWorkOrders",i)];case 4:return[2]}}))}))},t.prototype.getAvailableActions=function(t,e,r){var n;return s(this,void 0,void 0,(function(){var i,o,a;return u(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),f.Log.debug("getting available actions for ".concat(e," ").concat(r)),i=this.findActionsUrl.replace("<domain>",t).replace("<subdomain>",e).replace("<uuid>",r),[4,this.setAuthorization()];case 1:return s.sent(),[4,c.default.get(i,this.getAxiosConfig())];case 2:return o=s.sent(),[2,{data:this.extractBusinessActions(null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.payload),isOk:!0,errorMsg:"",code:o.status}];case 3:return a=s.sent(),[2,this.processError("getAvailableActions",a)];case 4:return[2]}}))}))},t.prototype.getDeimRecord=function(t,e,r){return s(this,void 0,void 0,(function(){var n,i,o;return u(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),f.Log.debug("getDeimRecord",t,e,r),n=this.crteateDeimRecordUrl(t,e,r),[4,this.setAuthorization()];case 1:return a.sent(),[4,c.default.get(n,this.getAxiosConfig())];case 2:return[2,{data:(i=a.sent()).data,isOk:!0,errorMsg:"",code:i.status}];case 3:return o=a.sent(),[2,this.processError("getDeimRecord",o)];case 4:return[2]}}))}))},t.prototype.getRefs=function(t){return s(this,void 0,void 0,(function(){var e,r,n;return u(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),f.Log.debug("getRefs",t),e=this.refsUrl+t,[4,this.setAuthorization()];case 1:return i.sent(),[4,c.default.get(e,this.getAxiosConfig())];case 2:return[2,{data:(r=i.sent()).data,isOk:!0,errorMsg:"",code:r.status}];case 3:return n=i.sent(),[2,this.processError("getRefs",n)];case 4:return[2]}}))}))},t.prototype.downloadAttachment=function(t,e){return s(this,void 0,void 0,(function(){var r,i,o,a;return u(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),f.Log.debug("downloadAttachment",t),r=this.attachmentUrl.replace("<uuid>",t),[4,this.setAuthorization()];case 1:return s.sent(),i="pdf"===e,[4,c.default.get(r,n(n({},this.getAxiosConfig("application/octet-stream")),{responseType:i?"arraybuffer":"blob"}))];case 2:return o=s.sent(),[2,{data:i?new Blob([o.data],{type:"application/pdf"}):o.data,isOk:!0,errorMsg:"",code:o.status}];case 3:return a=s.sent(),[2,this.processError("downloadAttachment",a)];case 4:return[2]}}))}))},t.prototype.getEffectiveMaintenanceStrategy=function(t,e){return s(this,void 0,void 0,(function(){var r,n,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),f.Log.debug("getting effective maintenance strategy for ".concat(t," ").concat(e)),r=this.maintenanceStrategyUrl.replace("<subdomain>",t).replace("<uuid>",e),[4,this.setAuthorization()];case 1:return o.sent(),[4,c.default.get(r,this.getAxiosConfig())];case 2:return[2,{data:null==(n=o.sent())?void 0:n.data,isOk:!0,errorMsg:"",code:n.status}];case 3:return i=o.sent(),[2,this.processError("getEffectiveMaintenanceStrategy",i)];case 4:return[2]}}))}))},t.prototype.downloadAttachmentThumbnail=function(t){return s(this,void 0,void 0,(function(){var e,r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),f.Log.debug("downloadAttachmentThumbnail",t),e=this.attachmentThumbnailUrl.replace("<uuid>",t),[4,this.setAuthorization()];case 1:return o.sent(),[4,c.default.get(e,n(n({},this.getAxiosConfig("application/octet-stream")),{responseType:"blob"}))];case 2:return[2,{data:(r=o.sent()).data,isOk:!0,errorMsg:"",code:r.status}];case 3:return i=o.sent(),[2,this.processError("downloadAttachmentThumbnail",i)];case 4:return[2]}}))}))},t.prototype.getI18n=function(t,e){return s(this,void 0,void 0,(function(){var r,n,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),f.Log.debug("getI18n",t,e),r="".concat(this.i18nUrl,"?lng=").concat(t,"&ns=").concat(e),[4,this.setAuthorization()];case 1:return o.sent(),[4,c.default.get(r,this.getAxiosConfig())];case 2:return[2,{data:(n=o.sent()).data,isOk:!0,errorMsg:"",code:n.status}];case 3:return i=o.sent(),[2,this.processError("getI18n",i)];case 4:return[2]}}))}))},t.prototype.setAuthorization=function(){return s(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return this.isOnLm?[4,this.commConfig.authService.getToken()]:[3,2];case 1:return t=e.sent(),this.headers.Authorization="Bearer ".concat(t),[3,3];case 2:this.headers.Authorization="Bearer ".concat(this.commConfig.testJwt),e.label=3;case 3:return[2]}}))}))},t.prototype.extractBusinessActions=function(t){var e=[];return Array.isArray(t)?(t.forEach((function(t){t.name&&t.actionUUID&&t.actionId&&e.push({name:t.name,uuid:t.actionUUID,id:t.actionId})})),e):e},t.prototype.createAspPayload=function(t,e,r,n){void 0===t&&(t=l.All),void 0===e&&(e=0),void 0===r&&(r=this.commConfig.pageSize),void 0===n&&(n="");var i={filters:{},from:e,size:r,sort:this.sortValue,fields:this.commConfig.fields,must:[],should:[],must_not:[d],inlineAll:!0};switch(t){case l.OnlyRoots:i.must_not.push(p);break;case l.OnlyChildren:i.must.push(p);break;case l.ChildrenForOneParent:i.must.push(p),i.filters={"parentPosition.assetsystempositionUUID":n};break;case l.ParentWithChildren:i.should.push({term:{assetsystempositionUUID:{value:n}}}),i.should.push({term:{"parentPosition.assetsystempositionUUID":{value:n}}})}return i},t.prototype.createSearchFilterPayload=function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=this.commConfig.pageSize);var i=this.createAspPayload(l.All,r,n);if(t&&(i.wildcard={"asset.name":t,assetMeasurementGroup:t,"assetSystemPositionModel.name":t,createdBy:t,description:t,"legalEntity.displayName":t,"legalEntity.parentParty.displayName":t,"location.locationId":t,name:t,"operator.displayName":t,"operator.parentParty.displayName":t,"parentPosition.name":t,positionDescriptor:t,positionId:t,"serviceProvider.displayName":t,"solutionAttributes.assetSuite.equipmentGroupId":t,"solutionAttributes.assetSuite.equipmentGroupType":t,"solutionAttributes.assetSuite.locationDescription":t}),e){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c="".concat(u.field,".keyword"),f="*".concat(u.value,"*"),h='{"wildcard": {"'.concat(c,'": {"value": "').concat(f,'"}}}');o.push(JSON.parse(h))}i.must=o}return i},t.prototype.createAspWorkOrdersPayload=function(t,e,r){return{from:e,size:r,filters:{status:["Open","Potential"],"position.assetsystempositionUUID":t},sort:[{requiredByDateTime:"ASC"}],fields:h.AspWorkOrdersFields}},t.prototype.crteateDeimRecordUrl=function(t,e,r){var n=this.deimRecordUrl.replace("<domain>",t);return(n=n.replace("<subdomain>",e)).replace("<uuid>",r)},t.prototype.createAspHistoryPayload=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1e3),{filters:{"position.assetsystempositionUUID":t},sort:[{createdTimestamp:"DESC"}],from:e,size:r,fields:h.AspHistoryFields,inlineAll:!0}},t.prototype.processError=function(e,r,n){var i,o;if(void 0===n&&(n=!1),f.Log.error(e,"Failed getting data:",r),r instanceof c.AxiosError){var a=r;return{data:n?null==t?void 0:t.emptyDataResult:null,isOk:!1,errorMsg:null==a?void 0:a.message,code:null===(i=null==a?void 0:a.response)||void 0===i?void 0:i.status}}return{data:n?t.emptyDataResult:null,isOk:!1,errorMsg:"No AxiosError",code:null===(o=null==r?void 0:r.response)||void 0===o?void 0:o.status}},t.prototype.getAxiosConfig=function(t){return void 0===t&&(t="application/json"),{timeout:this.commConfig.timeout,headers:n(n({},this.headers),{Accept:t})}},t.emptyDataResult={count:0,result:[]},t}();e.DeLmwComm=v},7:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InfoPopup=e.InfoPopupType=void 0;var i,o=r(458),a=n(r(303)),s=n(r(427));!function(t){t.Error="error",t.Warning="warning"}(i||(e.InfoPopupType=i={})),e.InfoPopup=function(t){var e=s.default.warningBackground;switch(t.type){case i.Error:e=s.default.errorBackground;break;case i.Warning:default:e=s.default.warningBackground}return t.description?(0,o.jsxs)("div",{className:(0,a.default)(s.default.infoContainer,e,t.className),"data-testid":"popup-container",children:[(0,o.jsxs)("div",{className:s.default.header,"data-testid":"popup-container-header",children:[(0,o.jsx)("div",{className:(0,a.default)("material-symbols-outlined",s.default.errorIcon),"data-testid":"popup-error",children:"error"}),t.title?(0,o.jsx)("div",{className:s.default.title,"data-testid":"popup-container-header-title",children:t.title}):(0,o.jsx)("div",{className:s.default.noTitle,"data-testid":"popup-container-header-description",children:t.description}),(0,o.jsx)("div",{onClick:function(){return t.onClose()},"data-testid":"popup-close",className:(0,a.default)("material-symbols-outlined",s.default.closeButton),children:"close"})]}),t.title?(0,o.jsx)("div",{className:s.default.description,"data-testid":"popup-container-description",children:t.description}):null]}):null}},945:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MaterialIcon=void 0;var n=r(458);e.MaterialIcon=function(t){var e="material-symbols-outlined";return t.className&&(e+=" ".concat(t.className)),(0,n.jsx)("div",{className:e,"data-testid":t.dataTestId,style:{fontSize:t.size},children:t.symbol})}},845:function(t,e,r){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Spinner=void 0;var i=r(458),o=r(650),a=n(r(303)),s=r(768),u=r(980),l=n(r(359));e.Spinner=function(t){var e=(0,o.useRef)(null);return(0,o.useEffect)((function(){e?((0,s.createSpinner)({target:e.current}),(0,s.showSpinner)(e.current)):u.Log.error("Spinner could not be initialized because target container is not ready.")}),[]),(0,i.jsx)("div",{className:(0,a.default)(l.default.spinner,t.className),ref:e})}},768:t=>{t.exports=r},303:t=>{t.exports=e},650:e=>{e.exports=t},328:(t,e,r)=>{function n(t,e){return function(){return t.apply(e,arguments)}}const{toString:i}=Object.prototype,{getPrototypeOf:o}=Object,a=(s=Object.create(null),t=>{const e=i.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())});var s;const u=t=>(t=t.toLowerCase(),e=>a(e)===t),l=t=>e=>typeof e===t,{isArray:c}=Array,f=l("undefined"),h=u("ArrayBuffer"),p=l("string"),d=l("function"),y=l("number"),v=t=>null!==t&&"object"==typeof t,g=t=>{if("object"!==a(t))return!1;const e=o(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},m=u("Date"),b=u("File"),_=u("Blob"),w=u("FileList"),x=u("URLSearchParams");function S(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let n,i;if("object"!=typeof t&&(t=[t]),c(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function k(t,e){e=e.toLowerCase();const r=Object.keys(t);let n,i=r.length;for(;i-- >0;)if(n=r[i],e===n.toLowerCase())return n;return null}const O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,E=t=>!f(t)&&t!==O,A=(P="undefined"!=typeof Uint8Array&&o(Uint8Array),t=>P&&t instanceof P);var P;const C=u("HTMLFormElement"),j=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),M=u("RegExp"),T=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};S(r,((r,i)=>{let o;!1!==(o=e(r,i,t))&&(n[i]=o||r)})),Object.defineProperties(t,n)},R="abcdefghijklmnopqrstuvwxyz",I="0123456789",L={DIGIT:I,ALPHA:R,ALPHA_DIGIT:R+R.toUpperCase()+I},F=u("AsyncFunction");var D={isArray:c,isArrayBuffer:h,isBuffer:function(t){return null!==t&&!f(t)&&null!==t.constructor&&!f(t.constructor)&&d(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||d(t.append)&&("formdata"===(e=a(t))||"object"===e&&d(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&h(t.buffer),e},isString:p,isNumber:y,isBoolean:t=>!0===t||!1===t,isObject:v,isPlainObject:g,isUndefined:f,isDate:m,isFile:b,isBlob:_,isRegExp:M,isFunction:d,isStream:t=>v(t)&&d(t.pipe),isURLSearchParams:x,isTypedArray:A,isFileList:w,forEach:S,merge:function t(){const{caseless:e}=E(this)&&this||{},r={},n=(n,i)=>{const o=e&&k(r,i)||i;g(r[o])&&g(n)?r[o]=t(r[o],n):g(n)?r[o]=t({},n):c(n)?r[o]=n.slice():r[o]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&S(arguments[t],n);return r},extend:(t,e,r,{allOwnKeys:i}={})=>(S(e,((e,i)=>{r&&d(e)?t[i]=n(e,r):t[i]=e}),{allOwnKeys:i}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,n)=>{let i,a,s;const u={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],n&&!n(s,t,e)||u[s]||(e[s]=t[s],u[s]=!0);t=!1!==r&&o(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:u,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return-1!==n&&n===r},toArray:t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!y(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=r.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:C,hasOwnProperty:j,hasOwnProp:j,reduceDescriptors:T,freezeMethods:t=>{T(t,((e,r)=>{if(d(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=t[r];d(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},n=t=>{t.forEach((t=>{r[t]=!0}))};return c(t)?n(t):n(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:k,global:O,isContextDefined:E,ALPHABET:L,generateString:(t=16,e=L.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&d(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,n)=>{if(v(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const i=c(t)?[]:{};return S(t,((t,e)=>{const o=r(t,n+1);!f(o)&&(i[e]=o)})),e[n]=void 0,i}}return t};return r(t,0)},isAsyncFn:F,isThenable:t=>t&&(v(t)||d(t))&&d(t.then)&&d(t.catch)};function B(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}D.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const N=B.prototype,z={};function G(t){return D.isPlainObject(t)||D.isArray(t)}function U(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function q(t,e,r){return t?t.concat(e).map((function(t,e){return t=U(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{z[t]={value:t}})),Object.defineProperties(B,z),Object.defineProperty(N,"isAxiosError",{value:!0}),B.from=(t,e,r,n,i,o)=>{const a=Object.create(N);return D.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),B.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const W=D.toFlatObject(D,{},null,(function(t){return/^is[A-Z]/.test(t)}));function V(t,e,r){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(r=D.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!D.isUndefined(e[t])}))).metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(D.isDate(t))return t.toISOString();if(!s&&D.isBlob(t))throw new B("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(t)||D.isTypedArray(t)?s&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function l(t,r,i){let s=t;if(t&&!i&&"object"==typeof t)if(D.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(D.isArray(t)&&function(t){return D.isArray(t)&&!t.some(G)}(t)||(D.isFileList(t)||D.endsWith(r,"[]"))&&(s=D.toArray(t)))return r=U(r),s.forEach((function(t,n){!D.isUndefined(t)&&null!==t&&e.append(!0===a?q([r],n,o):null===a?r:r+"[]",u(t))})),!1;return!!G(t)||(e.append(q(i,r,o),u(t)),!1)}const c=[],f=Object.assign(W,{defaultVisitor:l,convertValue:u,isVisitable:G});if(!D.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!D.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),D.forEach(r,(function(r,o){!0===(!(D.isUndefined(r)||null===r)&&i.call(e,r,D.isString(o)?o.trim():o,n,f))&&t(r,n?n.concat(o):[o])})),c.pop()}}(t),e}function Z(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Y(t,e){this._pairs=[],t&&V(t,this,e)}const X=Y.prototype;function H(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K(t,e,r){if(!e)return t;const n=r&&r.encode||H,i=r&&r.serialize;let o;if(o=i?i(e,r):D.isURLSearchParams(e)?e.toString():new Y(e,r).toString(n),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}X.append=function(t,e){this._pairs.push([t,e])},X.toString=function(t){const e=t?function(e){return t.call(this,e,Z)}:Z;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var J=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Y,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const tt="undefined"!=typeof window&&"undefined"!=typeof document,et=(rt="undefined"!=typeof navigator&&navigator.product,tt&&["ReactNative","NativeScript","NS"].indexOf(rt)<0);var rt;const nt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var it={...Object.freeze({__proto__:null,hasBrowserEnv:tt,hasStandardBrowserWebWorkerEnv:nt,hasStandardBrowserEnv:et}),...Q};function ot(t){function e(t,r,n,i){let o=t[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=t.length;return o=!o&&D.isArray(n)?n.length:o,s?(D.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):(n[o]&&D.isObject(n[o])||(n[o]=[]),e(t,r,n[o],i)&&D.isArray(n[o])&&(n[o]=function(t){const e={},r=Object.keys(t);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}(n[o])),!a)}if(D.isFormData(t)&&D.isFunction(t.entries)){const r={};return D.forEachEntry(t,((t,n)=>{e(function(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,r,0)})),r}return null}const at={transitional:$,adapter:["xhr","http"],transformRequest:[function(t,e){const r=e.getContentType()||"",n=r.indexOf("application/json")>-1,i=D.isObject(t);if(i&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return n?JSON.stringify(ot(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return V(t,new it.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return it.isNode&&D.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=D.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return V(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),function(t,e,r){if(D.isString(t))try{return(0,JSON.parse)(t),D.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||at.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&D.isString(t)&&(r&&!this.responseType||n)){const r=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw B.from(t,B.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],(t=>{at.headers[t]={}}));var st=at;const ut=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lt=Symbol("internals");function ct(t){return t&&String(t).trim().toLowerCase()}function ft(t){return!1===t||null==t?t:D.isArray(t)?t.map(ft):String(t)}function ht(t,e,r,n,i){return D.isFunction(n)?n.call(this,e,r):(i&&(e=r),D.isString(e)?D.isString(n)?-1!==e.indexOf(n):D.isRegExp(n)?n.test(e):void 0:void 0)}class pt{constructor(t){t&&this.set(t)}set(t,e,r){const n=this;function i(t,e,r){const i=ct(e);if(!i)throw new Error("header name must be a non-empty string");const o=D.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||e]=ft(t))}const o=(t,e)=>D.forEach(t,((t,r)=>i(t,r,e)));return D.isPlainObject(t)||t instanceof this.constructor?o(t,e):D.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let r,n,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),r=t.substring(0,i).trim().toLowerCase(),n=t.substring(i+1).trim(),!r||e[r]&&ut[r]||("set-cookie"===r?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)})),e})(t),e):null!=t&&i(e,t,r),this}get(t,e){if(t=ct(t)){const r=D.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}(t);if(D.isFunction(e))return e.call(this,t,r);if(D.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=ct(t)){const r=D.findKey(this,t);return!(!r||void 0===this[r]||e&&!ht(0,this[r],r,e))}return!1}delete(t,e){const r=this;let n=!1;function i(t){if(t=ct(t)){const i=D.findKey(r,t);!i||e&&!ht(0,r[i],i,e)||(delete r[i],n=!0)}}return D.isArray(t)?t.forEach(i):i(t),n}clear(t){const e=Object.keys(this);let r=e.length,n=!1;for(;r--;){const i=e[r];t&&!ht(0,this[i],i,t,!0)||(delete this[i],n=!0)}return n}normalize(t){const e=this,r={};return D.forEach(this,((n,i)=>{const o=D.findKey(r,i);if(o)return e[o]=ft(n),void delete e[i];const a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(i):String(i).trim();a!==i&&delete e[i],e[a]=ft(n),r[a]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return D.forEach(this,((r,n)=>{null!=r&&!1!==r&&(e[n]=t&&D.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[lt]=this[lt]={accessors:{}}).accessors,r=this.prototype;function n(t){const n=ct(t);e[n]||(function(t,e){const r=D.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+r,{value:function(t,r,i){return this[n].call(this,e,t,r,i)},configurable:!0})}))}(r,t),e[n]=!0)}return D.isArray(t)?t.forEach(n):n(t),this}}pt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),D.reduceDescriptors(pt.prototype,(({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[r]=t}}})),D.freezeMethods(pt);var dt=pt;function yt(t,e){const r=this||st,n=e||r,i=dt.from(n.headers);let o=n.data;return D.forEach(t,(function(t){o=t.call(r,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function vt(t){return!(!t||!t.__CANCEL__)}function gt(t,e,r){B.call(this,null==t?"canceled":t,B.ERR_CANCELED,e,r),this.name="CanceledError"}D.inherits(gt,B,{__CANCEL__:!0});var mt=it.hasStandardBrowserEnv?{write(t,e,r,n,i,o){const a=[t+"="+encodeURIComponent(e)];D.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),D.isString(n)&&a.push("path="+n),D.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function bt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var _t=it.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function n(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return r=n(window.location.href),function(t){const e=D.isString(t)?n(t):t;return e.protocol===r.protocol&&e.host===r.host}}():function(){return!0};function wt(t,e){let r=0;const n=function(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i,o=0,a=0;return e=void 0!==e?e:1e3,function(s){const u=Date.now(),l=n[a];i||(i=u),r[o]=s,n[o]=u;let c=a,f=0;for(;c!==o;)f+=r[c++],c%=t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),u-i<e)return;const h=l&&u-l;return h?Math.round(1e3*f/h):void 0}}(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,u=n(s);r=o;const l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const xt={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){let n=t.data;const i=dt.from(t.headers).normalize();let o,a,{responseType:s,withXSRFToken:u}=t;function l(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}if(D.isFormData(n))if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(a=i.getContentType())){const[t,...e]=a?a.split(";").map((t=>t.trim())).filter(Boolean):[];i.setContentType([t||"multipart/form-data",...e].join("; "))}let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",r=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+r))}const f=bt(t.baseURL,t.url);function h(){if(!c)return;const n=dt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new B("Request failed with status code "+r.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),l()}),(function(t){r(t),l()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),K(f,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(r(new B("Request aborted",B.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new B("Network Error",B.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||$;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new B(e,n.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,t,c)),c=null},it.hasStandardBrowserEnv&&(u&&D.isFunction(u)&&(u=u(t)),u||!1!==u&&_t(f))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&mt.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===n&&i.setContentType(null),"setRequestHeader"in c&&D.forEach(i.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),D.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&"json"!==s&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",wt(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",wt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=e=>{c&&(r(!e||e.type?new gt(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const p=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(f);p&&-1===it.protocols.indexOf(p)?r(new B("Unsupported protocol "+p+":",B.ERR_BAD_REQUEST,t)):c.send(n||null)}))}};D.forEach(xt,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const St=t=>`- ${t}`,kt=t=>D.isFunction(t)||null===t||!1===t;var Ot=t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let o=0;o<e;o++){let e;if(r=t[o],n=r,!kt(r)&&(n=xt[(e=String(r)).toLowerCase()],void 0===n))throw new B(`Unknown adapter '${e}'`);if(n)break;i[e||"#"+o]=n}if(!n){const t=Object.entries(i).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));throw new B("There is no suitable adapter to dispatch the request "+(e?t.length>1?"since :\n"+t.map(St).join("\n"):" "+St(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function Et(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gt(null,t)}function At(t){return Et(t),t.headers=dt.from(t.headers),t.data=yt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ot(t.adapter||st.adapter)(t).then((function(e){return Et(t),e.data=yt.call(t,t.transformResponse,e),e.headers=dt.from(e.headers),e}),(function(e){return vt(e)||(Et(t),e&&e.response&&(e.response.data=yt.call(t,t.transformResponse,e.response),e.response.headers=dt.from(e.response.headers))),Promise.reject(e)}))}const Pt=t=>t instanceof dt?t.toJSON():t;function Ct(t,e){e=e||{};const r={};function n(t,e,r){return D.isPlainObject(t)&&D.isPlainObject(e)?D.merge.call({caseless:r},t,e):D.isPlainObject(e)?D.merge({},e):D.isArray(e)?e.slice():e}function i(t,e,r){return D.isUndefined(e)?D.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function o(t,e){if(!D.isUndefined(e))return n(void 0,e)}function a(t,e){return D.isUndefined(e)?D.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function s(r,i,o){return o in e?n(r,i):o in t?n(void 0,r):void 0}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(t,e)=>i(Pt(t),Pt(e),!0)};return D.forEach(Object.keys(Object.assign({},t,e)),(function(n){const o=u[n]||i,a=o(t[n],e[n],n);D.isUndefined(a)&&o!==s||(r[n]=a)})),r}const jt={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{jt[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const Mt={};jt.transitional=function(t,e,r){function n(t,e){return"[Axios v1.6.7] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,i,o)=>{if(!1===t)throw new B(n(i," has been removed"+(e?" in "+e:"")),B.ERR_DEPRECATED);return e&&!Mt[i]&&(Mt[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,o)}};var Tt={assertOptions:function(t,e,r){if("object"!=typeof t)throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const o=n[i],a=e[o];if(a){const e=t[o],r=void 0===e||a(e,o,t);if(!0!==r)throw new B("option "+o+" must be "+r,B.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new B("Unknown option "+o,B.ERR_BAD_OPTION)}},validators:jt};const Rt=Tt.validators;class It{constructor(t){this.defaults=t,this.interceptors={request:new J,response:new J}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const r=e.stack?e.stack.replace(/^.+\n/,""):"";t.stack?r&&!String(t.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+r):t.stack=r}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Ct(this.defaults,e);const{transitional:r,paramsSerializer:n,headers:i}=e;void 0!==r&&Tt.assertOptions(r,{silentJSONParsing:Rt.transitional(Rt.boolean),forcedJSONParsing:Rt.transitional(Rt.boolean),clarifyTimeoutError:Rt.transitional(Rt.boolean)},!1),null!=n&&(D.isFunction(n)?e.paramsSerializer={serialize:n}:Tt.assertOptions(n,{encode:Rt.function,serialize:Rt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=i&&D.merge(i.common,i[e.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=dt.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,a.unshift(t.fulfilled,t.rejected))}));const u=[];let l;this.interceptors.response.forEach((function(t){u.push(t.fulfilled,t.rejected)}));let c,f=0;if(!s){const t=[At.bind(this),void 0];for(t.unshift.apply(t,a),t.push.apply(t,u),c=t.length,l=Promise.resolve(e);f<c;)l=l.then(t[f++],t[f++]);return l}c=a.length;let h=e;for(f=0;f<c;){const e=a[f++],r=a[f++];try{h=e(h)}catch(t){r.call(this,t);break}}try{l=At.call(this,h)}catch(t){return Promise.reject(t)}for(f=0,c=u.length;f<c;)l=l.then(u[f++],u[f++]);return l}getUri(t){return K(bt((t=Ct(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],(function(t){It.prototype[t]=function(e,r){return this.request(Ct(r||{},{method:t,url:e,data:(r||{}).data}))}})),D.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,i){return this.request(Ct(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}It.prototype[t]=e(),It.prototype[t+"Form"]=e(!0)}));var Lt=It;class Ft{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t,n,i){r.reason||(r.reason=new gt(t,n,i),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Ft((function(e){t=e})),cancel:t}}}var Dt=Ft;const Bt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bt).forEach((([t,e])=>{Bt[e]=t}));var Nt=Bt;const zt=function t(e){const r=new Lt(e),i=n(Lt.prototype.request,r);return D.extend(i,Lt.prototype,r,{allOwnKeys:!0}),D.extend(i,r,null,{allOwnKeys:!0}),i.create=function(r){return t(Ct(e,r))},i}(st);zt.Axios=Lt,zt.CanceledError=gt,zt.CancelToken=Dt,zt.isCancel=vt,zt.VERSION="1.6.7",zt.toFormData=V,zt.AxiosError=B,zt.Cancel=zt.CanceledError,zt.all=function(t){return Promise.all(t)},zt.spread=function(t){return function(e){return t.apply(null,e)}},zt.isAxiosError=function(t){return D.isObject(t)&&!0===t.isAxiosError},zt.mergeConfig=Ct,zt.AxiosHeaders=dt,zt.formToJSON=t=>ot(D.isHTMLForm(t)?new FormData(t):t),zt.getAdapter=Ot,zt.HttpStatusCode=Nt,zt.default=zt,t.exports=zt},120:t=>{t.exports=JSON.parse('{"entity":"ASP","loadRowsInitially":50,"loadRowsOnScroll":20,"fullView":[{"columnName":"name","columnWidth":400,"autofit":false,"minWidth":200,"maxWidth":2000},{"columnName":"status","columnWidth":110,"autofit":false,"minWidth":100,"maxWidth":200},{"columnName":"positionId","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"positionFilledBy","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"currentOperatingStatus","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"description","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"parentPosition.name","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"createdBy","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"createdTimestamp","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"location.locationDescription","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"site.name","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"assetSystemPositionModel.name","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"legalEntity.displayName","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"operator.displayName","columnWidth":180,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"assetSystemPositionModel.positionMultiplicity","columnWidth":228,"autofit":false,"minWidth":150,"maxWidth":300}],"notFullView":[{"columnName":"name","columnWidth":400,"autofit":false,"minWidth":200,"maxWidth":2000},{"columnName":"status","columnWidth":150,"autofit":false,"minWidth":100,"maxWidth":200},{"columnName":"positionId","columnWidth":200,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"positionFilledBy","columnWidth":200,"autofit":false,"minWidth":100,"maxWidth":300},{"columnName":"currentOperatingStatus","columnWidth":200,"autofit":false,"minWidth":100,"maxWidth":300}],"sortBy":"lastModifiedTimestamp","resizableColumns":true,"sendEvents":true,"reciveEvents":true,"informationToBeSentInEvent":"uuid","filteringByUserLocation":false}')}},i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return n[t].call(r.exports,r,r.exports,o),r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nc=void 0;var a={};return(()=>{var t=a;Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=t.MaterialIcon=t.InfoPopupType=t.InfoPopup=t.CommConfig=t.DeLmwBff=t.DeLmwLogLevel=t.DeLmwLogger=void 0;var e=o(770);Object.defineProperty(t,"DeLmwLogger",{enumerable:!0,get:function(){return e.DeLmwLogger}}),Object.defineProperty(t,"DeLmwLogLevel",{enumerable:!0,get:function(){return e.DeLmwLogLevel}});var r=o(507);Object.defineProperty(t,"DeLmwBff",{enumerable:!0,get:function(){return r.DeLmwBff}});var n=o(884);Object.defineProperty(t,"CommConfig",{enumerable:!0,get:function(){return n.CommConfig}});var i=o(7);Object.defineProperty(t,"InfoPopup",{enumerable:!0,get:function(){return i.InfoPopup}}),Object.defineProperty(t,"InfoPopupType",{enumerable:!0,get:function(){return i.InfoPopupType}});var s=o(945);Object.defineProperty(t,"MaterialIcon",{enumerable:!0,get:function(){return s.MaterialIcon}});var u=o(845);Object.defineProperty(t,"Spinner",{enumerable:!0,get:function(){return u.Spinner}})})(),a})()).apply(e,n))||(t.exports=i)},4180:(t,e,r)=>{var n,i;n=[r(9148),r(6882),r(9527),r(3698)],void 0===(i=((t,e,n,i)=>(()=>{var o={482:(t,e,r)=>{"use strict";var n=r(432);function i(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.Z=i},924:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function o(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function a(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function f(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t*n}function h(t,r){void 0===r&&(r="kilometers");var n=e.factors[r];if(!n)throw new Error(r+" units is invalid");return t/n}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,r){switch(void 0===r&&(r={}),t){case"Point":return i(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return i(t,e)})),r)},e.polygon=o,e.polygons=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return o(t,e)})),r)},e.lineString=a,e.lineStrings=function(t,e,r){return void 0===r&&(r={}),s(t.map((function(t){return a(t,e)})),r)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r},e.radiansToLength=f,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,r){if(void 0===e&&(e="kilometers"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return f(h(t,e),r)},e.convertArea=function(t,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[r];if(!i)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(r(t)))throw new Error("id must be a number or a string")}},432:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(924);function i(t,e,r){if(null!==t)for(var n,o,a,s,u,l,c,f,h=0,p=0,d=t.type,y="FeatureCollection"===d,v="Feature"===d,g=y?t.features.length:1,m=0;m<g;m++){u=(f=!!(c=y?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<u;b++){var _=0,w=0;if(null!==(s=f?c.geometries[b]:c)){l=s.coordinates;var x=s.type;switch(h=!r||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,m,_,w))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,m,_,w))return!1;p++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-h;o++){if(!1===e(l[n][o],p,m,_,w))return!1;p++}"MultiLineString"===x&&_++,"Polygon"===x&&w++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(w=0,o=0;o<l[n].length;o++){for(a=0;a<l[n][o].length-h;a++){if(!1===e(l[n][o][a],p,m,_,w))return!1;p++}w++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===i(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&!1!==e(t.features[r].properties,r);r++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function s(t,e){var r,n,i,o,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(s=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,f=p?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}function u(t,e){s(t,(function(t,r,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,i,{bbox:o,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(n.feature(c,i),r,l))return!1}}))}function l(t,e){u(t,(function(t,r,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,f=0;return!1!==i(t,(function(i,s,h,p,d){if(void 0===u||r>l||p>c||d>f)return u=i,l=r,c=p,f=d,void(a=0);var y=n.lineString([u,i],t.properties);if(!1===e(y,r,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,r,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,r,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(n.lineString(a[s],t.properties),r,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,r,n){var o=r;return i(t,(function(t,n,i,a,s){o=0===n&&void 0===r?t:e(o,t,n,i,a,s)}),n),o},e.featureEach=a,e.featureReduce=function(t,e,r){var n=r;return a(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":return n.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),n.point(l[o],u,e);case"LineString":return s<0&&(s=l.length+s),n.point(l[s],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),n.point(l[a][s],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),n.point(l[o][s],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s),n.point(l[o][a][s],u,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var r,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,r=t.features[i].geometry;break;case"Feature":u=u||t.properties,r=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=t;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var l=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),n.lineString([l[s],l[s+1]],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),n.lineString([l[a][s],l[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),n.lineString([l[o][s],l[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s-1),n.lineString([l[o][a][s],l[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.flattenEach=u,e.flattenReduce=function(t,e,r){var n=r;return u(t,(function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)})),n},e.geomEach=s,e.geomReduce=function(t,e,r){var n=r;return s(t,(function(t,i,o,a,s){n=0===i&&void 0===r?t:e(n,t,i,o,a,s)})),n},e.lineEach=c,e.lineReduce=function(t,e,r){var n=r;return c(t,(function(t,i,o,a){n=0===i&&void 0===r?t:e(n,t,i,o,a)})),n},e.propEach=o,e.propReduce=function(t,e,r){var n=r;return o(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n},e.segmentEach=l,e.segmentReduce=function(t,e,r){var n=r,i=!1;return l(t,(function(t,o,a,s,u){n=!1===i&&void 0===r?t:e(n,t,o,a,s,u),i=!0})),n}},671:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},649:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);n&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},487:t=>{"use strict";t.exports=function(t){var e=t[1],r=t[3];if(!r)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},345:t=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}var r,n="object"===("undefined"==typeof Reflect?"undefined":e(Reflect))?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+e(t))}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function c(t,e,r,n){var i,o,a,s;if(u(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function v(t,r,n,i){if("function"==typeof t.on)i.once?t.once(r,n):t.on(r,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+e(t));t.addEventListener(r,(function e(o){i.once&&t.removeEventListener(r,e),n(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)i(u,this,e);else{var l=u.length,c=y(u,l);for(r=0;r<l;++r)i(c[r],this,e)}return!0},a.prototype.addListener=function(t,e){return c(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return c(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,h(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,h(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,a;if(u(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},a.prototype.listenerCount=d,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},554:(t,e,r)=>{var n=r(634),i=r(924),o=r(432),a=r(482).Z,s=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function l(t){var e=new n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return u(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},42:function(t,e,r){var n,i,o,a;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}t=r.nmd(t),a=function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(){var t=h();return t.compile=function(e,r){return u.compile(e,r,t)},t.precompile=function(e,r){return u.precompile(e,r,t)},t.AST=a.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=l.default,t.Parser=s.parser,t.parse=s.parse,t.parseWithoutProcessing=s.parseWithoutProcessing,t}var i=r(1).default;e.__esModule=!0;var o=i(r(2)),a=i(r(84)),s=r(85),u=r(90),l=i(r(91)),c=i(r(88)),f=i(r(83)),h=o.default.create,p=n();p.create=n,f.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,r){"use strict";function n(){var t=new a.HandlebarsEnvironment;return l.extend(t,a),t.SafeString=s.default,t.Exception=u.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var i=r(3).default,o=r(1).default;e.__esModule=!0;var a=i(r(4)),s=o(r(77)),u=o(r(6)),l=i(r(5)),c=i(r(78)),f=o(r(83)),h=n();h.create=n,f.default(h),h.default=h,e.default=h,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},e.__esModule=!0},function(t,e,r){"use strict";function n(t,e,r){this.helpers=t||{},this.partials=e||{},this.decorators=r||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var i=r(1).default;e.__esModule=!0,e.HandlebarsEnvironment=n;var o=r(5),a=i(r(6)),s=r(10),u=r(70),l=i(r(72)),c=r(73);e.VERSION="4.7.8",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var f="[object Object]";n.prototype={constructor:n,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(o.toString.call(t)===f){if(e)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===f)o.extend(this.partials,t);else{if(void 0===e)throw new a.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===f){if(e)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var h=l.default.log;e.log=h,e.createFrame=o.createFrame,e.logger=l.default},function(t,e){"use strict";function r(t){return i[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&(t[r]=arguments[e][r]);return t}e.__esModule=!0,e.extend=n,e.indexOf=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return a.test(t)?t.replace(o,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=n({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,a=/[&<>"'`=]/,u=Object.prototype.toString;e.toString=u;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=s(t))&&"[object Array]"===u.call(t)};e.isArray=c},function(t,e,r){"use strict";function n(t,e){var r=e&&e.loc,a=void 0,s=void 0,u=void 0,l=void 0;r&&(a=r.start.line,s=r.end.line,u=r.start.column,l=r.end.column,t+=" - "+a+":"+u);for(var c=Error.prototype.constructor.call(this,t),f=0;f<o.length;f++)this[o[f]]=c[o[f]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,i?(Object.defineProperty(this,"column",{value:u,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=u,this.endColumn=l))}catch(t){}}var i=r(7).default;e.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,e.default=n,t.exports=e.default},function(t,e,r){t.exports={default:r(8),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e,r){return n.setDesc(t,e,r)}},function(t,e){var r=Object;t.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){i.default(t),o.default(t),a.default(t),s.default(t),u.default(t),l.default(t),c.default(t)},e.moveHelperToHooks=function(t,e,r){t.helpers[e]&&(t.hooks[e]=t.helpers[e],r||delete t.helpers[e])};var i=n(r(11)),o=n(r(12)),a=n(r(65)),s=n(r(66)),u=n(r(67)),l=n(r(68)),c=n(r(69))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,r){var i=r.inverse,o=r.fn;if(!0===e)return o(this);if(!1===e||null==e)return i(this);if(n.isArray(e))return e.length>0?(r.ids&&(r.ids=[r.name]),t.helpers.each(e,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(e,r)}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(13).default,i=r(43).default,o=r(55).default,a=r(60).default,u=r(1).default;e.__esModule=!0;var l=r(5),c=u(r(6));e.default=function(t){t.registerHelper("each",(function(t,e){function r(e,r,n){d&&(d.key=e,d.index=r,d.first=0===r,d.last=!!n,y&&(d.contextPath=y+e)),p+=u(t[e],{data:d,blockParams:l.blockParams([t[e],e],[y+e,null])})}if(!e)throw new c.default("Must pass iterator to #each");var u=e.fn,f=e.inverse,h=0,p="",d=void 0,y=void 0;if(e.data&&e.ids&&(y=l.appendContextPath(e.data.contextPath,e.ids[0])+"."),l.isFunction(t)&&(t=t.call(this)),e.data&&(d=l.createFrame(e.data)),t&&"object"==s(t))if(l.isArray(t))for(var v=t.length;h<v;h++)h in t&&r(h,h,h===t.length-1);else if("function"==typeof n&&t[i]){for(var g=[],m=o(t),b=m.next();!b.done;b=m.next())g.push(b.value);for(v=(t=g).length;h<v;h++)r(h,h,h===t.length-1)}else!function(){var e=void 0;a(t).forEach((function(t){void 0!==e&&r(e,h-1),e=t,h++})),void 0!==e&&r(e,h-1,!0)}();return 0===h&&(p=f(this)),p}))},t.exports=e.default},function(t,e,r){t.exports={default:r(14),__esModule:!0}},function(t,e,r){r(15),r(42),t.exports=r(21).Symbol},function(t,e,r){"use strict";var n=r(9),i=r(16),o=r(17),a=r(18),u=r(20),l=r(24),c=r(19),f=r(27),h=r(28),p=r(30),d=r(29),y=r(31),v=r(36),g=r(37),m=r(38),b=r(39),_=r(32),w=r(26),x=n.getDesc,S=n.setDesc,k=n.create,O=v.get,E=i.Symbol,A=i.JSON,P=A&&A.stringify,C=!1,j=d("_hidden"),M=n.isEnum,T=f("symbol-registry"),R=f("symbols"),I="function"==typeof E,L=Object.prototype,F=a&&c((function(){return 7!=k(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=x(L,e);n&&delete L[e],S(t,e,r),n&&t!==L&&S(L,e,n)}:S,D=function(t){var e=R[t]=k(E.prototype);return e._k=t,a&&C&&F(L,t,{configurable:!0,set:function(e){o(this,j)&&o(this[j],t)&&(this[j][t]=!1),F(this,t,w(1,e))}}),e},B=function(t){return"symbol"==s(t)},N=function(t,e,r){return r&&o(R,e)?(r.enumerable?(o(t,j)&&t[j][e]&&(t[j][e]=!1),r=k(r,{enumerable:w(0,!1)})):(o(t,j)||S(t,j,w(1,{})),t[j][e]=!0),F(t,e,r)):S(t,e,r)},z=function(t,e){b(t);for(var r,n=g(e=_(e)),i=0,o=n.length;o>i;)N(t,r=n[i++],e[r]);return t},G=function(t,e){return void 0===e?k(t):z(k(t),e)},U=function(t){var e=M.call(this,t);return!(e||!o(this,t)||!o(R,t)||o(this,j)&&this[j][t])||e},q=function(t,e){var r=x(t=_(t),e);return!r||!o(R,e)||o(t,j)&&t[j][e]||(r.enumerable=!0),r},W=function(t){for(var e,r=O(_(t)),n=[],i=0;r.length>i;)o(R,e=r[i++])||e==j||n.push(e);return n},V=function(t){for(var e,r=O(_(t)),n=[],i=0;r.length>i;)o(R,e=r[i++])&&n.push(R[e]);return n},Z=c((function(){var t=E();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))}));I||(E=function(){if(B(this))throw TypeError("Symbol is not a constructor");return D(p(arguments.length>0?arguments[0]:void 0))},l(E.prototype,"toString",(function(){return this._k})),B=function(t){return t instanceof E},n.create=G,n.isEnum=U,n.getDesc=q,n.setDesc=N,n.setDescs=z,n.getNames=v.get=W,n.getSymbols=V,a&&!r(41)&&l(L,"propertyIsEnumerable",U,!0));var Y={for:function(t){return o(T,t+="")?T[t]:T[t]=E(t)},keyFor:function(t){return y(T,t)},useSetter:function(){C=!0},useSimple:function(){C=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),(function(t){var e=d(t);Y[t]=I?e:D(e)})),C=!0,u(u.G+u.W,{Symbol:E}),u(u.S,"Symbol",Y),u(u.S+u.F*!I,"Object",{create:G,defineProperty:N,defineProperties:z,getOwnPropertyDescriptor:q,getOwnPropertyNames:W,getOwnPropertySymbols:V}),A&&u(u.S+u.F*(!I||Z),"JSON",{stringify:function(t){if(void 0!==t&&!B(t)){for(var e,r,n=[t],i=1,o=arguments;o.length>i;)n.push(o[i++]);return"function"==typeof(e=n[1])&&(r=e),!r&&m(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!B(e))return e}),n[1]=e,P.apply(A,n)}}}),h(E,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){t.exports=!r(19)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(16),i=r(21),o=r(22),a="prototype",s=function t(e,r,s){var u,l,c,f=e&t.F,h=e&t.G,p=e&t.S,d=e&t.P,y=e&t.B,v=e&t.W,g=h?i:i[r]||(i[r]={}),m=h?n:p?n[r]:(n[r]||{})[a];for(u in h&&(s=r),s)(l=!f&&m&&u in m)&&u in g||(c=l?m[u]:s[u],g[u]=h&&"function"!=typeof m[u]?s[u]:y&&l?o(c,n):v&&m[u]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[a]=t[a],e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((g[a]||(g[a]={}))[u]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},function(t,e){var r=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(t,e,r){var n=r(23);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){t.exports=r(25)},function(t,e,r){var n=r(9),i=r(26);t.exports=r(18)?function(t,e,r){return n.setDesc(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,r){var n=r(16),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,r){var n=r(9).setDesc,i=r(17),o=r(29)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(27)("wks"),i=r(30),o=r(16).Symbol;t.exports=function(t){return n[t]||(n[t]=o&&o[t]||(o||i)("Symbol."+t))}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e,r){var n=r(9),i=r(32);t.exports=function(t,e){for(var r,o=i(t),a=n.getKeys(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===e)return r}},function(t,e,r){var n=r(33),i=r(35);t.exports=function(t){return n(i(t))}},function(t,e,r){var n=r(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){var n=r(32),i=r(9).getNames,o={}.toString,a="object"==("undefined"==typeof window?"undefined":s(window))&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.get=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(n(t))}},function(t,e,r){var n=r(9);t.exports=function(t){var e=n.getKeys(t),r=n.getSymbols;if(r)for(var i,o=r(t),a=n.isEnum,s=0;o.length>s;)a.call(t,i=o[s++])&&e.push(i);return e}},function(t,e,r){var n=r(34);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(40);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==s(t)?null!==t:"function"==typeof t}},function(t,e){t.exports=!0},function(t,e){},function(t,e,r){t.exports={default:r(44),__esModule:!0}},function(t,e,r){r(45),r(51),t.exports=r(29)("iterator")},function(t,e,r){"use strict";var n=r(46)(!0);r(48)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){var n=r(47),i=r(35);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){"use strict";var n=r(41),i=r(20),o=r(24),a=r(25),s=r(17),u=r(49),l=r(50),c=r(28),f=r(9).getProto,h=r(29)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",v="values",g=function(){return this};t.exports=function(t,e,r,m,b,_,w){l(r,e,m);var x,S,k=function(t){if(!p&&t in P)return P[t];switch(t){case y:case v:return function(){return new r(this,t)}}return function(){return new r(this,t)}},O=e+" Iterator",E=b==v,A=!1,P=t.prototype,C=P[h]||P[d]||b&&P[b],j=C||k(b);if(C){var M=f(j.call(new t));c(M,O,!0),!n&&s(P,d)&&a(M,h,g),E&&C.name!==v&&(A=!0,j=function(){return C.call(this)})}if(n&&!w||!p&&!A&&P[h]||a(P,h,j),u[e]=j,u[O]=g,b)if(x={values:E?j:k(v),keys:_?j:k(y),entries:E?k("entries"):j},w)for(S in x)S in P||o(P,S,x[S]);else i(i.P+i.F*(p||A),e,x);return x}},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(9),i=r(26),o=r(28),a={};r(25)(a,r(29)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n.create(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){r(52);var n=r(49);n.NodeList=n.HTMLCollection=n.Array},function(t,e,r){"use strict";var n=r(53),i=r(54),o=r(49),a=r(32);t.exports=r(48)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){t.exports={default:r(56),__esModule:!0}},function(t,e,r){r(51),r(45),t.exports=r(57)},function(t,e,r){var n=r(39),i=r(58);t.exports=r(21).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,r){var n=r(59),i=r(29)("iterator"),o=r(49);t.exports=r(21).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){var n=r(34),i=r(29)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=(e=Object(t))[i])?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){t.exports={default:r(61),__esModule:!0}},function(t,e,r){r(62),t.exports=r(21).Object.keys},function(t,e,r){var n=r(63);r(64)("keys",(function(t){return function(e){return t(n(e))}}))},function(t,e,r){var n=r(35);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(20),i=r(21),o=r(19);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=n(r(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)e.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,r){return t?r.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0;var i=r(5),o=n(r(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var r=e.fn;if(i.isEmpty(t))return e.inverse(this);var n=e.data;return e.data&&e.ids&&((n=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),r(t,{data:n,blockParams:i.blockParams([t],[n&&n.contextPath])})}))},t.exports=e.default},function(t,e,r){"use strict";var n=r(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var i=n(r(71))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,r,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,e.partials);var s=t(i,o);return r.partials=a,s}),e.partials[i.args[0]]=i.fn,o}))},t.exports=e.default},function(t,e,r){"use strict";e.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=n.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[e].apply(console,n)}}};e.default=i,t.exports=e.default},function(t,e,r){"use strict";var n=r(74).default,i=r(60).default,o=r(1).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=n(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var r=n(null);return r.__proto__=!1,{properties:{whitelist:a.createNewLookupObject(r,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:a.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,r){return function(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==u[t]&&(u[t]=!0,s.default.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}("function"==typeof t?e.methods:e.properties,r)},e.resetLoggedProperties=function(){i(u).forEach((function(t){delete u[t]}))};var a=r(76),s=o(r(72)),u=n(null)},function(t,e,r){t.exports={default:r(75),__esModule:!0}},function(t,e,r){var n=r(9);t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){"use strict";var n=r(74).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.extend.apply(void 0,[n(null)].concat(e))};var i=r(5)},function(t,e){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r,n,i,a,s){function u(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||e==s[0]||e===t.nullContext&&null===s[0]||(o=[e].concat(s)),r(t,e,t.helpers,t.partials,i.data||n,a&&[i.blockParams].concat(a),o)}return(u=o(r,u,t,s,n,a)).program=e,u.depth=s?s.length:0,u.blockParams=i||0,u}function i(){return""}function o(t,e,r,n,i,o){if(t.decorator){var a={};e=t.decorator(e,a,r,n&&n[0],i,o,n),f.extend(e,a)}return e}var a=r(79).default,u=r(60).default,l=r(3).default,c=r(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,r=p.COMPILER_REVISION;if(!(e>=p.LAST_COMPATIBLE_COMPILER_REVISION&&e<=p.COMPILER_REVISION)){if(e<p.LAST_COMPATIBLE_COMPILER_REVISION){var n=p.REVISION_CHANGES[r],i=p.REVISION_CHANGES[e];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){function r(e){function n(e){return""+t.main(l,e,l.helpers,l.partials,a,u,s)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=i.data;r._setup(i),!i.partial&&t.useData&&(a=function(t,e){return e&&"root"in e||((e=e?p.createFrame(e):{}).root=t),e}(e,a));var s=void 0,u=t.useBlockParams?[]:void 0;return t.useDepths&&(s=i.depths?e!=i.depths[0]?[e].concat(i.depths):i.depths:[e]),(n=o(t.main,n,l,i.depths||[],a,u))(e,i)}if(!e)throw new h.default("No environment passed to template");if(!t||!t.main)throw new h.default("Unknown template object: "+s(t));t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i=t.compiler&&7===t.compiler[0],l={strict:function(t,e,r){if(!t||!(e in t))throw new h.default('"'+e+'" not defined in '+t,{loc:r});return l.lookupProperty(t,e)},lookupProperty:function(t,e){var r=t[e];return null==r||Object.prototype.hasOwnProperty.call(t,e)||v.resultIsAllowed(r,l.protoAccessControl,e)?r:void 0},lookup:function(t,e){for(var r=t.length,n=0;n<r;n++)if(null!=(t[n]&&l.lookupProperty(t[n],e)))return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:function(r,n,i){i.hash&&(n=f.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=e.VM.resolvePartial.call(this,r,n,i);var o=f.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=e.VM.invokePartial.call(this,r,n,o);if(null==a&&e.compile&&(i.partials[i.name]=e.compile(r,t.compilerOptions,e),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),u=0,l=s.length;u<l&&(s[u]||u+1!==l);u++)s[u]=i.indent+s[u];a=s.join("\n")}return a}throw new h.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var r=t[e];return r.decorator=t[e+"_d"],r},programs:[],program:function(t,e,r,i,o){var a=this.programs[t],s=this.fn(t);return e||o||i||r?a=n(this,t,s,e,r,i,o):a||(a=this.programs[t]=n(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var r=t||e;return t&&e&&t!==e&&(r=f.extend({},e,t)),r},nullContext:a({}),noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(r){if(r.partial)l.protoAccessControl=r.protoAccessControl,l.helpers=r.helpers,l.partials=r.partials,l.decorators=r.decorators,l.hooks=r.hooks;else{var n=f.extend({},e.helpers,r.helpers);(function(t,e){u(t).forEach((function(r){var n=t[r];t[r]=function(t,e){var r=e.lookupProperty;return y.wrapHelper(t,(function(t){return f.extend({lookupProperty:r},t)}))}(n,e)}))})(n,l),l.helpers=n,t.usePartial&&(l.partials=l.mergeIfNeeded(r.partials,e.partials)),(t.usePartial||t.useDecorators)&&(l.decorators=f.extend({},e.decorators,r.decorators)),l.hooks={},l.protoAccessControl=v.createProtoAccessControl(r);var o=r.allowCallsToHelperMissing||i;d.moveHelperToHooks(l,"helperMissing",o),d.moveHelperToHooks(l,"blockHelperMissing",o)}},r._child=function(e,r,i,o){if(t.useBlockParams&&!i)throw new h.default("must pass block params");if(t.useDepths&&!o)throw new h.default("must pass parent depths");return n(l,e,t[e],r,0,i,o)},r},e.wrapProgram=n,e.resolvePartial=function(t,e,r){return t?t.call||r.name||(r.name=t,t=r.partials[t]):t="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],t},e.invokePartial=function(t,e,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var o=void 0;if(r.fn&&r.fn!==i&&function(){r.data=p.createFrame(r.data);var t=r.fn;o=r.data["partial-block"]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=p.createFrame(r.data),r.data["partial-block"]=n,t(e,r)},t.partials&&(r.partials=f.extend({},r.partials,t.partials))}(),void 0===t&&o&&(t=o),void 0===t)throw new h.default("The partial "+r.name+" could not be found");if(t instanceof Function)return t(e,r)},e.noop=i;var f=l(r(5)),h=c(r(6)),p=r(4),d=r(10),y=r(82),v=r(73)},function(t,e,r){t.exports={default:r(80),__esModule:!0}},function(t,e,r){r(81),t.exports=r(21).Object.seal},function(t,e,r){var n=r(40);r(64)("seal",(function(t){return function(e){return t&&n(e)?t(e):e}}))},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){return arguments[arguments.length-1]=e(arguments[arguments.length-1]),t.apply(this,arguments)}}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){"object"!=("undefined"==typeof globalThis?"undefined":s(globalThis))&&(Object.prototype.__defineGetter__("__magic__",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var e=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=e),t}},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){return"Program"===t.type?t:(a.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},a.default.parse(t))}var i=r(1).default,o=r(3).default;e.__esModule=!0,e.parseWithoutProcessing=n,e.parse=function(t,e){var r=n(t,e);return new s.default(e).accept(r)};var a=i(r(86)),s=i(r(87)),u=o(r(89)),l=r(5);e.parser=a.default;var c={};l.extend(c,u)},function(t,e){"use strict";e.__esModule=!0;var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var u=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([u],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:o[s-1].push(o[s]);break;case 98:case 100:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=r.lexer.lex()||1)&&(t=r.symbols_[t]||t),t}var r=this,n=[0],i=[null],o=[],a=this.table,s="",u=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,y,v,g,m,b,_,w,x={};;){if(y=n[n.length-1],this.defaultActions[y]?v=this.defaultActions[y]:(null!=p||(p=e()),v=a[y]&&a[y][p]),void 0===v||!v.length||!v[0]){var S="";if(!c){for(m in w=[],a[y])this.terminals_[m]&&m>2&&w.push("'"+this.terminals_[m]+"'");S=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:f,expected:w})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+p);switch(v[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(v[1]),p=null,d?(p=d,d=null):(l=this.lexer.yyleng,s=this.lexer.yytext,u=this.lexer.yylineno,f=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[v[1]][1],x.$=i[i.length-b],x._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},h&&(x._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),void 0!==(g=this.performAction.call(x,s,l,u,this.yy,v[1],i,o)))return g;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),o=o.slice(0,-1*b)),n.push(this.productions_[v[1]][0]),i.push(x.$),o.push(x._$),_=a[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},r=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||e&&!(r[0].length>e[0].length)||(e=r,n=a,this.options.flex));a++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){function i(t,r){return e.yytext=e.yytext.substring(t,e.yyleng-r+t)}switch(r){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return t}();return e.lexer=r,t.prototype=e,e.Parser=t,new t}();e.default=r,t.exports=e.default},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,r){void 0===e&&(e=t.length);var n=t[e-1],i=t[e-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(t,e,r){void 0===e&&(e=-1);var n=t[e+1],i=t[e+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(t,e,r){var n=t[null==e?0:e+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(t,e,r){var n=t[null==e?t.length-1:e-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var u=r(1).default;e.__esModule=!0;var l=u(r(88));n.prototype=new l.default,n.prototype.Program=function(t){var e=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=t.body,u=0,l=n.length;u<l;u++){var c=n[u],f=this.accept(c);if(f){var h=i(n,u,r),p=o(n,u,r),d=f.openStandalone&&h,y=f.closeStandalone&&p,v=f.inlineStandalone&&h&&p;f.close&&a(n,u,!0),f.open&&s(n,u,!0),e&&v&&(a(n,u),s(n,u)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[u-1].original)[1])),e&&d&&(a((c.program||c.inverse).body),s(n,u)),e&&y&&(a(n,u),s((c.inverse||c.program).body))}}return t},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,r=t.program&&t.inverse,n=r,u=r;if(r&&r.chained)for(n=r.body[0].program;u.chained;)u=u.body[u.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((n||e).body)};if(t.openStrip.close&&a(e.body,null,!0),r){var c=t.inverseStrip;c.open&&s(e.body,null,!0),c.close&&a(n.body,null,!0),t.closeStrip.open&&s(u.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(n.body)&&(s(e.body),a(n.body))}else t.closeStrip.open&&s(e.body,null,!0);return l},n.prototype.Decorator=n.prototype.MustacheStatement=function(t){return t.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=r(1).default;e.__esModule=!0;var u=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(t,e){var r=this.accept(t[e]);if(this.mutating){if(r&&!n.prototype[r.type])throw new u.default('Unexpected node type "'+r.type+'" found when accepting '+e+" on "+t.type);t[e]=r}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new u.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,r=t.length;e<r;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,r--)},accept:function(t){if(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var r={loc:t.path.loc};throw new o.default(t.path.original+" doesn't match "+e,r)}}var i=r(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,r){r=this.locInfo(r);for(var n=t?"@":"",i=[],a=0,s=0,u=e.length;s<u;s++){var l=e[s].part,c=e[s].original!==l;if(n+=(e[s].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new o.default("Invalid path: "+n,{loc:r});".."===l&&a++}}return{type:"PathExpression",data:t,depth:a,parts:i,original:n,loc:r}},e.prepareMustache=function(t,e,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:t,params:e,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}},e.prepareRawBlock=function(t,e,r,i){n(t,r);var o={type:"Program",body:e,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,r,i,a,s){i&&i.path&&n(t,i);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(r){if(u)throw new o.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),c=r.strip,l=r.program}return a&&(a=l,l=e,e=a),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var r=t[0].loc,n=t[t.length-1].loc;r&&n&&(e={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,r,i){return n(t,r),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}};var o=i(r(6))},function(t,e,r){"use strict";function n(){}function i(t,e){if(t===e)return!0;if(l.isArray(t)&&l.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;r++)if(!i(t[r],e[r]))return!1;return!0}}function o(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var a=r(74).default,s=r(1).default;e.__esModule=!0,e.Compiler=n,e.precompile=function(t,e,r){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var n=r.parse(t,e),i=(new r.Compiler).compile(n,e);return(new r.JavaScriptCompiler).compile(i,e)},e.compile=function(t,e,r){function n(){var n=r.parse(t,e),i=(new r.Compiler).compile(n,e),o=(new r.JavaScriptCompiler).compile(i,e,void 0,!0);return r.template(o)}function i(t,e){return o||(o=n()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=l.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=n()),o._setup(t)},i._child=function(t,e,r,i){return o||(o=n()),o._child(t,e,r,i)},i};var u=s(r(6)),l=r(5),c=s(r(84)),f=[].slice;n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var r=0;r<e;r++){var n=this.opcodes[r],o=t.opcodes[r];if(n.opcode!==o.opcode||!i(n.args,o.args))return!1}for(e=this.children.length,r=0;r<e;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=l.extend(a(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[r]=e,this.useDepths=this.useDepths||e.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,r=e.length,n=0;n<r;n++)this.accept(e[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){o(t);var e=t.program,r=t.inverse;e=e&&this.compileProgram(e),r=r&&this.compileProgram(r);var n=this.classifySexpr(t);"helper"===n?this.helperSexpr(t,e,r):"simple"===n?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,r),this.opcode("pushProgram",e),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),r=this.setupFullMustacheParams(t,e,void 0),n=t.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var r=t.params;if(r.length>1)throw new u.default("Unsupported number of partial arguments: "+r.length,t);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){o(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,r){var n=t.path,i=n.parts[0],o=null!=e||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,r){var n=this.setupFullMustacheParams(t,e,r),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,c.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],r=c.default.helpers.scopedId(t),n=!t.depth&&!r&&this.blockParamIndex(e);n?this.opcode("lookupBlockParam",n,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,r=0,n=e.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(e[r].value);for(;r--;)this.opcode("assignToHash",e[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=c.default.helpers.simpleId(t.path),r=e&&!!this.blockParamIndex(t.path.parts[0]),n=!r&&c.default.helpers.helperExpression(t),i=!r&&(n||e);if(i&&!n){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,r=t.length;e<r;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var r=void 0;if(!t.parts||c.default.helpers.scopedId(t)||t.depth||(r=this.blockParamIndex(t.parts[0])),r){var n=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,r,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(t){for(var e=0,r=this.options.blockParams.length;e<r;e++){var n=this.options.blockParams[e],i=n&&l.indexOf(n,t);if(n&&i>=0)return[e,i]}}}},function(t,e,r){"use strict";function n(t){this.value=t}function i(){}var o=r(60).default,a=r(1).default;e.__esModule=!0;var s=r(4),u=a(r(6)),l=r(5),c=a(r(92));i.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=s.COMPILER_REVISION;return[t,s.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,r){return l.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,r,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;s<l;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var f={compiler:this.compilerInfo(),main:c};this.decorators&&(f.main_d=this.decorators,f.useDecorators=!0);var h=this.context,p=h.programs,d=h.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(f[s]=p[s],d[s]&&(f[s+"_d"]=d[s],f.useDecorators=!0));return this.environment.usePartial&&(f.usePartial=!0),this.options.data&&(f.useData=!0),this.useDepths&&(f.useDepths=!0),this.useBlockParams&&(f.useBlockParams=!0),this.options.compat&&(f.compat=!0),n?f.compilerOptions=this.options:(f.compiler=JSON.stringify(f.compiler),this.source.currentLocation={start:{line:1,column:0}},f=this.objectLiteral(f),e.srcName?(f=f.toStringWithSourceMap({file:e.destName})).map=f.map&&f.map.toString():f=f.toString()),f},preamble:function(){this.lastContext=0,this.source=new c.default(this.options.srcName),this.decorators=new c.default(this.options.srcName)},createFunctionContext:function(t){var e=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;o(this.aliases).forEach((function(t){var n=e.aliases[t];n.children&&n.referenceCount>1&&(r+=", alias"+ ++i+"="+t,n.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(r);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each((function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,e||(r=!1))})),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(e,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var r=this.topStack();e.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,r)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,r){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,r)},resolvePath:function(t,e,r,n,i){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,r,n,i){var o=e.popStack(),a=r.length;for(t&&a--;n<a;n++)o=e.nameLookup(o,r[n],i);return t?[e.aliasable("container.strict"),"(",o,", ",e.quotedString(r[n]),", ",JSON.stringify(e.source.currentLocation)," )"]:o}(this.options.strict&&i,this,e,r,t));else for(var a=e.length;r<a;r++)this.replaceStack((function(i){var a=o.nameLookup(i,e[r],t);return n?[" && ",a]:[" != null ? ",a," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var r=this.nameLookup("decorators",e,"decorator"),n=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(t,e,r){var n=this.popStack(),i=this.setupHelper(t,e),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(t,e){var r=[];r.push(t[0]);for(var n=1;n<t.length;n++)r.push(e,t[n]);return r},invokeKnownHelper:function(t,e){var r=this.setupHelper(t,e);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(t,e,r){var n=[],i=this.setupParams(e,1,n);t&&(e=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?n.unshift(e):n.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(t){var e=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),n&&(o.types[t]=n),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,r){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var r=t.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var u=this.context.programs.length;n.index=u,n.name="program"+u,this.context.programs[u]=i.compile(n,e,this.context,!this.precompile),this.context.decorators[u]=i.decorators,this.context.environments[u]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(t){for(var e=0,r=this.context.environments.length;e<r;e++){var n=this.context.environments[e];if(n&&n.equals(t))return n}},programExpression:function(t){var e=this.environment.children[t],r=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof n||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)e=["(",r=[a.value]],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=t.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),r=(e?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof n)return r.value;if(!e){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(e,t,n,r),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(t,e,r){var n={},i=[],o=[],a=[],s=!r,u=void 0;s&&(r=[]),n.name=this.quotedString(t),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"container.noop",n.inverse=l||"container.noop");for(var f=e;f--;)u=this.popStack(),r[f]=u,this.trackIds&&(a[f]=this.popStack()),this.stringParams&&(o[f]=this.popStack(),i[f]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(t,e,r,n){var i=this.setupParams(t,e,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},r=0,n=t.length;r<n;r++)e[t[r]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,r){"use strict";function n(t,e,r){if(a.isArray(t)){for(var n=[],i=0,o=t.length;i<o;i++)n.push(e.wrap(t[i],r));return n}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}var o=r(60).default;e.__esModule=!0;var a=r(5),s=void 0;s||(s=function(t,e,r,n){this.src="",n&&this.add(n)},s.prototype={add:function(t){a.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){a.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,r=this.source.length;e<r;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new s(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof s?t:(t=n(t,this,e),new s(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,r){return r=this.generateList(r),this.wrap([t,e?"."+e+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,r=[];o(t).forEach((function(i){var o=n(t[i],e);"undefined"!==o&&r.push([e.quotedString(i),":",o])}));var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(t){for(var e=this.empty(),r=0,i=t.length;r<i;r++)r&&e.add(","),e.add(n(t[r],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default}])},"object"==s(e)&&"object"==s(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(n=a)?n.apply(e,i):n)||(t.exports=o))},333:(t,e)=>{e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*y}},286:(t,e,r)=>{"use strict";t.exports=i;var n=r(333);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function u(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function l(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function f(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function b(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function w(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=_(this.buf,this.pos)+_(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=_(this.buf,this.pos)+x(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return l(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return l(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return l(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return l(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return l(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return l(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,r){return s.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=u(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),w(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),w(this.buf,-1&t,this.pos),w(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&c(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},634:function(t,e,r){var n,i,o;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}o=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*c/s+f)),Math.min(o,Math.floor(n+(s-u)*c/s+f)),a)}var h=r[n],p=i,d=o;for(e(r,i,n),a(r[o],h)>0&&e(r,i,o);p<d;){for(e(r,p,d),p++,d--;a(r[p],h)<0;)p++;for(;a(r[d],h)>0;)d--}0===a(r[i],h)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):h(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||h(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!h(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));y(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var f=Math.min(c+l-1,r);y(t,c,f,u,this.compareMinY);for(var h=c;h<=f;h+=u){var p=Math.min(h+u-1,f);i.children.push(this._build(t,h,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),f=(h=t,p=u,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-l);f<o?(o=f,i=l<i?l:i,a=u):f===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var h,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,f,h=1/0,p=1/0,d=e;d<=r-e;d++){var y=a(t,0,d,this.toBBox),v=a(t,d,r,this.toBBox),g=(i=y,o=v,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),f=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,f-u)),m=c(y)+c(v);g<h?(h=g,n=d,p=m<p?m:p):g===h&&m<p&&(p=m,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=f(o)+f(u),c=e;c<r-e;c++){var h=t.children[c];s(o,t.leaf?i(h):h),l+=f(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=f(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n},"object"==a(e)?t.exports=o():void 0===(i="function"==typeof(n=o)?n.call(e,r,e,t):n)||(t.exports=i)},764:(t,e)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var n=Symbol.for("react.element"),i=(Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator,{isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}}),o=Object.assign,a={};function s(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||i}function u(){}function l(t,e,r){this.props=t,this.context=e,this.refs=a,this.updater=r||i}s.prototype.isReactComponent={},s.prototype.setState=function(t,e){if("object"!==r(t)&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},u.prototype=s.prototype;var c=l.prototype=new u;c.constructor=l,o(c,s.prototype),c.isPureReactComponent=!0,Array.isArray;var f=Object.prototype.hasOwnProperty,h={key:!0,ref:!0,__self:!0,__source:!0};e.createElement=function(t,e,r){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)f.call(e,i)&&!h.hasOwnProperty(i)&&(o[i]=e[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(i in u=t.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:t,key:a,ref:s,props:o,_owner:null}}},520:(t,e,r)=>{"use strict";t.exports=r(764)},295:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: pan-x pan-y;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',"",{version:3,sources:["webpack://./../../node_modules/.pnpm/ol@8.2.0/node_modules/ol/ol.css"],names:[],mappings:"AAAA;;EAEE,4BAA4B;EAC5B,qCAAqC;EACrC,uDAAuD;EACvD,wDAAwD;EACxD,8BAA8B;EAC9B,qCAAqC;EACrC,yBAAyB;AAC3B;;AAEA;EACE,sBAAsB;EACtB,kBAAkB;EAClB,8CAA8C;EAC9C,oDAAoD;AACtD;;AAEA;EACE,QAAQ;EACR,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,8CAA8C;EAC9C,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,mDAAmD;EACnD,gBAAgB;EAChB,iCAAiC;EACjC,eAAe;EACf,kBAAkB;EAClB,WAAW;EACX,4BAA4B;EAC5B,qBAAqB;AACvB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;AACX;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,UAAU;EACV,YAAY;EACZ,4CAA4C;EAC5C,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,eAAe;EACf,WAAW;EACX,iCAAiC;EACjC,6LAA6L;AAC/L;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,iCAAiC;EACjC,6LAA6L;AAC/L;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,sBAAsB;EACtB,4CAA4C;AAC9C;;AAEA;EACE,mDAAmD;AACrD;;AAEA;EACE,4CAA4C;AAC9C;;AAEA;EACE,aAAa;AACf;;AAEA;;EAEE,2BAA2B;EAC3B,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;EACjB,wCAAwC;AAC1C;;AAEA;EACE,UAAU;EACV,gBAAgB;AAClB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,8BAA8B;EAC9B,yBAAyB;EACzB,sBAAsB;EACtB,iBAAiB;AACnB;;AAEA;EACE,wBAAwB;EACxB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EACE,YAAY;EACZ,oBAAoB;EACpB,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,mDAAmD;EACnD,kBAAkB;AACpB;;AAEA;EACE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,SAAS;EACT,WAAW;EACX,qDAAqD;AACvD;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,0DAA0D;AAC5D;;AAEA;EACE,YAAY;EACZ,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,SAAS;AACX;;AAEA;EACE,cAAc;EACd,WAAW;EACX,UAAU;EACV,wCAAwC;EACxC,iBAAiB;EACjB,qBAAqB;EACrB,kBAAkB;EAClB,kBAAkB;EAClB,eAAe;EACf,cAAc;EACd,iBAAiB;EACjB,4CAA4C;EAC5C,YAAY;EACZ,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,UAAU;AACZ;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,sBAAsB;AACxB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,UAAU;AACZ;;AAEA;;EAEE,qBAAqB;EACrB,oDAAoD;EACpD,iCAAiC;AACnC;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,WAAW;EACX,6BAA6B;EAC7B,aAAa;EACb,sBAAsB;EACtB,mBAAmB;AACrB;;AAEA;EACE,wCAAwC;EACxC,qBAAqB;AACvB;;AAEA;EACE,SAAS;EACT,iBAAiB;EACjB,iCAAiC;EACjC,+CAA+C;EAC/C,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,sBAAsB;AACxB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,8CAA8C;AAChD;;AAEA;EACE,SAAS;EACT,QAAQ;EACR,sBAAsB;AACxB;;AAEA;EACE,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,UAAU;EACV,UAAU;EACV,aAAa;AACf;;AAEA;EACE,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,WAAW;EACX,aAAa;AACf;;AAEA;EACE,SAAS;EACT,OAAO;EACP,wBAAwB;AAC1B;;AAEA;;EAEE,cAAc;AAChB;;AAEA;EACE,mDAAmD;EACnD,aAAa;EACb,YAAY;AACd;;AAEA;EACE,SAAS;EACT,OAAO;EACP,kBAAkB;AACpB;;AAEA;;EAEE,aAAa;AACf;;AAEA;EACE,6CAA6C;AAC/C;;AAEA;EACE,sDAAsD;AACxD;;AAEA;EACE,YAAY;AACd",sourcesContent:[':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: pan-x pan-y;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n'],sourceRoot:""}]);const s=a},739:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-picker {\n    --header-group-background-color: #000000;\n    --header-text-color: #ffffff;\n}\n\n.layer-header-group {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    color: var(--header-text-color);\n    background-color: var(--header-group-background-color);\n    padding: 4px 12px;\n    line-height: 1.5;\n}\n\n.layer-header-group.layer-header-group-disabled {\n    opacity: 0.4;\n}\n\n.layer-header-group svg {\n    width: 18px;\n    height: 18px;\n}\n\n.layer-header-group > span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.37_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_mp27lkjemhnasm53obdz7qlswe/node_modules/webcore-map-nextgen/map/layerPicker/LayerPicker.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,wCAAwC;IACxC,4BAA4B;AAChC;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,+BAA+B;IAC/B,sDAAsD;IACtD,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;AACvB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-picker {\r\n    --header-group-background-color: #000000;\r\n    --header-text-color: #ffffff;\r\n}\r\n\r\n.layer-header-group {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    color: var(--header-text-color);\r\n    background-color: var(--header-group-background-color);\r\n    padding: 4px 12px;\r\n    line-height: 1.5;\r\n}\r\n\r\n.layer-header-group.layer-header-group-disabled {\r\n    opacity: 0.4;\r\n}\r\n\r\n.layer-header-group svg {\r\n    width: 18px;\r\n    height: 18px;\r\n}\r\n\r\n.layer-header-group > span {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n"],sourceRoot:""}]);const s=a},472:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\n.layer-list-item {\n    display: flex;\n    padding: 4px 12px;\n    font-size: 14px;\n    line-height: 1.5;\n}\n\n.layer-list-item.layer-list-item-not-in-view {\n    text-decoration: line-through;\n}\n\n.layer-list-item.layer-list-item-disabled {\n    opacity: 0.4;\n}\n\n.layer-list-item .layer-list-item-title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex: 1;\n    overflow-x: hidden;\n}\n\n.layer-list-item .layer-list-item-title > span {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.layer-list-item img {\n    flex-shrink: 0;\n    flex-grow: 0;\n    width: 20px;\n    height: 20px;\n    margin-right: 8px;\n    object-fit: contain;\n}\n\n.layer-list-item .buttons {\n    display: flex;\n    gap: 5px;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.37_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_mp27lkjemhnasm53obdz7qlswe/node_modules/webcore-map-nextgen/map/layerPicker/layerList/LayerList.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,gBAAgB;IAChB,UAAU;IACV,SAAS;AACb;;AAEA;IACI,aAAa;IACb,iBAAiB;IACjB,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,OAAO;IACP,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,YAAY;IACZ,WAAW;IACX,YAAY;IACZ,iBAAiB;IACjB,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,QAAQ;AACZ",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-list {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n.layer-list-item {\r\n    display: flex;\r\n    padding: 4px 12px;\r\n    font-size: 14px;\r\n    line-height: 1.5;\r\n}\r\n\r\n.layer-list-item.layer-list-item-not-in-view {\r\n    text-decoration: line-through;\r\n}\r\n\r\n.layer-list-item.layer-list-item-disabled {\r\n    opacity: 0.4;\r\n}\r\n\r\n.layer-list-item .layer-list-item-title {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    flex: 1;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.layer-list-item .layer-list-item-title > span {\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\n.layer-list-item img {\r\n    flex-shrink: 0;\r\n    flex-grow: 0;\r\n    width: 20px;\r\n    height: 20px;\r\n    margin-right: 8px;\r\n    object-fit: contain;\r\n}\r\n\r\n.layer-list-item .buttons {\r\n    display: flex;\r\n    gap: 5px;\r\n}\r\n"],sourceRoot:""}]);const s=a},27:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-refresh-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    color: inherit;\n    cursor: pointer;\n    outline: none;\n    font-family: inherit;\n    width: 12px;\n}\n\n.layer-refresh-button:disabled {\n    cursor: not-allowed;\n    opacity: 0.4;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.37_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_mp27lkjemhnasm53obdz7qlswe/node_modules/webcore-map-nextgen/map/layerPicker/layerRefreshButton/LayerRefreshButton.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,YAAY;IACZ,gBAAgB;IAChB,UAAU;IACV,SAAS;IACT,cAAc;IACd,eAAe;IACf,aAAa;IACb,oBAAoB;IACpB,WAAW;AACf;;AAEA;IACI,mBAAmB;IACnB,YAAY;AAChB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-refresh-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: none;\r\n    background: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    color: inherit;\r\n    cursor: pointer;\r\n    outline: none;\r\n    font-family: inherit;\r\n    width: 12px;\r\n}\r\n\r\n.layer-refresh-button:disabled {\r\n    cursor: not-allowed;\r\n    opacity: 0.4;\r\n}\r\n"],sourceRoot:""}]);const s=a},505:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,"/**\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\n */\n\n.layer-visibility-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    color: inherit;\n    cursor: pointer;\n    outline: none;\n    font-family: inherit;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.37_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_mp27lkjemhnasm53obdz7qlswe/node_modules/webcore-map-nextgen/map/layerPicker/layerVisibilityButton/LayerVisibilityButton.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,YAAY;IACZ,gBAAgB;IAChB,UAAU;IACV,SAAS;IACT,cAAc;IACd,eAAe;IACf,aAAa;IACb,oBAAoB;AACxB",sourcesContent:["/**\r\n * © Copyright 2023 Hitachi Energy Ltd. All rights reserved.\r\n */\r\n\r\n.layer-visibility-button {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: none;\r\n    background: none;\r\n    padding: 0;\r\n    margin: 0;\r\n    color: inherit;\r\n    cursor: pointer;\r\n    outline: none;\r\n    font-family: inherit;\r\n}\r\n"],sourceRoot:""}]);const s=a},234:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(487),i=r.n(n),o=r(649),a=r.n(o)()(i());a.push([t.id,".wmn-feature-picker {\n    background-color: white;\n    opacity: 0.95;\n    color: black;\n    font: 16px sans-serif;\n    border: 1px solid grey;\n}\n\n.wmn-feature-picker-item {\n    padding: 10px;\n    cursor: pointer;\n}\n\n.wmn-feature-picker-item:not(:last-child) {\n    border-bottom: 1px solid grey;\n}\n\n.wmn-feature-picker-item:hover {\n    background: #ebebeb;\n}\n","",{version:3,sources:["webpack://./../../node_modules/.pnpm/webcore-map-nextgen@2.0.37_abb-webcore-logger@2.0.2_clsx@2.1.0_dexie@3.2.4_i18next@22.5.1_pro_mp27lkjemhnasm53obdz7qlswe/node_modules/webcore-map-nextgen/map/map.css"],names:[],mappings:"AAAA;IACI,uBAAuB;IACvB,aAAa;IACb,YAAY;IACZ,qBAAqB;IACrB,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,eAAe;AACnB;;AAEA;IACI,6BAA6B;AACjC;;AAEA;IACI,mBAAmB;AACvB",sourcesContent:[".wmn-feature-picker {\r\n    background-color: white;\r\n    opacity: 0.95;\r\n    color: black;\r\n    font: 16px sans-serif;\r\n    border: 1px solid grey;\r\n}\r\n\r\n.wmn-feature-picker-item {\r\n    padding: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.wmn-feature-picker-item:not(:last-child) {\r\n    border-bottom: 1px solid grey;\r\n}\r\n\r\n.wmn-feature-picker-item:hover {\r\n    background: #ebebeb;\r\n}\r\n"],sourceRoot:""}]);const s=a},361:t=>{"use strict";var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],l=n.base?u[0]+n.base:u[0],c=o[l]||0,f="".concat(l," ").concat(c);o[l]=c+1;var h=r(f),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var d=i(p,n);n.byIndex=s,e.splice(s,0,{identifier:f,updater:d,references:1})}a.push(f)}return a}function i(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,i){var o=n(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=r(o[a]);e[s].references--}for(var u=n(t,i),l=0;l<o.length;l++){var c=r(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=u}}},918:t=>{"use strict";var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},66:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},751:(t,e,r)=>{"use strict";t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},497:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},710:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},481:t=>{"use strict";t.exports=n},280:e=>{"use strict";e.exports=t},207:t=>{"use strict";t.exports=i},369:t=>{"use strict";t.exports=e}},a={};function s(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,loaded:!1,exports:{}};return o[t].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=o,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.u=t=>t+".index.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!t;)t=r[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),s.b=document.baseURI||self.location.href,s.nc=void 0;var u={};return(()=>{"use strict";s.r(u),s.d(u,{LayerPicker:()=>MU,cleanupMap:()=>Cz,createLayer:()=>Jz,createMap:()=>Ez,deleteMapDB:()=>DT,deselectAllFeatures:()=>IG,disableFollowMode:()=>YT,disablePuttingPin:()=>IU,enableFollowMode:()=>ZT,enablePuttingPin:()=>RU,findFeature:()=>fG,followCurrentLocation:()=>dR,getLayer:()=>Hz,getSubLayer:()=>Kz,getVisibleBaseLayerId:()=>AT,isLayerVisible:()=>Xz,panToBoundingBox:()=>jz,panToCenterPointAndZoom:()=>Tz,refreshLayer:()=>Iz,refreshMap:()=>Pz,selectFeatureByIdCoord:()=>FG,selectFeatures:()=>LG,setIsOffline:()=>dN,showCurrentLocation:()=>vR,startDrawFeature:()=>zG,startOfflineMapDownload:()=>gN,stopDrawFeature:()=>GG,stopOfflineMapDownload:()=>bN,toggleBaseLayer:()=>wT,toggleLayerVisibility:()=>Yz,unfollowCurrentLocation:()=>yR});var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:String(r)}s.r(t),s.d(t,{hasBrowserEnv:()=>mt,hasStandardBrowserEnv:()=>bt,hasStandardBrowserWebWorkerEnv:()=>_t});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isConsoleSupported=void 0!==window.console}var r,i;return r=t,(i=[{key:"error",value:function(t,r){var n=t;r&&("object"===e(r)?(r.message&&(n+="\n"+r.message),r.stack&&(n+="\n"+r.stack)):n+="\n"+r.toString()),this.isConsoleSupported&&window.console.error(n)}},{key:"warn",value:function(t){this.isConsoleSupported&&window.console.warn(t)}},{key:"info",value:function(t){this.isConsoleSupported&&window.console.info(t)}},{key:"debug",value:function(t){this.isConsoleSupported&&window.console.debug(t)}},{key:"event",value:function(t,r){var n=t;r&&("object"===e(r)?n+="\n ".concat(JSON.stringify(r)):"string"==typeof r&&(n+="\n"+r)),this.isConsoleSupported&&window.console.log(n)}},{key:"trackRequest",value:function(t,e,r,n,i){window.console.log("Request ".concat(i?"Success":"Failed"," - ").concat(t," : ").concat(e," took ").concat(n,"ms, returned ").concat(r))}},{key:"group",value:function(t){this.isConsoleSupported&&window.console.group(t)}},{key:"groupCollapsed",value:function(t){this.isConsoleSupported&&window.console.groupCollapsed(t)}},{key:"groupEnd",value:function(){this.isConsoleSupported&&window.console.groupEnd()}}])&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e={id:"console",logger:new o};this.plugins=[e],window.onerror=function(t,e,r,n,i){this.error(t,i)}.bind(this)}var e,r;return e=t,(r=[{key:"findPlugin",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.plugins);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.id===t)return n}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"addPlugin",value:function(t,e){if(this.findPlugin(t))throw new Error("Logger with the same id already exists");var r={id:t,logger:e};this.plugins.push(r)}},{key:"removePlugin",value:function(t){for(var e=0;e<this.plugins.length;e+=1)if(this.plugins[e].id===t)return void this.plugins.splice(e,1)}},{key:"doesPluginExist",value:function(t){return null!==this.findPlugin(t)}},{key:"error",value:function(t,e){this.plugins.forEach((function(r){r.logger.error(t,e)}))}},{key:"warn",value:function(t){this.plugins.forEach((function(e){e.logger.warn(t)}))}},{key:"info",value:function(t){this.plugins.forEach((function(e){e.logger.info(t)}))}},{key:"debug",value:function(t){this.plugins.forEach((function(e){e.logger.debug(t)}))}},{key:"event",value:function(t,e){this.plugins.forEach((function(r){r.logger.event(t,e)}))}},{key:"group",value:function(t){this.plugins.forEach((function(e){e.logger.group(t)}))}},{key:"groupCollapsed",value:function(t){this.plugins.forEach((function(e){e.logger.groupCollapsed(t)}))}},{key:"groupEnd",value:function(){this.plugins.forEach((function(t){t.logger.groupEnd()}))}},{key:"trackMetric",value:function(t,e,r,n,i){this.plugins.forEach((function(o){"function"==typeof o.logger.trackMetric&&o.logger.trackMetric(t,e,r,n,i)}))}},{key:"trackPageView",value:function(t,e,r,n,i){this.plugins.forEach((function(o){"function"==typeof o.logger.trackPageView&&o.logger.trackPageView(t,e,r,n,i)}))}},{key:"setAuthenticatedUserContext",value:function(t,e){this.plugins.forEach((function(r){"function"==typeof r.logger.setAuthenticatedUserContext&&r.logger.setAuthenticatedUserContext(t,e)}))}},{key:"clearAuthenticatedUserContext",value:function(){this.plugins.forEach((function(t){"function"==typeof t.logger.clearAuthenticatedUserContext&&t.logger.clearAuthenticatedUserContext()}))}},{key:"setCustomProperty",value:function(t,e){this.plugins.forEach((function(r){"function"==typeof r.logger.setCustomProperty&&r.logger.setCustomProperty(t,e)}))}},{key:"clearCustomProperty",value:function(t){this.plugins.forEach((function(e){"function"==typeof e.logger.clearCustomProperty&&e.logger.clearCustomProperty(t)}))}},{key:"trackRequest",value:function(t,e,r,n,i,o,a){this.plugins.forEach((function(s){"function"==typeof s.logger.trackRequest&&s.logger.trackRequest(t,e,r,n,i,o,a)}))}},{key:"flush",value:function(){this.plugins.forEach((function(t){"function"==typeof t.logger.flush&&t.logger.flush()}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.abbesWebcoreLogger=window.abbesWebcoreLogger||new f;const h=window.abbesWebcoreLogger;function p(t,e){return function(){return t.apply(e,arguments)}}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}var y=Object.prototype.toString,v=Object.getPrototypeOf,g=function(t){return function(e){var r=y.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null)),m=function(t){return t=t.toLowerCase(),function(e){return g(e)===t}},b=function(t){return function(e){return d(e)===t}},_=Array.isArray,w=b("undefined"),x=m("ArrayBuffer"),S=b("string"),k=b("function"),O=b("number"),E=function(t){return null!==t&&"object"===d(t)},A=function(t){if("object"!==g(t))return!1;var e=v(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},P=m("Date"),C=m("File"),j=m("Blob"),M=m("FileList"),T=m("URLSearchParams");function R(t,e){var r,n,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!=t)if("object"!==d(t)&&(t=[t]),_(t))for(r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else{var a,s=o?Object.getOwnPropertyNames(t):Object.keys(t),u=s.length;for(r=0;r<u;r++)a=s[r],e.call(null,t[a],a,t)}}function I(t,e){e=e.toLowerCase();for(var r,n=Object.keys(t),i=n.length;i-- >0;)if(e===(r=n[i]).toLowerCase())return r;return null}var L,F,D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,B=function(t){return!w(t)&&t!==D},N=(L="undefined"!=typeof Uint8Array&&v(Uint8Array),function(t){return L&&t instanceof L}),z=m("HTMLFormElement"),G=(F=Object.prototype.hasOwnProperty,function(t,e){return F.call(t,e)}),U=m("RegExp"),q=function(t,e){var r=Object.getOwnPropertyDescriptors(t),n={};R(r,(function(r,i){var o;!1!==(o=e(r,i,t))&&(n[i]=o||r)})),Object.defineProperties(t,n)},W="abcdefghijklmnopqrstuvwxyz",V="0123456789",Z={DIGIT:V,ALPHA:W,ALPHA_DIGIT:W+W.toUpperCase()+V},Y=m("AsyncFunction");const X={isArray:_,isArrayBuffer:x,isBuffer:function(t){return null!==t&&!w(t)&&null!==t.constructor&&!w(t.constructor)&&k(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:function(t){var e;return t&&("function"==typeof FormData&&t instanceof FormData||k(t.append)&&("formdata"===(e=g(t))||"object"===e&&k(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&x(t.buffer)},isString:S,isNumber:O,isBoolean:function(t){return!0===t||!1===t},isObject:E,isPlainObject:A,isUndefined:w,isDate:P,isFile:C,isBlob:j,isRegExp:U,isFunction:k,isStream:function(t){return E(t)&&k(t.pipe)},isURLSearchParams:T,isTypedArray:N,isFileList:M,forEach:R,merge:function t(){for(var e=(B(this)&&this||{}).caseless,r={},n=function(n,i){var o=e&&I(r,i)||i;A(r[o])&&A(n)?r[o]=t(r[o],n):A(n)?r[o]=t({},n):_(n)?r[o]=n.slice():r[o]=n},i=0,o=arguments.length;i<o;i++)arguments[i]&&R(arguments[i],n);return r},extend:function(t,e,r){return R(e,(function(e,n){r&&k(e)?t[n]=p(e,r):t[n]=e}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),t},trim:function(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:function(t,e,r,n){var i,o,a,s={};if(e=e||{},null==t)return e;do{for(o=(i=Object.getOwnPropertyNames(t)).length;o-- >0;)a=i[o],n&&!n(a,t,e)||s[a]||(e[a]=t[a],s[a]=!0);t=!1!==r&&v(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:g,kindOfTest:m,endsWith:function(t,e,r){t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r},toArray:function(t){if(!t)return null;if(_(t))return t;var e=t.length;if(!O(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r},forEachEntry:function(t,e){for(var r,n=(t&&t[Symbol.iterator]).call(t);(r=n.next())&&!r.done;){var i=r.value;e.call(t,i[0],i[1])}},matchAll:function(t,e){for(var r,n=[];null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:z,hasOwnProperty:G,hasOwnProp:G,reduceDescriptors:q,freezeMethods:function(t){q(t,(function(e,r){if(k(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=t[r];k(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(t,e){var r={},n=function(t){t.forEach((function(t){r[t]=!0}))};return _(t)?n(t):n(String(t).split(e)),r},toCamelCase:function(t){return t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(t,e){return t=+t,Number.isFinite(t)?t:e},findKey:I,global:D,isContextDefined:B,ALPHABET:Z,generateString:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.ALPHA_DIGIT,r="",n=e.length;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&k(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:function(t){var e=new Array(10);return function t(r,n){if(E(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[n]=r;var i=_(r)?[]:{};return R(r,(function(e,r){var o=t(e,n+1);!w(o)&&(i[r]=o)})),e[n]=void 0,i}}return r}(t,0)},isAsyncFn:Y,isThenable:function(t){return t&&(E(t)||k(t))&&k(t.then)&&k(t.catch)}};function H(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}X.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var K=H.prototype,J={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(t){J[t]={value:t}})),Object.defineProperties(H,J),Object.defineProperty(K,"isAxiosError",{value:!0}),H.from=function(t,e,r,n,i,o){var a=Object.create(K);return X.toFlatObject(t,a,(function(t){return t!==Error.prototype}),(function(t){return"isAxiosError"!==t})),H.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const $=H;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function tt(t){return X.isPlainObject(t)||X.isArray(t)}function et(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function rt(t,e,r){return t?t.concat(e).map((function(t,e){return t=et(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}var nt=X.toFlatObject(X,{},null,(function(t){return/^is[A-Z]/.test(t)}));const it=function(t,e,r){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;var n=(r=X.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!X.isUndefined(e[t])}))).metaTokens,i=r.visitor||l,o=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function u(t){if(null===t)return"";if(X.isDate(t))return t.toISOString();if(!s&&X.isBlob(t))throw new $("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(t)||X.isTypedArray(t)?s&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function l(t,r,i){var s=t;if(t&&!i&&"object"===Q(t))if(X.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(X.isArray(t)&&function(t){return X.isArray(t)&&!t.some(tt)}(t)||(X.isFileList(t)||X.endsWith(r,"[]"))&&(s=X.toArray(t)))return r=et(r),s.forEach((function(t,n){!X.isUndefined(t)&&null!==t&&e.append(!0===a?rt([r],n,o):null===a?r:r+"[]",u(t))})),!1;return!!tt(t)||(e.append(rt(i,r,o),u(t)),!1)}var c=[],f=Object.assign(nt,{defaultVisitor:l,convertValue:u,isVisitable:tt});if(!X.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!X.isUndefined(r)){if(-1!==c.indexOf(r))throw Error("Circular reference detected in "+n.join("."));c.push(r),X.forEach(r,(function(r,o){!0===(!(X.isUndefined(r)||null===r)&&i.call(e,r,X.isString(o)?o.trim():o,n,f))&&t(r,n?n.concat(o):[o])})),c.pop()}}(t),e};function ot(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function at(t,e){this._pairs=[],t&&it(t,this,e)}var st=at.prototype;st.append=function(t,e){this._pairs.push([t,e])},st.toString=function(t){var e=t?function(e){return t.call(this,e,ot)}:ot;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const ut=at;function lt(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ct(t,e,r){if(!e)return t;var n,i=r&&r.encode||lt,o=r&&r.serialize;if(n=o?o(e,r):X.isURLSearchParams(e)?e.toString():new ut(e,r).toString(i)){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t}function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function ht(t){var e=function(t,e){if("object"!=ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:String(e)}var pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=[]}var e,r;return e=t,r=[{key:"use",value:function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(t){this.handlers[t]&&(this.handlers[t]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(t){X.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ht(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const dt=pt,yt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ut,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};var gt,mt="undefined"!=typeof window&&"undefined"!=typeof document,bt=(gt="undefined"!=typeof navigator&&navigator.product,mt&&["ReactNative","NativeScript","NS"].indexOf(gt)<0),_t="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=wt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==wt(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const kt=St(St({},t),vt),Ot=function(t){function e(t,r,n,i){var o=t[i++];if("__proto__"===o)return!0;var a=Number.isFinite(+o),s=i>=t.length;return o=!o&&X.isArray(n)?n.length:o,s?(X.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!a):(n[o]&&X.isObject(n[o])||(n[o]=[]),e(t,r,n[o],i)&&X.isArray(n[o])&&(n[o]=function(t){var e,r,n={},i=Object.keys(t),o=i.length;for(e=0;e<o;e++)n[r=i[e]]=t[r];return n}(n[o])),!a)}if(X.isFormData(t)&&X.isFunction(t.entries)){var r={};return X.forEachEntry(t,(function(t,n){e(function(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map((function(t){return"[]"===t[0]?"":t[1]||t[0]}))}(t),n,r,0)})),r}return null};var Et={transitional:yt,adapter:["xhr","http"],transformRequest:[function(t,e){var r,n=e.getContentType()||"",i=n.indexOf("application/json")>-1,o=X.isObject(t);if(o&&X.isHTMLForm(t)&&(t=new FormData(t)),X.isFormData(t))return i?JSON.stringify(Ot(t)):t;if(X.isArrayBuffer(t)||X.isBuffer(t)||X.isStream(t)||X.isFile(t)||X.isBlob(t))return t;if(X.isArrayBufferView(t))return t.buffer;if(X.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return it(t,new kt.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return kt.isNode&&X.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=X.isFileList(t))||n.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return it(r?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||i?(e.setContentType("application/json",!1),function(t,e,r){if(X.isString(t))try{return(0,JSON.parse)(t),X.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||Et.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&X.isString(t)&&(r&&!this.responseType||n)){var i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(i){if("SyntaxError"===t.name)throw $.from(t,$.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kt.classes.FormData,Blob:kt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],(function(t){Et.headers[t]={}}));const At=Et;var Pt=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tt(n.key),n)}}function Tt(t){var e=function(t,e){if("object"!=Ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ct(e)?e:String(e)}var Rt=Symbol("internals");function It(t){return t&&String(t).trim().toLowerCase()}function Lt(t){return!1===t||null==t?t:X.isArray(t)?t.map(Lt):String(t)}function Ft(t,e,r,n,i){return X.isFunction(n)?n.call(this,e,r):(i&&(e=r),X.isString(e)?X.isString(n)?-1!==e.indexOf(n):X.isRegExp(n)?n.test(e):void 0:void 0)}var Dt=function(t,e){function r(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t&&this.set(t)}var n,i,o;return n=r,i=[{key:"set",value:function(t,e,r){var n=this;function i(t,e,r){var i=It(e);if(!i)throw new Error("header name must be a non-empty string");var o=X.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||e]=Lt(t))}var o,a,s,u,l,c=function(t,e){return X.forEach(t,(function(t,r){return i(t,r,e)}))};return X.isPlainObject(t)||t instanceof this.constructor?c(t,e):X.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?c((l={},(o=t)&&o.split("\n").forEach((function(t){u=t.indexOf(":"),a=t.substring(0,u).trim().toLowerCase(),s=t.substring(u+1).trim(),!a||l[a]&&Pt[a]||("set-cookie"===a?l[a]?l[a].push(s):l[a]=[s]:l[a]=l[a]?l[a]+", "+s:s)})),l),e):null!=t&&i(e,t,r),this}},{key:"get",value:function(t,e){if(t=It(t)){var r=X.findKey(this,t);if(r){var n=this[r];if(!e)return n;if(!0===e)return function(t){for(var e,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;e=n.exec(t);)r[e[1]]=e[2];return r}(n);if(X.isFunction(e))return e.call(this,n,r);if(X.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(t,e){if(t=It(t)){var r=X.findKey(this,t);return!(!r||void 0===this[r]||e&&!Ft(0,this[r],r,e))}return!1}},{key:"delete",value:function(t,e){var r=this,n=!1;function i(t){if(t=It(t)){var i=X.findKey(r,t);!i||e&&!Ft(0,r[i],i,e)||(delete r[i],n=!0)}}return X.isArray(t)?t.forEach(i):i(t),n}},{key:"clear",value:function(t){for(var e=Object.keys(this),r=e.length,n=!1;r--;){var i=e[r];t&&!Ft(0,this[i],i,t,!0)||(delete this[i],n=!0)}return n}},{key:"normalize",value:function(t){var e=this,r={};return X.forEach(this,(function(n,i){var o=X.findKey(r,i);if(o)return e[o]=Lt(n),void delete e[i];var a=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r}))}(i):String(i).trim();a!==i&&delete e[i],e[a]=Lt(n),r[a]=!0})),this}},{key:"concat",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=this.constructor).concat.apply(t,[this].concat(r))}},{key:"toJSON",value:function(t){var e=Object.create(null);return X.forEach(this,(function(r,n){null!=r&&!1!==r&&(e[n]=t&&X.isArray(r)?r.join(", "):r)})),e}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(t){var e,r=function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e)||function(t,e){if(t){if("string"==typeof t)return jt(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return r[0]+": "+r[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],o=[{key:"from",value:function(t){return t instanceof this?t:new this(t)}},{key:"concat",value:function(t){for(var e=new this(t),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((function(t){return e.set(t)})),e}},{key:"accessor",value:function(t){var e=(this[Rt]=this[Rt]={accessors:{}}).accessors,r=this.prototype;function n(t){var n=It(t);e[n]||(function(t,e){var r=X.toCamelCase(" "+e);["get","set","has"].forEach((function(n){Object.defineProperty(t,n+r,{value:function(t,r,i){return this[n].call(this,e,t,r,i)},configurable:!0})}))}(r,t),e[n]=!0)}return X.isArray(t)?t.forEach(n):n(t),this}}],i&&Mt(n.prototype,i),o&&Mt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),r}();Dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.reduceDescriptors(Dt.prototype,(function(t,e){var r=t.value,n=e[0].toUpperCase()+e.slice(1);return{get:function(){return r},set:function(t){this[n]=t}}})),X.freezeMethods(Dt);const Bt=Dt;function Nt(t,e){var r=this||At,n=e||r,i=Bt.from(n.headers),o=n.data;return X.forEach(t,(function(t){o=t.call(r,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function zt(t){return!(!t||!t.__CANCEL__)}function Gt(t,e,r){$.call(this,null==t?"canceled":t,$.ERR_CANCELED,e,r),this.name="CanceledError"}X.inherits(Gt,$,{__CANCEL__:!0});const Ut=Gt,qt=kt.hasStandardBrowserEnv?{write:function(t,e,r,n,i,o){var a=[t+"="+encodeURIComponent(e)];X.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),X.isString(n)&&a.push("path="+n),X.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Wt(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const Vt=kt.hasStandardBrowserEnv?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=X.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0};function Zt(t,e){if(t){if("string"==typeof t)return Yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(t,e):void 0}}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ht(t,e){var r=0,n=function(t,e){t=t||10;var r,n=new Array(t),i=new Array(t),o=0,a=0;return e=void 0!==e?e:1e3,function(s){var u=Date.now(),l=i[a];r||(r=u),n[o]=s,i[o]=u;for(var c=a,f=0;c!==o;)f+=n[c++],c%=t;if((o=(o+1)%t)===a&&(a=(a+1)%t),!(u-r<e)){var h=l&&u-l;return h?Math.round(1e3*f/h):void 0}}}(50,250);return function(i){var o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-r,u=n(s);r=o;var l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const Kt="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){var n,i,o,a=t.data,s=Bt.from(t.headers).normalize(),u=t.responseType,l=t.withXSRFToken;function c(){t.cancelToken&&t.cancelToken.unsubscribe(n),t.signal&&t.signal.removeEventListener("abort",n)}if(X.isFormData(a))if(kt.hasStandardBrowserEnv||kt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(i=s.getContentType())){var f=function(t){if(Array.isArray(t))return t}(o=i?i.split(";").map((function(t){return t.trim()})).filter(Boolean):[])||Xt(o)||Zt(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=f[0],p=f.slice(1);s.setContentType([h||"multipart/form-data"].concat(function(t){return function(t){if(Array.isArray(t))return Yt(t)}(t)||Xt(t)||Zt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(p)).join("; "))}var d=new XMLHttpRequest;if(t.auth){var y=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+v))}var g=Wt(t.baseURL,t.url);function m(){if(d){var n=Bt.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new $("Request failed with status code "+r.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),c()}),(function(t){r(t),c()}),{data:u&&"text"!==u&&"json"!==u?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:t,request:d}),d=null}}if(d.open(t.method.toUpperCase(),ct(g,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,"onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(m)},d.onabort=function(){d&&(r(new $("Request aborted",$.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new $("Network Error",$.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",n=t.transitional||yt;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new $(e,n.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,t,d)),d=null},kt.hasStandardBrowserEnv&&(l&&X.isFunction(l)&&(l=l(t)),l||!1!==l&&Vt(g))){var b=t.xsrfHeaderName&&t.xsrfCookieName&&qt.read(t.xsrfCookieName);b&&s.set(t.xsrfHeaderName,b)}void 0===a&&s.setContentType(null),"setRequestHeader"in d&&X.forEach(s.toJSON(),(function(t,e){d.setRequestHeader(e,t)})),X.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),u&&"json"!==u&&(d.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",Ht(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",Ht(t.onUploadProgress)),(t.cancelToken||t.signal)&&(n=function(e){d&&(r(!e||e.type?new Ut(null,t,d):e),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(n),t.signal&&(t.signal.aborted?n():t.signal.addEventListener("abort",n)));var _=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(g);_&&-1===kt.protocols.indexOf(_)?r(new $("Unsupported protocol "+_+":",$.ERR_BAD_REQUEST,t)):d.send(a||null)}))};function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $t={http:null,xhr:Kt};X.forEach($t,(function(t,e){if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));var Qt=function(t){return"- ".concat(t)},te=function(t){return X.isFunction(t)||null===t||!1===t};const ee=function(t){for(var e,r,n=(t=X.isArray(t)?t:[t]).length,i={},o=0;o<n;o++){var a=void 0;if(r=e=t[o],!te(e)&&void 0===(r=$t[(a=String(e)).toLowerCase()]))throw new $("Unknown adapter '".concat(a,"'"));if(r)break;i[a||"#"+o]=r}if(!r){var s=Object.entries(i).map((function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t)||function(t,e){if(t){if("string"==typeof t)return Jt(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jt(t,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t),r=e[0],n=e[1];return"adapter ".concat(r," ")+(!1===n?"is not supported by the environment":"is not available in the build")})),u=n?s.length>1?"since :\n"+s.map(Qt).join("\n"):" "+Qt(s[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r};function re(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ut(null,t)}function ne(t){return re(t),t.headers=Bt.from(t.headers),t.data=Nt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ee(t.adapter||At.adapter)(t).then((function(e){return re(t),e.data=Nt.call(t,t.transformResponse,e),e.headers=Bt.from(e.headers),e}),(function(e){return zt(e)||(re(t),e&&e.response&&(e.response.data=Nt.call(t,t.transformResponse,e.response),e.response.headers=Bt.from(e.response.headers))),Promise.reject(e)}))}var ie=function(t){return t instanceof Bt?t.toJSON():t};function oe(t,e){e=e||{};var r={};function n(t,e,r){return X.isPlainObject(t)&&X.isPlainObject(e)?X.merge.call({caseless:r},t,e):X.isPlainObject(e)?X.merge({},e):X.isArray(e)?e.slice():e}function i(t,e,r){return X.isUndefined(e)?X.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function o(t,e){if(!X.isUndefined(e))return n(void 0,e)}function a(t,e){return X.isUndefined(e)?X.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function s(r,i,o){return o in e?n(r,i):o in t?n(void 0,r):void 0}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(t,e){return i(ie(t),ie(e),!0)}};return X.forEach(Object.keys(Object.assign({},t,e)),(function(n){var o=u[n]||i,a=o(t[n],e[n],n);X.isUndefined(a)&&o!==s||(r[n]=a)})),r}function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}var se={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){se[t]=function(r){return ae(r)===t||"a"+(e<1?"n ":" ")+t}}));var ue={};se.transitional=function(t,e,r){function n(t,e){return"[Axios v1.6.7] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,i,o){if(!1===t)throw new $(n(i," has been removed"+(e?" in "+e:"")),$.ERR_DEPRECATED);return e&&!ue[i]&&(ue[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,o)}};const le={assertOptions:function(t,e,r){if("object"!==ae(t))throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var s=t[o],u=void 0===s||a(s,o,t);if(!0!==u)throw new $("option "+o+" must be "+u,$.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new $("Unknown option "+o,$.ERR_BAD_OPTION)}},validators:se};function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function fe(){fe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==ce(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(ce(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function he(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function pe(t){var e=function(t,e){if("object"!=ce(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:String(e)}var de=le.validators,ye=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaults=e,this.interceptors={request:new dt,response:new dt}}var e,r,n,i;return e=t,r=[{key:"request",value:(n=fe().mark((function t(e,r){var n,i;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._request(e,r);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0 instanceof Error&&(Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error,i=n.stack?n.stack.replace(/^.+\n/,""):"",t.t0.stack?i&&!String(t.t0.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(t.t0.stack+="\n"+i):t.t0.stack=i),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(t){he(o,r,i,a,s,"next",t)}function s(t){he(o,r,i,a,s,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"_request",value:function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{};var r=e=oe(this.defaults,e),n=r.transitional,i=r.paramsSerializer,o=r.headers;void 0!==n&&le.assertOptions(n,{silentJSONParsing:de.transitional(de.boolean),forcedJSONParsing:de.transitional(de.boolean),clarifyTimeoutError:de.transitional(de.boolean)},!1),null!=i&&(X.isFunction(i)?e.paramsSerializer={serialize:i}:le.assertOptions(i,{encode:de.function,serialize:de.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();var a=o&&X.merge(o.common,o[e.method]);o&&X.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete o[t]})),e.headers=Bt.concat(a,o);var s=[],u=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(u=u&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));var l,c=[];this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));var f,h=0;if(!u){var p=[ne.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),f=p.length,l=Promise.resolve(e);h<f;)l=l.then(p[h++],p[h++]);return l}f=s.length;var d=e;for(h=0;h<f;){var y=s[h++],v=s[h++];try{d=y(d)}catch(t){v.call(this,t);break}}try{l=ne.call(this,d)}catch(t){return Promise.reject(t)}for(h=0,f=c.length;h<f;)l=l.then(c[h++],c[h++]);return l}},{key:"getUri",value:function(t){return ct(Wt((t=oe(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pe(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();X.forEach(["delete","get","head","options"],(function(t){ye.prototype[t]=function(e,r){return this.request(oe(r||{},{method:t,url:e,data:(r||{}).data}))}})),X.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,i){return this.request(oe(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ye.prototype[t]=e(),ye.prototype[t+"Form"]=e(!0)}));const ve=ye;function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t,e){if("object"!=ge(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ge(e)?e:String(e)}const _e=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"function"!=typeof e)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(t){r=t}));var n=this;this.promise.then((function(t){if(n._listeners){for(var e=n._listeners.length;e-- >0;)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},e((function(t,e,i){n.reason||(n.reason=new Ut(t,e,i),r(n.reason))}))}var e,r,n;return e=t,n=[{key:"source",value:function(){var e;return{token:new t((function(t){e=t})),cancel:e}}}],(r=[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}},{key:"unsubscribe",value:function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}}}])&&me(e.prototype,r),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xe).forEach((function(t){var e,r=function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e)||function(t,e){if(t){if("string"==typeof t)return we(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],i=r[1];xe[i]=n}));const Se=xe;var ke=function t(e){var r=new ve(e),n=p(ve.prototype.request,r);return X.extend(n,ve.prototype,r,{allOwnKeys:!0}),X.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(oe(e,r))},n}(At);ke.Axios=ve,ke.CanceledError=Ut,ke.CancelToken=_e,ke.isCancel=zt,ke.VERSION="1.6.7",ke.toFormData=it,ke.AxiosError=$,ke.Cancel=ke.CanceledError,ke.all=function(t){return Promise.all(t)},ke.spread=function(t){return function(e){return t.apply(null,e)}},ke.isAxiosError=function(t){return X.isObject(t)&&!0===t.isAxiosError},ke.mergeConfig=oe,ke.AxiosHeaders=Bt,ke.formToJSON=function(t){return Ot(X.isHTMLForm(t)?new FormData(t):t)},ke.getAdapter=ee,ke.HttpStatusCode=Se,ke.default=ke;const Oe=ke;function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function Ae(t){var e=function(t,e){if("object"!=Ee(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ee(e)?e:String(e)}const Pe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}var e,r;return e=t,(r=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ae(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Ce="propertychange";function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function Me(t){var e=function(t,e){if("object"!=je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==je(e)?e:String(e)}const Te=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disposed=!1}var e,r;return e=t,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Me(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Re(t,e){return t>e?1:t<e?-1:0}function Ie(t,e,r){if(t[0]<=e)return 0;var n=t.length;if(e<=t[n-1])return n-1;if("function"==typeof r){for(var i=1;i<n;++i){var o=t[i];if(o===e)return i;if(o<e)return r(e,t[i-1],o)>0?i-1:i}return n-1}if(r>0){for(var a=1;a<n;++a)if(t[a]<e)return a-1;return n-1}if(r<0){for(var s=1;s<n;++s)if(t[s]<=e)return s;return n-1}for(var u=1;u<n;++u){if(t[u]==e)return u;if(t[u]<e)return t[u-1]-e<e-t[u]?u-1:u}return n-1}function Le(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function Fe(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function De(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Be(){return!0}function Ne(){return!1}function ze(){}function Ge(t){var e,r,n,i=!1;return function(){var o=Array.prototype.slice.call(arguments);return i&&this===n&&De(o,r)||(i=!0,n=this,r=o,e=t.apply(this,arguments)),e}}function Ue(t){return function(){var e;try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}function qe(t){for(var e in t)delete t[e]}function We(t){var e;for(e in t)return!1;return!e}function Ve(t){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(t)}function Ze(t){var e=function(t,e){if("object"!=Ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ve(e)?e:String(e)}function Ye(t,e,r){return e=He(e),function(t,e){if(e&&("object"===Ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xe()?Reflect.construct(e,r||[],He(t).constructor):e.apply(t,r))}function Xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xe=function(){return!!t})()}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}function Ke(t,e){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ke(t,e)}var Je=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ye(this,e)).eventTarget_=t,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ke(t,e)}(e,t),r=e,n=[{key:"addEventListener",value:function(t,e){if(t&&e){var r=this.listeners_||(this.listeners_={}),n=r[t]||(r[t]=[]);n.includes(e)||n.push(e)}}},{key:"dispatchEvent",value:function(t){var e="string"==typeof t,r=e?t:t.type,n=this.listeners_&&this.listeners_[r];if(n){var i=e?new Pe(t):t;i.target||(i.target=this.eventTarget_||this);var o,a=this.dispatching_||(this.dispatching_={}),s=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,s[r]=0),++a[r];for(var u=0,l=n.length;u<l;++u)if(!1===(o="handleEvent"in n[u]?n[u].handleEvent(i):n[u].call(this,i))||i.propagationStopped){o=!1;break}if(0==--a[r]){var c=s[r];for(delete s[r];c--;)this.removeEventListener(r,ze);delete a[r]}return o}}},{key:"disposeInternal",value:function(){this.listeners_&&qe(this.listeners_)}},{key:"getListeners",value:function(t){return this.listeners_&&this.listeners_[t]||void 0}},{key:"hasListener",value:function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(t,e){if(this.listeners_){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[n]=ze,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ze(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Te);const $e=Je,Qe="change",tr="contextmenu",er="click",rr="keydown",nr="keypress",ir="touchmove",or="wheel";function ar(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function sr(t,e,r,n){return ar(t,e,r,n,!0)}function ur(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),qe(t))}function lr(t){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function cr(t){var e=function(t,e){if("object"!=lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lr(e)?e:String(e)}function fr(t,e,r){return e=pr(e),function(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hr()?Reflect.construct(e,r||[],pr(t).constructor):e.apply(t,r))}function hr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hr=function(){return!!t})()}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}function dr(t,e){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dr(t,e)}var yr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fr(this,e)).on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dr(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(Qe)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=ar(this,t[i],e);return n}return ar(this,t,e)}},{key:"onceInternal",value:function(t,e){var r;if(Array.isArray(t)){var n=t.length;r=new Array(n);for(var i=0;i<n;++i)r[i]=sr(this,t[i],e)}else r=sr(this,t,e);return e.ol_key=r,r}},{key:"unInternal",value:function(t,e){var r=e.ol_key;if(r)vr(r);else if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cr(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($e);function vr(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)ur(t[e]);else ur(t)}yr.prototype.on,yr.prototype.once,yr.prototype.un;const gr=yr;function mr(){throw new Error("Unimplemented abstract method.")}var br=0;function _r(t){return t.ol_uid||(t.ol_uid=String(++br))}function wr(t){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(t)}function xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kr(n.key),n)}}function Sr(t,e,r){return e&&xr(t.prototype,e),r&&xr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kr(t){var e=function(t,e){if("object"!=wr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wr(e)?e:String(e)}function Or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Er(t,e,r){return e=Cr(e),function(t,e){if(e&&("object"===wr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ar(t)}(t,Pr()?Reflect.construct(e,r||[],Cr(t).constructor):e.apply(t,r))}function Ar(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Pr=function(){return!!t})()}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cr(t)}function jr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mr(t,e)}function Mr(t,e){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mr(t,e)}var Tr=function(t){function e(t,r,n){var i;return Or(this,e),(i=Er(this,e,[t])).key=r,i.oldValue=n,i}return jr(e,t),Sr(e)}(Pe);const Rr=function(t){function e(t){var r;return Or(this,e),(r=Er(this,e)).on,r.once,r.un,_r(Ar(r)),r.values_=null,void 0!==t&&r.setProperties(t),r}return jr(e,t),Sr(e,[{key:"get",value:function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"getPropertiesInternal",value:function(){return this.values_}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(t,e){var r;r="change:".concat(t),this.hasListener(r)&&this.dispatchEvent(new Tr(r,t,e)),r=Ce,this.hasListener(r)&&this.dispatchEvent(new Tr(r,t,e))}},{key:"addChangeListener",value:function(t,e){this.addEventListener("change:".concat(t),e)}},{key:"removeChangeListener",value:function(t,e){this.removeEventListener("change:".concat(t),e)}},{key:"set",value:function(t,e,r){var n=this.values_||(this.values_={});if(r)n[t]=e;else{var i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}},{key:"setProperties",value:function(t,e){for(var r in t)this.set(r,t[r],e)}},{key:"applyProperties",value:function(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}},{key:"unset",value:function(t,e){if(this.values_&&t in this.values_){var r=this.values_[t];delete this.values_[t],We(this.values_)&&(this.values_=null),e||this.notify(t,r)}}}]),e}(gr),Ir="opacity",Lr="visible",Fr="extent",Dr="zIndex",Br="maxResolution",Nr="minResolution",zr="maxZoom",Gr="minZoom",Ur="source";function qr(t,e){if(!t)throw new Error(e)}function Wr(t,e,r){return Math.min(Math.max(t,e),r)}function Vr(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return Zr(t,e,r,n)}function Zr(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function Yr(t){return t*Math.PI/180}function Xr(t,e){var r=t%e;return r*e<0?r+e:r}function Hr(t,e,r){return t+r*(e-t)}function Kr(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function Jr(t,e){return Math.round(Kr(t,e))}function $r(t,e){return Math.floor(Kr(t,e))}function Qr(t,e){return Math.ceil(Kr(t,e))}function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t){var e=function(t,e){if("object"!=tn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tn(e)?e:String(e)}function rn(t,e,r){return e=an(e),function(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nn()?Reflect.construct(e,r||[],an(t).constructor):e.apply(t,r))}function nn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nn=function(){return!!t})()}function on(){return on="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=an(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},on.apply(this,arguments)}function an(t){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},an(t)}function sn(t,e){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sn(t,e)}var un=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rn(this,e)).on,r.once,r.un,r.background_=t.background;var n=Object.assign({},t);return"object"===tn(t.properties)&&(delete n.properties,Object.assign(n,t.properties)),n[Ir]=void 0!==t.opacity?t.opacity:1,qr("number"==typeof n[Ir],"Layer opacity must be a number"),n[Lr]=void 0===t.visible||t.visible,n[Dr]=t.zIndex,n[Br]=void 0!==t.maxResolution?t.maxResolution:1/0,n[Nr]=void 0!==t.minResolution?t.minResolution:0,n[Gr]=void 0!==t.minZoom?t.minZoom:-1/0,n[zr]=void 0!==t.maxZoom?t.maxZoom:1/0,r.className_=void 0!==n.className?n.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(e,t),r=e,(n=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=Wr(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r||e.managed?r:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return mr()}},{key:"getLayerStatesArray",value:function(t){return mr()}},{key:"getExtent",value:function(){return this.get(Fr)}},{key:"getMaxResolution",value:function(){return this.get(Br)}},{key:"getMinResolution",value:function(){return this.get(Nr)}},{key:"getMinZoom",value:function(){return this.get(Gr)}},{key:"getMaxZoom",value:function(){return this.get(zr)}},{key:"getOpacity",value:function(){return this.get(Ir)}},{key:"getSourceState",value:function(){return mr()}},{key:"getVisible",value:function(){return this.get(Lr)}},{key:"getZIndex",value:function(){return this.get(Dr)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(Fr,t)}},{key:"setMaxResolution",value:function(t){this.set(Br,t)}},{key:"setMinResolution",value:function(t){this.set(Nr,t)}},{key:"setMaxZoom",value:function(t){this.set(zr,t)}},{key:"setMinZoom",value:function(t){this.set(Gr,t)}},{key:"setOpacity",value:function(t){qr("number"==typeof t,"Layer opacity must be a number"),this.set(Ir,t)}},{key:"setVisible",value:function(t){this.set(Lr,t)}},{key:"setZIndex",value:function(t){this.set(Dr,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),on(an(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,en(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const ln=un,cn="add",fn="remove";function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function pn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yn(n.key),n)}}function dn(t,e,r){return e&&pn(t.prototype,e),r&&pn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yn(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hn(e)?e:String(e)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gn(t,e,r){return e=bn(e),function(t,e){if(e&&("object"===hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mn()?Reflect.construct(e,r||[],bn(t).constructor):e.apply(t,r))}function mn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mn=function(){return!!t})()}function bn(t){return bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bn(t)}function _n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}function wn(t,e){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wn(t,e)}var xn="length",Sn=function(t){function e(t,r,n){var i;return vn(this,e),(i=gn(this,e,[t])).element=r,i.index=n,i}return _n(e,t),dn(e)}(Pe),kn=function(t){function e(t,r){var n;if(vn(this,e),(n=gn(this,e)).on,n.once,n.un,r=r||{},n.unique_=!!r.unique,n.array_=t||[],n.unique_)for(var i=0,o=n.array_.length;i<o;++i)n.assertUnique_(n.array_[i],i);return n.updateLength_(),n}return _n(e,t),dn(e,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(xn)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Sn(cn,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Sn(fn,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Sn(fn,r,t)),this.dispatchEvent(new Sn(cn,e,t))}}},{key:"updateLength_",value:function(){this.set(xn,this.array_.length)}},{key:"assertUnique_",value:function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new Error("Duplicate item added to a unique collection")}}]),e}(Rr);const On=kn,En={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pn(t){for(var e=[1/0,1/0,-1/0,-1/0],r=0,n=t.length;r<n;++r)Un(e,t[r]);return e}function Cn(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function jn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Mn(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function Tn(t,e){return In(t,e[0],e[1])}function Rn(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function In(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function Ln(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=En.UNKNOWN;return a<r?u|=En.LEFT:a>i&&(u|=En.RIGHT),s<n?u|=En.BELOW:s>o&&(u|=En.ABOVE),u===En.UNKNOWN&&(u=En.INTERSECTING),u}function Fn(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Dn(t){return Fn(1/0,1/0,-1/0,-1/0,t)}function Bn(t,e){var r=t[0],n=t[1];return Fn(r,n,r,n,e)}function Nn(t,e,r,n,i){return qn(Dn(i),t,e,r,n)}function zn(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Gn(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Un(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function qn(t,e,r,n,i){for(;r<n;r+=i)Wn(t,e[r],e[r+1]);return t}function Wn(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function Vn(t,e){var r;return(r=e(Yn(t)))||(r=e(Xn(t)))||(r=e(ri(t)))?r:(r=e(ei(t)))||!1}function Zn(t){var e=0;return oi(t)||(e=ni(t)*Qn(t)),e}function Yn(t){return[t[0],t[1]]}function Xn(t){return[t[2],t[1]]}function Hn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Kn(t,e){var r;if("bottom-left"===e)r=Yn(t);else if("bottom-right"===e)r=Xn(t);else if("top-left"===e)r=ei(t);else{if("top-right"!==e)throw new Error("Invalid corner");r=ri(t)}return r}function Jn(t,e,r,n,i){var o,a=function(t){if(Array.isArray(t))return t}(o=$n(t,e,r,n))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),8!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(o)||function(t,e){if(t){if("string"==typeof t)return An(t,8);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?An(t,8):void 0}}(o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4],h=a[5],p=a[6],d=a[7];return Fn(Math.min(s,l,f,p),Math.min(u,c,h,d),Math.max(s,l,f,p),Math.max(u,c,h,d),i)}function $n(t,e,r,n){var i=e*n[0]/2,o=e*n[1]/2,a=Math.cos(r),s=Math.sin(r),u=i*a,l=i*s,c=o*a,f=o*s,h=t[0],p=t[1];return[h-u+f,p-l-c,h-u-f,p-l+c,h+u-f,p+l+c,h+u+f,p+l-c,h-u+f,p-l-c]}function Qn(t){return t[3]-t[1]}function ti(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return ii(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Dn(n),n}function ei(t){return[t[0],t[3]]}function ri(t){return[t[2],t[3]]}function ni(t){return t[2]-t[0]}function ii(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function oi(t){return t[2]<t[0]||t[3]<t[1]}function ai(t,e,r,n){if(oi(t))return Dn(r);var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=0,f=i.length;c<f;c+=2)u.push(i[c]),l.push(i[c+1]);return function(t,e,r){return Fn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function si(t,e){var r=e.getExtent(),n=Hn(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=ni(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}function ui(t){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ui(t)}function li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fi(n.key),n)}}function ci(t,e,r){return e&&li(t.prototype,e),r&&li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fi(t){var e=function(t,e){if("object"!=ui(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ui(e)?e:String(e)}function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pi(t,e,r){return e=yi(e),function(t,e){if(e&&("object"===ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,di()?Reflect.construct(e,r||[],yi(t).constructor):e.apply(t,r))}function di(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(di=function(){return!!t})()}function yi(t){return yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yi(t)}function vi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gi(t,e)}function gi(t,e){return gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gi(t,e)}var mi=function(t){function e(t,r){var n;return hi(this,e),(n=pi(this,e,[t])).layer=r,n}return vi(e,t),ci(e)}(Pe),bi="layers",_i=function(t){function e(t){var r;hi(this,e),t=t||{};var n=Object.assign({},t);delete n.layers;var i=t.layers;return(r=pi(this,e,[n])).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(bi,r.handleLayersChanged_),i?Array.isArray(i)?i=new On(i.slice(),{unique:!0}):qr("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new On(void 0,{unique:!0}),r.setLayers(i),r}return vi(e,t),ci(e,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(ur),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(ar(t,cn,this.handleLayersAdd_,this),ar(t,fn,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(ur);qe(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var o=r[n];this.registerLayerListeners_(o),this.dispatchEvent(new mi("addlayer",o))}this.changed()}},{key:"registerLayerListeners_",value:function(t){var r=[ar(t,Ce,this.handleLayerChange_,this),ar(t,Qe,this.handleLayerChange_,this)];t instanceof e&&r.push(ar(t,"addlayer",this.handleLayerGroupAdd_,this),ar(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[_r(t)]=r}},{key:"handleLayerGroupAdd_",value:function(t){this.dispatchEvent(new mi("addlayer",t.layer))}},{key:"handleLayerGroupRemove_",value:function(t){this.dispatchEvent(new mi("removelayer",t.layer))}},{key:"handleLayersAdd_",value:function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new mi("addlayer",e)),this.changed()}},{key:"handleLayersRemove_",value:function(t){var e=t.element,r=_r(e);this.listenerKeys_[r].forEach(ur),delete this.listenerKeys_[r],this.dispatchEvent(new mi("removelayer",e)),this.changed()}},{key:"getLayers",value:function(){return this.get(bi)}},{key:"setLayers",value:function(t){var e=this.getLayers();if(e)for(var r=e.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new mi("removelayer",r[n]));this.set(bi,t)}},{key:"getLayersArray",value:function(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}},{key:"getLayerStatesArray",value:function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var n=this.getLayerState(),i=n.zIndex;t||void 0!==n.zIndex||(i=0);for(var o=r,a=e.length;o<a;o++){var s=e[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=ti(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return e}},{key:"getSourceState",value:function(){return"ready"}}]),e}(ln);const wi=_i,xi="prerender",Si="postrender",ki="precompose",Oi="rendercomplete",Ei={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Ai=42,Pi=256,Ci={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Mi(t){var e=function(t,e){if("object"!=ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ji(e)?e:String(e)}var Ti=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}var e,r;return e=t,(r=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||Ci[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mi(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Ri=Ti;function Ii(t){return Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(t)}function Li(t,e,r){return e=Di(e),function(t,e){if(e&&("object"===Ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fi()?Reflect.construct(e,r||[],Di(t).constructor):e.apply(t,r))}function Fi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fi=function(){return!!t})()}function Di(t){return Di=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Di(t)}function Bi(t,e){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bi(t,e)}var Ni=6378137,zi=Math.PI*Ni,Gi=[-zi,-zi,zi,zi],Ui=[-180,-85,180,85],qi=Ni*Math.log(Math.tan(Math.PI/2)),Wi=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Li(this,e,[{code:t,units:"m",extent:Gi,global:!0,worldExtent:Ui,getPointResolution:function(t,e){return t/Math.cosh(e[1]/Ni)}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bi(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Ri),Vi=[new Wi("EPSG:3857"),new Wi("EPSG:102100"),new Wi("EPSG:102113"),new Wi("EPSG:900913"),new Wi("http://www.opengis.net/def/crs/EPSG/0/3857"),new Wi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Zi(t){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(t)}function Yi(t,e,r){return e=Hi(e),function(t,e){if(e&&("object"===Zi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xi()?Reflect.construct(e,r||[],Hi(t).constructor):e.apply(t,r))}function Xi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xi=function(){return!!t})()}function Hi(t){return Hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hi(t)}function Ki(t,e){return Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ki(t,e)}var Ji=[-180,-90,180,90],$i=6378137*Math.PI/180,Qi=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yi(this,e,[{code:t,units:"degrees",extent:Ji,axisOrientation:r,global:!0,metersPerUnit:$i,worldExtent:Ji}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ki(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Ri),to=[new Qi("CRS:84"),new Qi("EPSG:4326","neu"),new Qi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Qi("urn:ogc:def:crs:OGC:2:84"),new Qi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Qi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Qi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],eo={},ro={};function no(t,e,r){var n=t.getCode(),i=e.getCode();n in ro||(ro[n]={}),ro[n][i]=r}function io(t,e){var r;return t in ro&&e in ro[t]&&(r=ro[t][e]),r}function oo(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function ao(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function so(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function uo(t,e){return t[0]*=e,t[1]*=e,t}function lo(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function co(t,e){return Math.sqrt(lo(t,e))}function fo(t,e){if(e.canWrapX()){var r=ni(e.getExtent()),n=ho(t,e,r);n&&(t[0]-=n*r)}return t}function ho(t,e,r){var n=e.getExtent(),i=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(r=r||ni(n),i=Math.floor((t[0]-n[0])/r)),i}var po=6371008.8;function yo(t,e,r){r=r||po;var n=Yr(t[1]),i=Yr(e[1]),o=(i-n)/2,a=Yr(e[0]-t[0])/2,s=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(i);return 2*r*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))}var vo={info:1,warn:2,error:3,none:4},go=vo.info;function mo(){var t;go>vo.warn||(t=console).warn.apply(t,arguments)}var bo=!0;function _o(t){bo=!(void 0===t||t)}function wo(t,e){if(void 0!==e)for(var r=0,n=t.length;r<n;++r)e[r]=t[r];else e=t.slice();return e}function xo(t,e){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function So(t){!function(t,e){eo[t]=e}(t.getCode(),t),no(t,t,wo)}function ko(t){return"string"==typeof t?eo[e=t]||eo[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Oo(t,e,r,n){var i,o=(t=ko(t)).getPointResolutionFunc();if(o){if(i=o(e,r),n&&n!==t.getUnits()){var a=t.getMetersPerUnit();a&&(i=i*a/Ci[n])}}else{var s=t.getUnits();if("degrees"==s&&!n||"degrees"==n)i=e;else{var u=To(t,ko("EPSG:4326"));if(u===xo&&"degrees"!==s)i=e*t.getMetersPerUnit();else{var l=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];i=(yo((l=u(l,l,2)).slice(0,2),l.slice(2,4))+yo(l.slice(4,6),l.slice(6,8)))/2}var c=n?Ci[n]:t.getMetersPerUnit();void 0!==c&&(i/=c)}}return i}function Eo(t){!function(t){t.forEach(So)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&no(e,t,wo)}))}))}function Ao(t,e){return t?"string"==typeof t?ko(t):t:ko(e)}function Po(t){return function(e,r,n){var i=e.length;n=void 0!==n?n:2,r=void 0!==r?r:new Array(i);for(var o=0;o<i;o+=n)for(var a=t(e.slice(o,o+n)),s=a.length,u=0,l=n;u<l;++u)r[o+u]=u>=s?e[o+u]:a[u];return r}}function Co(t,e){return _o(),Io(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function jo(t,e){var r=Io(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Xr(n+180,360)-180),r}function Mo(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||To(t,e)===wo)&&r}function To(t,e){var r=io(t.getCode(),e.getCode());return r||(r=xo),r}function Ro(t,e){return To(ko(t),ko(e))}function Io(t,e,r){return Ro(e,r)(t,void 0,t.length)}function Lo(t,e,r,n){return ai(t,Ro(e,r),void 0,n)}var Fo,Do,Bo,No=null;function zo(){return No}function Go(t,e){return No?Io(t,e,No):t}function Uo(t,e){return No?Io(t,No,e):(bo&&!ao(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(bo=!1,mo("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function qo(t,e){return No?Lo(t,e,No):t}function Wo(t,e){return No?Lo(t,No,e):t}function Vo(t,e){if(!No)return t;var r=ko(e).getMetersPerUnit(),n=No.getMetersPerUnit();return r&&n?t*r/n:t}function Zo(t,e,r){return function(n){var i,o;if(t.canWrapX()){var a=t.getExtent(),s=ni(a);(o=ho(n=n.slice(0),t,s))&&(n[0]=n[0]-o*s),n[0]=Wr(n[0],a[0],a[2]),n[1]=Wr(n[1],a[1],a[3]),i=r(n)}else i=r(n);return o&&e.canWrapX()&&(i[0]+=o*ni(e.getExtent())),i}}function Yo(t,e,r){return function(n,i,o,a,s){if(n){if(!i&&!e)return n;var u=e?0:o[0]*i,l=e?0:o[1]*i,c=s?s[0]:0,f=s?s[1]:0,h=t[0]+u/2+c,p=t[2]-u/2+c,d=t[1]+l/2+f,y=t[3]-l/2+f;h>p&&(p=h=(p+h)/2),d>y&&(y=d=(y+d)/2);var v=Wr(n[0],h,p),g=Wr(n[1],d,y);if(a&&r&&i){var m=30*i;v+=-m*Math.log(1+Math.max(0,h-n[0])/m)+m*Math.log(1+Math.max(0,n[0]-p)/m),g+=-m*Math.log(1+Math.max(0,d-n[1])/m)+m*Math.log(1+Math.max(0,n[1]-y)/m)}return[v,g]}}}function Xo(t){return t}function Ho(t,e,r,n){var i=ni(e)/r[0],o=Qn(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function Ko(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),Wr(n,r/2,2*e)}function Jo(t,e,r,n,i){return r=void 0===r||r,function(o,a,s,u){if(void 0!==o){var l=n?Ho(t,n,s,i):t;return r&&u?Ko(o,l,e):Wr(o,e,l)}}}function $o(t){if(void 0!==t)return 0}function Qo(t){if(void 0!==t)return t}function ta(t){return Math.pow(t,3)}function ea(t){return 1-ta(1-t)}function ra(t){return 3*t*t-2*t*t*t}function na(t){return t}Eo(Vi),Eo(to),Fo=Vi,Do=function(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var i=0;i<n;i+=r){e[i]=zi*t[i]/180;var o=Ni*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>qi?o=qi:o<-qi&&(o=-qi),e[i+1]=o}return e},Bo=function(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var i=0;i<n;i+=r)e[i]=180*t[i]/zi,e[i+1]=360*Math.atan(Math.exp(t[i+1]/Ni))/Math.PI-90;return e},to.forEach((function(t){Fo.forEach((function(e){no(t,e,Do),no(e,t,Bo)}))}));var ia,oa="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",aa=oa.includes("firefox"),sa=(oa.includes("safari")&&!oa.includes("chrom")&&(oa.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(oa)),oa.includes("webkit")&&!oa.includes("edge")),ua=oa.includes("macintosh"),la="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,ca="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,fa="undefined"!=typeof Image&&Image.prototype.decode,ha=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),pa=new Array(6);function da(t){return va(t,1,0,0,1,0,0)}function ya(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],f=e[3],h=e[4],p=e[5];return t[0]=r*u+i*l,t[1]=n*u+o*l,t[2]=r*c+i*f,t[3]=n*c+o*f,t[4]=r*h+i*p+a,t[5]=n*h+o*p+s,t}function va(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function ga(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function ma(t,e,r){return ya(t,va(pa,e,0,0,r,0,0))}function ba(t,e,r,n,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=i*u,t[2]=-n*u,t[3]=i*l,t[4]=a*n*l-s*n*u+e,t[5]=a*i*u+s*i*l+r,t}function _a(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];qr(0!==n,"Transformation matrix cannot be inverted");var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=i/n,t[4]=(a*l-s*u)/n,t[5]=-(i*l-o*u)/n,t}function wa(t){var e="matrix("+t.join(", ")+")";if(ca)return e;var r=ia||(ia=document.createElement("div"));return r.style.transform=e,r.style.transform}function xa(t,e,r,n,i,o){o=o||[];for(var a=0,s=e;s<r;s+=n){var u=t[s],l=t[s+1];o[a++]=i[0]*u+i[2]*l+i[4],o[a++]=i[1]*u+i[3]*l+i[5]}return o&&o.length!=a&&(o.length=a),o}function Sa(t,e,r,n,i,o,a){a=a||[];for(var s=Math.cos(i),u=Math.sin(i),l=o[0],c=o[1],f=0,h=e;h<r;h+=n){var p=t[h]-l,d=t[h+1]-c;a[f++]=l+p*s-d*u,a[f++]=c+p*u+d*s;for(var y=h+2;y<h+n;++y)a[f++]=t[y]}return a&&a.length!=f&&(a.length=f),a}function ka(t){return ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ka(t)}function Oa(t){var e=function(t,e){if("object"!=ka(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ka(e)?e:String(e)}function Ea(t,e,r){return e=Pa(e),function(t,e){if(e&&("object"===ka(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Aa()?Reflect.construct(e,r||[],Pa(t).constructor):e.apply(t,r))}function Aa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Aa=function(){return!!t})()}function Pa(t){return Pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pa(t)}function Ca(t,e){return Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ca(t,e)}var ja=[1,0,0,1,0,0],Ma=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ea(this,e)).extent_=[1/0,1/0,-1/0,-1/0],t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=Ge((function(e,r,n){if(!n)return t.getSimplifiedGeometry(r);var i=t.clone();return i.applyTransform(n),i.getSimplifiedGeometry(r)})),t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e)}(e,t),r=e,n=[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return mr()}},{key:"closestPointXY",value:function(t,e,r,n){return mr()}},{key:"containsXY",value:function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return mr()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Dn(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}},{key:"rotate",value:function(t,e){mr()}},{key:"scale",value:function(t,e,r){mr()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return mr()}},{key:"getType",value:function(){return mr()}},{key:"applyTransform",value:function(t){mr()}},{key:"intersectsExtent",value:function(t){return mr()}},{key:"translate",value:function(t,e){mr()}},{key:"transform",value:function(t,e){var r=ko(t),n="tile-pixels"==r.getUnits()?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=Qn(a)/Qn(o);return ba(ja,a[0],a[3],s,-s,0,0,0),xa(t,0,t.length,i,ja,n),Ro(r,e)(t,n,i)}:Ro(r,e);return this.applyTransform(n),this}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oa(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const Ta=Ma;function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function Ia(t){var e=function(t,e){if("object"!=Ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ra(e)?e:String(e)}function La(t,e,r){return e=Da(e),function(t,e){if(e&&("object"===Ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fa()?Reflect.construct(e,r||[],Da(t).constructor):e.apply(t,r))}function Fa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fa=function(){return!!t})()}function Da(t){return Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Da(t)}function Ba(t,e){return Ba=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ba(t,e)}var Na=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=La(this,e)).layout="XY",t.stride=2,t.flatCoordinates,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ba(t,e)}(e,t),r=e,n=[{key:"computeExtent",value:function(t){return Nn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return mr()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=Ga(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,e){mr()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=Ga(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=za(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();Sa(r,0,r.length,n,t,e,r),this.changed()}}},{key:"scale",value:function(t,e,r){void 0===e&&(e=t),r||(r=Hn(this.getExtent()));var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,r,n,i,o,a,s){s=s||[];for(var u=a[0],l=a[1],c=0,f=0;f<r;f+=n){var h=t[f]-u,p=t[f+1]-l;s[c++]=u+i*h,s[c++]=l+o*p;for(var d=f+2;d<f+n;++d)s[c++]=t[d]}s&&s.length!=c&&(s.length=c)}(n,0,n.length,i,t,e,r,n),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();!function(t,e,r,n,i,o,a){a=a||[];for(var s=0,u=0;u<r;u+=n){a[s++]=t[u]+i,a[s++]=t[u+1]+o;for(var l=u+2;l<u+n;++l)a[s++]=t[l]}a&&a.length!=s&&(a.length=s)}(r,0,r.length,n,t,e,r),this.changed()}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ia(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ta);function za(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function Ga(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const Ua=Na;function qa(t,e,r,n,i,o,a){var s,u=t[e],l=t[e+1],c=t[r]-u,f=t[r+1]-l;if(0===c&&0===f)s=e;else{var h=((i-u)*c+(o-l)*f)/(c*c+f*f);if(h>1)s=r;else{if(h>0){for(var p=0;p<n;++p)a[p]=Hr(t[e+p],t[r+p],h);return void(a.length=n)}s=e}}for(var d=0;d<n;++d)a[d]=t[s+d];a.length=n}function Wa(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=Zr(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Va(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Wa(t,e,s,n,i),e=s}return i}function Za(t,e,r,n,i,o,a,s,u,l,c){if(e==r)return l;var f,h;if(0===i){if((h=Zr(a,s,t[e],t[e+1]))<l){for(f=0;f<n;++f)u[f]=t[e+f];return u.length=n,h}return l}c=c||[NaN,NaN];for(var p=e+n;p<r;)if(qa(t,p-n,p,n,a,s,c),(h=Zr(a,s,c[0],c[1]))<l){for(l=h,f=0;f<n;++f)u[f]=c[f];u.length=n,p+=n}else p+=n*Math.max((Math.sqrt(h)-Math.sqrt(l))/i|0,1);if(o&&(qa(t,r-n,e,n,a,s,c),(h=Zr(a,s,c[0],c[1]))<l)){for(l=h,f=0;f<n;++f)u[f]=c[f];u.length=n}return l}function Ya(t,e,r,n,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=Za(t,e,p,n,i,o,a,s,u,l,c),e=p}return l}function Xa(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function Ha(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function Ka(t,e,r,n,i){i=i||[];for(var o=0,a=0,s=r.length;a<s;++a){var u=Ha(t,e,r[a],n);i[o++]=u,e=u}return i.length=o,i}function Ja(t,e,r,n,i){i=i||[];for(var o=0,a=0,s=r.length;a<s;++a){var u=Ka(t,e,r[a],n,i[o]);0===u.length&&(u[0]=e),i[o++]=u,e=u[u.length-1]}return i.length=o,i}function $a(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var f=l.pop(),h=l.pop(),p=0,d=t[h],y=t[h+1],v=t[f],g=t[f+1],m=h+n;m<f;m+=n){var b=Vr(t[m],t[m+1],d,y,v,g);b>p&&(c=m,p=b)}p>i&&(u[(c-e)/n]=1,h+n<c&&l.push(h,c),c+n<f&&l.push(c,f))}for(var _=0;_<s;++_)u[_]&&(o[a++]=t[e+_*n],o[a++]=t[e+_*n+1]);return a}function Qa(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=$a(t,e,c,n,i,o,a),s.push(a),e=c}return a}function ts(t,e){return e*Math.round(t/e)}function es(t,e,r,n,i,o,a){if(e==r)return a;var s,u,l=ts(t[e],i),c=ts(t[e+1],i);e+=n,o[a++]=l,o[a++]=c;do{if(s=ts(t[e],i),u=ts(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<r;){var f=ts(t[e],i),h=ts(t[e+1],i);if(e+=n,f!=s||h!=u){var p=s-l,d=u-c,y=f-l,v=h-c;p*v==d*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(d<0&&v<d||d==v||d>0&&v>d)?(s=f,u=h):(o[a++]=s,o[a++]=u,l=s,c=u,s=f,u=h)}}return o[a++]=s,o[a++]=u,a}function rs(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=es(t,e,c,n,i,o,a),s.push(a),e=c}return a}function ns(t,e,r,n,i){i=void 0!==i?i:[];for(var o=0,a=e;a<r;a+=n)i[o++]=t.slice(a,a+n);return i.length=o,i}function is(t,e,r,n,i){i=void 0!==i?i:[];for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];i[o++]=ns(t,e,u,n,i[o]),e=u}return i.length=o,i}function os(t,e,r,n,i){i=void 0!==i?i:[];for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a];i[o++]=1===u.length&&u[0]===e?[]:is(t,e,u,n,i[o]),e=u[u.length-1]}return i.length=o,i}function as(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function ss(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=as(t,e,s,n),e=s}return i}function us(t){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(t)}function ls(t){var e=function(t,e){if("object"!=us(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=us(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==us(e)?e:String(e)}function cs(t,e,r){return e=hs(e),function(t,e){if(e&&("object"===us(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fs()?Reflect.construct(e,r||[],hs(t).constructor):e.apply(t,r))}function fs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fs=function(){return!!t})()}function hs(t){return hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hs(t)}function ps(t,e){return ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ps(t,e)}var ds=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cs(this,e)).maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(t[0])?n.setCoordinates(t,r):n.setFlatCoordinates(r,t),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ps(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){return new e(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,r,n){return n<Mn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Za(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))}},{key:"getArea",value:function(){return as(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[];return r.length=$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ha(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ls(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const ys=ds;function vs(t){return vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(t)}function gs(t){var e=function(t,e){if("object"!=vs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vs(e)?e:String(e)}function ms(t,e,r){return e=_s(e),function(t,e){if(e&&("object"===vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bs()?Reflect.construct(e,r||[],_s(t).constructor):e.apply(t,r))}function bs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bs=function(){return!!t})()}function _s(t){return _s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_s(t)}function ws(t,e){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ws(t,e)}var xs=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ms(this,e)).setCoordinates(t,r),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ws(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var i=this.flatCoordinates,o=Zr(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n}},{key:"getCoordinates",value:function(){return this.flatCoordinates.slice()}},{key:"computeExtent",value:function(t){return Bn(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return In(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xa(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Ss=xs;function ks(t,e,r,n,i){return!Vn(i,(function(i){return!Os(t,e,r,n,i[0],i[1])}))}function Os(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function Es(t,e,r,n,i,o){if(0===r.length)return!1;if(!Os(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(Os(t,r[a-1],r[a],n,i,o))return!1;return!0}function As(t,e,r,n,i,o,a){for(var s,u,l,c,f,h,p,d=i[o+1],y=[],v=0,g=r.length;v<g;++v){var m=r[v];for(c=t[m-n],h=t[m-n+1],s=e;s<m;s+=n)f=t[s],p=t[s+1],(d<=h&&p<=d||h<=d&&d<=p)&&(l=(d-h)/(p-h)*(f-c)+c,y.push(l)),c=f,h=p}var b=NaN,_=-1/0;for(y.sort(Re),c=y[0],s=1,u=y.length;s<u;++s){f=y[s];var w=Math.abs(f-c);w>_&&Es(t,e,r,n,l=(c+f)/2,d)&&(b=l,_=w),c=f}return isNaN(b)&&(b=i[o]),a?(a.push(b,d,_),a):[b,d,_]}function Ps(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=As(t,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function Cs(t,e,r,n,i){var o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)))return o;return!1}function js(t,e,r,n,i){var o=qn([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!ii(i,o)&&(!!Rn(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||Cs(t,e,r,n,(function(t,e){return function(t,e,r){var n=!1,i=Ln(t,e),o=Ln(t,r);if(i===En.INTERSECTING||o===En.INTERSECTING)n=!0;else{var a,s,u=t[0],l=t[1],c=t[2],f=t[3],h=e[0],p=e[1],d=r[0],y=r[1],v=(y-p)/(d-h);o&En.ABOVE&&!(i&En.ABOVE)&&(n=(a=d-(y-f)/v)>=u&&a<=c),n||!(o&En.RIGHT)||i&En.RIGHT||(n=(s=y-(d-c)*v)>=l&&s<=f),n||!(o&En.BELOW)||i&En.BELOW||(n=(a=d-(y-l)/v)>=u&&a<=c),n||!(o&En.LEFT)||i&En.LEFT||(n=(s=y-(d-u)*v)>=l&&s<=f)}return n}(i,t,e)})))}function Ms(t,e,r,n,i){return!!(js(t,e,r,n,i)||Os(t,e,r,n,i[0],i[1])||Os(t,e,r,n,i[0],i[3])||Os(t,e,r,n,i[2],i[1])||Os(t,e,r,n,i[2],i[3]))}function Ts(t,e,r,n,i){if(!Ms(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(ks(t,r[o-1],r[o],n,i)&&!js(t,r[o-1],r[o],n,i))return!1;return!0}function Rs(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function Is(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return 0===i?void 0:i>0}function Ls(t,e,r,n,i){i=void 0!==i&&i;for(var o=0,a=r.length;o<a;++o){var s=r[o],u=Is(t,e,s,n);if(0===o){if(i&&u||!i&&!u)return!1}else if(i&&!u||!i&&u)return!1;e=s}return!0}function Fs(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!Ls(t,e,s,n,i))return!1;s.length&&(e=s[s.length-1])}return!0}function Ds(t,e,r,n,i){i=void 0!==i&&i;for(var o=0,a=r.length;o<a;++o){var s=r[o],u=Is(t,e,s,n);(0===o?i&&u||!i&&!u:i&&!u||!i&&u)&&Rs(t,e,s,n),e=s}return e}function Bs(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=Ds(t,e,r[o],n,i);return e}function Ns(t,e){for(var r,n=[],i=0,o=0,a=0,s=e.length;a<s;++a){var u=e[a],l=Is(t,i,u,2);if(void 0===r&&(r=l),l===r)n.push(e.slice(o,a+1));else{if(0===n.length)continue;n[n.length-1].push(e[o])}o=a+1,i=u}return n}function zs(t){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(t)}function Gs(t){var e=function(t,e){if("object"!=zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zs(e)?e:String(e)}function Us(t,e,r){return e=Ws(e),function(t,e){if(e&&("object"===zs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qs()?Reflect.construct(e,r||[],Ws(t).constructor):e.apply(t,r))}function qs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qs=function(){return!!t})()}function Ws(t){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ws(t)}function Vs(t,e){return Vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vs(t,e)}var Zs=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Us(this,e)).ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,t),i.ends_=n):i.setCoordinates(t,r),i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vs(t,e)}(e,t),r=e,n=[{key:"appendLinearRing",value:function(t){this.flatCoordinates?Fe(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<Mn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Va(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ya(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))}},{key:"containsXY",value:function(t,e){return Es(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return ss(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?Ds(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,is(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Hn(this.getExtent());this.flatInteriorPoint_=As(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new Ss(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new ys(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new ys(e.slice(i,s),t);n.push(u),i=s}return n}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Ls(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ds(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=rs(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,"XY",n)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return Ts(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ka(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gs(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Ys=Zs;function Xs(t){if(oi(t))throw new Error("Cannot create polygon from empty extent");var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new Zs(o,"XY",[o.length])}function Hs(t){return Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(t)}function Ks(t){var e=function(t,e){if("object"!=Hs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hs(e)?e:String(e)}function Js(t,e,r){return e=Qs(e),function(t,e){if(e&&("object"===Hs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$s()?Reflect.construct(e,r||[],Qs(t).constructor):e.apply(t,r))}function $s(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($s=function(){return!!t})()}function Qs(t){return Qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qs(t)}function tu(t,e){return tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tu(t,e)}var eu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Js(this,e)).on,r.once,r.un,t=Object.assign({},t),r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Ao(t.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.nextCenter_=null,r.nextResolution_,r.nextRotation_,r.cancelAnchor_=void 0,t.projection&&_o(),t.center&&(t.center=Uo(t.center,r.projection_)),t.extent&&(t.extent=Wo(t.extent,r.projection_)),r.applyOptions_(t),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tu(t,e)}(e,t),r=e,n=[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var r in Ei)delete e[r];this.setProperties(e,!0);var n=function(t){var e,r,n,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=Ao(t.projection,"EPSG:3857"),f=c.getExtent(),h=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(h=!1,p=f),void 0!==t.resolutions){var d=t.resolutions;r=d[i],n=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,r,n){return e=void 0===e||e,function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=r?Ho(u,r,a,n):u;if(s)return e?Ko(i,c,l):Wr(i,l,c);var f=Math.min(c,i),h=Math.floor(Ie(t,f,o));return t[h]>c&&h<t.length-1?t[h+1]:t[h]}}}(d,u,!h&&p,l):Jo(r,n,u,!h&&p,l)}else{var y=(f?Math.max(ni(f),Qn(f)):360*Ci.degrees/c.getMetersPerUnit())/Pi/Math.pow(2,0),v=y/Math.pow(2,28);void 0!==(r=t.maxResolution)?i=0:r=y/Math.pow(a,i),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,o):y/Math.pow(a,o):v),o=i+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,o-i),e=t.constrainResolution?function(t,e,r,n,i,o){return n=void 0===n||n,r=void 0!==r?r:0,function(a,s,u,l){if(void 0!==a){var c=i?Ho(e,i,u,o):e;if(l)return n?Ko(a,c,r):Wr(a,r,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),h=-s*(.5-1e-9)+.5,p=Math.min(c,a),d=Math.floor(Math.log(e/p)/Math.log(t)+h),y=Math.max(f,d);return Wr(e/Math.pow(t,y),r,c)}}}(a,r,n,u,!h&&p,l):Jo(r,n,u,!h&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Yo(t.extent,t.constrainOnlyCenter,e)}var r=Ao(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Yo(n,!1,!1)}return Xo}(t),o=n.constraint,a=function(t){var e,r,n;if(void 0===t.enableRotation||t.enableRotation){var i=t.constrainRotation;return void 0===i||!0===i?(n=Yr(5),function(t,e){return e||void 0===t?t:Math.abs(t)<=n?0:t}):!1===i?Qo:"number"==typeof i?(e=i,r=2*Math.PI/e,function(t,e){return e?t:void 0!==t?t=Math.floor(t/r+.5)*r:void 0}):Qo}return $o}(t);this.constraints_={center:i,resolution:o,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var r=this.getCenterInternal();if(r){var n=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(n[3]-e[3]+e[1]-n[1]),a=i/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=Object.assign({},n)).center=Uo(n.center,this.getProjection())),n.anchor&&((n=Object.assign({},n)).anchor=Uo(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var e,r=arguments.length;r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r);for(var n=0;n<r&&!this.isDef();++n){var i=arguments[n];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(n!==r){for(var o=Date.now(),a=this.targetCenter_.slice(),s=this.targetResolution_,u=this.targetRotation_,l=[];n<r;++n){var c=arguments[n],f={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||ra,callback:e};if(c.center&&(f.sourceCenter=a,f.targetCenter=c.center.slice(),a=f.targetCenter),void 0!==c.zoom?(f.sourceResolution=s,f.targetResolution=this.getResolutionForZoom(c.zoom),s=f.targetResolution):c.resolution&&(f.sourceResolution=s,f.targetResolution=c.resolution,s=f.targetResolution),void 0!==c.rotation){f.sourceRotation=u;var h=Xr(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+h,u=f.targetRotation}nu(f)?f.complete=!0:o+=f.duration,l.push(f)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}else e&&ru(e,!0)}},{key:"getAnimating",value:function(){return this.hints_[0]>0}},{key:"getInteracting",value:function(){return this.hints_[1]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&ru(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var f=s.sourceCenter[0],h=s.sourceCenter[1],p=s.targetCenter[0],d=s.targetCenter[1];this.nextCenter_=s.targetCenter;var y=f+c*(p-f),v=h+c*(d-h);this.targetCenter_=[y,v]}if(s.sourceResolution&&s.targetResolution){var g=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var m=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(g,0,m,!0);this.targetCenter_=this.calculateCenterZoom(b,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var _=1===c?Xr(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var w=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(w,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=n[0].callback;x&&ru(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(so(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),oo(r,e)),r}},{key:"calculateCenterZoom",value:function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();return void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]),r}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?Go(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(Ei.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){return qo(this.calculateExtentInternal(t),this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();qr(e,"The view center is not defined");var r=this.getResolution();qr(void 0!==r,"The view resolution is not defined");var n=this.getRotation();return qr(void 0!==n,"The view rotation is not defined"),Jn(e,r,n,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(Ei.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal(Wo(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var r=ni(t)/e[0],n=Qn(t)/e[1];return Math.max(r,n)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(e/r)/Math.log(t);return function(r){return e/Math.pow(t,r*n)}}},{key:"getRotation",value:function(){return this.get(Ei.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),r=this.padding_;return r&&(e=[e[0]-r[1]-r[3],e[1]-r[0]-r[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();n=iu(n,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],e,r)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=Ie(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Wr(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,Wr(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var r;if(qr(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t))qr(!oi(t),"Cannot fit empty extent provided as `geometry`"),r=Xs(Wo(t,this.getProjection()));else if("Circle"===t.getType()){var n=Wo(t.getExtent(),this.getProjection());(r=Xs(n)).rotate(this.getRotation(),Hn(n))}else{var i=zo();r=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(r,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),r=Math.cos(e),n=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,c=0,f=i.length;c<f;c+=o){var h=i[c]*r-i[c+1]*n,p=i[c]*n+i[c+1]*r;a=Math.min(a,h),s=Math.min(s,p),u=Math.max(u,h),l=Math.max(l,p)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var r=(e=e||{}).size;r||(r=this.getViewportSizeMinusPadding_());var n,i=void 0!==e.padding?e.padding:[0,0,0,0],o=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var a=this.rotatedExtentForGeometry(t),s=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);s=isNaN(s)?n:Math.max(s,n),s=this.getConstrainedResolution(s,o?0:1);var u=this.getRotation(),l=Math.sin(u),c=Math.cos(u),f=Hn(a);f[0]+=(i[1]-i[3])/2*s,f[1]+=(i[0]-i[2])/2*s;var h=f[0]*c-f[1]*l,p=f[1]*c+f[0]*l,d=this.getConstrainedCenter([h,p],s),y=e.callback?e.callback:ze;void 0!==e.duration?this.animateInternal({resolution:s,center:d,duration:e.duration,easing:e.easing},y):(this.targetResolution_=s,this.targetCenter_=d,this.applyTargetState_(!1,!0),ru(y,!0))}},{key:"centerOn",value:function(t,e,r){this.centerOnInternal(Uo(t,this.getProjection()),e,r)}},{key:"centerOnInternal",value:function(t,e,r){this.setCenterInternal(iu(t,e,r,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,r,n){var i,o=this.padding_;if(o&&t){var a=this.getViewportSizeMinusPadding_(-r),s=iu(t,n,[a[0]/2+o[3],a[1]/2+o[0]],e,r);i=[t[0]-s[0],t[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=Go(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&Uo(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=Uo(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?Uo(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r,this.calculateCenterShift(this.targetCenter_,o,n,i));this.get(Ei.ROTATION)!==n&&this.set(Ei.ROTATION,n),this.get(Ei.RESOLUTION)!==o&&(this.set(Ei.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(Ei.CENTER)&&ao(this.get(Ei.CENTER),a)||this.set(Ei.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,r){t=void 0!==t?t:200;var n=e||0,i=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,n,o),s=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,i,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=i,this.targetCenter_=s,void this.applyTargetState_();r=r||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===i&&this.getCenterInternal()&&ao(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:s,resolution:a,duration:t,easing:ea,anchor:r}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(1,1)}},{key:"endInteraction",value:function(t,e,r){r=r&&Uo(r,this.getProjection()),this.endInteractionInternal(t,e,r)}},{key:"endInteractionInternal",value:function(t,e,r){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,r))}},{key:"getConstrainedCenter",value:function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)}},{key:"getConstrainedZoom",value:function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,r)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ks(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);function ru(t,e){setTimeout((function(){t(e)}),0)}function nu(t){return!(t.sourceCenter&&t.targetCenter&&!ao(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function iu(t,e,r,n,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,u=t[1]*o+t[0]*a;return[(s+=(e[0]/2-r[0])*n)*o-(u+=(r[1]-e[1]/2)*n)*(a=-a),u*o+s*a]}const ou=eu;function au(t){return au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(t)}function su(t){var e=function(t,e){if("object"!=au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==au(e)?e:String(e)}function uu(t,e,r){return e=fu(e),function(t,e){if(e&&("object"===au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lu()?Reflect.construct(e,r||[],fu(t).constructor):e.apply(t,r))}function lu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lu=function(){return!!t})()}function cu(){return cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fu(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},cu.apply(this,arguments)}function fu(t){return fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fu(t)}function hu(t,e){return hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hu(t,e)}var pu=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=Object.assign({},t);delete n.source,(r=uu(this,e,[n])).on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,r.sourceReady_=!1,r.rendered=!1,t.render&&(r.render=t.render),t.map&&r.setMap(t.map),r.addChangeListener(Ur,r.handleSourcePropertyChange_);var i=t.source?t.source:null;return r.setSource(i),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hu(t,e)}(e,t),r=e,n=[{key:"getLayersArray",value:function(t){return(t=t||[]).push(this),t}},{key:"getLayerStatesArray",value:function(t){return(t=t||[]).push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(Ur)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var t=this.getSource();return t?t.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var t=this;this.sourceChangeKey_&&(ur(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var e=this.getSource();e&&(this.sourceChangeKey_=ar(e,Qe,this.handleSourceChange_,this),"ready"===e.getState()&&(this.sourceReady_=!0,setTimeout((function(){t.dispatchEvent("sourceready")}),0))),this.changed()}},{key:"getFeatures",value:function(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}},{key:"getData",value:function(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}},{key:"isVisible",value:function(t){var e,r,n=this,i=this.getMapInternal();!t&&i&&(t=i.getView()),!(e=t instanceof ou?{viewState:t.getState(),extent:t.calculateExtent()}:t).layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),r=e.layerStatesArray?e.layerStatesArray.find((function(t){return t.layer===n})):this.getLayerState();var o=this.getExtent();return du(r,e.viewState)&&(!o||ii(o,e.extent))}},{key:"getAttributions",value:function(t){if(!this.isVisible(t))return[];var e,r=this.getSource();if(r&&(e=r.getAttributions()),!e)return[];var n=e(t instanceof ou?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}},{key:"render",value:function(t,e){var r=this.getRenderer();return r.prepareFrame(t)?(this.rendered=!0,r.renderFrame(t,e)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(t){t||this.unrender(),this.set("map",t)}},{key:"getMapInternal",value:function(){return this.get("map")}},{key:"setMap",value:function(t){this.mapPrecomposeKey_&&(ur(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ur(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=ar(t,ki,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);qr(!e.some((function(t){return t.layer===r.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(r)}),this),this.mapRenderKey_=ar(this,Qe,t.render,t),this.changed())}},{key:"setSource",value:function(t){this.set(Ur,t)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),cu(fu(e.prototype),"disposeInternal",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,su(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ln);function du(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const yu=pu,vu="preload",gu="useInterimTilesOnError";function mu(t){return mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(t)}function bu(t){var e=function(t,e){if("object"!=mu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mu(e)?e:String(e)}function _u(t,e,r){return e=Su(e),function(t,e){if(e&&("object"===mu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wu()?Reflect.construct(e,r||[],Su(t).constructor):e.apply(t,r))}function wu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wu=function(){return!!t})()}function xu(){return xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Su(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},xu.apply(this,arguments)}function Su(t){return Su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Su(t)}function ku(t,e){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ku(t,e)}var Ou=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);return delete n.preload,delete n.useInterimTilesOnError,(r=_u(this,e,[n])).on,r.once,r.un,r.setPreload(void 0!==t.preload?t.preload:0),r.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ku(t,e)}(e,t),r=e,(n=[{key:"getPreload",value:function(){return this.get(vu)}},{key:"setPreload",value:function(t){this.set(vu,t)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(gu)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(gu,t)}},{key:"getData",value:function(t){return xu(Su(e.prototype),"getData",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bu(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(yu);const Eu=Ou;function Au(t){return Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(t)}function Pu(t){var e=function(t,e){if("object"!=Au(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Au(e)?e:String(e)}function Cu(t,e,r){return e=Ru(e),function(t,e){if(e&&("object"===Au(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mu(t)}(t,ju()?Reflect.construct(e,r||[],Ru(t).constructor):e.apply(t,r))}function ju(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ju=function(){return!!t})()}function Mu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tu(){return Tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ru(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Tu.apply(this,arguments)}function Ru(t){return Ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ru(t)}function Iu(t,e){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Iu(t,e)}const Lu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Cu(this,e)).ready=!0,r.boundHandleImageChange_=r.handleImageChange_.bind(Mu(r)),r.layer_=t,r.declutterExecutorGroup=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iu(t,e)}(e,t),r=e,(n=[{key:"getFeatures",value:function(t){return mr()}},{key:"getData",value:function(t){return null}},{key:"prepareFrame",value:function(t){return mr()}},{key:"renderFrame",value:function(t,e){return mr()}},{key:"loadedTileCallback",value:function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(t,e,r){var n=this;return function(i,o){var a=n.loadedTileCallback.bind(n,r,i);return t.forEachLoadedTile(e,i,o,a)}}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,i){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(t){var e=t.target;2!==e.getState()&&3!==e.getState()||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(Qe,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}},{key:"renderIfReadyAndVisible",value:function(){var t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,Tu(Ru(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pu(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(gr);function Fu(t){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(t)}function Du(t,e,r){return e=Nu(e),function(t,e){if(e&&("object"===Fu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bu()?Reflect.construct(e,r||[],Nu(t).constructor):e.apply(t,r))}function Bu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bu=function(){return!!t})()}function Nu(t){return Nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nu(t)}function zu(t,e){return zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zu(t,e)}var Gu=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Du(this,e,[t])).inversePixelTransform=r,o.frameState=n,o.context=i,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zu(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Pe);const Uu=Gu,qu={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Wu={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Wu.max=Wu.whitepoint[2].D65,Wu.rgb=function(t,e){e=e||Wu.whitepoint[2].E;var r,n,i,o=t[0]/e[0],a=t[1]/e[1],s=t[2]/e[2];return n=-.96924363628087*o+1.87596750150772*a+.041555057407175*s,i=.055630079696993*o+-.20397695888897*a+1.056971514242878*s,r=(r=3.240969941904521*o+-1.537383177570093*a+-.498610760293*s)>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,[255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1))]},qu.xyz=function(t,e){var r=t[0]/255,n=t[1]/255,i=t[2]/255,o=.21263900587151*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.71516867876775*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.072192315360733*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92),a=.019330818715591*r+.11919477979462*n+.95053215224966*i;return[(.41239079926595*r+.35758433938387*n+.18048078840183*i)*(e=e||Wu.whitepoint[2].E)[0],o*e[1],a*e[2]]};const Vu=Wu,Zu={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,r){var n,i,o,a,s,u,l,c,f;return o=t[0],a=t[1],s=t[2],0===o?[0,0,0]:(e=e||"D65",r=r||2,n=a/(13*o)+4*(l=Vu.whitepoint[r][e][0])/(l+15*(c=Vu.whitepoint[r][e][1])+3*(f=Vu.whitepoint[r][e][2]))||0,i=s/(13*o)+9*c/(l+15*c+3*f)||0,[9*(u=o>8?c*Math.pow((o+16)/116,3):c*o*.0011070564598794539)*n/(4*i)||0,u,u*(12-3*n-20*i)/(4*i)||0])}};Vu.luv=function(t,e,r){var n,i,o,a,s,u,l,c,f,h,p;e=e||"D65",r=r||2,h=4*(l=Vu.whitepoint[r][e][0])/(l+15*(c=Vu.whitepoint[r][e][1])+3*(f=Vu.whitepoint[r][e][2])),p=9*c/(l+15*c+3*f),n=4*(a=t[0])/(a+15*(s=t[1])+3*(u=t[2]))||0,i=9*s/(a+15*s+3*u)||0;var d=s/c;return[o=d<=.008856451679035631?903.2962962962961*d:116*Math.pow(d,1/3)-16,13*o*(n-h),13*o*(i-p)]};var Yu={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},xyz:function(t){return Zu.xyz(Yu.luv(t))}};const Xu=Yu;Zu.lchuv=function(t){var e=t[0],r=t[1],n=t[2],i=Math.sqrt(r*r+n*n),o=360*Math.atan2(n,r)/2/Math.PI;return o<0&&(o+=360),[e,i,o]},Vu.lchuv=function(t){return Zu.lchuv(Vu.luv(t))};var Hu=s(671);const Ku=function(t){var e,r,n=[],i=1;if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Hu[t])n=Hu[t].slice(),r="rgb";else if("transparent"===t)i=0,r="rgb",n=[0,0,0];else if("#"===t[0]){var o=t.slice(1),a=o.length;i=1,a<=4?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===a&&(i=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===a&&(i=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var s=e[1],u="cmyk"===(r=s.replace(/a$/,""))?4:"gray"===r?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===r&&(r=n.shift()),i=(n=n.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===r?255*t:"h"===r[0]?100*t:"l"!==r[0]||e?"lab"===r?125*t:"lch"===r?e<2?150*t:360*t:"o"!==r[0]||e?"oklab"===r?.4*t:"oklch"===r?e<2?.4*t:360*t:t:t:100*t;if("h"===r[e]||2===e&&"h"===r[r.length-1]){if(void 0!==Ju[t])return Ju[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>u?n.pop():1}else if(/[0-9](?:\s|\/|,)/.test(t)){var l;n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),r=(null===(l=t.match(/([a-z])/gi))||void 0===l||null===(l=l.join(""))||void 0===l?void 0:l.toLowerCase())||"rgb"}return{space:r,values:n,alpha:i}};var Ju={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const $u={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,n,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100,l=0;if(0===s)return[o=255*u,o,o];for(e=2*u-(r=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];l<3;)(n=a+1/3*-(l-1))<0?n++:n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[l++]=255*o;return i}};function Qu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tl(t){return"string"==typeof t?t:ll(t)}qu.hsl=function(t){var e,r,n=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(n,i,o),s=Math.max(n,i,o),u=s-a;return s===a?e=0:n===s?e=(i-o)/u:i===s?e=2+(o-n)/u:o===s&&(e=4+(n-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?u/(s+a):u/(2-s-a)),100*r]};var el=1024,rl={},nl=0;function il(t){if(4===t.length)return t;var e=t.slice();return e[3]=1,e}function ol(t){var e=Vu.lchuv(qu.xyz(t));return e[3]=t[3],e}function al(t){if(rl.hasOwnProperty(t))return rl[t];if(nl>=el){var e=0;for(var r in rl)0==(3&e++)&&(delete rl[r],--nl)}var n=function(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw.apply(String,arguments)),t instanceof Number&&(t=+t);var r=Ku(t);if(!r.space)return[];var n="h"===r.space[0]?$u.min:qu.min,i="h"===r.space[0]?$u.max:qu.max;return(e=Array(3))[0]=Math.min(Math.max(r.values[0],n[0]),i[0]),e[1]=Math.min(Math.max(r.values[1],n[1]),i[1]),e[2]=Math.min(Math.max(r.values[2],n[2]),i[2]),"h"===r.space[0]&&(e=$u.rgb(e)),e.push(Math.min(Math.max(r.alpha,0),1)),e}(t);if(4!==n.length)throw new Error('Failed to parse "'+t+'" as color');var i,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Qu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qu(t,e):void 0}}(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(isNaN(a))throw new Error('Failed to parse "'+t+'" as color')}}catch(t){o.e(t)}finally{o.f()}return ul(n),rl[t]=n,++nl,n}function sl(t){return Array.isArray(t)?t:al(t)}function ul(t){return t[0]=Wr(t[0]+.5|0,0,255),t[1]=Wr(t[1]+.5|0,0,255),t[2]=Wr(t[2]+.5|0,0,255),t[3]=Wr(t[3],0,1),t}function ll(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function cl(t,e,r,n){var i;return i=r&&r.length?r.shift():ca?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",n)}function fl(t){var e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function hl(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+(parseInt(r.marginLeft,10)+parseInt(r.marginRight,10))}function pl(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10))}function dl(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function yl(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function vl(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function gl(t){return gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(t)}function ml(t){var e=function(t,e){if("object"!=gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gl(e)?e:String(e)}function bl(t,e,r){return e=xl(e),function(t,e){if(e&&("object"===gl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_l()?Reflect.construct(e,r||[],xl(t).constructor):e.apply(t,r))}function _l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_l=function(){return!!t})()}function wl(){return wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xl(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},wl.apply(this,arguments)}function xl(t){return xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xl(t)}function Sl(t,e){return Sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sl(t,e)}var kl=[],Ol=null,El=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bl(this,e,[t])).container=null,r.renderedResolution,r.tempTransform=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r.pixelContext_=null,r.frameState=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sl(t,e)}(e,t),r=e,n=[{key:"getImageData",value:function(t,e,r){var n;Ol||(Ol=cl(1,1,void 0,{willReadFrequently:!0})),Ol.clearRect(0,0,1,1);try{Ol.drawImage(t,e,r,1,1,0,0,1,1),n=Ol.getImageData(0,0,1,1).data}catch(t){return Ol=null,null}return n}},{key:"getBackground",value:function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}},{key:"useContainer",value:function(t,e,r){var n,i,o=this.getLayer().getClassName();if(t&&t.className===o&&(!r||t&&t.style.backgroundColor&&De(sl(t.style.backgroundColor),sl(r)))){var a=t.firstElementChild;a instanceof HTMLCanvasElement&&(i=a.getContext("2d"))}if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(n=document.createElement("div")).className=o;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var u=(i=cl()).canvas;n.appendChild(u),(s=u.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=i}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(t,e,r){var n=ei(r),i=ri(r),o=Xn(r),a=Yn(r);ga(e.coordinateToPixelTransform,n),ga(e.coordinateToPixelTransform,i),ga(e.coordinateToPixelTransform,o),ga(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;ga(s,n),ga(s,i),ga(s,o),ga(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new Uu(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}}},{key:"preRender",value:function(t,e){this.frameState=e,this.dispatchRenderEvent_(xi,t,e)}},{key:"postRender",value:function(t,e){this.dispatchRenderEvent_(Si,t,e)}},{key:"getRenderTransform",value:function(t,e,r,n,i,o,a){var s=i/2,u=o/2,l=n/e,c=-l,f=-t[0]+a,h=-t[1];return ba(this.tempTransform,s,u,l,c,-r,f,h)}},{key:"disposeInternal",value:function(){delete this.frameState,wl(xl(e.prototype),"disposeInternal",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ml(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Lu);const Al=El,Pl={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Cl(t){return Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(t)}function jl(t){var e=function(t,e){if("object"!=Cl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cl(e)?e:String(e)}function Ml(t,e,r){return e=Rl(e),function(t,e){if(e&&("object"===Cl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tl()?Reflect.construct(e,r||[],Rl(t).constructor):e.apply(t,r))}function Tl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tl=function(){return!!t})()}function Rl(t){return Rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rl(t)}function Il(t,e){return Il=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Il(t,e)}var Ll=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},(i=Ml(this,e)).tileCoord=t,i.state=r,i.interimTile=null,i.key="",i.transition_=void 0===n.transition?250:n.transition,i.transitionStarts_={},i.interpolate=!!n.interpolate,i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Il(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){this.dispatchEvent(Qe)}},{key:"release",value:function(){this.state===Pl.ERROR&&this.setState(Pl.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){var t=this.interimTile;if(!t)return this;do{if(t.getState()==Pl.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){var t=this.interimTile;if(t){var e=this;do{if(t.getState()==Pl.LOADED){t.interimTile=null;break}t.getState()==Pl.LOADING?e=t:t.getState()==Pl.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==Pl.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){mr()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:ta(n/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jl(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($e);const Fl=Ll;function Dl(t){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(t)}function Bl(t){var e=function(t,e){if("object"!=Dl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dl(e)?e:String(e)}function Nl(t,e,r){return e=Gl(e),function(t,e){if(e&&("object"===Dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zl()?Reflect.construct(e,r||[],Gl(t).constructor):e.apply(t,r))}function zl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zl=function(){return!!t})()}function Gl(t){return Gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gl(t)}function Ul(t,e){return Ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ul(t,e)}const ql=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Nl(this,e)).extent=t,o.pixelRatio_=n,o.resolution=r,o.state="function"==typeof i?0:i,o.image_=null,o.loader="function"==typeof i?i:null,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ul(t,e)}(e,t),r=e,(n=[{key:"changed",value:function(){this.dispatchEvent(Qe)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return this.image_}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){var t=this;if(0==this.state&&this.loader){this.state=1,this.changed();var e=this.getResolution(),r=Array.isArray(e)?e[0]:e;Ue((function(){return t.loader(t.getExtent(),r,t.getPixelRatio())})).then((function(e){"image"in e&&(t.image_=e.image),"extent"in e&&(t.extent=e.extent),"resolution"in e&&(t.resolution=e.resolution),"pixelRatio"in e&&(t.pixelRatio_=e.pixelRatio),(e instanceof HTMLImageElement||e instanceof ImageBitmap||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)&&(t.image_=e),t.state=2})).catch((function(e){t.state=3,console.error(e)})).finally((function(){return t.changed()}))}}},{key:"setImage",value:function(t){this.image_=t}},{key:"setResolution",value:function(t){this.resolution=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bl(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($e);function Wl(t){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(t)}function Vl(t){var e=function(t,e){if("object"!=Wl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Wl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wl(e)?e:String(e)}function Zl(t,e,r){return e=Xl(e),function(t,e){if(e&&("object"===Wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yl()?Reflect.construct(e,r||[],Xl(t).constructor):e.apply(t,r))}function Yl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yl=function(){return!!t})()}function Xl(t){return Xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xl(t)}function Hl(t,e){return Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hl(t,e)}var Kl=function(t){function e(t,r,n,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Zl(this,e,[t,r,a])).crossOrigin_=i,s.src_=n,s.key=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hl(t,e)}(e,t),r=e,(n=[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=Pl.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){var t;this.state=Pl.ERROR,this.unlistenImage_(),this.image_=((t=cl(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Pl.LOADED:this.state=Pl.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){var t,e,r,n,i,o,a,s;this.state==Pl.ERROR&&(this.state=Pl.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pl.IDLE&&(this.state=Pl.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(t=this.image_,e=this.handleImageLoad_.bind(this),r=this.handleImageError_.bind(this),i=!0,o=!1,a=!1,s=[sr(n=t,"load",(function(){a=!0,o||e()}))],n.src&&fa?(o=!0,n.decode().then((function(){i&&e()})).catch((function(t){i&&(a?e():r())}))):s.push(sr(n,"error",r)),function(){i=!1,s.forEach(ur)}))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vl(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fl);const Jl=Kl;function $l(t){return $l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(t)}function Ql(t){var e=function(t,e){if("object"!=$l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$l(e)?e:String(e)}const tc=function(){function t(e,r,n,i,o,a){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceProj_=e,this.targetProj_=r;var u={},l=Ro(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return u[e]||(u[e]=l(t)),u[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ni(i)>=ni(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ni(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ni(this.targetProj_.getExtent()):null;var c=ei(n),f=ri(n),h=Xn(n),p=Yn(n),d=this.transformInv_(c),y=this.transformInv_(f),v=this.transformInv_(h),g=this.transformInv_(p),m=10+(a?Math.max(0,Math.ceil(Math.log2(Zn(n)/(a*a*256*256)))):0);if(this.addQuad_(c,f,h,p,d,y,v,g,m),this.wrapsXInSource_){var b=1/0;this.triangles_.forEach((function(t,e,r){b=Math.min(b,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach((function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-b>s.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-b>s.sourceWorldWidth_/2&&(e[0][0]-=s.sourceWorldWidth_),e[1][0]-b>s.sourceWorldWidth_/2&&(e[1][0]-=s.sourceWorldWidth_),e[2][0]-b>s.sourceWorldWidth_/2&&(e[2][0]-=s.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<s.sourceWorldWidth_/2&&(t.source=e)}}))}u={}}var e,r;return e=t,(r=[{key:"addTriangle_",value:function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})}},{key:"addQuad_",value:function(t,e,r,n,i,o,a,s,u){var l=Pn([i,o,a,s]),c=this.sourceWorldWidth_?ni(l)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,h=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=ni(Pn([t,e,r,n]))/this.targetWorldWidth_>.25||p),!h&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)),!(!p&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||ii(l,this.maxSourceExtent_)){var d=0;if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])))if(u>0)p=!0;else if(1!=(d=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(s[0])&&isFinite(s[1])?0:1))&&2!=d&&4!=d&&8!=d)return;if(u>0){if(!p){var y,v=[(t[0]+r[0])/2,(t[1]+r[1])/2],g=this.transformInv_(v);y=h?(Xr(i[0],f)+Xr(a[0],f))/2-Xr(g[0],f):(i[0]+a[0])/2-g[0];var m=(i[1]+a[1])/2-g[1];p=y*y+m*m>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var b=[(e[0]+r[0])/2,(e[1]+r[1])/2],_=this.transformInv_(b),w=[(n[0]+t[0])/2,(n[1]+t[1])/2],x=this.transformInv_(w);this.addQuad_(t,e,b,w,i,o,_,x,u-1),this.addQuad_(w,b,r,n,x,_,a,s,u-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],k=this.transformInv_(S),O=[(r[0]+n[0])/2,(r[1]+n[1])/2],E=this.transformInv_(O);this.addQuad_(t,S,O,n,i,k,E,s,u-1),this.addQuad_(S,e,r,O,k,o,a,E,u-1)}return}}if(h){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&d)&&this.addTriangle_(t,r,n,i,a,s),0==(14&d)&&this.addTriangle_(t,r,e,i,a,o),d&&(0==(13&d)&&this.addTriangle_(e,n,t,o,s,i),0==(7&d)&&this.addTriangle_(e,n,r,o,s,a))}}},{key:"calculateSourceExtent",value:function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,r,n){var i=e.source;Un(t,i[0]),Un(t,i[1]),Un(t,i[2])})),t}},{key:"getTriangles",value:function(){return this.triangles_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ql(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();var ec,rc=[];function nc(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function ic(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function oc(t,e,r,n){var i=Io(r,e,t),o=Oo(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||Tn(u,i)){var l=Oo(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function ac(t,e,r,n,i,o,a,s,u,l,c,f,h){var p=cl(Math.round(r*t),Math.round(r*e),rc);if(f||(p.imageSmoothingEnabled=!1),0===u.length)return p.canvas;function d(t){return Math.round(t*r)/r}p.scale(r,r),p.globalCompositeOperation="lighter";var y,v=[1/0,1/0,-1/0,-1/0];if(u.forEach((function(t,e,r){Gn(v,t.extent)})),!h||1!==u.length||0!==l){var g=ni(v),m=Qn(v);y=cl(Math.round(r*g/n),Math.round(r*m/n),rc),f||(y.imageSmoothingEnabled=!1);var b=r/n;u.forEach((function(t,e,r){var n=t.extent[0]-v[0],i=-(t.extent[3]-v[3]),o=ni(t.extent),a=Qn(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*b,i*b,o*b,a*b)}))}var _=ei(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,l=a[0][0],c=a[0][1],h=a[1][0],g=a[1][1],m=a[2][0],b=a[2][1],w=d((s[0][0]-_[0])/o),x=d(-(s[0][1]-_[1])/o),S=d((s[1][0]-_[0])/o),k=d(-(s[1][1]-_[1])/o),O=d((s[2][0]-_[0])/o),E=d(-(s[2][1]-_[1])/o),A=l,P=c;l=0,c=0;var C=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var f=new Array(e),h=e-1;h>=0;h--){f[h]=t[h][e]/t[h][h];for(var p=h-1;p>=0;p--)t[p][e]-=t[p][h]*f[h]}return f}([[h-=A,g-=P,0,0,S-w],[m-=A,b-=P,0,0,O-w],[0,0,h,g,k-x],[0,0,m,b,E-x]]);if(C){if(p.save(),p.beginPath(),function(){if(void 0===ec){var t=cl(6,6,rc);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",nc(t,4,5,4,0),nc(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;ec=ic(e,0)||ic(e,4)||ic(e,8),fl(t),rc.push(t.canvas)}return ec}()||!f){p.moveTo(S,k);for(var j=w-S,M=x-k,T=0;T<4;T++)p.lineTo(S+d((T+1)*j/4),k+d(T*M/3)),3!=T&&p.lineTo(S+d((T+1)*j/4),k+d((T+1)*M/3));p.lineTo(O,E)}else p.moveTo(S,k),p.lineTo(w,x),p.lineTo(O,E);var R;if(p.clip(),p.transform(C[0],C[2],C[1],C[3],w,x),p.translate(v[0]-A,v[3]-P),y)R=y.canvas,p.scale(n/r,-n/r);else{var I=u[0],L=I.extent;R=I.image,p.scale(ni(L)/R.width,-Qn(L)/R.height)}p.drawImage(R,0,0),p.restore()}})),y&&(fl(y),rc.push(y.canvas)),c&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-_[0])/o,a=-(n[0][1]-_[1])/o,s=(n[1][0]-_[0])/o,u=-(n[1][1]-_[1])/o,l=(n[2][0]-_[0])/o,c=-(n[2][1]-_[1])/o;p.beginPath(),p.moveTo(s,u),p.lineTo(i,a),p.lineTo(l,c),p.closePath(),p.stroke()})),p.restore()),p.canvas}function sc(t){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(t)}function uc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sc(e)?e:String(e)}function lc(t,e,r){return e=pc(e),cc(t,fc()?Reflect.construct(e,r||[],pc(t).constructor):e.apply(t,r))}function cc(t,e){if(e&&("object"===sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fc=function(){return!!t})()}function hc(){return hc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pc(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},hc.apply(this,arguments)}function pc(t){return pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pc(t)}function dc(t,e){return dc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dc(t,e)}var yc=function(t){function e(t,r,n,i,o,a,s,u,l,c,f,h){var p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(p=lc(this,e,[o,Pl.IDLE,h])).renderEdges_=void 0!==f&&f,p.pixelRatio_=s,p.gutter_=u,p.canvas_=null,p.sourceTileGrid_=r,p.targetTileGrid_=i,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var d=i.getTileCoordExtent(p.wrappedTileCoord_),y=p.targetTileGrid_.getExtent(),v=p.sourceTileGrid_.getExtent(),g=y?ti(d,y):d;if(0===Zn(g))return p.state=Pl.EMPTY,cc(p);var m=t.getExtent();m&&(v=v?ti(v,m):m);var b=i.getResolution(p.wrappedTileCoord_[0]),_=function(t,e,r,n){var i=Hn(r),o=oc(t,e,i,n);return(!isFinite(o)||o<=0)&&Vn(r,(function(r){return o=oc(t,e,r,n),isFinite(o)&&o>0})),o}(t,n,g,b);if(!isFinite(_)||_<=0)return p.state=Pl.EMPTY,cc(p);var w=void 0!==c?c:.5;if(p.triangulation_=new tc(t,n,g,v,_*w,b),0===p.triangulation_.getTriangles().length)return p.state=Pl.EMPTY,cc(p);p.sourceZ_=r.getZForResolution(_);var x=p.triangulation_.calculateSourceExtent();if(v&&(t.canWrapX()?(x[1]=Wr(x[1],v[1],v[3]),x[3]=Wr(x[3],v[1],v[3])):x=ti(x,v)),Zn(x)){for(var S=r.getTileRangeForExtentAndZ(x,p.sourceZ_),k=S.minX;k<=S.maxX;k++)for(var O=S.minY;O<=S.maxY;O++){var E=l(p.sourceZ_,k,O,s);E&&p.sourceTiles_.push(E)}0===p.sourceTiles_.length&&(p.state=Pl.EMPTY)}else p.state=Pl.EMPTY;return p}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dc(t,e)}(e,t),r=e,(n=[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var t=this,e=[];if(this.sourceTiles_.forEach((function(r){r&&r.getState()==Pl.LOADED&&e.push({extent:t.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})})),this.sourceTiles_.length=0,0===e.length)this.state=Pl.ERROR;else{var r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],a=this.targetTileGrid_.getResolution(r),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ac(i,o,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),a,u,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Pl.LOADED}this.changed()}},{key:"load",value:function(){var t=this;if(this.state==Pl.IDLE){this.state=Pl.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(r){var n=r.getState();if(n==Pl.IDLE||n==Pl.LOADING){e++;var i=ar(r,Qe,(function(t){var n=r.getState();n!=Pl.LOADED&&n!=Pl.ERROR&&n!=Pl.EMPTY||(ur(i),0==--e&&(this.unlistenSources_(),this.reproject_()))}),t);t.sourcesListenerKeys_.push(i)}})),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){t.getState()==Pl.IDLE&&t.load()}))}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(ur),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&(fl(this.canvas_.getContext("2d")),rc.push(this.canvas_),this.canvas_=null),hc(pc(e.prototype),"release",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uc(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fl);const vc=yc;function gc(t){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(t)}function mc(t){var e=function(t,e){if("object"!=gc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gc(e)?e:String(e)}var bc=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}var e,r;return e=t,(r=[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _c(t,e,r,n,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new bc(t,e,r,n)}const wc=bc;function xc(t){return t[0]>0&&t[1]>0}function Sc(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}function kc(t){return kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(t)}function Oc(t){var e=function(t,e){if("object"!=kc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kc(e)?e:String(e)}function Ec(t,e,r){return e=Cc(e),function(t,e){if(e&&("object"===kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ac()?Reflect.construct(e,r||[],Cc(t).constructor):e.apply(t,r))}function Ac(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ac=function(){return!!t})()}function Pc(){return Pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cc(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Pc.apply(this,arguments)}function Cc(t){return Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cc(t)}function jc(t,e){return jc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jc(t,e)}var Mc=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ec(this,e,[t])).extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new wc(0,0,0,0),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jc(t,e)}(e,t),r=e,n=[{key:"isDrawableTile",value:function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==Pl.LOADED||r==Pl.EMPTY||r==Pl.ERROR&&!n}},{key:"getTile",value:function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return s.getState()==Pl.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=ga(e.pixelToCoordinateTransform,t.slice()),i=r.getExtent();if(i&&!Tn(i,n))return null;for(var o=e.pixelRatio,a=e.viewState.projection,s=e.viewState,u=r.getRenderSource(),l=u.getTileGridForProjection(s.projection),c=u.getTilePixelRatio(e.pixelRatio),f=l.getZForResolution(s.resolution);f>=l.getMinZoom();--f){var h=l.getTileCoordForCoordAndZ(n,f),p=u.getTile(f,h[1],h[2],o,a);if(!(p instanceof Jl||p instanceof vc)||p instanceof vc&&p.getState()===Pl.EMPTY)return null;if(p.getState()===Pl.LOADED){var d=l.getOrigin(f),y=Sc(l.getTileSize(f)),v=l.getResolution(f),g=Math.floor(c*((n[0]-d[0])/v-h[1]*y[0])),m=Math.floor(c*((d[1]-n[1])/v-h[2]*y[1])),b=Math.round(c*u.getGutterForProjection(s.projection));return this.getImageData(p.getImage(),g+b,m+b)}}return null}},{key:"loadedTileCallback",value:function(t,r,n){return!!this.isDrawableTile(n)&&Pc(Cc(e.prototype),"loadedTileCallback",this).call(this,t,r,n)}},{key:"prepareFrame",value:function(t){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,o=n.resolution,a=n.center,s=n.rotation,u=t.pixelRatio,l=this.getLayer(),c=l.getSource(),f=c.getRevision(),h=c.getTileGridForProjection(i),p=h.getZForResolution(o,c.zDirection),d=h.getResolution(p),y=t.extent,v=t.viewState.resolution,g=c.getTilePixelRatio(u),m=Math.round(ni(y)/v*u),b=Math.round(Qn(y)/v*u),_=r.extent&&Wo(r.extent,i);_&&(y=ti(y,Wo(r.extent,i)));var w=d*m/2/g,x=d*b/2/g,S=[a[0]-w,a[1]-x,a[0]+w,a[1]+x],k=h.getTileRangeForExtentAndZ(y,p),O={};O[p]={};var E=this.createLoadedTileFinder(c,i,O),A=this.tmpExtent,P=this.tmpTileRange_;this.newTiles_=!1;for(var C=s?$n(n.center,v,s,t.size):void 0,j=k.minX;j<=k.maxX;++j)for(var M=k.minY;M<=k.maxY;++M)if(!s||h.tileCoordIntersectsViewport([p,j,M],C)){var T=this.getTile(p,j,M,t);if(this.isDrawableTile(T)){var R=_r(this);if(T.getState()==Pl.LOADED){O[p][T.tileCoord.toString()]=T;var I=T.inTransition(R);I&&1!==r.opacity&&(T.endTransition(R),I=!1),this.newTiles_||!I&&this.renderedTiles.includes(T)||(this.newTiles_=!0)}if(1===T.getAlpha(R,t.time))continue}var L=h.getTileCoordChildTileRange(T.tileCoord,P,A),F=!1;L&&(F=E(p+1,L)),F||h.forEachTileCoordParentTileRange(T.tileCoord,E,P,A)}var D=d/o*u/g;ba(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/u,1/u,s,-m/2,-b/2);var B=wa(this.pixelTransform);this.useContainer(e,B,this.getBackground(t));var N=this.context,z=N.canvas;_a(this.inversePixelTransform,this.pixelTransform),ba(this.tempTransform,m/2,b/2,D,D,0,-m/2,-b/2),z.width!=m||z.height!=b?(z.width=m,z.height=b):this.containerReused||N.clearRect(0,0,m,b),_&&this.clipUnrotated(N,t,_),c.getInterpolate()||(N.imageSmoothingEnabled=!1),this.preRender(N,t),this.renderedTiles.length=0;var G,U,q,W=Object.keys(O).map(Number);W.sort(Re),1!==r.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(G=[],U=[]):W=W.reverse();for(var V=W.length-1;V>=0;--V){var Z=W[V],Y=c.getTilePixelSize(Z,u,i),X=h.getResolution(Z)/d,H=Y[0]*X*D,K=Y[1]*X*D,J=h.getTileCoordForCoordAndZ(ei(S),Z),$=h.getTileCoordExtent(J),Q=ga(this.tempTransform,[g*($[0]-S[0])/d,g*(S[3]-$[3])/d]),tt=g*c.getGutterForProjection(i),et=O[Z];for(var rt in et){var nt=et[rt],it=nt.tileCoord,ot=J[1]-it[1],at=Math.round(Q[0]-(ot-1)*H),st=J[2]-it[2],ut=Math.round(Q[1]-(st-1)*K),lt=Math.round(Q[0]-ot*H),ct=Math.round(Q[1]-st*K),ft=at-lt,ht=ut-ct,pt=p===Z,dt=pt&&1!==nt.getAlpha(_r(this),t.time),yt=!1;if(!dt)if(G){q=[lt,ct,lt+ft,ct,lt+ft,ct+ht,lt,ct+ht];for(var vt=0,gt=G.length;vt<gt;++vt)if(p!==Z&&Z<U[vt]){var mt=G[vt];ii([lt,ct,lt+ft,ct+ht],[mt[0],mt[3],mt[4],mt[7]])&&(yt||(N.save(),yt=!0),N.beginPath(),N.moveTo(q[0],q[1]),N.lineTo(q[2],q[3]),N.lineTo(q[4],q[5]),N.lineTo(q[6],q[7]),N.moveTo(mt[6],mt[7]),N.lineTo(mt[4],mt[5]),N.lineTo(mt[2],mt[3]),N.lineTo(mt[0],mt[1]),N.clip())}G.push(q),U.push(Z)}else N.clearRect(lt,ct,ft,ht);this.drawTileImage(nt,t,lt,ct,ft,ht,tt,pt),G&&!dt?(yt&&N.restore(),this.renderedTiles.unshift(nt)):this.renderedTiles.push(nt),this.updateUsedTiles(t.usedTiles,c,nt)}}return this.renderedRevision=f,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!zn(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,c,h,u,i,y,p,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(N,t),r.extent&&N.restore(),N.imageSmoothingEnabled=!0,B!==z.style.transform&&(z.style.transform=B),this.container}},{key:"drawTileImage",value:function(t,e,r,n,i,o,a,s){var u=this.getTileImage(t);if(u){var l=_r(this),c=e.layerStatesArray[e.layerIndex],f=c.opacity*(s?t.getAlpha(l,e.time):1),h=f!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,r,n,i,o),h&&this.context.restore(),f!==c.opacity?e.animate=!0:s&&t.endTransition(l)}}},{key:"getImage",value:function(){var t=this.context;return t?t.canvas:null}},{key:"getTileImage",value:function(t){return t.getImage()}},{key:"scheduleExpireCache",value:function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=_r(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(t,e,r){var n=_r(e);n in t||(t[n]={}),t[n][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(t,e,r,n,i,o,a,s,u){var l=_r(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,f,h,p,d,y,v=t.wantedTiles[l],g=t.tileQueue,m=r.getMinZoom(),b=t.viewState.rotation,_=b?$n(t.viewState.center,t.viewState.resolution,b,t.size):void 0,w=0;for(y=m;y<=a;++y)for(f=r.getTileRangeForExtentAndZ(o,y,f),h=r.getResolution(y),p=f.minX;p<=f.maxX;++p)for(d=f.minY;d<=f.maxY;++d)b&&!r.tileCoordIntersectsViewport([y,p,d],_)||(a-y<=s?(++w,(c=e.getTile(y,p,d,n,i)).getState()==Pl.IDLE&&(v[c.getKey()]=!0,g.isKeyQueued(c.getKey())||g.enqueue([c,l,r.getTileCoordCenter(c.tileCoord),h])),void 0!==u&&u(c)):e.useTile(y,p,d,i));e.updateCacheSize(w,i)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oc(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Al);const Tc=Mc;function Rc(t){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(t)}function Ic(t){var e=function(t,e){if("object"!=Rc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rc(e)?e:String(e)}function Lc(t,e,r){return e=Dc(e),function(t,e){if(e&&("object"===Rc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fc()?Reflect.construct(e,r||[],Dc(t).constructor):e.apply(t,r))}function Fc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fc=function(){return!!t})()}function Dc(t){return Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dc(t)}function Bc(t,e){return Bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bc(t,e)}var Nc=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lc(this,e,[t])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bc(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Tc(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ic(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Eu);const zc=Nc;var Gc=s(634);function Uc(t){return Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(t)}function qc(t){var e=function(t,e){if("object"!=Uc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Uc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uc(e)?e:String(e)}var Wc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Sc(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}var e,r;return e=t,r=[{key:"clone",value:function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return mr()}},{key:"getImage",value:function(t){return mr()}},{key:"getHitDetectionImage",value:function(){return mr()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return mr()}},{key:"getImageSize",value:function(){return mr()}},{key:"getOrigin",value:function(){return mr()}},{key:"getSize",value:function(){return mr()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=Sc(t)}},{key:"listenImageChange",value:function(t){mr()}},{key:"load",value:function(){mr()}},{key:"unlistenImageChange",value:function(t){mr()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qc(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Vc=Wc;function Zc(t){return Array.isArray(t)?ll(t):t}var Yc,Xc,Hc="ol-hidden",Kc="ol-unselectable",Jc="ol-control",$c="ol-collapsed",Qc=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),tf=["style","variant","weight","size","lineHeight","family"],ef=function(t){var e=t.match(Qc);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=tf.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[tf[n]]=o)}return r.families=r.family.split(/,\s?/),r},rf="10px sans-serif",nf="#000",of="round",af=[],sf="round",uf="#000",lf="center",cf="middle",ff=[0,0,0,0],hf=new Rr,pf=null,df={},yf=function(){var t,e,r="32px ",n=["monospace","serif"],i=n.length,o="wmytzilWMYTZIL@#/&?$%10";function a(t,a,s){for(var u=!0,l=0;l<i;++l){var c=n[l];if(e=mf(t+" "+a+" "+r+c,o),s!=c){var f=mf(t+" "+a+" "+r+s+","+c,o);u=u&&f!=e}}return!!u}function s(){for(var e=!0,r=hf.getKeys(),n=0,i=r.length;n<i;++n){var o=r[n];hf.get(o)<100&&(a.apply(this,o.split("\n"))?(qe(df),pf=null,Yc=void 0,hf.set(o,100)):(hf.set(o,hf.get(o)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=ef(e);if(r)for(var n=r.families,i=0,o=n.length;i<o;++i){var u=n[i],l=r.style+"\n"+r.weight+"\n"+u;void 0===hf.get(l)&&(hf.set(l,100,!0),a(r.style,r.weight,u)||(hf.set(l,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),vf=function(t){var e=df[t];if(null==e){if(ca){var r=ef(t),n=gf(t,"Žg");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else Xc||((Xc=document.createElement("div")).innerHTML="M",Xc.style.minHeight="0",Xc.style.maxHeight="none",Xc.style.height="auto",Xc.style.padding="0",Xc.style.border="none",Xc.style.position="absolute",Xc.style.display="block",Xc.style.left="-99999px"),Xc.style.font=t,document.body.appendChild(Xc),e=Xc.offsetHeight,document.body.removeChild(Xc);df[t]=e}return e};function gf(t,e){return pf||(pf=cl(1,1)),t!=Yc&&(pf.font=t,Yc=pf.font),pf.measureText(e)}function mf(t,e){return gf(t,e).width}function bf(t,e,r){if(e in r)return r[e];var n=e.split("\n").reduce((function(e,r){return Math.max(e,mf(t,r))}),0);return r[e]=n,n}function _f(t){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(t)}function wf(t){var e=function(t,e){if("object"!=_f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_f(e)?e:String(e)}function xf(t,e,r){return e=kf(e),function(t,e){if(e&&("object"===_f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sf()?Reflect.construct(e,r||[],kf(t).constructor):e.apply(t,r))}function Sf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sf=function(){return!!t})()}function kf(t){return kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kf(t)}function Of(t,e){return Of=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Of(t,e)}var Ef=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=xf(this,e,[{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}])).canvases_,r.hitDetectionCanvas_=null,r.fill_=void 0!==t.fill?t.fill:null,r.origin_=[0,0],r.points_=t.points,r.radius_=void 0!==t.radius?t.radius:t.radius1,r.radius2_=t.radius2,r.angle_=void 0!==t.angle?t.angle:0,r.stroke_=void 0!==t.stroke?t.stroke:null,r.size_,r.renderOptions_,r.render(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Of(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}},{key:"getAnchor",value:function(){var t=this.size_,e=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-e[0]/r[0],t[1]/2+e[1]/r[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvases_[t];if(!e){var r=this.renderOptions_,n=cl(r.size*t,r.size*t);this.draw_(r,n,t),e=n.canvas,this.canvases_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return 2}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,r){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var n=this.radius_,i=void 0===this.radius2_?n:this.radius2_;if(n<i){var o=n;n=i,i=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,u=i*Math.sin(s),l=n-Math.sqrt(i*i-u*u),c=Math.sqrt(u*u+l*l),f=c/u;if("miter"===t&&f<=r)return f*e;var h=e/2/f,p=e/2*(l/c),d=Math.sqrt((n+h)*(n+h)+p*p)-n;if(void 0===this.radius2_||"bevel"===t)return 2*d;var y=n*Math.sin(s),v=i-Math.sqrt(n*n-y*y),g=Math.sqrt(y*y+v*v)/y;if(g<=r){var m=g*e/2-i-n;return 2*Math.max(d,m)}return 2*d}},{key:"createRenderOptions",value:function(){var t,e,r,n,i,o,a,s=of,u=sf,l=0,c=null,f=0,h=0;this.stroke_&&(t=Zc(null!==(e=this.stroke_.getColor())&&void 0!==e?e:uf),h=null!==(r=this.stroke_.getWidth())&&void 0!==r?r:1,c=this.stroke_.getLineDash(),f=null!==(n=this.stroke_.getLineDashOffset())&&void 0!==n?n:0,u=null!==(i=this.stroke_.getLineJoin())&&void 0!==i?i:sf,s=null!==(o=this.stroke_.getLineCap())&&void 0!==o?o:of,l=null!==(a=this.stroke_.getMiterLimit())&&void 0!==a?a:10);var p=this.calculateLineJoinSize_(u,h,l),d=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:h,size:Math.ceil(2*d+p),lineCap:s,lineDash:c,lineDashOffset:f,lineJoin:u,miterLimit:l}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}},{key:"draw_",value:function(t,e,r){if(e.scale(r,r),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=nf),e.fillStyle=Zc(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){var e;if(this.fill_){var r=this.fill_.getColor(),n=0;"string"==typeof r&&(r=sl(r)),null===r?n=1:Array.isArray(r)&&(n=4===r.length?r[3]:1),0===n&&(e=cl(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}},{key:"createPath_",value:function(t){var e=this.points_,r=this.radius_;if(e===1/0)t.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,u=a%2==0?r:n;t.lineTo(u*Math.cos(s),u*Math.sin(s))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=nf,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wf(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vc);const Af=Ef;function Pf(t){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(t)}function Cf(t){var e=function(t,e){if("object"!=Pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pf(e)?e:String(e)}function jf(t,e,r){return e=Tf(e),function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mf()?Reflect.construct(e,r||[],Tf(t).constructor):e.apply(t,r))}function Mf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mf=function(){return!!t})()}function Tf(t){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tf(t)}function Rf(t,e){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rf(t,e)}var If=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jf(this,e,[{points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rf(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=this.getScale(),r=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cf(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Af);const Lf=If;function Ff(t){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(t)}function Df(t){var e=function(t,e){if("object"!=Ff(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ff(e)?e:String(e)}var Bf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null}var e,r;return e=t,(r=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(t){this.color_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Df(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Nf=Bf;function zf(t){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(t)}function Gf(t){var e=function(t,e){if("object"!=zf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zf(e)?e:String(e)}var Uf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}var e,r;return e=t,(r=[{key:"clone",value:function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(t){this.color_=t}},{key:"setLineCap",value:function(t){this.lineCap_=t}},{key:"setLineDash",value:function(t){this.lineDash_=t}},{key:"setLineDashOffset",value:function(t){this.lineDashOffset_=t}},{key:"setLineJoin",value:function(t){this.lineJoin_=t}},{key:"setMiterLimit",value:function(t){this.miterLimit_=t}},{key:"setWidth",value:function(t){this.width_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gf(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const qf=Uf;function Wf(t){return Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(t)}function Vf(t){var e=function(t,e){if("object"!=Wf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Wf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wf(e)?e:String(e)}var Zf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.geometry_=null,this.geometryFunction_=Kf,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}var e,r;return e=t,r=[{key:"clone",value:function(){var e,r,n=this.getGeometry();return n&&"object"===Wf(n)&&(n=n.clone()),new t({geometry:null!==(e=n)&&void 0!==e?e:void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:null!==(r=this.getRenderer())&&void 0!==r?r:void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(t){this.renderer_=t}},{key:"setHitDetectionRenderer",value:function(t){this.hitDetectionRenderer_=t}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(t){this.text_=t}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Kf,this.geometry_=t}},{key:"setZIndex",value:function(t){this.zIndex_=t}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vf(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Yf=null;function Xf(t,e){if(!Yf){var r=new Nf({color:"rgba(255,255,255,0.4)"}),n=new qf({color:"#3399CC",width:1.25});Yf=[new Zf({image:new Lf({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return Yf}function Hf(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t.Polygon=[new Zf({fill:new Nf({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Zf({stroke:new qf({color:e,width:5})}),new Zf({stroke:new qf({color:r,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Zf({image:new Lf({radius:6,fill:new Nf({color:r}),stroke:new qf({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Kf(t){return t.getGeometry()}const Jf=Zf;function $f(t){return $f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(t)}function Qf(t){var e=function(t,e){if("object"!=$f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$f(e)?e:String(e)}function th(t,e,r){return e+":"+t+":"+(r?tl(r):"null")}var eh=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var e,r;return e=t,(r=[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}},{key:"get",value:function(t,e,r){var n=th(t,e,r);return n in this.cache_?this.cache_[n]:null}},{key:"set",value:function(t,e,r,n){var i=th(t,e,r);this.cache_[i]=n,++this.cacheSize_}},{key:"setSize",value:function(t){this.maxCacheSize_=t,this.expire()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qf(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function rh(t){return rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(t)}function nh(t){var e=function(t,e){if("object"!=rh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rh(e)?e:String(e)}function ih(t,e,r){return e=ah(e),function(t,e){if(e&&("object"===rh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oh()?Reflect.construct(e,r||[],ah(t).constructor):e.apply(t,r))}function oh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oh=function(){return!!t})()}function ah(t){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ah(t)}function sh(t,e){return sh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sh(t,e)}var uh=null,lh=function(t){function e(t,r,n,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=ih(this,e)).hitDetectionImage_=null,a.image_=t,a.crossOrigin_=n,a.canvas_={},a.color_=o,a.imageState_=void 0===i?0:i,a.size_=t&&t.width&&t.height?[t.width,t.height]:null,a.src_=r,a.tainted_,a}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sh(t,e)}(e,t),r=e,n=[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&2===this.imageState_){uh||(uh=cl(1,1,void 0,{willReadFrequently:!0})),uh.drawImage(this.image_,0,0);try{uh.getImageData(0,0,1,1),this.tainted_=!1}catch(t){uh=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(Qe)}},{key:"handleImageError_",value:function(){this.imageState_=3,this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=2,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],r=cl(t,e);r.fillRect(0,0,t,e),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){var t,e,r=this;if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(t=this.image_,e=this.src_,e&&(t.src=e),t.src&&fa?new Promise((function(e,r){return t.decode().then((function(){return e(t)})).catch((function(n){return t.complete&&t.width?e(t):r(n)}))})):function(t,e){return new Promise((function(e,r){function n(){o(),e(t)}function i(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",n),t.removeEventListener("error",i)}t.addEventListener("load",n),t.addEventListener("error",i)}))}(t)).then((function(t){r.image_=t,r.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&2===this.imageState_){var e=this.image_,r=document.createElement("canvas");r.width=Math.ceil(e.width*t),r.height=Math.ceil(e.height*t);var n=r.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=tl(this.color_),n.fillRect(0,0,r.width/t,r.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=r}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nh(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($e);function ch(t){return ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(t)}function fh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hh(t){var e=function(t,e){if("object"!=ch(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ch(e)?e:String(e)}function ph(t,e,r){return e=gh(e),dh(t,yh()?Reflect.construct(e,r||[],gh(t).constructor):e.apply(t,r))}function dh(t,e){if(e&&("object"===ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function yh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yh=function(){return!!t})()}function vh(){return vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gh(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},vh.apply(this,arguments)}function gh(t){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gh(t)}function mh(t,e){return mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mh(t,e)}function bh(t,e,r,n){return void 0!==r&&void 0!==n?[r/t,n/e]:void 0!==r?r/t:void 0!==n?n/e:1}var _h=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,o=void 0!==t.scale?t.scale:1,a=void 0!==t.rotateWithView&&t.rotateWithView;(r=ph(this,e,[{opacity:n,rotation:i,scale:o,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:a,declutterMode:t.declutterMode}])).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",r.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",r.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",r.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var s,u,l=void 0!==t.img?t.img:null,c=t.src;if(qr(!(void 0!==c&&l),"`image` and `src` cannot be provided at the same time"),void 0!==c&&0!==c.length||!l||(c=l.src||_r(l)),qr(void 0!==c&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),qr(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?s=0:void 0!==l&&(s=l instanceof HTMLImageElement?l.complete?l.src?2:0:1:2),r.color_=void 0!==t.color?sl(t.color):null,r.iconImage_=function(t,e,r,n,i){var o=void 0===e?void 0:eh.get(e,r,i);return o||(o=new lh(t,t instanceof HTMLImageElement?t.src||void 0:e,r,n,i),eh.set(e,r,i,o)),o}(l,c,r.crossOrigin_,s,r.color_),r.offset_=void 0!==t.offset?t.offset:[0,0],r.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",r.origin_=null,r.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){var f,h;if(t.size){var p=function(t){if(Array.isArray(t))return t}(u=t.size)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(u)||function(t,e){if(t){if("string"==typeof t)return fh(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fh(t,2):void 0}}(u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();f=p[0],h=p[1]}else{var d=r.getImage(1);if(d.width&&d.height)f=d.width,h=d.height;else if(d instanceof HTMLImageElement)return r.initialOptions_=t,r.listenImageChange((function e(){if(r.unlistenImageChange(e),r.initialOptions_){var n=r.iconImage_.getSize();r.setScale(bh(n[0],n[1],t.width,t.height))}})),dh(r)}void 0!==f&&r.setScale(bh(f,h,t.width,t.height))}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mh(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t,r,n;return this.initialOptions_?(r=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:r,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var r=this.getDisplacement(),n=this.getScaleArray();return[t[0]-r[0]/n[0],t[1]+r[1]/n[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),r=this.iconImage_.getSize();if(!e||!r)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=r[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=r[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[0]*t[0]:void 0}},{key:"getHeight",value:function(){var t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:2==this.iconImage_.getImageState()?this.iconImage_.getSize()[1]*t[1]:void 0}},{key:"setScale",value:function(t){delete this.initialOptions_,vh(gh(e.prototype),"setScale",this).call(this,t)}},{key:"listenImageChange",value:function(t){this.iconImage_.addEventListener(Qe,t)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(t){this.iconImage_.removeEventListener(Qe,t)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hh(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Vc);const wh=_h;function xh(t){return xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(t)}function Sh(t){var e=function(t,e){if("object"!=xh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xh(e)?e:String(e)}var kh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Sc(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Nf({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}var e,r;return e=t,r=[{key:"clone",value:function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRepeat",value:function(t){this.repeat_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=Sc(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sh(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Oh=kh;var Eh;function Ah(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ah=function(){return!!t})()}function Ph(t,e){return Ph=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ph(t,e)}function Ch(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||Lh(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jh(t){return jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(t)}function Mh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bh(n.key),n)}}function Th(t,e,r){return e&&Mh(t.prototype,e),r&&Mh(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ih(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Lh(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Lh(t,e){if(t){if("string"==typeof t)return Fh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fh(t,e):void 0}}function Fh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dh(t,e,r){return(e=Bh(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bh(t){var e=function(t,e){if("object"!=jh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jh(e)?e:String(e)}var Nh=0,zh=0,Gh=1<<Nh++,Uh=1<<Nh++,qh=1<<Nh++,Wh=1<<Nh++,Vh=1<<Nh++,Zh=Math.pow(2,5)-1,Yh=Dh(Dh(Dh(Dh(Dh({},Gh,"boolean"),Uh,"number"),qh,"string"),Wh,"color"),Vh,"number[]"),Xh=Object.keys(Yh).map(Number).sort(Re);function Hh(t){var e,r,n=[],i=Ih(Xh);try{for(i.s();!(e=i.n()).done;){var o=e.value;(t&(r=o))===r&&n.push(Yh[o])}}catch(t){i.e(t)}finally{i.f()}return 0===n.length?"untyped":n.length<3?n.join(" or "):n.slice(0,-1).join(", ")+", or "+n[n.length-1]}function Kh(t,e){return!!(t&e)}function Jh(t,e){return t===e}var $h=Th((function t(e,r){Rh(this,t),this.type=e,this.value=r})),Qh=Th((function t(e,r){Rh(this,t),this.type=e,this.operator=r;for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];this.args=i}));function tp(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function ep(t,e,r){switch(jh(t)){case"boolean":return new $h(Gh,t);case"number":return new $h(Uh,t);case"string":var n=qh;return function(t){try{return al(t),!0}catch(t){return!1}}(t)&&(n|=Wh),Jh(n&r,zh)||(n&=r),new $h(n,t)}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"==typeof t[0])return function(t,e,r){var n=t[0],i=np[n];if(!i)throw new Error("Unknown operator: ".concat(n));return i(t,e,r)}(t,e,r);var i,o=Ih(t);try{for(o.s();!(i=o.n()).done;)if("number"!=typeof i.value)throw new Error("Expected an array of numbers")}catch(t){o.e(t)}finally{o.f()}var a=Vh;return 3!==t.length&&4!==t.length||(a|=Wh),r&&(a&=r),new $h(a,t)}var rp={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},np=(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Eh={},rp.Get,lp((function(t){var e=Ch(t,2),r=(e[0],e[1]);return void 0!==r?function(t){switch(t){case"string":return qh;case"color":return Wh;case"number":return Uh;case"boolean":return Gh;case"number[]":return Vh;default:throw new Error("Unrecognized type hint: ".concat(t))}}(r.value):Zh}),op(1,2),(function(t,e){var r=ep(t[1],e);if(!(r instanceof $h))throw new Error("Expected a literal argument for get operation");if("string"!=typeof r.value)throw new Error("Expected a string argument for get operation");return e.properties.add(r.value),3===t.length?[r,ep(t[2],e)]:[r]}))),rp.Var,lp((function(t){return Ch(t,1)[0].type}),op(1,1),(function(t,e,r,n){var i=t[1];if("string"!=typeof i)throw new Error("Expected a string argument for var operation");if(e.variables.add(i),!("variables"in e.style)||void 0===e.style.variables[i])return[new $h(Zh,i)];var o=ep(e.style.variables[i],e);if(o.value=i,n&&!Kh(n,o.type))throw new Error("The variable ".concat(i," has type ").concat(Hh(o.type)," but the following type was expected: ").concat(Hh(n)));return[o]}))),rp.Id,lp(Uh|qh,ip,(function(t,e){e.featureId=!0}))),rp.Concat,lp(qh,op(2,1/0),ap(Zh))),rp.GeometryType,lp(qh,ip)),rp.Resolution,lp(Uh,ip)),rp.Zoom,lp(Uh,ip)),rp.Time,lp(Uh,ip)),rp.Any,lp(Gh,op(2,1/0),ap(Gh))),rp.All,lp(Gh,op(2,1/0),ap(Gh))),Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Eh,rp.Not,lp(Gh,op(1,1),ap(Gh))),rp.Equal,lp(Gh,op(2,2),ap(Zh),sp)),rp.NotEqual,lp(Gh,op(2,2),ap(Zh),sp)),rp.GreaterThan,lp(Gh,op(2,2),ap(Zh),sp)),rp.GreaterThanOrEqualTo,lp(Gh,op(2,2),ap(Zh),sp)),rp.LessThan,lp(Gh,op(2,2),ap(Zh),sp)),rp.LessThanOrEqualTo,lp(Gh,op(2,2),ap(Zh),sp)),rp.Multiply,lp((function(t){for(var e=Uh|Wh,r=0;r<t.length;r++)e&=t[r].type;return e}),op(2,1/0),ap(Uh|Wh),sp)),rp.Divide,lp(Uh,op(2,2),ap(Uh))),rp.Add,lp(Uh,op(2,1/0),ap(Uh))),Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Eh,rp.Subtract,lp(Uh,op(2,2),ap(Uh))),rp.Clamp,lp(Uh,op(3,3),ap(Uh))),rp.Mod,lp(Uh,op(2,2),ap(Uh))),rp.Pow,lp(Uh,op(2,2),ap(Uh))),rp.Abs,lp(Uh,op(1,1),ap(Uh))),rp.Floor,lp(Uh,op(1,1),ap(Uh))),rp.Ceil,lp(Uh,op(1,1),ap(Uh))),rp.Round,lp(Uh,op(1,1),ap(Uh))),rp.Sin,lp(Uh,op(1,1),ap(Uh))),rp.Cos,lp(Uh,op(1,1),ap(Uh))),Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Dh(Eh,rp.Atan,lp(Uh,op(1,2),ap(Uh))),rp.Sqrt,lp(Uh,op(1,1),ap(Uh))),rp.Match,lp((function(t){for(var e=Zh,r=2;r<t.length;r+=2)e&=t[r].type;return e&t[t.length-1].type}),op(4,1/0),up,(function(t,e,r,n){for(var i=t.length-1,o=ep(t[1],e).type,a=ep(t[t.length-1],e),s=void 0!==n?n&a.type:a.type,u=new Array(i-2),l=0;l<i-2;l+=2){var c=ep(t[l+2],e),f=ep(t[l+3],e);o&=c.type,s&=f.type,u[l]=c,u[l+1]=f}var h=qh|Uh|Gh;if(!Kh(h,o))throw new Error("Expected an input of type ".concat(Hh(h)," for the interpolate operation")+", got ".concat(Hh(o)," instead"));if(Jh(s,zh))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(var p=0;p<i-2;p+=2){var d=ep(t[p+2],e,o),y=ep(t[p+3],e,s);u[p]=d,u[p+1]=y}return[ep(t[1],e,o)].concat(u,[ep(t[t.length-1],e,s)])}))),rp.Between,lp(Gh,op(3,3),ap(Uh))),rp.Interpolate,lp((function(t){for(var e=Wh|Uh,r=3;r<t.length;r+=2)e&=t[r].type;return e}),op(6,1/0),up,(function(t,e,r,n){var i,o=t[1];switch(o[0]){case"linear":i=1;break;case"exponential":if("number"!=typeof(i=o[1]))throw new Error("Expected a number base for exponential interpolation"+", got ".concat(JSON.stringify(i)," instead"));break;default:i=null}if(!i)throw new Error("Invalid interpolation type: ".concat(JSON.stringify(o)));i=ep(i,e);var a=ep(t[2],e);if(!Kh(Uh,a.type))throw new Error("Expected an input of type number for the interpolate operation"+", got ".concat(Hh(a.type)," instead"));a=ep(t[2],e,Uh);for(var s=new Array(t.length-3),u=0;u<s.length;u+=2){var l=ep(t[u+3],e);if(!Kh(Uh,l.type))throw new Error("Expected all stop input values in the interpolate operation to be of type number"+", got ".concat(Hh(l.type)," at position ").concat(u+2," instead"));var c=ep(t[u+4],e);if(!Kh(Uh|Wh,c.type))throw new Error("Expected all stop output values in the interpolate operation to be a number or color"+", got ".concat(Hh(c.type)," at position ").concat(u+3," instead"));l=ep(t[u+3],e,Uh),c=ep(t[u+4],e,Uh|Wh),s[u]=l,s[u+1]=c}return[i,a].concat(s)}))),rp.Case,lp((function(t){for(var e=Zh,r=1;r<t.length;r+=2)e&=t[r].type;return e&t[t.length-1].type}),op(3,1/0),(function(t,e){var r=t[0],n=t.length-1;if(n%2==0)throw new Error("An odd amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(n)," instead"))}),(function(t,e,r,n){for(var i=ep(t[t.length-1],e),o=void 0!==n?n&i.type:i.type,a=new Array(t.length-1),s=0;s<a.length-1;s+=2){var u=ep(t[s+1],e),l=ep(t[s+2],e);if(!Kh(Gh,u.type))throw new Error("Expected all conditions in the case operation to be of type boolean"+", got ".concat(Hh(u.type)," at position ").concat(s," instead"));o&=l.type,a[s]=u,a[s+1]=l}if(Jh(o,zh))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(var c=0;c<a.length-1;c+=2)a[c+1]=ep(t[c+2],e,o);return a[a.length-1]=ep(t[t.length-1],e,o),a}))),rp.In,lp(Gh,op(2,2),(function(t,e){var r=t[2];if(!Array.isArray(r))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof r[0]){if("literal"!==r[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(r[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');r=r[1]}for(var n=qh|Uh,i=new Array(r.length),o=0;o<i.length;o++){var a=ep(r[o],e);n&=a.type,i[o]=a}if(Jh(n,zh))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[ep(t[1],e,n)].concat(i)}))),rp.Number,lp(Uh,op(1,1/0),ap(Zh))),rp.String,lp(qh,op(1,1/0),ap(Zh))),rp.Array,lp((function(t){return 3===t.length||4===t.length?Vh|Wh:Vh}),op(1,1/0),ap(Uh))),Dh(Dh(Dh(Eh,rp.Color,lp(Wh,op(3,4),ap(Uh))),rp.Band,lp(Uh,op(1,3),ap(Uh))),rp.Palette,lp(Wh,op(2,2),(function(t,e){var r=ep(t[1],e,Uh);if(r.type!==Uh)throw new Error("The first argument of palette must be an number, got ".concat(Hh(r.type)," instead"));var n=t[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=new Array(n.length),o=0;o<i.length;o++){var a=ep(n[o],e,Wh);if(!(a instanceof $h))throw new Error("The palette color at index ".concat(o," must be a literal value"));if(!Kh(a.type,Wh))throw new Error("The palette color at index ".concat(o," should be of type color, got ").concat(Hh(a.type)," instead"));i[o]=a}return[r].concat(i)}))));function ip(t,e){var r=t[0];if(1!==t.length)throw new Error("Expected no arguments for ".concat(r," operation"));return[]}function op(t,e){return function(r,n){var i=r[0],o=r.length-1;if(t===e){if(o!==t){var a=1===t?"":"s";throw new Error("Expected ".concat(t," argument").concat(a," for ").concat(i,", got ").concat(o))}}else if(o<t||o>e){var s=e===1/0?"".concat(t," or more"):"".concat(t," to ").concat(e);throw new Error("Expected ".concat(s," arguments for ").concat(i,", got ").concat(o))}}}function ap(t){return function(e,r){for(var n=e[0],i=e.length-1,o=new Array(i),a=0;a<i;++a){var s=ep(e[a+1],r);if(!Kh(t,s.type)){var u=Hh(t),l=Hh(s.type);throw new Error("Unexpected type for argument ".concat(a," of ").concat(n," operation")+", got ".concat(u," but expected ").concat(l))}s.type&=t,o[a]=s}return o}}function sp(t,e,r){for(var n=t[0],i=t.length-1,o=Zh,a=0;a<r.length;++a)o&=r[a].type;if(o===zh)throw new Error("No common type could be found for arguments of ".concat(n," operation"));for(var s=new Array(i),u=0;u<i;++u)s[u]=ep(t[u+1],e,o);return s}function up(t,e){var r=t[0],n=t.length-1;if(n%2==1)throw new Error("An even amount of arguments was expected for operation ".concat(r,", got ").concat(JSON.stringify(n)," instead"))}function lp(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return function(e,n,i){for(var o=e[0],a=[],s=0;s<r.length;s++)a=r[s](e,n,a,i)||a;var u,l="function"==typeof t?t(a):t;if(void 0!==i){if(!Kh(l,i))throw new Error("The following expression was expected to return ".concat(Hh(i),", but returns ").concat(Hh(l)," instead: ").concat(JSON.stringify(e)));l&=i}if(l===zh)throw new Error("No matching type was found for the following expression: ".concat(JSON.stringify(e)));return function(t,e,r){if(Ah())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&Ph(i,r.prototype),i}(Qh,[l,o].concat(function(t){if(Array.isArray(t))return Fh(t)}(u=a)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(u)||Lh(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}function cp(t){return cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(t)}function fp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hp(t,e,r){var n=ep(t,r);if(!Kh(e,n.type)){var i=Hh(e),o=Hh(n.type);throw new Error("Expected expression to be of type ".concat(i,", got ").concat(o))}return pp(n,r)}function pp(t,e){if(t instanceof $h){if(t.type===Wh&&"string"==typeof t.value){var r=al(t.value);return function(){return r}}return function(){return t.value}}var n=t.operator;switch(n){case rp.Number:case rp.String:return function(t,e){for(var r=t.operator,n=t.args.length,i=new Array(n),o=0;o<n;++o)i[o]=pp(t.args[o],e);switch(r){case rp.Number:case rp.String:return function(t){for(var e=0;e<n;++e){var o=i[e](t);if(cp(o)===r)return o}throw new Error("Expected one of the values to be a ".concat(r))};default:throw new Error("Unsupported assertion operator ".concat(r))}}(t,e);case rp.Get:case rp.Var:return function(t,e){var r=t.args[0].value;switch(t.operator){case rp.Get:return function(t){return t.properties[r]};case rp.Var:return function(t){return t.variables[r]};default:throw new Error("Unsupported accessor operator ".concat(t.operator))}}(t);case rp.Id:return function(t){return t.featureId};case rp.Concat:var i=t.args.map((function(t){return pp(t,e)}));return function(t){var e,r;return(e="").concat.apply(e,function(t){if(Array.isArray(t))return fp(t)}(r=i.map((function(e){return e(t).toString()})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return fp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fp(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())};case rp.Resolution:return function(t){return t.resolution};case rp.Any:case rp.All:case rp.Not:return function(t,e){for(var r=t.operator,n=t.args.length,i=new Array(n),o=0;o<n;++o)i[o]=pp(t.args[o],e);switch(r){case rp.Any:return function(t){for(var e=0;e<n;++e)if(i[e](t))return!0;return!1};case rp.All:return function(t){for(var e=0;e<n;++e)if(!i[e](t))return!1;return!0};case rp.Not:return function(t){return!i[0](t)};default:throw new Error("Unsupported logical operator ".concat(r))}}(t,e);case rp.Equal:case rp.NotEqual:case rp.LessThan:case rp.LessThanOrEqualTo:case rp.GreaterThan:case rp.GreaterThanOrEqualTo:return function(t,e){var r=t.operator,n=pp(t.args[0],e),i=pp(t.args[1],e);switch(r){case rp.Equal:return function(t){return n(t)===i(t)};case rp.NotEqual:return function(t){return n(t)!==i(t)};case rp.LessThan:return function(t){return n(t)<i(t)};case rp.LessThanOrEqualTo:return function(t){return n(t)<=i(t)};case rp.GreaterThan:return function(t){return n(t)>i(t)};case rp.GreaterThanOrEqualTo:return function(t){return n(t)>=i(t)};default:throw new Error("Unsupported comparison operator ".concat(r))}}(t,e);case rp.Multiply:case rp.Divide:case rp.Add:case rp.Subtract:case rp.Clamp:case rp.Mod:case rp.Pow:case rp.Abs:case rp.Floor:case rp.Ceil:case rp.Round:case rp.Sin:case rp.Cos:case rp.Atan:case rp.Sqrt:return function(t,e){for(var r=t.operator,n=t.args.length,i=new Array(n),o=0;o<n;++o)i[o]=pp(t.args[o],e);switch(r){case rp.Multiply:return function(t){for(var e=1,r=0;r<n;++r)e*=i[r](t);return e};case rp.Divide:return function(t){return i[0](t)/i[1](t)};case rp.Add:return function(t){for(var e=0,r=0;r<n;++r)e+=i[r](t);return e};case rp.Subtract:return function(t){return i[0](t)-i[1](t)};case rp.Clamp:return function(t){var e=i[0](t),r=i[1](t);if(e<r)return r;var n=i[2](t);return e>n?n:e};case rp.Mod:return function(t){return i[0](t)%i[1](t)};case rp.Pow:return function(t){return Math.pow(i[0](t),i[1](t))};case rp.Abs:return function(t){return Math.abs(i[0](t))};case rp.Floor:return function(t){return Math.floor(i[0](t))};case rp.Ceil:return function(t){return Math.ceil(i[0](t))};case rp.Round:return function(t){return Math.round(i[0](t))};case rp.Sin:return function(t){return Math.sin(i[0](t))};case rp.Cos:return function(t){return Math.cos(i[0](t))};case rp.Atan:return 2===n?function(t){return Math.atan2(i[0](t),i[1](t))}:function(t){return Math.atan(i[0](t))};case rp.Sqrt:return function(t){return Math.sqrt(i[0](t))};default:throw new Error("Unsupported numeric operator ".concat(r))}}(t,e);case rp.Match:return function(t,e){for(var r=t.args.length,n=new Array(r),i=0;i<r;++i)n[i]=pp(t.args[i],e);return function(t){for(var e=n[0](t),i=1;i<r;i+=2)if(e===n[i](t))return n[i+1](t);return n[r-1](t)}}(t,e);case rp.Interpolate:return function(t,e){for(var r=t.args.length,n=new Array(r),i=0;i<r;++i)n[i]=pp(t.args[i],e);return function(t){for(var e,i,o=n[0](t),a=n[1](t),s=2;s<r;s+=2){var u=n[s](t),l=n[s+1](t),c=Array.isArray(l);if(c&&(l=il(l)),u>=a)return 2===s?l:c?yp(o,a,e,i,u,l):dp(o,a,e,i,u,l);e=u,i=l}return i}}(t,e);default:throw new Error("Unsupported operator ".concat(n))}}function dp(t,e,r,n,i,o){var a=i-r;if(0===a)return n;var s=e-r;return n+(1===t?s/a:(Math.pow(t,s)-1)/(Math.pow(t,a)-1))*(o-n)}function yp(t,e,r,n,i,o){if(0==i-r)return n;var a,s,u=ol(n),l=ol(o),c=l[2]-u[2];return c>180?c-=360:c<-180&&(c+=360),ul((a=[dp(t,e,r,u[0],i,l[0]),dp(t,e,r,u[1],i,l[1]),u[2]+dp(t,e,r,0,i,c),dp(t,e,r,n[3],i,o[3])],(s=Vu.rgb(Xu.xyz(a)))[3]=a[3],s))}function vp(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return gp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gp(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function gp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mp(t){return!0}function bp(t){for(var e=tp(),r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=_p(t[i],e);var o={variables:{},properties:{},resolution:NaN,featureId:null},a=new Array(r);return function(t,i){if(o.properties=t.getPropertiesInternal(),o.resolution=i,e.featureId){var s=t.getId();o.featureId=void 0!==s?s:null}for(var u=0,l=0;l<r;++l){var c=n[l](o);c&&(a[u]=c,u+=1)}return a.length=u,a}}function _p(t,e){var r=wp(t,"",e),n=xp(t,"",e),i=function(t,e){var r="text-",n=kp(t,r+"value",e);if(!n)return null;var i=wp(t,r,e),o=wp(t,r+"background-",e),a=xp(t,r,e),s=xp(t,r+"background-",e),u=kp(t,r+"font",e),l=Sp(t,r+"max-angle",e),c=Sp(t,r+"offset-x",e),f=Sp(t,r+"offset-y",e),h=Op(t,r+"overflow",e),p=kp(t,r+"placement",e),d=Sp(t,r+"repeat",e),y=Cp(t,r+"scale",e),v=Op(t,r+"rotate-with-view",e),g=Sp(t,r+"rotation",e),m=kp(t,r+"align",e),b=kp(t,r+"justify",e),_=kp(t,r+"baseline",e),w=Ap(t,r+"padding",e),x=new Oh({});return function(t){if(x.setText(n(t)),i&&x.setFill(i(t)),o&&x.setBackgroundFill(o(t)),a&&x.setStroke(a(t)),s&&x.setBackgroundStroke(s(t)),u&&x.setFont(u(t)),l&&x.setMaxAngle(l(t)),c&&x.setOffsetX(c(t)),f&&x.setOffsetY(f(t)),h&&x.setOverflow(h(t)),p){var e=p(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");x.setPlacement(e)}if(d&&x.setRepeat(d(t)),y&&x.setScale(y(t)),v&&x.setRotateWithView(v(t)),g&&x.setRotation(g(t)),m){var r=m(t);if("left"!==r&&"center"!==r&&"right"!==r&&"end"!==r&&"start"!==r)throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(r)}if(b){var S=b(t);if("left"!==S&&"right"!==S&&"center"!==S)throw new Error("Expected left, right, or center for text-justify");x.setJustify(S)}if(_){var k=_(t);if("bottom"!==k&&"top"!==k&&"middle"!==k&&"alphabetic"!==k&&"hanging"!==k)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(k)}return w&&x.setPadding(w(t)),x}}(t,e),o=function(t,e){return"icon-src"in t?function(t,e){var r="icon-",n=r+"src",i=Lp(t[n],n),o=Pp(t,r+"anchor",e),a=Cp(t,r+"scale",e),s=Sp(t,r+"opacity",e),u=Pp(t,r+"displacement",e),l=Sp(t,r+"rotation",e),c=Op(t,r+"rotate-with-view",e),f=Mp(t,r+"anchor-origin"),h=Tp(t,r+"anchor-x-units"),p=Tp(t,r+"anchor-y-units"),d=function(t,e){var r=t[e];if(void 0!==r)return Dp(r,e)}(t,r+"color"),y=function(t,e){var r=t[e];if(void 0!==r){if("string"!=typeof r)throw new Error("Expected a string for ".concat(e));return r}}(t,r+"cross-origin"),v=function(t,e){var r=t[e];if(void 0!==r)return Ip(r,e)}(t,r+"offset"),g=Mp(t,r+"offset-origin"),m=jp(t,r+"width"),b=jp(t,r+"height"),_=function(t,e){var r=t[e];if(void 0!==r){if("number"==typeof r)return Sc(r);if(!Array.isArray(r))throw new Error("Expected a number or size array for ".concat(e));if(2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])throw new Error("Expected a number or size array for ".concat(e));return r}}(t,r+"size"),w=Rp(t,r+"declutter"),x=new wh({src:i,anchorOrigin:f,anchorXUnits:h,anchorYUnits:p,color:d,crossOrigin:y,offset:v,offsetOrigin:g,height:b,width:m,size:_,declutterMode:w});return function(t){return s&&x.setOpacity(s(t)),u&&x.setDisplacement(u(t)),l&&x.setRotation(l(t)),c&&x.setRotateWithView(c(t)),a&&x.setScale(a(t)),o&&x.setAnchor(o(t)),x}}(t,e):"shape-points"in t?function(t,e){var r="shape-",n=r+"points",i=Fp(t[n],n),o=wp(t,r,e),a=xp(t,r,e),s=Cp(t,r+"scale",e),u=Pp(t,r+"displacement",e),l=Sp(t,r+"rotation",e),c=Op(t,r+"rotate-with-view",e),f=jp(t,r+"radius"),h=jp(t,r+"radius1"),p=jp(t,r+"radius2"),d=jp(t,r+"angle"),y=Rp(t,r+"declutter-mode"),v=new Af({points:i,radius:f,radius1:h,radius2:p,angle:d,declutterMode:y});return function(t){return o&&v.setFill(o(t)),a&&v.setStroke(a(t)),u&&v.setDisplacement(u(t)),l&&v.setRotation(l(t)),c&&v.setRotateWithView(c(t)),s&&v.setScale(s(t)),v}}(t,e):"circle-radius"in t?function(t,e){var r="circle-",n=wp(t,r,e),i=xp(t,r,e),o=Sp(t,r+"radius",e),a=Cp(t,r+"scale",e),s=Pp(t,r+"displacement",e),u=Sp(t,r+"rotation",e),l=Op(t,r+"rotate-with-view",e),c=Rp(t,r+"declutter-mode"),f=new Lf({radius:5,declutterMode:c});return function(t){return o&&f.setRadius(o(t)),n&&f.setFill(n(t)),i&&f.setStroke(i(t)),s&&f.setDisplacement(s(t)),u&&f.setRotation(u(t)),l&&f.setRotateWithView(l(t)),a&&f.setScale(a(t)),f}}(t,e):null}(t,e),a=Sp(t,"z-index",e);if(!(r||n||i||o||We(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));var s=new Jf;return function(t){var e=!0;if(r){var u=r(t);u&&(e=!1),s.setFill(u)}if(n){var l=n(t);l&&(e=!1),s.setStroke(l)}if(i){var c=i(t);c&&(e=!1),s.setText(c)}if(o){var f=o(t);f&&(e=!1),s.setImage(f)}return a&&s.setZIndex(a(t)),e?null:s}}function wp(t,e,r){var n=Ep(t,e+"fill-color",r);if(!n)return null;var i=new Nf;return function(t){var e=n(t);return"none"===e?null:(i.setColor(e),i)}}function xp(t,e,r){var n=Sp(t,e+"stroke-width",r),i=Ep(t,e+"stroke-color",r);if(!n&&!i)return null;var o=kp(t,e+"stroke-line-cap",r),a=kp(t,e+"stroke-line-join",r),s=Ap(t,e+"stroke-line-dash",r),u=Sp(t,e+"stroke-line-dash-offset",r),l=Sp(t,e+"stroke-miter-limit",r),c=new qf;return function(t){if(i){var e=i(t);if("none"===e)return null;c.setColor(e)}if(n&&c.setWidth(n(t)),o){var r=o(t);if("butt"!==r&&"round"!==r&&"square"!==r)throw new Error("Expected butt, round, or square line cap");c.setLineCap(r)}if(a){var f=a(t);if("bevel"!==f&&"round"!==f&&"miter"!==f)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return s&&c.setLineDash(s(t)),u&&c.setLineDashOffset(u(t)),l&&c.setMiterLimit(l(t)),c}}function Sp(t,e,r){if(e in t){var n=hp(t[e],Uh,r);return function(t){return Fp(n(t),e)}}}function kp(t,e,r){if(!(e in t))return null;var n=hp(t[e],qh,r);return function(t){return Lp(n(t),e)}}function Op(t,e,r){if(!(e in t))return null;var n=hp(t[e],Gh,r);return function(t){var r=n(t);if("boolean"!=typeof r)throw new Error("Expected a boolean for ".concat(e));return r}}function Ep(t,e,r){if(!(e in t))return null;var n=hp(t[e],Wh|qh,r);return function(t){return Dp(n(t),e)}}function Ap(t,e,r){if(!(e in t))return null;var n=hp(t[e],Vh,r);return function(t){return Ip(n(t),e)}}function Pp(t,e,r){if(!(e in t))return null;var n=hp(t[e],Vh,r);return function(t){var r=Ip(n(t),e);if(2!==r.length)throw new Error("Expected two numbers for ".concat(e));return r}}function Cp(t,e,r){if(!(e in t))return null;var n=hp(t[e],Vh|Uh,r);return function(t){return function(t,e){if("number"==typeof t)return t;var r=Ip(t,e);if(2!==r.length)throw new Error("Expected an array of two numbers for ".concat(e));return r}(n(t),e)}}function jp(t,e){var r=t[e];if(void 0!==r){if("number"!=typeof r)throw new Error("Expected a number for ".concat(e));return r}}function Mp(t,e){var r=t[e];if(void 0!==r){if("bottom-left"!==r&&"bottom-right"!==r&&"top-left"!==r&&"top-right"!==r)throw new Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(e));return r}}function Tp(t,e){var r=t[e];if(void 0!==r){if("pixels"!==r&&"fraction"!==r)throw new Error("Expected pixels or fraction for ".concat(e));return r}}function Rp(t,e){var r=t[e];if(void 0!==r){if("string"!=typeof r)throw new Error("Expected a string for ".concat(e));if("declutter"!==r&&"obstacle"!==r&&"none"!==r)throw new Error("Expected declutter, obstacle, or none for ".concat(e));return r}}function Ip(t,e){if(!Array.isArray(t))throw new Error("Expected an array for ".concat(e));for(var r=t.length,n=0;n<r;++n)if("number"!=typeof t[n])throw new Error("Expected an array of numbers for ".concat(e));return t}function Lp(t,e){if("string"!=typeof t)throw new Error("Expected a string for ".concat(e));return t}function Fp(t,e){if("number"!=typeof t)throw new Error("Expected a number for ".concat(e));return t}function Dp(t,e){if("string"==typeof t)return t;var r=Ip(t,e),n=r.length;if(n<3||n>4)throw new Error("Expected a color with 3 or 4 values for ".concat(e));return r}function Bp(t){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(t)}function Np(t){var e=function(t,e){if("object"!=Bp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bp(e)?e:String(e)}function zp(t,e,r){return e=qp(e),function(t,e){if(e&&("object"===Bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gp()?Reflect.construct(e,r||[],qp(t).constructor):e.apply(t,r))}function Gp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gp=function(){return!!t})()}function Up(){return Up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qp(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Up.apply(this,arguments)}function qp(t){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qp(t)}function Wp(t,e){return Wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wp(t,e)}var Vp="renderOrder",Zp=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);return delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,(r=zp(this,e,[n])).declutter_=void 0!==t.declutter&&t.declutter,r.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(t.style),r.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,r.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wp(t,e)}(e,t),r=e,(n=[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(t){return Up(qp(e.prototype),"getFeatures",this).call(this,t)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(Vp)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(t){t.declutterTree||(t.declutterTree=new Gc(9)),this.getRenderer().renderDeclutter(t)}},{key:"setRenderOrder",value:function(t){this.set(Vp,t)}},{key:"setStyle",value:function(t){this.style_=function(t){if(void 0===t)return Xf;if(!t)return null;if("function"==typeof t)return t;if(t instanceof Jf)return t;if(!Array.isArray(t))return bp([t]);if(0===t.length)return[];var e=t.length,r=t[0];if(r instanceof Jf){for(var n=new Array(e),i=0;i<e;++i){var o=t[i];if(!(o instanceof Jf))throw new Error("Expected a list of style instances");n[i]=o}return n}if("style"in r){for(var a=new Array(e),s=0;s<e;++s){var u=t[s];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[s]=u}return function(t){var e=tp(),r=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i){var o=t[i],a="filter"in o?hp(o.filter,Gh,e):mp,s=void 0;if(Array.isArray(o.style)){var u=o.style.length;s=new Array(u);for(var l=0;l<u;++l)s[l]=_p(o.style[l],e)}else s=[_p(o.style,e)];n[i]={filter:a,styles:s}}return function(e){for(var i=[],o=!1,a=0;a<r;++a)if((0,n[a].filter)(e)&&(!t[a].else||!o)){o=!0;var s,u=vp(n[a].styles);try{for(u.s();!(s=u.n()).done;){var l=(0,s.value)(e);l&&i.push(l)}}catch(t){u.e(t)}finally{u.f()}}return i}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null};return function(t,i){if(n.properties=t.getPropertiesInternal(),n.resolution=i,e.featureId){var o=t.getId();n.featureId=void 0!==o?o:null}return r(n)}}(a)}return bp(t)}(t),this.styleFunction_=null===t?void 0:function(t){var e,r;return"function"==typeof t?e=t:(Array.isArray(t)?r=t:(qr("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),r=[t]),e=function(){return r}),e}(this.style_),this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Np(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(yu);const Yp=Zp;var Xp={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Hp=[Xp.FILL],Kp=[Xp.STROKE],Jp=[Xp.BEGIN_PATH],$p=[Xp.CLOSE_PATH];const Qp=Xp;function td(t){return td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(t)}function ed(t){var e=function(t,e){if("object"!=td(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=td(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==td(e)?e:String(e)}const rd=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"drawCustom",value:function(t,e,r,n){}},{key:"drawGeometry",value:function(t){}},{key:"setStyle",value:function(t){}},{key:"drawCircle",value:function(t,e){}},{key:"drawFeature",value:function(t,e){}},{key:"drawGeometryCollection",value:function(t,e){}},{key:"drawLineString",value:function(t,e){}},{key:"drawMultiLineString",value:function(t,e){}},{key:"drawMultiPoint",value:function(t,e){}},{key:"drawMultiPolygon",value:function(t,e){}},{key:"drawPoint",value:function(t,e){}},{key:"drawPolygon",value:function(t,e){}},{key:"drawText",value:function(t,e){}},{key:"setFillStrokeStyle",value:function(t,e){}},{key:"setImageStyle",value:function(t,e){}},{key:"setTextStyle",value:function(t,e){}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ed(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nd(t){return nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(t)}function id(t){var e=function(t,e){if("object"!=nd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nd(e)?e:String(e)}function od(t,e,r){return e=sd(e),function(t,e){if(e&&("object"===nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ad()?Reflect.construct(e,r||[],sd(t).constructor):e.apply(t,r))}function ad(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ad=function(){return!!t})()}function sd(t){return sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sd(t)}function ud(t,e){return ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ud(t,e)}var ld=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=od(this,e)).tolerance=t,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ud(t,e)}(e,t),r=e,n=[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)n[0]=t[a],n[1]=t[a+1],Tn(r,n)&&(i[o++]=n[0],i[o++]=n[1]);return o}},{key:"appendFlatLineCoordinates",value:function(t,e,r,n,i,o){var a=this.coordinates,s=a.length,u=this.getBufferedMaxExtent();o&&(e+=n);var l,c,f,h=t[e],p=t[e+1],d=this.tmpCoordinate_,y=!0;for(l=e+n;l<r;l+=n)d[0]=t[l],d[1]=t[l+1],(f=Ln(u,d))!==c?(y&&(a[s++]=h,a[s++]=p,y=!1),a[s++]=d[0],a[s++]=d[1]):f===En.INTERSECTING?(a[s++]=d[0],a[s++]=d[1],y=!1):y=!0,h=d[0],p=d[1],c=f;return(i&&y||l===e+n)&&(a[s++]=h,a[s++]=p),s}},{key:"drawCustomCoordinates_",value:function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatLineCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e}},{key:"drawCustom",value:function(t,e,r,n){this.beginGeometry(t,e);var i,o,a,s,u,l=t.getType(),c=t.getStride(),f=this.coordinates.length;switch(l){case"MultiPolygon":i=t.getOrientedFlatCoordinates(),s=[];var h=t.getEndss();u=0;for(var p=0,d=h.length;p<d;++p){var y=[];u=this.drawCustomCoordinates_(i,u,h[p],c,y),s.push(y)}this.instructions.push([Qp.CUSTOM,f,s,t,r,os]),this.hitDetectionInstructions.push([Qp.CUSTOM,f,s,t,n||r,os]);break;case"Polygon":case"MultiLineString":a=[],i="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(i,0,t.getEnds(),c,a),this.instructions.push([Qp.CUSTOM,f,a,t,r,is]),this.hitDetectionInstructions.push([Qp.CUSTOM,f,a,t,n||r,is]);break;case"LineString":case"Circle":i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,c,!1,!1),this.instructions.push([Qp.CUSTOM,f,o,t,r,ns]),this.hitDetectionInstructions.push([Qp.CUSTOM,f,o,t,n||r,ns]);break;case"MultiPoint":i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,c))>f&&(this.instructions.push([Qp.CUSTOM,f,o,t,r,ns]),this.hitDetectionInstructions.push([Qp.CUSTOM,f,o,t,n||r,ns]));break;case"Point":i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([Qp.CUSTOM,f,o,t,r]),this.hitDetectionInstructions.push([Qp.CUSTOM,f,o,t,n||r])}this.endGeometry(e)}},{key:"beginGeometry",value:function(t,e){this.beginGeometryInstruction1_=[Qp.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qp.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==Qp.END_GEOMETRY?o=t:n==Qp.BEGIN_GEOMETRY&&(r[2]=t,Le(this.hitDetectionInstructions,o,t),o=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=Zc(n||nf)}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=Zc(i||uf);var o=e.getLineCap();r.lineCap=void 0!==o?o:of;var a=e.getLineDash();r.lineDash=a?a.slice():af;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:sf;var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}},{key:"createFill",value:function(t){var e=t.fillStyle,r=[Qp.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(t){return[Qp.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)}},{key:"updateStrokeStyle",value:function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!De(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)}},{key:"endGeometry",value:function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Qp.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=jn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Cn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,id(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(rd);const cd=ld;function fd(t){return fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(t)}function hd(t){var e=function(t,e){if("object"!=fd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fd(e)?e:String(e)}function pd(t,e,r){return e=vd(e),function(t,e){if(e&&("object"===fd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dd()?Reflect.construct(e,r||[],vd(t).constructor):e.apply(t,r))}function dd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dd=function(){return!!t})()}function yd(){return yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vd(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},yd.apply(this,arguments)}function vd(t){return vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vd(t)}function gd(t,e){return gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gd(t,e)}var md=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=pd(this,e,[t,r,n,i])).hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterMode_=void 0,o.declutterImageWithText_=void 0,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gd(t,e)}(e,t),r=e,n=[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(r,n);this.instructions.push([Qp.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qp.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(r,n);this.instructions.push([Qp.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qp.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,yd(vd(e.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cd);const bd=md;function _d(t){return _d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(t)}function wd(t){var e=function(t,e){if("object"!=_d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_d(e)?e:String(e)}function xd(t,e,r){return e=Od(e),function(t,e){if(e&&("object"===_d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sd()?Reflect.construct(e,r||[],Od(t).constructor):e.apply(t,r))}function Sd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sd=function(){return!!t})()}function kd(){return kd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Od(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},kd.apply(this,arguments)}function Od(t){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Od(t)}function Ed(t,e){return Ed=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ed(t,e)}var Ad=function(t){function e(t,r,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xd(this,e,[t,r,n,i])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ed(t,e)}(e,t),r=e,n=[{key:"drawFlatCoordinates_",value:function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,r,n,!1,!1),a=[Qp.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}},{key:"drawLineString",value:function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Qp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,af,0],Jp);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Kp),this.endGeometry(e)}}},{key:"drawMultiLineString",value:function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Qp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,af,0],Jp);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push(Kp),this.endGeometry(e)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Kp),this.reverseHitDetectionInstructions(),this.state=null,kd(Od(e.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Kp),t.lastStroke=this.coordinates.length),t.lastStroke=0,kd(Od(e.prototype),"applyStroke",this).call(this,t),this.instructions.push(Jp)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cd);const Pd=Ad;function Cd(t){return Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(t)}function jd(t){var e=function(t,e){if("object"!=Cd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cd(e)?e:String(e)}function Md(t,e,r){return e=Id(e),function(t,e){if(e&&("object"===Cd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Td()?Reflect.construct(e,r||[],Id(t).constructor):e.apply(t,r))}function Td(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Td=function(){return!!t})()}function Rd(){return Rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Id(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Rd.apply(this,arguments)}function Id(t){return Id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Id(t)}function Ld(t,e){return Ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ld(t,e)}var Fd=function(t){function e(t,r,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Md(this,e,[t,r,n,i])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ld(t,e)}(e,t),r=e,n=[{key:"drawFlatCoordinatess_",value:function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(Jp),this.hitDetectionInstructions.push(Jp);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,l,n,!0,!a),h=[Qp.MOVE_TO_LINE_TO,c,f];this.instructions.push(h),this.hitDetectionInstructions.push(h),a&&(this.instructions.push($p),this.hitDetectionInstructions.push($p)),e=l}return o&&(this.instructions.push(Hp),this.hitDetectionInstructions.push(Hp)),a&&(this.instructions.push(Kp),this.hitDetectionInstructions.push(Kp)),e}},{key:"drawCircle",value:function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Qp.SET_FILL_STYLE,nf]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Qp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,af,0]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var u=[Qp.CIRCLE,s];this.instructions.push(Jp,u),this.hitDetectionInstructions.push(Jp,u),void 0!==r.fillStyle&&(this.instructions.push(Hp),this.hitDetectionInstructions.push(Hp)),void 0!==r.strokeStyle&&(this.instructions.push(Kp),this.hitDetectionInstructions.push(Kp)),this.endGeometry(e)}}},{key:"drawPolygon",value:function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Qp.SET_FILL_STYLE,nf]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Qp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,af,0]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}}},{key:"drawMultiPolygon",value:function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Qp.SET_FILL_STYLE,nf]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Qp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,af,0]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=ts(r[n],t);return Rd(Id(e.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jd(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cd);const Dd=Fd;function Bd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nd(t,e,r,n,i){for(var o=[],a=r,s=0,u=e.slice(r,2);s<t&&a+i<n;){var l=function(t){if(Array.isArray(t))return t}(w=u.slice(-2))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(w)||function(t,e){if(t){if("string"==typeof t)return Bd(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bd(t,2):void 0}}(w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=l[0],f=l[1],h=e[a+i],p=e[a+i+1],d=Math.sqrt((h-c)*(h-c)+(p-f)*(p-f));if((s+=d)>=t){var y=(t-s+d)/d,v=Hr(c,h,y),g=Hr(f,p,y);u.push(v,g),o.push(u),u=[v,g],s==t&&(a+=i),s=0}else if(s<t)u.push(e[a+i],e[a+i+1]),a+=i;else{var m=d-s,b=Hr(c,h,m/d),_=Hr(f,p,m/d);u.push(b,_),o.push(u),u=[b,_],s=0,a+=i}}var w;return s>0&&o.push(u),o}function zd(t,e,r,n,i){var o,a,s,u,l,c,f,h,p,d=r,y=r,v=0,g=0,m=r;for(o=r;o<n;o+=i){var b=e[o],_=e[o+1];void 0!==u&&(h=b-u,p=_-l,s=Math.sqrt(h*h+p*p),void 0!==c&&(g+=a,Math.acos((c*h+f*p)/(a*s))>t&&(g>v&&(v=g,d=m,y=o),g=0,m=o-i)),a=s,c=h,f=p),u=b,l=_}return(g+=s)>v?[m,o]:[d,y]}function Gd(t){return Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(t)}function Ud(t){var e=function(t,e){if("object"!=Gd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Gd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gd(e)?e:String(e)}function qd(t,e,r){return e=Zd(e),function(t,e){if(e&&("object"===Gd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wd()?Reflect.construct(e,r||[],Zd(t).constructor):e.apply(t,r))}function Wd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wd=function(){return!!t})()}function Vd(){return Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zd(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Vd.apply(this,arguments)}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zd(t)}function Yd(t,e){return Yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yd(t,e)}var Xd={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Hd=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=qd(this,e,[t,r,n,i])).labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.fillStates[nf]={fillStyle:nf},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yd(t,e)}(e,t),r=e,n=[{key:"finish",value:function(){var t=Vd(Zd(e.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o=this.coordinates,a=o.length,s=t.getType(),u=null,l=t.getStride();if("line"!==i.placement||"LineString"!=s&&"MultiLineString"!=s&&"Polygon"!=s&&"MultiPolygon"!=s){var c=i.overflow?null:[];switch(s){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),l=2;break;case"Polygon":u=t.getFlatInteriorPoint(),i.overflow||c.push(u[2]/this.resolution),l=3;break;case"MultiPolygon":var f=t.getFlatInteriorPoints();u=[];for(var h=0,p=f.length;h<p;h+=3)i.overflow||c.push(f[h+2]/this.resolution),u.push(f[h],f[h+1]);if(0===u.length)return;l=2}var d=this.appendFlatPointCoordinates(u,l);if(d===a)return;if(c&&(d-a)/2!=u.length/l){var y=a/2;c=c.filter((function(t,e){var r=o[2*(y+e)]===u[e*l]&&o[2*(y+e)+1]===u[e*l+1];return r||--y,r}))}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&this.updateFillStyle(this.state,this.createFill),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var v=i.padding;if(v!=ff&&(i.scale[0]<0||i.scale[1]<0)){var g=i.padding[0],m=i.padding[1],b=i.padding[2],_=i.padding[3];i.scale[0]<0&&(m=-m,_=-_),i.scale[1]<0&&(g=-g,b=-b),v=[g,m,b,_]}var w=this.pixelRatio;this.instructions.push([Qp.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,v==ff?ff:v.map((function(t){return t*w})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]);var x=1/w,S=this.state.fillStyle;i.backgroundFill&&(this.state.fillStyle=nf,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Qp.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,void 0,this.declutterImageWithText_,v,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?nf:this.fillKey_,this.textOffsetX_,this.textOffsetY_,c]),i.backgroundFill&&(this.state.fillStyle=S,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!ii(this.getBufferedMaxExtent(),t.getExtent()))return;var k;if(u=t.getFlatCoordinates(),"LineString"==s)k=[u.length];else if("MultiLineString"==s)k=t.getEnds();else if("Polygon"==s)k=t.getEnds().slice(0,1);else if("MultiPolygon"==s){var O=t.getEndss();k=[];for(var E=0,A=O.length;E<A;++E)k.push(O[E][0])}this.beginGeometry(t,e);for(var P=i.repeat,C=P?void 0:i.textAlign,j=0,M=0,T=k.length;M<T;++M)for(var R,I=0,L=(R=P?Nd(P*this.resolution,u,j,k[M],l):[u.slice(j,k[M])]).length;I<L;++I){var F=R[I],D=0,B=F.length;if(null==C){var N=zd(i.maxAngle,F,0,F.length,2);D=N[0],B=N[1]}for(var z=D;z<B;z+=l)o.push(F[z],F[z+1]);var G=o.length;j=k[M],this.drawChars_(a,G),a=G}this.endGeometry(e)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||lf,justify:e.justify,textBaseline:e.textBaseline||cf,scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}},{key:"drawChars_",value:function(t,e){var r=this.textStrokeState_,n=this.textState_,i=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,u=Xd[n.textBaseline],l=this.textOffsetY_*s,c=this.text_,f=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Qp.DRAW_CHARS,t,e,u,n.overflow,a,n.maxAngle,s,l,i,f*s,c,o,1]),this.hitDetectionInstructions.push([Qp.DRAW_CHARS,t,e,u,n.overflow,a?nf:a,n.maxAngle,s,l,i,f*s,c,o,1/s])}},{key:"setTextStyle",value:function(t,e){var r,n,i;if(t){var o=t.getFill();o?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=Zc(o.getColor()||nf)):(n=null,this.textFillState_=n);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),l=a.getWidth(),c=a.getMiterLimit();i.lineCap=a.getLineCap()||of,i.lineDash=s?s.slice():af,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||sf,i.lineWidth=void 0===l?1:l,i.miterLimit=void 0===c?10:c,i.strokeStyle=Zc(a.getColor()||uf)}else i=null,this.textStrokeState_=i;r=this.textState_;var f=t.getFont()||rf;yf(f);var h=t.getScaleArray();r.overflow=t.getOverflow(),r.font=f,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.repeat=t.getRepeat(),r.justify=t.getJustify(),r.textBaseline=t.getTextBaseline()||cf,r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||ff,r.scale=void 0===h?[1,1]:h;var p=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===v?0:v,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:_r(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+_r(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ud(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cd);function Kd(t){return Kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(t)}function Jd(t){var e=function(t,e){if("object"!=Kd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kd(e)?e:String(e)}var $d={Circle:Dd,Default:cd,Image:bd,LineString:Pd,Polygon:Dd,Text:Hd};const Qd=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}var e,r;return e=t,(r=[{key:"finish",value:function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t}},{key:"getBuilder",value:function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];return void 0===i&&(i=new(0,$d[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i),i}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jd(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ty(t,e,r,n,i,o,a,s,u,l,c,f){var h=t[e],p=t[e+1],d=0,y=0,v=0,g=0;function m(){d=h,y=p,h=t[e+=n],p=t[e+1],g+=v,v=Math.sqrt((h-d)*(h-d)+(p-y)*(p-y))}do{m()}while(e<r-n&&g+v<o);for(var b=0===v?0:(o-g)/v,_=Hr(d,h,b),w=Hr(y,p,b),x=e-n,S=g,k=o+s*u(l,i,c);e<r-n&&g+v<k;)m();var O,E=Hr(d,h,b=0===v?0:(k-g)/v),A=Hr(y,p,b);if(f){var P=[_,w,E,A];Sa(P,0,4,2,f,P,P),O=P[0]>P[2]}else O=_>E;var C,j=Math.PI,M=[],T=x+n===e;if(v=0,g=S,h=t[e=x],p=t[e+1],T){m(),C=Math.atan2(p-y,h-d),O&&(C+=C>0?-j:j);var R=(E+_)/2,I=(A+w)/2;return M[0]=[R,I,(k-o)/2,C,i],M}for(var L=0,F=(i=i.replace(/\n/g," ")).length;L<F;){m();var D=Math.atan2(p-y,h-d);if(O&&(D+=D>0?-j:j),void 0!==C){var B=D-C;if(B+=B>j?-2*j:B<-j?2*j:0,Math.abs(B)>a)return null}C=D;for(var N=L,z=0;L<F;++L){var G=s*u(l,i[O?F-L-1:L],c);if(e+n<r&&g+v<o+z+G/2)break;z+=G}if(L!==N){var U=O?i.substring(F-N,F-L):i.substring(N,L),q=Hr(d,h,b=0===v?0:(o+z/2-g)/v),W=Hr(y,p,b);M.push([q,W,z/2,D,U]),o+=z}}return M}function ey(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}function ry(t){return ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ry(t)}function ny(t){var e=function(t,e){if("object"!=ry(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ry(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ry(e)?e:String(e)}var iy=[1/0,1/0,-1/0,-1/0],oy=[],ay=[],sy=[],uy=[];function ly(t){return t[3].declutterBox}var cy=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function fy(t,e){return"start"===e?e=cy.test(t)?"right":"left":"end"===e&&(e=cy.test(t)?"left":"right"),Xd[e]}function hy(t,e,r){return r>0&&t.push("\n",""),t.push(e,""),t}var py=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.overlaps=n,this.pixelRatio=r,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}var e,r;return e=t,r=[{key:"createLabel",value:function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=[s.scale[0]*u,s.scale[1]*u],c=Array.isArray(t),f=s.justify?Xd[s.justify]:fy(Array.isArray(t)?t[0]:t,s.textAlign||lf),h=n&&o.lineWidth?o.lineWidth:0,p=c?t:t.split("\n").reduce(hy,[]),d=function(t,e){for(var r=[],n=[],i=[],o=0,a=0,s=0,u=0,l=0,c=e.length;l<=c;l+=2){var f=e[l];if("\n"!==f&&l!==c){var h=e[l+1]||t.font,p=mf(h,f);r.push(p),a+=p;var d=vf(h);n.push(d),u=Math.max(u,d)}else o=Math.max(o,a),i.push(a),a=0,s+=u}return{width:o,height:s,widths:r,heights:n,lineWidths:i}}(s,p),y=d.width,v=d.height,g=d.widths,m=d.heights,b=d.lineWidths,_=y+h,w=[],x=(_+2)*l[0],S=(v+h)*l[1],k={width:x<0?Math.floor(x):Math.ceil(x),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:w};1==l[0]&&1==l[1]||w.push("scale",l),n&&(w.push("strokeStyle",o.strokeStyle),w.push("lineWidth",h),w.push("lineCap",o.lineCap),w.push("lineJoin",o.lineJoin),w.push("miterLimit",o.miterLimit),w.push("setLineDash",[o.lineDash]),w.push("lineDashOffset",o.lineDashOffset)),r&&w.push("fillStyle",a.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var O,E=.5-f,A=f*_+E*h,P=[],C=[],j=0,M=0,T=0,R=0,I=0,L=p.length;I<L;I+=2){var F=p[I];if("\n"!==F){var D=p[I+1]||s.font;D!==O&&(n&&P.push("font",D),r&&C.push("font",D),O=D),j=Math.max(j,m[T]);var B=[F,A+E*g[T]+f*(g[T]-b[R]),.5*(h+j)+M];A+=g[T],n&&P.push("strokeText",B),r&&C.push("fillText",B),++T}else M+=j,j=0,A=f*_+E*h,++R}return Array.prototype.push.apply(w,P),Array.prototype.push.apply(w,C),this.labels_[i]=k,k}},{key:"replayTextBackground_",value:function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(t,e,r,n,i,o,a,s,u,l,c,f,h,p,d,y){var v,g=r-(a*=f[0]),m=n-(s*=f[1]),b=i+u>t?t-u:i,_=o+l>e?e-l:o,w=p[3]+b*f[0]+p[1],x=p[0]+_*f[1]+p[2],S=g-p[3],k=m-p[0];return(d||0!==c)&&(oy[0]=S,uy[0]=S,oy[1]=k,ay[1]=k,ay[0]=S+w,sy[0]=ay[0],sy[1]=k+x,uy[1]=sy[1]),0!==c?(ga(v=ba([1,0,0,1,0,0],r,n,1,1,c,-r,-n),oy),ga(v,ay),ga(v,sy),ga(v,uy),Fn(Math.min(oy[0],ay[0],sy[0],uy[0]),Math.min(oy[1],ay[1],sy[1],uy[1]),Math.max(oy[0],ay[0],sy[0],uy[0]),Math.max(oy[1],ay[1],sy[1],uy[1]),iy)):Fn(Math.min(S,S+w),Math.min(k,k+x),Math.max(S,S+w),Math.max(k,k+x),iy),h&&(g=Math.round(g),m=Math.round(m)),{drawImageX:g,drawImageY:m,drawImageW:b,drawImageH:_,originX:u,originY:l,declutterBox:{minX:iy[0],minY:iy[1],maxX:iy[2],maxY:iy[3],value:y},canvasTransform:v,scale:f}}},{key:"replayImageOrLabel_",value:function(t,e,r,n,i,o,a){var s=!(!o&&!a),u=n.declutterBox,l=t.canvas,c=a?a[2]*n.scale[0]/2:0;return u.minX-c<=l.width/e&&u.maxX+c>=0&&u.minY-c<=l.height/e&&u.maxY+c>=0&&(s&&this.replayTextBackground_(t,oy,ay,sy,uy,o,a),function(t,e,r,n,i,o,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c[0],c[1]),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(u,l),t.scale(c[0],c[1]),t.drawImage(n,i,o,a,s,0,0,a,s)):t.drawImage(n,i,o,a,s,u,l,a*c[0],s*c[1]),t.restore()}(t,n.canvasTransform,i,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}},{key:"fill_",value:function(t){if(this.alignFill_){var e=ga(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}},{key:"setStrokeStyle_",value:function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}},{key:"drawLabelWithPointPlacement_",value:function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=fy(Array.isArray(t)?t[0]:t,i.textAlign||lf),l=Xd[i.textBaseline||cf],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale[0])+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}}},{key:"execute_",value:function(t,e,r,n,i,o,a,s){var u,l,c;this.pixelCoordinates_&&De(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=xa(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),c=r,(l=this.renderedTransform_)[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5]);for(var f,h,p,d,y,v,g,m,b,_,w,x,S,k,O,E,A=0,P=n.length,C=0,j=0,M=0,T=null,R=null,I=this.coordinateCache_,L=this.viewRotation_,F=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},B=this.instructions!=n||this.overlaps?0:200;A<P;){var N=n[A];switch(N[0]){case Qp.BEGIN_GEOMETRY:S=N[1],E=N[3],S.getGeometry()?void 0===a||ii(a,E.getExtent())?++A:A=N[2]+1:A=N[2];break;case Qp.BEGIN_PATH:j>B&&(this.fill_(t),j=0),M>B&&(t.stroke(),M=0),j||M||(t.beginPath(),d=NaN,y=NaN),++A;break;case Qp.CIRCLE:var z=u[C=N[1]],G=u[C+1],U=u[C+2]-z,q=u[C+3]-G,W=Math.sqrt(U*U+q*q);t.moveTo(z+W,G),t.arc(z,G,W,0,2*Math.PI,!0),++A;break;case Qp.CLOSE_PATH:t.closePath(),++A;break;case Qp.CUSTOM:C=N[1],f=N[2];var V=N[3],Z=N[4],Y=6==N.length?N[5]:void 0;D.geometry=V,D.feature=S,A in I||(I[A]=[]);var X=I[A];Y?Y(u,C,f,2,X):(X[0]=u[C],X[1]=u[C+1],X.length=2),Z(X,D),++A;break;case Qp.DRAW_IMAGE:C=N[1],f=N[2],m=N[3],h=N[4],p=N[5];var H=N[6],K=N[7],J=N[8],$=N[9],Q=N[10],tt=N[11],et=N[12],rt=N[13],nt=N[14],it=N[15];if(!m&&N.length>=20){b=N[19],_=N[20],w=N[21],x=N[22];var ot=this.drawLabelWithPointPlacement_(b,_,w,x);m=ot.label,N[3]=m;var at=N[23];h=(ot.anchorX-at)*this.pixelRatio,N[4]=h;var st=N[24];p=(ot.anchorY-st)*this.pixelRatio,N[5]=p,H=m.height,N[6]=H,rt=m.width,N[13]=rt}var ut=void 0;N.length>25&&(ut=N[25]);var lt=void 0,ct=void 0,ft=void 0;N.length>17?(lt=N[16],ct=N[17],ft=N[18]):(lt=ff,ct=!1,ft=!1),Q&&F?tt+=L:Q||F||(tt-=L);for(var ht=0;C<f;C+=2)if(!(ut&&ut[ht++]<rt/this.pixelRatio)){var pt=this.calculateImageOrLabelDimensions_(m.width,m.height,u[C],u[C+1],rt,H,h,p,J,$,tt,et,i,lt,ct||ft,S),dt=[t,e,m,pt,K,ct?T:null,ft?R:null];if(s){if("none"===nt)continue;if("obstacle"===nt){s.insert(pt.declutterBox);continue}var yt=void 0,vt=void 0;if(it){var gt=f-C;if(!it[gt]){it[gt]=dt;continue}if(yt=it[gt],delete it[gt],vt=ly(yt),s.collides(vt))continue}if(s.collides(pt.declutterBox))continue;yt&&(s.insert(vt),this.replayImageOrLabel_.apply(this,yt)),s.insert(pt.declutterBox)}this.replayImageOrLabel_.apply(this,dt)}++A;break;case Qp.DRAW_CHARS:var mt=N[1],bt=N[2],_t=N[3],wt=N[4];x=N[5];var xt=N[6],St=N[7],kt=N[8];w=N[9];var Ot=N[10];b=N[11],_=N[12];var Et=[N[13],N[13]],At=this.textStates[_],Pt=At.font,Ct=[At.scale[0]*St,At.scale[1]*St],jt=void 0;Pt in this.widths_?jt=this.widths_[Pt]:(jt={},this.widths_[Pt]=jt);var Mt=ey(u,mt,bt,2),Tt=Math.abs(Ct[0])*bf(Pt,b,jt);if(wt||Tt<=Mt){var Rt=ty(u,mt,bt,2,b,(Mt-Tt)*fy(b,this.textStates[_].textAlign),xt,Math.abs(Ct[0]),bf,Pt,jt,F?0:this.viewRotation_);t:if(Rt){var It=[],Lt=void 0,Ft=void 0,Dt=void 0,Bt=void 0,Nt=void 0;if(w)for(Lt=0,Ft=Rt.length;Lt<Ft;++Lt){Dt=(Nt=Rt[Lt])[4],Bt=this.createLabel(Dt,_,"",w),h=Nt[2]+(Ct[0]<0?-Ot:Ot),p=_t*Bt.height+2*(.5-_t)*Ot*Ct[1]/Ct[0]-kt;var zt=this.calculateImageOrLabelDimensions_(Bt.width,Bt.height,Nt[0],Nt[1],Bt.width,Bt.height,h,p,0,0,Nt[3],Et,!1,ff,!1,S);if(s&&s.collides(zt.declutterBox))break t;It.push([t,e,Bt,zt,1,null,null])}if(x)for(Lt=0,Ft=Rt.length;Lt<Ft;++Lt){Dt=(Nt=Rt[Lt])[4],Bt=this.createLabel(Dt,_,x,""),h=Nt[2],p=_t*Bt.height-kt;var Gt=this.calculateImageOrLabelDimensions_(Bt.width,Bt.height,Nt[0],Nt[1],Bt.width,Bt.height,h,p,0,0,Nt[3],Et,!1,ff,!1,S);if(s&&s.collides(Gt.declutterBox))break t;It.push([t,e,Bt,Gt,1,null,null])}s&&s.load(It.map(ly));for(var Ut=0,qt=It.length;Ut<qt;++Ut)this.replayImageOrLabel_.apply(this,It[Ut])}}++A;break;case Qp.END_GEOMETRY:if(void 0!==o){var Wt=o(S=N[1],E);if(Wt)return Wt}++A;break;case Qp.FILL:B?j++:this.fill_(t),++A;break;case Qp.MOVE_TO_LINE_TO:for(C=N[1],f=N[2],k=u[C],g=(O=u[C+1])+.5|0,(v=k+.5|0)===d&&g===y||(t.moveTo(k,O),d=v,y=g),C+=2;C<f;C+=2)v=(k=u[C])+.5|0,g=(O=u[C+1])+.5|0,C!=f-2&&v===d&&g===y||(t.lineTo(k,O),d=v,y=g);++A;break;case Qp.SET_FILL_STYLE:T=N,this.alignFill_=N[2],j&&(this.fill_(t),j=0,M&&(t.stroke(),M=0)),t.fillStyle=N[1],++A;break;case Qp.SET_STROKE_STYLE:R=N,M&&(t.stroke(),M=0),this.setStrokeStyle_(t,N),++A;break;case Qp.STROKE:B?M++:t.stroke(),++A;break;default:++A}}j&&this.fill_(t),M&&t.stroke()}},{key:"execute",value:function(t,e,r,n,i,o){this.viewRotation_=n,this.execute_(t,e,r,this.instructions,i,void 0,void 0,o)}},{key:"executeHitDetection",value:function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,i)}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ny(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const dy=py;function yy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vy(t){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(t)}function gy(t){var e=function(t,e){if("object"!=vy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vy(e)?e:String(e)}var my=["Polygon","Circle","LineString","Image","Text","Default"],by=function(){function t(e,r,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}var e,r;return e=t,r=[{key:"clip",value:function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()}},{key:"createExecutors_",value:function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new dy(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}},{key:"hasExecutors",value:function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=ba(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=cl(a,a,void 0,{willReadFrequently:!0}));var l,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Un(l=[1/0,1/0,-1/0,-1/0],t),Cn(l,e*(this.renderBuffer_+n),l));var f,h=function(t){if(void 0!==_y[t])return _y[t];for(var e=2*t+1,r=t*t,n=new Array(r+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>r)break;var s=n[a];s||(s=[],n[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var u=[],l=0,c=n.length;l<c;++l)n[l]&&u.push.apply(u,function(t){if(Array.isArray(t))return yy(t)}(f=n[l])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(f)||function(t,e){if(t){if("string"==typeof t)return yy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yy(t,e):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var f;return _y[t]=u,u}(n);function p(t,e){for(var r=c.getImageData(0,0,a,a).data,s=0,u=h.length;s<u;s++)if(r[h[s]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(t)){var l=(h[s]-3)/4,p=n-l%a,d=n-(l/a|0),y=i(t,e,p*p+d*d);if(y)return y}c.clearRect(0,0,a,a);break}}var d,y,v,g,m,b=Object.keys(this.executorsByZIndex_).map(Number);for(b.sort(Re),d=b.length-1;d>=0;--d){var _=b[d].toString();for(v=this.executorsByZIndex_[_],y=my.length-1;y>=0;--y)if(void 0!==(g=v[f=my[y]])&&(m=g.executeHitDetection(c,s,r,p,l)))return m}}},{key:"getClipCoords",value:function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return xa(a,0,8,2,t,a),a}},{key:"isEmpty",value:function(){return We(this.executorsByZIndex_)}},{key:"execute",value:function(t,e,r,n,i,o,a){var s,u,l,c,f,h,p=Object.keys(this.executorsByZIndex_).map(Number);for(p.sort(Re),this.maxExtent_&&(t.save(),this.clip(t,r)),o=o||my,a&&p.reverse(),s=0,u=p.length;s<u;++s){var d=p[s].toString();for(f=this.executorsByZIndex_[d],l=0,c=o.length;l<c;++l)void 0!==(h=f[o[l]])&&h.execute(t,e,r,n,i,a)}this.maxExtent_&&t.restore()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gy(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_y={};const wy=by;function xy(t){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(t)}function Sy(t){var e=function(t,e){if("object"!=xy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xy(e)?e:String(e)}function ky(t,e,r){return e=Ey(e),function(t,e){if(e&&("object"===xy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Oy()?Reflect.construct(e,r||[],Ey(t).constructor):e.apply(t,r))}function Oy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Oy=function(){return!!t})()}function Ey(t){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ey(t)}function Ay(t,e){return Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ay(t,e)}var Py=function(t){function e(t,r,n,i,o,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=ky(this,e)).context_=t,u.pixelRatio_=r,u.extent_=n,u.transform_=i,u.transformRotation_=i?Kr(Math.atan2(i[1],i[0]),10):0,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=[0,0],u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=[0,0],u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ay(t,e)}(e,t),r=e,n=[{key:"drawImages_",value:function(t,e,r,n){if(this.image_){var i=xa(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var f=i[l]-this.imageAnchorX_,h=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=f+this.imageAnchorX_,d=h+this.imageAnchorY_;ba(a,p,d,1,1,u,-p,-d),o.save(),o.transform.apply(o,a),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,h,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=s)}}},{key:"drawText_",value:function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=xa(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(s-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u))}}}},{key:"moveToLineTo_",value:function(t,e,r,n,i){var o=this.context_,a=xa(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r}},{key:"drawRings_",value:function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e}},{key:"drawCircle",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(!n)return null;var i=t.getStride();return xa(n,0,n.length,i,e,r)}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var r=e.getGeometryFunction()(t);r&&(this.setStyle(e),this.drawGeometry(r))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(ii(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),ii(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),De(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:lf;r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,e){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:Zc(n||nf)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),u=e.getLineJoin(),l=e.getWidth(),c=e.getMiterLimit(),f=a||af;this.strokeState_={lineCap:void 0!==o?o:of,lineDash:1===this.pixelRatio_?f:f.map((function(t){return t*r.pixelRatio_})),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==u?u:sf,lineWidth:(void 0!==l?l:1)*this.pixelRatio_,miterLimit:void 0!==c?c:10,strokeStyle:Zc(i||uf)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var r=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),i=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=e[1]*r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=e[0]*r}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:Zc(r||nf)}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:of,lineDash:a||af,lineDashOffset:s||0,lineJoin:void 0!==u?u:sf,lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:Zc(i||uf)}}else this.textStrokeState_=null;var f=t.getFont(),h=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),y=t.getRotation(),v=t.getScaleArray(),g=t.getText(),m=t.getTextAlign(),b=t.getTextBaseline();this.textState_={font:void 0!==f?f:rf,textAlign:void 0!==m?m:lf,textBaseline:void 0!==b?b:cf},this.text_=void 0!==g?Array.isArray(g)?g.reduce((function(t,e,r){return t+(r%2?" ":e)}),""):g:"",this.textOffsetX_=void 0!==h?this.pixelRatio_*h:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sy(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(rd);const Cy=Py;var jy=.5;function My(t,e,r,n,i,o,a){var s=cl(t[0]*jy,t[1]*jy);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new Cy(s,jy,i,null,a),c=r.length,f=Math.floor(16777215/c),h={},p=1;p<=c;++p){var d=r[p-1],y=d.getStyleFunction()||n;if(y){var v=y(d,o);if(v){Array.isArray(v)||(v=[v]);for(var g=(p*f).toString(16).padStart(7,"#00000"),m=0,b=v.length;m<b;++m){var _=v[m],w=_.getGeometryFunction()(d);if(w&&ii(i,w.getExtent())){var x=_.clone(),S=x.getFill();S&&S.setColor(g);var k=x.getStroke();k&&(k.setColor(g),k.setLineDash(null)),x.setText(void 0);var O=_.getImage();if(O){var E=O.getImageSize();if(!E)continue;var A=cl(E[0],E[1],void 0,{alpha:!1}),P=A.canvas;A.fillStyle=g,A.fillRect(0,0,P.width,P.height),x.setImage(new wh({img:P,anchor:O.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:O.getOrigin(),opacity:1,size:O.getSize(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}var C=x.getZIndex()||0,j=h[C];j||(j={},h[C]=j,j.Polygon=[],j.Circle=[],j.LineString=[],j.Point=[]);var M=w.getType();if("GeometryCollection"===M)for(var T=w.getGeometriesArrayRecursive(),R=0,I=T.length;R<I;++R){var L=T[R];j[L.getType().replace("Multi","")].push(L,x)}else j[M.replace("Multi","")].push(w,x)}}}}}for(var F=Object.keys(h).map(Number).sort(Re),D=0,B=F.length;D<B;++D){var N=h[F[D]];for(var z in N)for(var G=N[z],U=0,q=G.length;U<q;U+=2){l.setStyle(G[U+1]);for(var W=0,V=e.length;W<V;++W)l.setTransform(e[W]),l.drawGeometry(G[U])}}return s.getImageData(0,0,u.width,u.height)}function Ty(t,e,r){var n=[];if(r){var i=Math.floor(Math.round(t[0])*jy),o=Math.floor(Math.round(t[1])*jy),a=4*(Wr(i,0,r.width-1)+Wr(o,0,r.height-1)*r.width),s=r.data[a],u=r.data[a+1],l=r.data[a+2]+256*(u+256*s),c=Math.floor(16777215/e.length);l&&l%c==0&&n.push(e[l/c-1])}return n}var Ry=.5,Iy={Point:function(t,e,r,n,i){var o,a=r.getImage(),s=r.getText();if(a){if(2!=a.getImageState())return;var u=t;if(i){var l=a.getDeclutterMode();if("none"!==l)if(u=i,"obstacle"===l){var c=t.getBuilder(r.getZIndex(),"Image");c.setImageStyle(a,o),c.drawPoint(e,n)}else s&&s.getText()&&(o={})}var f=u.getBuilder(r.getZIndex(),"Image");f.setImageStyle(a,o),f.drawPoint(e,n)}if(s&&s.getText()){var h=t;i&&(h=i);var p=h.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s,o),p.drawText(e,n)}},LineString:function(t,e,r,n,i){var o=r.getStroke();if(o){var a=t.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(i||t).getBuilder(r.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,n)}},Polygon:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=t.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(i||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}},MultiPoint:function(t,e,r,n,i){var o,a=r.getImage(),s=r.getText();if(a){if(2!=a.getImageState())return;var u=t;if(i){var l=a.getDeclutterMode();if("none"!==l)if(u=i,"obstacle"===l){var c=t.getBuilder(r.getZIndex(),"Image");c.setImageStyle(a,o),c.drawMultiPoint(e,n)}else s&&s.getText()&&(o={})}var f=u.getBuilder(r.getZIndex(),"Image");f.setImageStyle(a,o),f.drawMultiPoint(e,n)}if(s&&s.getText()){var h=t;i&&(h=i);var p=h.getBuilder(r.getZIndex(),"Text");p.setTextStyle(s,o),p.drawText(e,n)}},MultiLineString:function(t,e,r,n,i){var o=r.getStroke();if(o){var a=t.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n)}var s=r.getText();if(s&&s.getText()){var u=(i||t).getBuilder(r.getZIndex(),"Text");u.setTextStyle(s),u.drawText(e,n)}},MultiPolygon:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(a||o){var s=t.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,n)}var u=r.getText();if(u&&u.getText()){var l=(i||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}},GeometryCollection:function(t,e,r,n,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o)(0,Iy[s[o].getType()])(t,s[o],r,n,i)},Circle:function(t,e,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=t.getBuilder(r.getZIndex(),"Circle");s.setFillStrokeStyle(o,a),s.drawCircle(e,n)}var u=r.getText();if(u&&u.getText()){var l=(i||t).getBuilder(r.getZIndex(),"Text");l.setTextStyle(u),l.drawText(e,n)}}};function Ly(t,e){return parseInt(_r(t),10)-parseInt(_r(e),10)}function Fy(t,e){var r=Dy(t,e);return r*r}function Dy(t,e){return Ry*t/e}function By(t,e,r,n,i,o,a){var s=!1,u=r.getImage();if(u){var l=u.getImageState();2==l||3==l?u.unlistenImageChange(i):(0==l&&u.load(),u.listenImageChange(i),s=!0)}return function(t,e,r,n,i,o){var a=r.getGeometryFunction()(e);if(a){var s=a.simplifyTransformed(n,i);r.getRenderer()?Ny(t,s,r,e):(0,Iy[s.getType()])(t,s,r,e,o)}}(t,e,r,n,o,a),s}function Ny(t,e,r,n){if("GeometryCollection"!=e.getType())t.getBuilder(r.getZIndex(),"Default").drawCustom(e,n,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)Ny(t,i[o],r,n)}function zy(t){return zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(t)}function Gy(t){var e=function(t,e){if("object"!=zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zy(e)?e:String(e)}function Uy(t,e,r){return e=Wy(e),function(t,e){if(e&&("object"===zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vy(t)}(t,qy()?Reflect.construct(e,r||[],Wy(t).constructor):e.apply(t,r))}function qy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qy=function(){return!!t})()}function Wy(t){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wy(t)}function Vy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zy(t,e){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zy(t,e)}var Yy=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Uy(this,e,[t])).boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(Vy(r)),r.animatingOrInteracting_,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r.compositionContext_=null,r.opacity_=1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zy(t,e)}(e,t),r=e,n=[{key:"renderWorlds",value:function(t,e,r){var n=e.extent,i=e.viewState,o=i.center,a=i.resolution,s=i.projection,u=i.rotation,l=s.getExtent(),c=this.getLayer().getSource(),f=e.pixelRatio,h=e.viewHints,p=!(h[0]||h[1]),d=this.compositionContext_,y=Math.round(e.size[0]*f),v=Math.round(e.size[1]*f),g=c.getWrapX()&&s.canWrapX(),m=g?ni(l):null,b=g?Math.ceil((n[2]-l[2])/m)+1:1,_=g?Math.floor((n[0]-l[0])/m):0;do{var w=this.getRenderTransform(o,a,u,f,y,v,_*m);t.execute(d,1,w,u,p,void 0,r)}while(++_<b)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var t=cl(this.context.canvas.width,this.context.canvas.height,kl);this.compositionContext_=t}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,fl(this.compositionContext_),kl.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){va(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),_a(this.inversePixelTransform,this.pixelTransform);var i=wa(this.pixelTransform);this.useContainer(e,i,this.getBackground(t));var o=this.context,a=o.canvas,s=this.replayGroup_,u=this.declutterExecutorGroup,l=s&&!s.isEmpty()||u&&!u.isEmpty();if(!l&&!this.getLayer().hasListener(xi)&&!this.getLayer().hasListener(Si))return null;var c=Math.round(t.size[0]*r),f=Math.round(t.size[1]*r);a.width!=c||a.height!=f?(a.width=c,a.height=f,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,c,f),this.preRender(o,t);var h=t.viewState,p=h.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var d=!1;if(l&&n.extent&&this.clipping){var y=Wo(n.extent,p);(d=(l=ii(y,t.extent))&&!Rn(y,t.extent))&&this.clipUnrotated(this.compositionContext_,t,y)}return l&&this.renderWorlds(s,t),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(t){var e=this;return new Promise((function(r){if(!e.hitDetectionImageData_&&!e.animatingOrInteracting_){var n=[e.context.canvas.width,e.context.canvas.height];ga(e.pixelTransform,n);var i=e.renderedCenter_,o=e.renderedResolution_,a=e.renderedRotation_,s=e.renderedProjection_,u=e.wrappedRenderedExtent_,l=e.getLayer(),c=[],f=n[0]*jy,h=n[1]*jy;c.push(e.getRenderTransform(i,o,a,jy,f,h,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!Rn(d,u)){for(var y,v=u[0],g=ni(d),m=0;v<d[0];)y=g*--m,c.push(e.getRenderTransform(i,o,a,jy,f,h,y).slice()),v+=g;for(m=0,v=u[2];v>d[2];)y=g*++m,c.push(e.getRenderTransform(i,o,a,jy,f,h,y).slice()),v-=g}e.hitDetectionImageData_=My(n,c,e.renderedFeatures_,l.getStyleFunction(),u,o,a)}r(Ty(t,e.renderedFeatures_,e.hitDetectionImageData_))}))}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,i){var o=this;if(this.replayGroup_){var a,s=e.viewState.resolution,u=e.viewState.rotation,l=this.getLayer(),c={},f=function(t,e,r){var o=_r(t),a=c[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[o]=!0,i.splice(i.lastIndexOf(a),1),n(t,l,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return c[o]=!0,n(t,l,e);i.push(c[o]={feature:t,layer:l,geometry:e,distanceSq:r,callback:n})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((function(n){return a=n.forEachFeatureAtCoordinate(t,s,u,r,f,n===o.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((function(t){return t.value})):null)})),a}}},{key:"handleFontsChanged",value:function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}},{key:"handleStyleImageChange_",value:function(t){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var e=this,r=this.getLayer(),n=r.getSource();if(!n)return!1;var i=t.viewHints[0],o=t.viewHints[1],a=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();if(this.ready&&!a&&i||!s&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var u=t.extent,l=t.viewState,c=l.projection,f=l.resolution,h=t.pixelRatio,p=r.getRevision(),d=r.getRenderBuffer(),y=r.getRenderOrder();void 0===y&&(y=Ly);var v=l.center.slice(),g=Cn(u,d*f),m=g.slice(),b=[g.slice()],_=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!Rn(_,t.extent)){var w=ni(_),x=Math.max(ni(g)/2,w);g[0]=_[0]-x,g[2]=_[2]+x,fo(v,c);var S=si(b[0],c);S[0]<_[0]&&S[2]<_[2]?b.push([S[0]+w,S[1],S[2]+w,S[3]]):S[0]>_[0]&&S[2]>_[2]&&b.push([S[0]-w,S[1],S[2]-w,S[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==y&&Rn(this.wrappedRenderedExtent_,g))return De(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var k,O=new Qd(Dy(f,h),g,f,h);this.getLayer().getDeclutter()&&(k=new Qd(Dy(f,h),g,f,h));var E,A=zo();if(A){for(var P=0,C=b.length;P<C;++P){var j=qo(b[P],c);n.loadFeatures(j,Vo(f,c),A)}E=To(A,c)}else for(var M=0,T=b.length;M<T;++M)n.loadFeatures(b[M],f,c);var R=Fy(f,h),I=!0,L=function(t){var n,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(n=i(t,f)),n){var o=e.renderFeature(t,R,n,O,E,k);I=I&&!o}},F=qo(g,c),D=n.getFeaturesInExtent(F);y&&D.sort(y);for(var B=0,N=D.length;B<N;++B)L(D[B]);this.renderedFeatures_=D,this.ready=I;var z=O.finish(),G=new wy(g,f,h,n.getOverlaps(),z,r.getRenderBuffer());return k&&(this.declutterExecutorGroup=new wy(g,f,h,n.getOverlaps(),k.finish(),r.getRenderBuffer())),this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=y,this.renderedExtent_=m,this.wrappedRenderedExtent_=g,this.renderedCenter_=v,this.renderedProjection_=c,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(t,e,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,u=r.length;s<u;++s)a=By(n,t,r[s],e,this.boundHandleStyleImageChange_,i,o)||a;else a=By(n,t,r,e,this.boundHandleStyleImageChange_,i,o);return a}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gy(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Al);const Xy=Yy;function Hy(t){return Hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(t)}function Ky(t){var e=function(t,e){if("object"!=Hy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hy(e)?e:String(e)}function Jy(t,e,r){return e=Qy(e),function(t,e){if(e&&("object"===Hy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$y()?Reflect.construct(e,r||[],Qy(t).constructor):e.apply(t,r))}function $y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($y=function(){return!!t})()}function Qy(t){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qy(t)}function tv(t,e){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tv(t,e)}var ev=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jy(this,e,[t])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tv(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Xy(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ky(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Yp);const rv=ev;function nv(t){return nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(t)}function iv(t){var e=function(t,e){if("object"!=nv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nv(e)?e:String(e)}function ov(t,e,r){return e=lv(e),function(t,e){if(e&&("object"===nv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sv(t)}(t,av()?Reflect.construct(e,r||[],lv(t).constructor):e.apply(t,r))}function av(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(av=function(){return!!t})()}function sv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uv(){return uv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lv(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},uv.apply(this,arguments)}function lv(t){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lv(t)}function cv(t,e){return cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cv(t,e)}var fv={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},hv={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},pv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ov(this,e,[t])).boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(sv(r)),r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.tmpTransform_=[1,0,0,1,0,0],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cv(t,e)}(e,t),r=e,n=[{key:"prepareTile",value:function(t,e,r){var n,i=t.getState();return i!==Pl.LOADED&&i!==Pl.ERROR||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t)&&(n=!0)),n}},{key:"getTile",value:function(t,r,n,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,u=a.projection,l=this.getLayer(),c=l.getSource().getTile(t,r,n,o,u),f=i.viewHints,h=!(f[0]||f[1]);return!h&&c.wantedResolution||(c.wantedResolution=s),this.prepareTile(c,o,u)&&(h||Date.now()-i.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(c,i),uv(lv(e.prototype),"getTile",this).call(this,t,r,n,i)}},{key:"isDrawableTile",value:function(t){var r=this.getLayer();return uv(lv(e.prototype),"isDrawableTile",this).call(this,t)&&("vector"===r.getRenderMode()?_r(r)in t.executorGroups:t.hasContext(r))}},{key:"getTileImage",value:function(t){return t.getImage(this.getLayer())}},{key:"prepareFrame",value:function(t){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!==r&&(this.renderedLayerRevision_=r,this.renderedTiles.length=0),uv(lv(e.prototype),"prepareFrame",this).call(this,t)}},{key:"updateExecutorGroup_",value:function(t,e,r){var n=this,i=this.getLayer(),o=i.getRevision(),a=i.getRenderOrder()||null,s=t.wantedResolution,u=t.getReplayState(i);if(u.dirty||u.renderedResolution!==s||u.renderedRevision!=o||u.renderedRenderOrder!=a){var l=i.getSource(),c=i.getDeclutter(),f=l.getTileGrid(),h=l.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),p=l.getSourceTiles(e,r,t),d=_r(i);delete t.hitDetectionImageData[d],t.executorGroups[d]=[],c&&(t.declutterExecutorGroups[d]=[]),u.dirty=!1;for(var y=function(){var r=p[v];if(r.getState()!=Pl.LOADED)return 1;var o=r.tileCoord,y=f.getTileCoordExtent(o),g=ti(h,y),m=Cn(g,i.getRenderBuffer()*s,n.tmpExtent),b=zn(y,g)?null:m,_=new Qd(0,m,s,e),w=c?new Qd(0,g,s,e):void 0,x=Fy(s,e),S=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,s)),e){var n=this.renderFeature(t,x,e,_,w);u.dirty=u.dirty||n}},k=r.getFeatures();a&&a!==u.renderedRenderOrder&&k.sort(a);for(var O=0,E=k.length;O<E;++O){var A=k[O];b&&!ii(b,A.getGeometry().getExtent())||S.call(n,A)}var P=_.finish(),C="vector"!==i.getRenderMode()&&c&&1===p.length?null:g,j=new wy(C,s,e,l.getOverlaps(),P,i.getRenderBuffer());if(t.executorGroups[d].push(j),w){var M=new wy(null,s,e,l.getOverlaps(),w.finish(),i.getRenderBuffer());t.declutterExecutorGroups[d].push(M)}},v=0,g=p.length;v<g;++v)y();u.renderedRevision=o,u.renderedRenderOrder=a,u.renderedResolution=s}}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,i){var o=e.viewState.resolution,a=e.viewState.rotation;r=null==r?0:r;var s=this.getLayer(),u=s.getSource().getTileGridForProjection(e.viewState.projection),l=Pn([t]);Cn(l,o*r,l);for(var c,f={},h=function(t,e,r){var o=t.getId();void 0===o&&(o=_r(t));var a=f[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return f[o]=!0,i.splice(i.lastIndexOf(a),1),n(t,s,e);a.geometry=e,a.distanceSq=r}}else{if(0===r)return f[o]=!0,n(t,s,e);i.push(f[o]={feature:t,layer:s,geometry:e,distanceSq:r,callback:n})}},p=this.renderedTiles,d=function(){var n=p[y];if(!ii(u.getTileCoordExtent(n.wrappedTileCoord),l))return 1;var i=_r(s),f=[n.executorGroups[i]],d=n.declutterExecutorGroups[i];d&&f.push(d),f.some((function(n){for(var i=n===d?e.declutterTree.all().map((function(t){return t.value})):null,s=0,u=n.length;s<u;++s){var l=n[s];if(c=l.forEachFeatureAtCoordinate(t,o,a,r,h,i))return!0}}))},y=0,v=p.length;!c&&y<v;++y)d();return c}},{key:"getFeatures",value:function(t){var e=this;return new Promise((function(r,n){for(var i,o=e.getLayer(),a=_r(o),s=o.getSource(),u=e.renderedProjection,l=u.getExtent(),c=e.renderedResolution,f=s.getTileGridForProjection(u),h=ga(e.renderedPixelToCoordinateTransform_,t.slice()),p=f.getTileCoordForCoordAndResolution(h,c),d=0,y=e.renderedTiles.length;d<y;++d)if(p.toString()===e.renderedTiles[d].tileCoord.toString()){if((i=e.renderedTiles[d]).getState()===Pl.LOADED){var v=f.getTileCoordExtent(i.tileCoord);s.getWrapX()&&u.canWrapX()&&!Rn(l,v)&&fo(h,u);break}i=void 0}if(!i||i.loadingSourceTiles>0)r([]);else{var g=ei(f.getTileCoordExtent(i.wrappedTileCoord)),m=[(h[0]-g[0])/c,(g[1]-h[1])/c],b=i.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),_=i.hitDetectionImageData[a];if(!_){var w=Sc(f.getTileSize(f.getZForResolution(c,s.zDirection))),x=e.renderedRotation_;_=My(w,[e.getRenderTransform(f.getTileCoordCenter(i.wrappedTileCoord),c,0,jy,w[0]*jy,w[1]*jy,0)],b,o.getStyleFunction(),f.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(o).renderedResolution,x),i.hitDetectionImageData[a]=_}r(Ty(m,b,_))}}))}},{key:"handleFontsChanged",value:function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}},{key:"handleStyleImageChange_",value:function(t){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(t){var e=this.context,r=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var n=t.viewHints,i=!(n[0]||n[1]),o=this.renderedTiles,a=0,s=o.length;a<s;++a){var u=o[a],l=u.declutterExecutorGroups[_r(this.getLayer())];if(l)for(var c=l.length-1;c>=0;--c)l[c].execute(this.context,1,this.getTileRenderTransform(u,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=r}},{key:"getTileRenderTransform",value:function(t,e){var r=e.pixelRatio,n=e.viewState,i=n.center,o=n.resolution,a=n.rotation,s=e.size,u=Math.round(s[0]*r),l=Math.round(s[1]*r),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),f=t.tileCoord,h=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(f,this.tmpExtent)[0]-h[0];return ya(ma(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(i,o,a,r,u,l,p))}},{key:"postRender",value:function(t,r){var n=r.viewHints,i=!(n[0]||n[1]);this.renderedPixelToCoordinateTransform_=r.pixelToCoordinateTransform.slice(),this.renderedRotation_=r.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode(),s=t.globalAlpha;t.globalAlpha=o.getOpacity();for(var u=hv[a],l=r.viewState,c=l.rotation,f=o.getSource(),h=f.getTileGridForProjection(l.projection).getZForResolution(l.resolution,f.zDirection),p=this.renderedTiles,d=[],y=[],v=!0,g=p.length-1;g>=0;--g){var m=p[g];v=v&&!m.getReplayState(o).dirty;var b=m.executorGroups[_r(o)].filter((function(t){return t.hasExecutors(u)}));if(0!==b.length){var _=this.getTileRenderTransform(m,r),w=m.tileCoord[0],x=!1,S=b[0].getClipCoords(_);if(S){for(var k=0,O=d.length;k<O;++k)if(h!==w&&w<y[k]){var E=d[k];ii([S[0],S[3],S[4],S[7]],[E[0],E[3],E[4],E[7]])&&(x||(t.save(),x=!0),t.beginPath(),t.moveTo(S[0],S[1]),t.lineTo(S[2],S[3]),t.lineTo(S[4],S[5]),t.lineTo(S[6],S[7]),t.moveTo(E[6],E[7]),t.lineTo(E[4],E[5]),t.lineTo(E[2],E[3]),t.lineTo(E[0],E[1]),t.clip())}d.push(S),y.push(w)}for(var A=0,P=b.length;A<P;++A)b[A].execute(t,1,_,c,i,u);x&&t.restore()}}t.globalAlpha=s,this.ready=v,uv(lv(e.prototype),"postRender",this).call(this,t,r)}},{key:"renderFeature",value:function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=By(n,t,r[a],e,this.boundHandleStyleImageChange_,void 0,i)||o;else o=By(n,t,r,e,this.boundHandleStyleImageChange_,void 0,i);return o}},{key:"tileImageNeedsRender_",value:function(t){var e=this.getLayer();if("vector"===e.getRenderMode())return!1;var r=t.getReplayState(e),n=e.getRevision(),i=t.wantedResolution;return r.renderedTileResolution!==i||r.renderedTileRevision!==n}},{key:"renderTileImage_",value:function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),o=t.executorGroups[_r(r)];n.renderedTileRevision=i;var a=t.wrappedTileCoord,s=a[0],u=r.getSource(),l=e.pixelRatio,c=e.viewState.projection,f=u.getTileGridForProjection(c),h=f.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*h,d=f.getResolution(s),y=t.getContext(r);l=Math.round(Math.max(l,p/l));var v=u.getTilePixelSize(s,l,c);y.canvas.width=v[0],y.canvas.height=v[1];var g=l/p;if(1!==g){var m=da(this.tmpTransform_);ma(m,g,g),y.setTransform.apply(y,m)}var b=f.getTileCoordExtent(a,this.tmpExtent),_=p/d,w=da(this.tmpTransform_);ma(w,_,-_),function(t,e,r){ya(t,va(pa,1,0,0,1,e,r))}(w,-b[0],-b[3]);for(var x=0,S=o.length;x<S;++x)o[x].execute(y,g,w,0,!0,fv[r.getRenderMode()]);n.renderedTileResolution=t.wantedResolution}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Tc);const dv=pv;function yv(t){return yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yv(t)}function vv(t){var e=function(t,e){if("object"!=yv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yv(e)?e:String(e)}function gv(t,e,r){return e=_v(e),function(t,e){if(e&&("object"===yv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mv()?Reflect.construct(e,r||[],_v(t).constructor):e.apply(t,r))}function mv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mv=function(){return!!t})()}function bv(){return bv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_v(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},bv.apply(this,arguments)}function _v(t){return _v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_v(t)}function wv(t,e){return wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wv(t,e)}var xv=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t);delete n.preload,delete n.useInterimTilesOnError,(r=gv(this,e,[n])).on,r.once,r.un;var i=t.renderMode||"hybrid";return qr("hybrid"==i||"vector"==i,"`renderMode` must be `'hybrid'` or `'vector'`"),r.renderMode_=i,r.setPreload(t.preload?t.preload:0),r.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),r.getBackground,r.setBackground,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wv(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new dv(this)}},{key:"getFeatures",value:function(t){return bv(_v(e.prototype),"getFeatures",this).call(this,t)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(vu)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(gu)}},{key:"setPreload",value:function(t){this.set(vu,t)}},{key:"setUseInterimTilesOnError",value:function(t){this.set(gu,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Yp);const Sv=xv;function kv(t){return kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(t)}function Ov(t){var e=function(t,e){if("object"!=kv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kv(e)?e:String(e)}function Ev(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Av(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function Pv(t,e,r){return t+"/"+e+"/"+r}function Cv(t){return Pv(t[0],t[1],t[2])}function jv(t){return t.split("/").map(Number)}function Mv(t){return(t[1]<<t[0])+t[2]}function Tv(t){return Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(t)}function Rv(t){var e=function(t,e){if("object"!=Tv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tv(e)?e:String(e)}function Iv(t,e,r){return e=Dv(e),function(t,e){if(e&&("object"===Tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lv()?Reflect.construct(e,r||[],Dv(t).constructor):e.apply(t,r))}function Lv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lv=function(){return!!t})()}function Fv(){return Fv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dv(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Fv.apply(this,arguments)}function Dv(t){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dv(t)}function Bv(t,e){return Bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bv(t,e)}const Nv=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Iv(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bv(t,e)}(e,t),r=e,(n=[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();Fv(Dv(e.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}},{key:"pruneExceptNewestZ",value:function(){var t=this;if(0!==this.getCount()){var e=jv(this.peekFirstKey())[0];this.forEach((function(r){r.tileCoord[0]!==e&&(t.remove(Cv(r.tileCoord)),r.release())}))}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}var e,r;return e=t,(r=[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(t){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(t){return this.entries_.hasOwnProperty(t)}},{key:"forEach",value:function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer}},{key:"get",value:function(t,e){var r=this.entries_[t];return qr(void 0!==r,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}},{key:"remove",value:function(t){var e=this.entries_[t];return qr(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e}},{key:"getValues",value:function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(t){var e;return null===(e=this.entries_[t])||void 0===e?void 0:e.value_}},{key:"pop",value:function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}},{key:"replace",value:function(t,e){this.get(t),this.entries_[t].value_=e}},{key:"set",value:function(t,e){qr(!(t in this.entries_),"Tried to set a value for a key that is used already");var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}},{key:"setSize",value:function(t){this.highWaterMark=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ov(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function zv(t){return zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(t)}function Gv(t){var e=function(t,e){if("object"!=zv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zv(e)?e:String(e)}function Uv(t,e,r){return e=Wv(e),function(t,e){if(e&&("object"===zv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vv(t)}(t,qv()?Reflect.construct(e,r||[],Wv(t).constructor):e.apply(t,r))}function qv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qv=function(){return!!t})()}function Wv(t){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wv(t)}function Vv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zv(t,e){return Zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zv(t,e)}var Yv=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Uv(this,e)).projection=ko(t.projection),r.attributions_=Xv(t.attributions),r.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,r.loading=!1,r.state_=void 0!==t.state?t.state:"ready",r.wrapX_=void 0!==t.wrapX&&t.wrapX,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var n=Vv(r);return r.viewPromise_=new Promise((function(t,e){n.viewResolver=t,n.viewRejector=e})),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zv(t,e)}(e,t),r=e,(n=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(t){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=Xv(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gv(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);function Xv(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Hv=Yv;function Kv(t){return Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(t)}function Jv(t){var e=function(t,e){if("object"!=Kv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kv(e)?e:String(e)}var $v=[0,0,0],Qv=function(){function t(e){var r,n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,qr(function(t,e,r){var n=function(t,e){return e-t}||Re;return t.every((function(e,r){if(0===r)return!0;var i=n(t[r-1],e);return!(i>0||0===i)}))}(this.resolutions_),"`resolutions` must be sorted in descending order"),!e.origins)for(var i=0,o=this.resolutions_.length-1;i<o;++i)if(r){if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}else r=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,qr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));var a=e.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ei(a)),qr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,qr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:Pi,qr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map((function(t,e){var r=new wc(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var i=n.getTileRangeForExtentAndZ(a,e);r.minX=Math.max(i.minX,r.minX),r.maxX=Math.min(i.maxX,r.maxX),r.minY=Math.max(i.minY,r.minY),r.maxY=Math.min(i.maxY,r.maxY)}return r})):a&&this.calculateTileRanges_(a)}var e,r;return e=t,r=[{key:"forEachTileCoord",value:function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])}},{key:"forEachTileCoordParentTileRange",value:function(t,e,r,n){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,void 0!==i&&void 0!==o?_c(i=Math.floor(i/2),i,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(t){return this.origin_?this.origin_:this.origins_[t]}},{key:"getResolution",value:function(t){return this.resolutions_[t]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return _c(n,n+1,i,i+1,e)}var o=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var n=t[0],i=t[1],o=t[2];if(e===n)return _c(i,o,i,o,r);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-n),s=Math.floor(i*a),u=Math.floor(o*a);return e<n?_c(s,s,u,u,r):_c(s,Math.floor(a*(i+1))-1,u,Math.floor(a*(o+1))-1,r)}var l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e,r)}},{key:"getTileRangeForExtentAndZ",value:function(t,e,r){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,$v);var n=$v[1],i=$v[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,$v),_c(n,$v[1],i,$v[2],r)}},{key:"getTileCoordCenter",value:function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=Sc(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]}},{key:"getTileCoordExtent",value:function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Sc(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n;return Fn(o,a,o+i[0]*n,a+i[1]*n,e)}},{key:"getTileCoordForCoordAndResolution",value:function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)}},{key:"getTileCoordForXYAndResolution_",value:function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=Sc(this.getTileSize(o),this.tmpSize_),l=a*(t-s[0])/r/u[0],c=a*(s[1]-e)/r/u[1];return n?(l=Qr(l,5)-1,c=Qr(c,5)-1):(l=$r(l,5),c=$r(c,5)),Av(o,l,c,i)}},{key:"getTileCoordForXYAndZ_",value:function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=Sc(this.getTileSize(r),this.tmpSize_),u=(t-o[0])/a/s[0],l=(o[1]-e)/a/s[1];return n?(u=Qr(u,5)-1,l=Qr(l,5)-1):(u=$r(u,5),l=$r(l,5)),Av(r,u,l,i)}},{key:"getTileCoordForCoordAndZ",value:function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)}},{key:"getTileCoordResolution",value:function(t){return this.resolutions_[t[0]]}},{key:"getTileSize",value:function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}},{key:"getFullTileRange",value:function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}},{key:"getZForResolution",value:function(t,e){return Wr(Ie(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(t,e){return Ms(e,0,e.length,2,this.getTileCoordExtent(t))}},{key:"calculateTileRanges_",value:function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jv(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const tg=Qv;function eg(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,r,n){return function(t,e,r,n){n=void 0!==n?n:"top-left";var i=ng(t,void 0,r);return new tg({extent:t,origin:Kn(t,n),resolutions:i,tileSize:r})}(ig(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function rg(t){var e=t||{},r=e.extent||ko("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ng(r,e.maxZoom,e.tileSize,e.maxResolution)};return new tg(n)}function ng(t,e,r,n){e=void 0!==e?e:Ai,r=Sc(void 0!==r?r:Pi);var i=Qn(t),o=ni(t);n=n>0?n:Math.max(o/r[0],i/r[1]);for(var a=e+1,s=new Array(a),u=0;u<a;++u)s[u]=n/Math.pow(2,u);return s}function ig(t){var e=(t=ko(t)).getExtent();if(!e){var r=180*Ci.degrees/t.getMetersPerUnit();e=Fn(-r,-r,r,r)}return e}function og(t){return og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(t)}function ag(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lg(n.key),n)}}function ug(t,e,r){return e&&sg(t.prototype,e),r&&sg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lg(t){var e=function(t,e){if("object"!=og(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=og(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==og(e)?e:String(e)}function cg(t,e,r){return e=pg(e),function(t,e){if(e&&("object"===og(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fg()?Reflect.construct(e,r||[],pg(t).constructor):e.apply(t,r))}function fg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fg=function(){return!!t})()}function hg(){return hg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pg(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},hg.apply(this,arguments)}function pg(t){return pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pg(t)}function dg(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yg(t,e)}function yg(t,e){return yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yg(t,e)}var vg=function(t){function e(t){var r;return ag(this,e),(r=cg(this,e,[{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}])).on,r.once,r.un,r.opaque_=void 0!==t.opaque&&t.opaque,r.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,r.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,r.tileGrid&&Sc(r.tileGrid.getTileSize(r.tileGrid.getMinZoom()),[256,256]),r.tileCache=new Nv(t.cacheSize||0),r.tmpSize=[0,0],r.key_=t.key||"",r.tileOptions={transition:t.transition,interpolate:t.interpolate},r.zDirection=t.zDirection?t.zDirection:0,r}return dg(e,t),ug(e,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)}},{key:"forEachLoadedTile",value:function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=Pv(e,l,c),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===Pl.LOADED)&&(s=!1!==n(o)),s||(u=!1);return u}},{key:"getGutterForProjection",value:function(t){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(t){this.key_!==t&&(this.key_=t,this.changed())}},{key:"getOpaque",value:function(t){return this.opaque_}},{key:"getResolutions",value:function(t){var e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}},{key:"getTile",value:function(t,e,r,n,i){return mr()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(t){return this.tileGrid?this.tileGrid:eg(t)}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();return qr(null===e||Mo(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}},{key:"getTilePixelRatio",value:function(t){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(t,e,r){var n,i,o,a=this.getTileGridForProjection(r),s=this.getTilePixelRatio(e),u=Sc(a.getTileSize(t),this.tmpSize);return 1==s?u:(n=u,i=s,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=n[0]*i+.5|0,o[1]=n[1]*i+.5|0,o)}},{key:"getTileCoordForTileUrlFunction",value:function(t,e){e=void 0!==e?e:this.getProjection();var r=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=ig(r);if(!Tn(o,i)){var a=ni(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}return e}(r,t,e)),function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o=e.getFullTileRange(r);return!o||o.containsXY(n,i)}(t,r)?t:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),hg(pg(e.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(t,e){var r=this.getTileCacheForProjection(e);t>r.highWaterMark&&(r.highWaterMark=t)}},{key:"useTile",value:function(t,e,r,n){}}]),e}(Hv),gg=function(t){function e(t,r){var n;return ag(this,e),(n=cg(this,e,[t])).tile=r,n}return dg(e,t),ug(e)}(Pe);const mg=vg;function bg(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){if(a)return t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);if(!r)throw new Error("The {-y} placeholder requires a tile grid with extent");return(r.getHeight()-a[2]-1).toString()}))}}function _g(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=bg(t[i],e);return function(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=Xr(Mv(e),t.length);return t[i](e,r,n)}}}(n)}function wg(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n,i=r[1].charCodeAt(0),o=r[2].charCodeAt(0);for(n=i;n<=o;++n)e.push(t.replace(r[0],String.fromCharCode(n)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}function xg(t){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(t)}function Sg(t){var e=function(t,e){if("object"!=xg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xg(e)?e:String(e)}function kg(t,e,r){return e=Eg(e),function(t,e){if(e&&("object"===xg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Og()?Reflect.construct(e,r||[],Eg(t).constructor):e.apply(t,r))}function Og(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Og=function(){return!!t})()}function Eg(t){return Eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eg(t)}function Ag(t,e){return Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ag(t,e)}var Pg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=kg(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(r.tileUrlFunction=t.tileUrlFunction),r.urls=null,t.urls?r.setUrls(t.urls):t.url&&r.setUrl(t.url),r.tileLoadingKeys_={},r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ag(t,e)}(e,t),r=e,(n=[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(t){var e,r=t.target,n=_r(r),i=r.getState();i==Pl.LOADING?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=i==Pl.ERROR?"tileloaderror":i==Pl.LOADED?"tileloadend":void 0),null!=e&&this.dispatchEvent(new gg(e,r))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=wg(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(_g(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,r){}},{key:"useTile",value:function(t,e,r){var n=Pv(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(mg);const Cg=Pg;function jg(t){return jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(t)}function Mg(t){var e=function(t,e){if("object"!=jg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jg(e)?e:String(e)}function Tg(t,e,r){return e=Lg(e),function(t,e){if(e&&("object"===jg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rg()?Reflect.construct(e,r||[],Lg(t).constructor):e.apply(t,r))}function Rg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rg=function(){return!!t})()}function Ig(){return Ig="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lg(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Ig.apply(this,arguments)}function Lg(t){return Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lg(t)}function Fg(t,e){return Fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fg(t,e)}var Dg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Tg(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Bg,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,r.tileClass=void 0!==t.tileClass?t.tileClass:Jl,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fg(t,e)}(e,t),r=e,n=[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?e:{})}}},{key:"getGutterForProjection",value:function(t){return this.getProjection()&&t&&!Mo(this.getProjection(),t)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var t=Ig(Lg(e.prototype),"getKey",this).call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t}},{key:"getOpaque",value:function(t){return!(this.getProjection()&&t&&!Mo(this.getProjection(),t))&&Ig(Lg(e.prototype),"getOpaque",this).call(this,t)}},{key:"getTileGridForProjection",value:function(t){var e=this.getProjection();if(this.tileGrid&&(!e||Mo(e,t)))return this.tileGrid;var r=_r(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=eg(t)),this.tileGridForProjection[r]}},{key:"getTileCacheForProjection",value:function(t){var e=this.getProjection();if(!e||Mo(e,t))return this.tileCache;var r=_r(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new Nv(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}},{key:"createTile_",value:function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,n,i):void 0,l=new this.tileClass(a,void 0!==u?Pl.IDLE:Pl.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(Qe,this.handleTileChange.bind(this)),l}},{key:"getTile",value:function(t,e,r,n,i){var o=this,a=this.getProjection();if(!a||!i||Mo(a,i))return this.getTileInternal(t,e,r,n,a||i);var s,u=this.getTileCacheForProjection(i),l=[t,e,r],c=Cv(l);u.containsKey(c)&&(s=u.get(c));var f=this.getKey();if(s&&s.key==f)return s;var h=this.getTileGridForProjection(a),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(l,i),y=new vc(a,h,i,p,l,d,this.getTilePixelRatio(n),this.getGutter(),(function(t,e,r,n){return o.getTileInternal(t,e,r,n,a)}),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=f,s?(y.interimTile=s,y.refreshInterimChain(),u.replace(c,y)):u.set(c,y),y}},{key:"getTileInternal",value:function(t,e,r,n,i){var o=null,a=Pv(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,r,n,i,s),u.getState()==Pl.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o}},{key:"setRenderReprojectionEdges",value:function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(t,e){var r=ko(t);if(r){var n=_r(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},{key:"clear",value:function(){for(var t in Ig(Lg(e.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Cg);function Bg(t,e){t.getImage().src=e}const Ng=Dg;function zg(t){return zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zg(t)}function Gg(t){var e=function(t,e){if("object"!=zg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zg(e)?e:String(e)}function Ug(t,e,r){return e=Wg(e),function(t,e){if(e&&("object"===zg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qg()?Reflect.construct(e,r||[],Wg(t).constructor):e.apply(t,r))}function qg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qg=function(){return!!t})()}function Wg(t){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wg(t)}function Vg(t,e){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vg(t,e)}var Zg=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:rg({extent:ig(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});return(r=Ug(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}])).gutter_=void 0!==t.gutter?t.gutter:0,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vg(t,e)}(e,t),r=e,(n=[{key:"getGutter",value:function(){return this.gutter_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gg(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ng);const Yg=Zg;function Xg(t,e,r,n,i,o,a){var s,u,l=(r-e)/n;if(1===l)s=e;else if(2===l)s=e,u=i;else if(0!==l){for(var c=t[e],f=t[e+1],h=0,p=[0],d=e+n;d<r;d+=n){var y=t[d],v=t[d+1];h+=Math.sqrt((y-c)*(y-c)+(v-f)*(v-f)),p.push(h),c=y,f=v}var g=i*h,m=function(t,e,r){var n,i;r=r||Re;for(var o=0,a=t.length,s=!1;o<a;)(i=+r(t[n=o+(a-o>>1)],e))<0?o=n+1:(a=n,s=!i);return s?o:~o}(p,g);m<0?(u=(g-p[-m-2])/(p[-m-1]-p[-m-2]),s=e+(-m-2)*n):s=e+m*n}a=a>1?a:2,o=o||new Array(a);for(var b=0;b<a;++b)o[b]=void 0===s?NaN:void 0===u?t[s+b]:Hr(t[s+b],t[s+n+b],u);return o}function Hg(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;i<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var f=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var h=0;h<n-1;++h)a.push(Hr(t[(s-1)*n+h],t[s*n+h],f));return a.push(i),a}function Kg(t,e,r,n){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];o=Nn(t,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}function Jg(t){return Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(t)}function $g(t){var e=function(t,e){if("object"!=Jg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jg(e)?e:String(e)}var Qg=[1,0,0,1,0,0],tm=function(){function t(e,r,n,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}var e,r;return e=t,r=[{key:"get",value:function(t){return this.properties_[t]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?Bn(this.flatCoordinates_):Nn(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){if(!this.flatInteriorPoints_){var t=Hn(this.getExtent());this.flatInteriorPoints_=As(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){if(!this.flatInteriorPoints_){var t=Ns(this.flatCoordinates_,this.ends_),e=Kg(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=Ps(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=Xg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=Xg(t,e,o,2,.5);Fe(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(t){return this}},{key:"simplifyTransformed",value:function(t,e){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getPropertiesInternal",value:function(){return this.properties_}},{key:"getStride",value:function(){return this.stride_}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(t){var e=(t=ko(t)).getExtent(),r=t.getWorldExtent();if(e&&r){var n=Qn(r)/Qn(e);ba(Qg,r[0],r[3],n,-n,0,0,0),xa(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Qg,this.flatCoordinates_)}}},{key:"applyTransform",value:function(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}},{key:"clone",value:function(){return new t(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}},{key:"getEnds",value:function(){return this.ends_}},{key:"enableSimplifyTransformed",value:function(){var e=this;return this.simplifyTransformed=Ge((function(r,n){if(r===e.squaredTolerance_)return e.simplifiedGeometry_;e.simplifiedGeometry_=e.clone(),n&&e.simplifiedGeometry_.applyTransform(n);var i,o=e.simplifiedGeometry_.getFlatCoordinates();switch(e.type_){case"LineString":o.length=$a(o,0,e.simplifiedGeometry_.flatCoordinates_.length,e.simplifiedGeometry_.stride_,r,o,0),i=[o.length];break;case"MultiLineString":i=[],o.length=Qa(o,0,e.simplifiedGeometry_.ends_,e.simplifiedGeometry_.stride_,r,o,0,i);break;case"Polygon":i=[],o.length=rs(o,0,e.simplifiedGeometry_.ends_,e.simplifiedGeometry_.stride_,Math.sqrt(r),o,0,i)}return i&&(e.simplifiedGeometry_=new t(e.type_,o,i,2,e.properties_,e.id_)),e.squaredTolerance_=r,e.simplifiedGeometry_})),this}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$g(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();tm.prototype.getFlatCoordinates=tm.prototype.getOrientedFlatCoordinates;const em=tm;function rm(t){return rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(t)}function nm(t){var e=function(t,e){if("object"!=rm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rm(e)?e:String(e)}function im(t,e,r){return e=am(e),function(t,e){if(e&&("object"===rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,om()?Reflect.construct(e,r||[],am(t).constructor):e.apply(t,r))}function om(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(om=function(){return!!t})()}function am(t){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},am(t)}function sm(t,e){return sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sm(t,e)}var um=function(t){function e(t,r,n,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=im(this,e,[t,r,a])).extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s.key=n,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sm(t,e)}(e,t),r=e,(n=[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==Pl.IDLE&&(this.setState(Pl.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(t,e){this.setFeatures(t)}},{key:"onError",value:function(){this.setState(Pl.ERROR)}},{key:"setFeatures",value:function(t){this.features_=t,this.setState(Pl.LOADED)}},{key:"setLoader",value:function(t){this.loader_=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fl);const lm=um;function cm(t){return cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cm(t)}function fm(t){var e=function(t,e){if("object"!=cm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cm(e)?e:String(e)}function hm(t,e,r){return e=dm(e),function(t,e){if(e&&("object"===cm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pm()?Reflect.construct(e,r||[],dm(t).constructor):e.apply(t,r))}function pm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pm=function(){return!!t})()}function dm(t){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dm(t)}function ym(t,e){return ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ym(t,e)}var vm=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hm(this,e)).on,r.once,r.un,r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){var n=t;r.setGeometry(n)}else{var i=t;r.setProperties(i)}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ym(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&(ur(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=ar(t,Qe,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(t){this.set(this.geometryName_,t)}},{key:"setStyle",value:function(t){var e,r;this.style_=t,this.styleFunction_=t?"function"==typeof(e=t)?e:(Array.isArray(e)?r=e:(qr("function"==typeof e.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),r=[e]),function(){return r}):void 0,this.changed()}},{key:"setId",value:function(t){this.id_=t,this.changed()}},{key:"setGeometryName",value:function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const gm=vm;function mm(t){return mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(t)}function bm(t){var e=function(t,e){if("object"!=mm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mm(e)?e:String(e)}function _m(t,e,r){return e=xm(e),function(t,e){if(e&&("object"===mm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wm()?Reflect.construct(e,r||[],xm(t).constructor):e.apply(t,r))}function wm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wm=function(){return!!t})()}function xm(t){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xm(t)}function Sm(t,e){return Sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sm(t,e)}var km=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_m(this,e)).flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(t[0])?n.setCoordinates(t,r):n.setFlatCoordinates(r,t),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sm(t,e)}(e,t),r=e,n=[{key:"appendCoordinate",value:function(t){Fe(this.flatCoordinates,t),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<Mn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Wa(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Za(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))}},{key:"forEachSegment",value:function(t){return Cs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,Hg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return Xg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return ey(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){var t;return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,null!==(t=this.flatMidpoint_)&&void 0!==t?t:void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[];return r.length=$a(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ha(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Om=km;function Em(t){return Em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(t)}function Am(t){var e=function(t,e){if("object"!=Em(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Em(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Em(e)?e:String(e)}function Pm(t,e,r){return e=jm(e),function(t,e){if(e&&("object"===Em(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cm()?Reflect.construct(e,r||[],jm(t).constructor):e.apply(t,r))}function Cm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cm=function(){return!!t})()}function jm(t){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jm(t)}function Mm(t,e){return Mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mm(t,e)}var Tm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Pm(this,e),r&&!Array.isArray(t[0])?n.setFlatCoordinates(r,t):n.setCoordinates(t,r),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mm(t,e)}(e,t),r=e,n=[{key:"appendPoint",value:function(t){Fe(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){if(n<Mn(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=Zr(t,e,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n}},{key:"getCoordinates",value:function(){return ns(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(t){var e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Ss(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new Ss(t.slice(i,i+r),e);n.push(a)}return n}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r)if(In(t,e[n],e[n+1]))return!0;return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ha(this.flatCoordinates,0,t,this.stride),this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Am(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Rm=Tm;function Im(t){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(t)}function Lm(t){var e=function(t,e){if("object"!=Im(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Im(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Im(e)?e:String(e)}function Fm(t,e,r){return e=Bm(e),function(t,e){if(e&&("object"===Im(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dm()?Reflect.construct(e,r||[],Bm(t).constructor):e.apply(t,r))}function Dm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dm=function(){return!!t})()}function Bm(t){return Bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bm(t)}function Nm(t,e){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nm(t,e)}var zm=function(t){function e(t,r,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Fm(this,e)).ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(t[0]))i.setCoordinates(t,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,t),i.ends_=n;else{for(var o=t,a=[],s=[],u=0,l=o.length;u<l;++u)Fe(a,o[u].getFlatCoordinates()),s.push(a.length);var c=0===o.length?i.getLayout():o[0].getLayout();i.setFlatCoordinates(c,a),i.ends_=s}return i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nm(t,e)}(e,t),r=e,n=[{key:"appendLineString",value:function(t){Fe(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){return n<Mn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Va(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ya(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))}},{key:"getCoordinateAtM",value:function(t,e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,r=void 0!==r&&r,function(t,e,r,n,i,o,a){if(a)return Hg(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return Hg(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}},{key:"getCoordinates",value:function(){return is(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(t){return t<0||this.ends_.length<=t?null:new Om(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLineStrings",value:function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new Om(t.slice(i,s),r);n.push(u),i=s}return n}},{key:"getFlatMidpoints",value:function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];Fe(t,Xg(e,r,s,i,.5)),r=s}return t}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=Qa(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,"XY",n)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(js(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ka(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Gm=zm;function Um(t){return Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(t)}function qm(t){var e=function(t,e){if("object"!=Um(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Um(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Um(e)?e:String(e)}function Wm(t,e,r){return e=Zm(e),function(t,e){if(e&&("object"===Um(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vm()?Reflect.construct(e,r||[],Zm(t).constructor):e.apply(t,r))}function Vm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vm=function(){return!!t})()}function Zm(t){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zm(t)}function Ym(t,e){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ym(t,e)}var Xm=function(t){function e(t,r,n){var i;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Wm(this,e)).endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){for(var o=t,a=[],s=[],u=0,l=o.length;u<l;++u){for(var c=o[u],f=a.length,h=c.getEnds(),p=0,d=h.length;p<d;++p)h[p]+=f;Fe(a,c.getFlatCoordinates()),s.push(h)}r=0===o.length?i.getLayout():o[0].getLayout(),t=a,n=s}return void 0!==r&&n?(i.setFlatCoordinates(r,t),i.endss_=n):i.setCoordinates(t,r),i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ym(t,e)}(e,t),r=e,n=[{key:"appendPolygon",value:function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;Fe(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();var i=new e(this.flatCoordinates.slice(),this.layout,r);return i.applyProperties(this),i}},{key:"closestPointXY",value:function(t,e,r,n){return n<Mn(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Va(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,u,l,c){c=c||[NaN,NaN];for(var f=0,h=r.length;f<h;++f){var p=r[f];l=Ya(t,e,p,n,i,!0,a,s,u,l,c),e=p[p.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,r,n))}},{key:"containsXY",value:function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(Es(t,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=ss(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?Bs(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,os(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Kg(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ps(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new Rm(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Fs(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Bs(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],f=[];a=rs(t,e,c,n,i,o,a,f),s.push(f),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,"XY",n)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new Ys(this.flatCoordinates.slice(e,i),this.layout,n)}},{key:"getPolygons",value:function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var f=new Ys(e.slice(i,u),t,s);n.push(f),i=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(Ts(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ja(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);const Hm=Xm;function Km(t){return Km="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(t)}function Jm(t){var e=function(t,e){if("object"!=Km(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Km(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Km(e)?e:String(e)}function $m(t,e,r){return e=eb(e),function(t,e){if(e&&("object"===Km(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qm()?Reflect.construct(e,r||[],eb(t).constructor):e.apply(t,r))}function Qm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Qm=function(){return!!t})()}function tb(){return tb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eb(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},tb.apply(this,arguments)}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eb(t)}function rb(t,e){return rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rb(t,e)}function nb(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}const ib=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$m(this,e)).geometries_=t||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rb(t,e)}(e,t),r=e,(n=[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(ur),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(ar(this.geometries_[t],Qe,this.changed,this))}},{key:"clone",value:function(){var t=new e(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){if(n<Mn(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n}},{key:"containsXY",value:function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1}},{key:"computeExtent",value:function(t){Dn(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Gn(t,e[r].getExtent());return t}},{key:"getGeometries",value:function(){return nb(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()}},{key:"scale",value:function(t,e,r){r||(r=Hn(this.getExtent()));for(var n=this.geometries_,i=0,o=n.length;i<o;++i)n[i].scale(t,e,r);this.changed()}},{key:"setGeometries",value:function(t){this.setGeometriesArray(nb(t))}},{key:"setGeometriesArray",value:function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()}},{key:"translate",value:function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),tb(eb(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jm(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ta);function ob(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ab(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ob(Object(r),!0).forEach((function(e){var n,i,o;n=t,i=e,o=r[e],(i=ub(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ob(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function sb(t){return sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sb(t)}function ub(t){var e=function(t,e){if("object"!=sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sb(e)?e:String(e)}var lb=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=gm,this.supportedMediaTypes=null}var e,r;return e=t,r=[{key:"getReadOptions",value:function(t,e){if(e){var r=e.dataProjection?ko(e.dataProjection):this.readProjection(t);e.extent&&r&&"tile-pixels"===r.getUnits()&&(r=ko(r)).setWorldExtent(e.extent),e={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(e)}},{key:"adaptOptions",value:function(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}},{key:"getType",value:function(){return mr()}},{key:"readFeature",value:function(t,e){return mr()}},{key:"readFeatures",value:function(t,e){return mr()}},{key:"readGeometry",value:function(t,e){return mr()}},{key:"readProjection",value:function(t){return mr()}},{key:"writeFeature",value:function(t,e){return mr()}},{key:"writeFeatures",value:function(t,e){return mr()}},{key:"writeGeometry",value:function(t,e){return mr()}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ub(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const cb=lb;function fb(t,e,r){var n=r?ko(r.featureProjection):null,i=r?ko(r.dataProjection):null,o=t;if(n&&i&&!Mo(n,i)){e&&(o=t.clone());var a=e?n:i,s=e?i:n;"tile-pixels"===a.getUnits()?o.transform(a,s):o.applyTransform(Ro(a,s))}if(e&&r&&void 0!==r.decimals){var u=Math.pow(10,r.decimals);o===t&&(o=t.clone()),o.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t}))}return o}var hb={Point:Ss,LineString:Om,Polygon:Ys,MultiPoint:Rm,MultiLineString:Gm,MultiPolygon:Hm};function pb(t,e){var r,n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map((function(e){return pb(ab(ab({},t),{},{geometry:e}))})).flat();var i="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i);var o=n.layout.length;return fb(new em(i,"Polygon"===i?function(t,e,r){return Array.isArray(e[0])?(Fs(t,0,e,r)||Bs(t=t.slice(),0,e,r),t):(Ls(t,0,e,r)||Ds(t=t.slice(),0,e,r),t)}(n.flatCoordinates,n.ends,o):n.flatCoordinates,null===(r=n.ends)||void 0===r?void 0:r.flat(),o,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function db(t,e){if(!t)return null;if(Array.isArray(t)){var r=t.map((function(t){return db(t,e)}));return new ib(r)}return fb(new(0,hb[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}function yb(t){return yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yb(t)}function vb(t){var e=function(t,e){if("object"!=yb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yb(e)?e:String(e)}function gb(t,e,r){return e=bb(e),function(t,e){if(e&&("object"===yb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mb()?Reflect.construct(e,r||[],bb(t).constructor):e.apply(t,r))}function mb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mb=function(){return!!t})()}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bb(t)}function _b(t,e){return _b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_b(t,e)}var wb=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),gb(this,e)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_b(t,e)}(e,t),r=e,n=[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(t,e){return this.readFeatureFromObject(xb(t),this.getReadOptions(t,e))}},{key:"readFeatures",value:function(t,e){return this.readFeaturesFromObject(xb(t),this.getReadOptions(t,e))}},{key:"readFeatureFromObject",value:function(t,e){return mr()}},{key:"readFeaturesFromObject",value:function(t,e){return mr()}},{key:"readGeometry",value:function(t,e){return this.readGeometryFromObject(xb(t),this.getReadOptions(t,e))}},{key:"readGeometryFromObject",value:function(t,e){return mr()}},{key:"readProjection",value:function(t){return this.readProjectionFromObject(xb(t))}},{key:"readProjectionFromObject",value:function(t){return mr()}},{key:"writeFeature",value:function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}},{key:"writeFeatureObject",value:function(t,e){return mr()}},{key:"writeFeatures",value:function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}},{key:"writeFeaturesObject",value:function(t,e){return mr()}},{key:"writeGeometry",value:function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}},{key:"writeGeometryObject",value:function(t,e){return mr()}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cb);function xb(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}function Sb(t){return Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb(t)}function kb(t){var e=function(t,e){if("object"!=Sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sb(e)?e:String(e)}function Ob(t,e,r){return e=Ab(e),function(t,e){if(e&&("object"===Sb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Eb()?Reflect.construct(e,r||[],Ab(t).constructor):e.apply(t,r))}function Eb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Eb=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ab(t)}function Pb(t,e){return Pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pb(t,e)}var Cb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=Ob(this,e)).dataProjection=ko(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(r.defaultFeatureProjection=ko(t.featureProjection)),t.featureClass&&(r.featureClass=t.featureClass),r.geometryName_=t.geometryName,r.extractGeometryName_=t.extractGeometryName,r.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pb(t,e)}(e,t),r=e,n=[{key:"readFeatureFromObject",value:function(t,e){var r,n=jb((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry);if(this.featureClass===em)return pb({geometry:n,id:r.id,properties:r.properties},e);var i=new gm;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(db(n,e)),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i}},{key:"readFeaturesFromObject",value:function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i){var a=this.readFeatureFromObject(n[i],e);a&&r.push(a)}}else r=[this.readFeatureFromObject(t,e)];return r.flat()}},{key:"readGeometryFromObject",value:function(t,e){return function(t,e){return db(jb(t),e)}(t,e)}},{key:"readProjectionFromObject",value:function(t){var e,r=t.crs;if(r)if("name"==r.type)e=ko(r.properties.name);else{if("EPSG"!==r.type)throw new Error("Unknown SRS type");e=ko("EPSG:"+r.properties.code)}else e=this.dataProjection;return e}},{key:"writeFeatureObject",value:function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(r.id=n),!t.hasProperties())return r;var i=t.getProperties(),o=t.getGeometry();return o&&(r.geometry=Mb(o,e),delete i[t.getGeometryName()]),We(i)||(r.properties=i),r}},{key:"writeFeaturesObject",value:function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(t,e){return Mb(t,this.adaptOptions(e))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(wb);function jb(t,e){if(!t)return null;var r;switch(t.type){case"Point":r=function(t){var e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:za(e.length)}}(t);break;case"LineString":r=function(t){var e=t.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:za(e[0].length)}}(t);break;case"Polygon":r=function(t){var e=t.coordinates,r=[],n=e[0][0].length;return{type:"Polygon",flatCoordinates:r,ends:Ka(r,0,e,n),layout:za(n)}}(t);break;case"MultiPoint":r=function(t){var e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:za(e[0].length)}}(t);break;case"MultiLineString":r=function(t){var e=t.coordinates,r=e[0][0].length,n=[];return{type:"MultiLineString",flatCoordinates:n,ends:Ka(n,0,e,r),layout:za(r)}}(t);break;case"MultiPolygon":r=function(t){var e=t.coordinates,r=[],n=e[0][0][0].length;return{type:"MultiPolygon",flatCoordinates:r,ends:Ja(r,0,e,n),layout:za(n)}}(t);break;case"GeometryCollection":r=function(t,e){return t.geometries.map((function(t){return jb(t)}))}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r}function Mb(t,e){var r,n=(t=fb(t,!0,e)).getType();switch(n){case"Point":r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case"MultiPoint":r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case"GeometryCollection":r=function(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return Mb(t,e)}))}}(t,e);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}const Tb=Cb;function Rb(t){return Rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rb(t)}function Ib(t,e,r){return e=Fb(e),function(t,e){if(e&&("object"===Rb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lb()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function Lb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lb=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fb(t)}function Db(t,e){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Db(t,e)}var Bb=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ib(this,e,[t=t||{}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Db(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(yu);const Nb=Bb;function zb(t){return zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zb(t)}function Gb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ub(t){var e=function(t,e){if("object"!=zb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zb(e)?e:String(e)}function qb(t,e,r){return e=Vb(e),function(t,e){if(e&&("object"===zb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wb()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}function Wb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wb=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vb(t)}function Zb(t,e){return Zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zb(t,e)}var Yb=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qb(this,e,[t])).image_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zb(t,e)}(e,t),r=e,n=[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=ti(s,Wo(e.extent,n.projection))),!a[0]&&!a[1]&&!oi(s))if(o){var u=n.projection,l=o.getImage(s,i,r,u);l&&(this.loadImage(l)?this.image_=l:4===l.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(t){var e=this.frameState;if(!e)return null;var r=this.getLayer(),n=ga(e.pixelToCoordinateTransform,t.slice()),i=r.getExtent();if(i&&!Tn(i,n))return null;var o=this.image_.getExtent(),a=this.image_.getImage(),s=ni(o),u=Math.floor(a.width*((n[0]-o[0])/s));if(u<0||u>=a.width)return null;var l=Qn(o),c=Math.floor(a.height*((o[3]-n[1])/l));return c<0||c>=a.height?null:this.getImageData(a,u,c)}},{key:"renderFrame",value:function(t,e){var r,n=this.image_,i=n.getExtent(),o=n.getResolution(),a=function(t){if(Array.isArray(t))return t}(r=Array.isArray(o)?o:[o,o])||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(r)||function(t,e){if(t){if("string"==typeof t)return Gb(t,2);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gb(t,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],u=a[1],l=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],f=t.pixelRatio,h=t.viewState,p=h.center,d=h.resolution,y=f*s/(d*l),v=f*u/(d*l),g=t.extent,m=h.resolution,b=h.rotation,_=Math.round(ni(g)/m*f),w=Math.round(Qn(g)/m*f);ba(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,b,-_/2,-w/2),_a(this.inversePixelTransform,this.pixelTransform);var x=wa(this.pixelTransform);this.useContainer(e,x,this.getBackground(t));var S=this.context,k=S.canvas;k.width!=_||k.height!=w?(k.width=_,k.height=w):this.containerReused||S.clearRect(0,0,_,w);var O=!1,E=!0;if(c.extent){var A=Wo(c.extent,h.projection);(O=(E=ii(A,t.extent))&&!Rn(A,t.extent))&&this.clipUnrotated(S,t,A)}var P=n.getImage(),C=ba(this.tempTransform,_/2,w/2,y,v,0,l*(i[0]-p[0])/s,l*(p[1]-i[3])/u);this.renderedResolution=u*f/l;var j=P.width*C[0],M=P.height*C[3];if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t),E&&j>=.5&&M>=.5){var T,R=C[4],I=C[5],L=c.opacity;1!==L&&(T=S.globalAlpha,S.globalAlpha=L),S.drawImage(P,0,0,+P.width,+P.height,R,I,j,M),1!==L&&(S.globalAlpha=T)}return this.postRender(S,t),O&&S.restore(),S.imageSmoothingEnabled=!0,x!==k.style.transform&&(k.style.transform=x),this.container}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ub(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Al);const Xb=Yb;function Hb(t){return Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hb(t)}function Kb(t){var e=function(t,e){if("object"!=Hb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hb(e)?e:String(e)}function Jb(t,e,r){return e=t_(e),function(t,e){if(e&&("object"===Hb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$b()?Reflect.construct(e,r||[],t_(t).constructor):e.apply(t,r))}function $b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($b=function(){return!!t})()}function Qb(){return Qb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=t_(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Qb.apply(this,arguments)}function t_(t){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t_(t)}function e_(t,e){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e_(t,e)}var r_=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jb(this,e,[t])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e_(t,e)}(e,t),r=e,(n=[{key:"createRenderer",value:function(){return new Xb(this)}},{key:"getData",value:function(t){return Qb(t_(e.prototype),"getData",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kb(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Nb);const n_=r_;var i_=s(286);function o_(t){return o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o_(t)}function a_(t){var e=function(t,e){if("object"!=o_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=o_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o_(e)?e:String(e)}function s_(t,e,r){return e=l_(e),function(t,e){if(e&&("object"===o_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u_()?Reflect.construct(e,r||[],l_(t).constructor):e.apply(t,r))}function u_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u_=function(){return!!t})()}function l_(t){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l_(t)}function c_(t,e){return c_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c_(t,e)}var f_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=s_(this,e)).dataProjection=new Ri({code:"",units:"tile-pixels"}),r.featureClass_=t.featureClass?t.featureClass:em,r.geometryName_=t.geometryName,r.layerName_=t.layerName?t.layerName:"layer",r.layers_=t.layers?t.layers:null,r.idProperty_=t.idProperty,r.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c_(t,e)}(e,t),r=e,n=[{key:"readRawGeometry_",value:function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,u=0,l=0,c=0;t.pos<i;){if(!a){var f=t.readVarint();o=7&f,a=f>>3}if(a--,1===o||2===o)s+=t.readSVarint(),u+=t.readSVarint(),1===o&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2;else{if(7!==o)throw new Error("Invalid command found in the PBF");l>c&&(r.push(r[c],r[c+1]),l+=2)}}l>c&&(n.push(l),c=l)}},{key:"createFeature_",value:function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;return 1===t?r=1===e?"Point":"MultiPoint":2===t?r=1===e?"LineString":"MultiLineString":3===t&&(r="Polygon"),r}(i,u.length);if(this.featureClass_===em)(n=new this.featureClass_(l,s,u,2,a,o)).transform(r.dataProjection);else{var c;if("Polygon"==l){var f=Ns(s,u);c=f.length>1?new Hm(s,"XY",f):new Ys(s,"XY",u)}else c="Point"===l?new Ss(s,"XY"):"LineString"===l?new Om(s,"XY"):"MultiPoint"===l?new Rm(s,"XY"):"MultiLineString"===l?new Gm(s,"XY",u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var h=fb(c,!1,r);n.setGeometry(h),void 0!==o&&n.setId(o),n.setProperties(a,!0)}return n}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(t,e){var r=this.layers_,n=ko((e=this.adaptOptions(e)).dataProjection);n.setWorldExtent(e.extent),e.dataProjection=n;var i=new i_(t),o=i.readFields(h_,{}),a=[];for(var s in o)if(!r||r.includes(s)){var u=o[s],l=u?[0,0,u.extent,u.extent]:null;n.setExtent(l);for(var c=0,f=u.length;c<f;++c){var h=y_(i,u,c),p=this.createFeature_(i,h,e);null!==p&&a.push(p)}}return a}},{key:"readProjection",value:function(t){return this.dataProjection}},{key:"setLayers",value:function(t){this.layers_=t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(cb);function h_(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(p_,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function p_(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1==(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function d_(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function y_(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(d_,i,n),i}const v_=f_;function g_(t){return g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g_(t)}function m_(t){var e=function(t,e){if("object"!=g_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g_(e)?e:String(e)}function b_(t,e,r){return e=w_(e),function(t,e){if(e&&("object"===g_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,__()?Reflect.construct(e,r||[],w_(t).constructor):e.apply(t,r))}function __(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(__=function(){return!!t})()}function w_(t){return w_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w_(t)}function x_(t,e){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x_(t,e)}var S_=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=b_(this,e)).map_=t,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}(e,t),r=e,n=[{key:"dispatchRenderEvent",value:function(t,e){mr()}},{key:"calculateMatrices2D",value:function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;ba(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),_a(n,r)}},{key:"forEachFeatureAtCoordinate",value:function(t,e,r,n,i,o,a,s){var u,l=e.viewState;function c(t,e,r,n){return i.call(o,e,t?r:null,n)}var f=l.projection,h=fo(t.slice(),f),p=[[0,0]];if(f.canWrapX()&&n){var d=ni(f.getExtent());p.push([-d,0],[d,0])}for(var y=e.layerStatesArray,v=y.length,g=[],m=[],b=0;b<p.length;b++)for(var _=v-1;_>=0;--_){var w=y[_],x=w.layer;if(x.hasRenderer()&&du(w,l)&&a.call(s,x)){var S=x.getRenderer(),k=x.getSource();if(S&&k){var O=k.getWrapX()?h:t,E=c.bind(null,w.managed);m[0]=O[0]+p[b][0],m[1]=O[1]+p[b][1],u=S.forEachFeatureAtCoordinate(m,e,r,E,g)}if(u)return u}}if(0!==g.length){var A=1/g.length;return g.forEach((function(t,e){return t.distanceSq+=e*A})),g.sort((function(t,e){return t.distanceSq-e.distanceSq})),g.some((function(t){return u=t.callback(t.feature,t.layer,t.geometry)})),u}}},{key:"hasFeatureAtCoordinate",value:function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,Be,this,i,o)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(t){mr()}},{key:"flushDeclutterItems",value:function(t){}},{key:"scheduleExpireIconCache",value:function(t){eh.canExpireCache()&&t.postRenderFunctions.push(k_)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Te);function k_(t,e){eh.expire()}function O_(t){return O_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O_(t)}function E_(t){var e=function(t,e){if("object"!=O_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=O_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O_(e)?e:String(e)}function A_(t,e,r){return e=j_(e),function(t,e){if(e&&("object"===O_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P_()?Reflect.construct(e,r||[],j_(t).constructor):e.apply(t,r))}function P_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P_=function(){return!!t})()}function C_(){return C_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j_(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},C_.apply(this,arguments)}function j_(t){return j_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j_(t)}function M_(t,e){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M_(t,e)}var T_=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=A_(this,e,[t])).fontChangeListenerKey_=ar(hf,Ce,t.redrawText.bind(t)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=Kc+" ol-layers";var i=t.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r.declutterLayers_=[],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M_(t,e)}(e,t),r=e,n=[{key:"dispatchRenderEvent",value:function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new Uu(t,void 0,e);r.dispatchEvent(n)}}},{key:"disposeInternal",value:function(){ur(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),C_(j_(e.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ki,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),r=t.viewState;this.children_.length=0;var n=this.declutterLayers_;n.length=0;for(var i=null,o=0,a=e.length;o<a;++o){var s=e[o];t.layerIndex=o;var u=s.layer,l=u.getSourceState();if(!du(s,r)||"ready"!=l&&"undefined"!=l)u.unrender();else{var c=u.render(t,i);c&&(c!==i&&(this.children_.push(c),i=c),"getDeclutter"in u&&n.push(u))}}this.flushDeclutterItems(t),function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"flushDeclutterItems",value:function(t){for(var e=this.declutterLayers_,r=e.length-1;r>=0;--r)e[r].renderDeclutter(t);e.length=0}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(S_);const R_=T_;function I_(t){return I_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I_(t)}function L_(t,e,r){return e=D_(e),function(t,e){if(e&&("object"===I_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F_()?Reflect.construct(e,r||[],D_(t).constructor):e.apply(t,r))}function F_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(F_=function(){return!!t})()}function D_(t){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D_(t)}function B_(t,e){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B_(t,e)}var N_=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=L_(this,e,[t])).map=r,i.frameState=void 0!==n?n:null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B_(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Pe);const z_=N_;function G_(t){return G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G_(t)}function U_(t){var e=function(t,e){if("object"!=G_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=G_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G_(e)?e:String(e)}function q_(t,e,r){return e=Z_(e),function(t,e){if(e&&("object"===G_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,W_()?Reflect.construct(e,r||[],Z_(t).constructor):e.apply(t,r))}function W_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(W_=function(){return!!t})()}function V_(){return V_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z_(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},V_.apply(this,arguments)}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z_(t)}function Y_(t,e){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y_(t,e)}var X_=function(t){function e(t,r,n,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=q_(this,e,[t,r,o])).originalEvent=n,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s.activePointers=a,s}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}(e,t),r=e,(n=[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){V_(Z_(e.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){V_(Z_(e.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(z_);const H_=X_,K_={SINGLECLICK:"singleclick",CLICK:er,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},J_="pointerdown";function $_(t){return $_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$_(t)}function Q_(t){var e=function(t,e){if("object"!=$_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$_(e)?e:String(e)}function tw(t,e,r){return e=iw(e),function(t,e){if(e&&("object"===$_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rw(t)}(t,ew()?Reflect.construct(e,r||[],iw(t).constructor):e.apply(t,r))}function ew(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ew=function(){return!!t})()}function rw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nw(){return nw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iw(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},nw.apply(this,arguments)}function iw(t){return iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iw(t)}function ow(t,e){return ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ow(t,e)}var aw=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tw(this,e,[t])).map_=t,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=void 0===r?1:r,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=[],n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=ar(i,J_,n.handlePointerDown_,rw(n)),n.originalPointerMoveEvent_,n.relayedListenerKey_=ar(i,"pointermove",n.relayMoveEvent_,rw(n)),n.boundHandleTouchMove_=n.handleTouchMove_.bind(rw(n)),n.element_.addEventListener(ir,n.boundHandleTouchMove_,!!ha&&{passive:!1}),n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ow(t,e)}(e,t),r=e,(n=[{key:"emulateClick_",value:function(t){var e=this,r=new H_(K_.CLICK,this.map_,t);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new H_(K_.DBLCLICK,this.map_,t),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout((function(){e.clickTimeoutId_=void 0;var r=new H_(K_.SINGLECLICK,e.map_,t);e.dispatchEvent(r)}),250)}},{key:"updateActivePointers_",value:function(t){var e=t,r=e.pointerId;if(e.type==K_.POINTERUP||e.type==K_.POINTERCANCEL){for(var n in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else e.type!=K_.POINTERDOWN&&e.type!=K_.POINTERMOVE||(this.trackedTouches_[r]=e);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(t){this.updateActivePointers_(t);var e=new H_(K_.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(ur),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(t){return 0===t.button}},{key:"handlePointerDown_",value:function(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);var e=new H_(K_.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ar(r,K_.POINTERMOVE,this.handlePointerMove_,this),ar(r,K_.POINTERUP,this.handlePointerUp_,this),ar(this.element_,K_.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(ar(this.element_.getRootNode(),K_.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;var e=new H_(K_.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}},{key:"relayMoveEvent_",value:function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new H_(K_.POINTERMOVE,this.map_,t,e))}},{key:"handleTouchMove_",value:function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}},{key:"isMoving_",value:function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&(ur(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ir,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ur(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ur),this.dragListenerKeys_.length=0,this.element_=null,nw(iw(e.prototype),"disposeInternal",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q_(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}($e);const sw=aw,uw="postrender",lw="loadstart",cw="loadend",fw="layergroup",hw="size",pw="target",dw="view";function yw(t){return yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(t)}function vw(t){var e=function(t,e){if("object"!=yw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yw(e)?e:String(e)}var gw=1/0;function mw(t){return mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mw(t)}function bw(t){var e=function(t,e){if("object"!=mw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mw(e)?e:String(e)}function _w(t,e,r){return e=kw(e),function(t,e){if(e&&("object"===mw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xw(t)}(t,ww()?Reflect.construct(e,r||[],kw(t).constructor):e.apply(t,r))}function ww(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ww=function(){return!!t})()}function xw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sw(){return Sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kw(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Sw.apply(this,arguments)}function kw(t){return kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kw(t)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ow(t,e)}const Ew=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_w(this,e,[function(e){return t.apply(null,e)},function(t){return t[0].getKey()}])).boundHandleTileChange_=n.handleTileChange.bind(xw(n)),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}(e,t),r=e,(n=[{key:"enqueue",value:function(t){var r=Sw(kw(e.prototype),"enqueue",this).call(this,t);return r&&t[0].addEventListener(Qe,this.boundHandleTileChange_),r}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var e=t.target,r=e.getState();if(r===Pl.LOADED||r===Pl.ERROR||r===Pl.EMPTY){r!==Pl.ERROR&&e.removeEventListener(Qe,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==Pl.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.priorityFunction_=e,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var e,r;return e=t,(r=[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,qe(this.queuedElements_)}},{key:"dequeue",value:function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r}},{key:"enqueue",value:function(t){qr(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");var e=this.priorityFunction_(t);return e!=gw&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(t){return 2*t+1}},{key:"getRightChildIndex_",value:function(t){return 2*t+2}},{key:"getParentIndex_",value:function(t){return t-1>>1}},{key:"heapify_",value:function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(t){return t in this.queuedElements_}},{key:"isQueued",value:function(t){return this.isKeyQueued(this.keyFunction_(t))}},{key:"siftUp_",value:function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=i,r[t]=o,this.siftDown_(a,t)}},{key:"siftDown_",value:function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o}},{key:"reprioritize",value:function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==gw?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vw(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Aw(t){return Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aw(t)}function Pw(t){var e=function(t,e){if("object"!=Aw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Aw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Aw(e)?e:String(e)}function Cw(t,e,r){return e=Tw(e),function(t,e){if(e&&("object"===Aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jw()?Reflect.construct(e,r||[],Tw(t).constructor):e.apply(t,r))}function jw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jw=function(){return!!t})()}function Mw(){return Mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tw(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Mw.apply(this,arguments)}function Tw(t){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tw(t)}function Rw(t,e){return Rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rw(t,e)}var Iw=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Cw(this,e);var n=t.element;return!n||t.target||n.style.pointerEvents||(n.style.pointerEvents="auto"),r.element=n||null,r.target_=null,r.map_=null,r.listenerKeys=[],t.render&&(r.render=t.render),t.target&&r.setTarget(t.target),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rw(t,e)}(e,t),r=e,n=[{key:"disposeInternal",value:function(){yl(this.element),Mw(Tw(e.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(t){this.map_&&yl(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)ur(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==ze&&this.listenerKeys.push(ar(t,uw,this.render,this)),t.render())}},{key:"render",value:function(t){}},{key:"setTarget",value:function(t){this.target_="string"==typeof t?document.getElementById(t):t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const Lw=Iw;function Fw(t){return Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fw(t)}function Dw(t){var e=function(t,e){if("object"!=Fw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fw(e)?e:String(e)}function Bw(t,e,r){return e=zw(e),function(t,e){if(e&&("object"===Fw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gw(t)}(t,Nw()?Reflect.construct(e,r||[],zw(t).constructor):e.apply(t,r))}function Nw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nw=function(){return!!t})()}function zw(t){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zw(t)}function Gw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uw(t,e){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uw(t,e)}var qw=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=Bw(this,e,[{element:document.createElement("div"),render:t.render,target:t.target}])).ulElement_=document.createElement("ul"),r.collapsed_=void 0===t.collapsed||t.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==t.collapsible,r.collapsible_=void 0===t.collapsible||t.collapsible,r.collapsible_||(r.collapsed_=!1);var n=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",o=void 0!==t.expandClassName?t.expandClassName:n+"-expand",a=void 0!==t.collapseLabel?t.collapseLabel:"›",s=void 0!==t.collapseClassName?t.collapseClassName:n+"-collapse";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a,r.collapseLabel_.className=s):r.collapseLabel_=a;var u=void 0!==t.label?t.label:"i";"string"==typeof u?(r.label_=document.createElement("span"),r.label_.textContent=u,r.label_.className=o):r.label_=u;var l=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=i,r.toggleButton_.appendChild(l),r.toggleButton_.addEventListener(er,r.handleClick_.bind(Gw(r)),!1);var c=n+" "+Kc+" "+Jc+(r.collapsed_&&r.collapsible_?" "+$c:"")+(r.collapsible_?"":" ol-uncollapsible"),f=r.element;return f.className=c,f.appendChild(r.toggleButton_),f.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uw(t,e)}(e,t),r=e,(n=[{key:"collectSourceAttributions_",value:function(t){var e=Array.from(new Set(this.getMap().getAllLayers().flatMap((function(e){return e.getAttributions(t)})))),r=!this.getMap().getAllLayers().some((function(t){return t.getSource()&&!1===t.getSource().getAttributionsCollapsible()}));return this.overrideCollapsible_||this.setCollapsible(r),e}},{key:"updateElement_",value:function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!De(e,this.renderedAttributions_)){vl(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle($c),this.collapsed_?dl(this.collapseLabel_,this.label_):dl(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(t){this.updateElement_(t.frameState)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Lw);const Ww=qw;function Vw(t){return Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vw(t)}function Zw(t){var e=function(t,e){if("object"!=Vw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vw(e)?e:String(e)}function Yw(t,e,r){return e=Hw(e),function(t,e){if(e&&("object"===Vw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kw(t)}(t,Xw()?Reflect.construct(e,r||[],Hw(t).constructor):e.apply(t,r))}function Xw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xw=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hw(t)}function Kw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jw(t,e){return Jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jw(t,e)}var $w=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},r=Yw(this,e,[{element:document.createElement("div"),render:t.render,target:t.target}]);var n=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧",o=void 0!==t.compassClassName?t.compassClassName:"ol-compass";r.label_=null,"string"==typeof i?(r.label_=document.createElement("span"),r.label_.className=o,r.label_.textContent=i):(r.label_=i,r.label_.classList.add(o));var a=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(er,r.handleClick_.bind(Kw(r)),!1);var u=n+" "+Kc+" "+Jc,l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=t.resetNorth?t.resetNorth:void 0,r.duration_=void 0!==t.duration?t.duration:250,r.autoHide_=void 0===t.autoHide||t.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(Hc),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jw(t,e)}(e,t),r=e,n=[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:ea}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(Hc);i||0!==r?i&&0!==r&&this.element.classList.remove(Hc):this.element.classList.add(Hc)}this.label_.style.transform=n}this.rotation_=r}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zw(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Lw);const Qw=$w;function tx(t){return tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tx(t)}function ex(t){var e=function(t,e){if("object"!=tx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tx(e)?e:String(e)}function rx(t,e,r){return e=ix(e),function(t,e){if(e&&("object"===tx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ox(t)}(t,nx()?Reflect.construct(e,r||[],ix(t).constructor):e.apply(t,r))}function nx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nx=function(){return!!t})()}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ix(t)}function ox(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ax(t,e){return ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ax(t,e)}var sx=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},r=rx(this,e,[{element:document.createElement("div"),target:t.target}]);var n=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,o=void 0!==t.zoomInClassName?t.zoomInClassName:n+"-in",a=void 0!==t.zoomOutClassName?t.zoomOutClassName:n+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",u=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",l=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",c=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=o,f.setAttribute("type","button"),f.title=l,f.appendChild("string"==typeof s?document.createTextNode(s):s),f.addEventListener(er,r.handleClick_.bind(ox(r),i),!1);var h=document.createElement("button");h.className=a,h.setAttribute("type","button"),h.title=c,h.appendChild("string"==typeof u?document.createTextNode(u):u),h.addEventListener(er,r.handleClick_.bind(ox(r),-i),!1);var p=n+" "+Kc+" "+Jc,d=r.element;return d.className=p,d.appendChild(f),d.appendChild(h),r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ax(t,e)}(e,t),r=e,(n=[{key:"handleClick_",value:function(t,e){e.preventDefault(),this.zoomByDelta_(t)}},{key:"zoomByDelta_",value:function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:ea})):e.setZoom(n)}}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ex(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Lw);const ux=sx;function lx(t){t=t||{};var e=new On;return(void 0===t.zoom||t.zoom)&&e.push(new ux(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Qw(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Ww(t.attributionOptions)),e}const cx="active";function fx(t){return fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(t)}function hx(t){var e=function(t,e){if("object"!=fx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fx(e)?e:String(e)}function px(t,e,r){return e=yx(e),function(t,e){if(e&&("object"===fx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dx()?Reflect.construct(e,r||[],yx(t).constructor):e.apply(t,r))}function dx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dx=function(){return!!t})()}function yx(t){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yx(t)}function vx(t,e){return vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vx(t,e)}var gx=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=px(this,e)).on,r.once,r.un,t&&t.handleEvent&&(r.handleEvent=t.handleEvent),r.map_=null,r.setActive(!0),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vx(t,e)}(e,t),r=e,n=[{key:"getActive",value:function(){return this.get(cx)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(cx,t)}},{key:"setMap",value:function(t){this.map_=t}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hx(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);function mx(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:ea})}}const bx=gx;function _x(t){return _x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(t)}function wx(t){var e=function(t,e){if("object"!=_x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_x(e)?e:String(e)}function xx(t,e,r){return e=kx(e),function(t,e){if(e&&("object"===_x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sx()?Reflect.construct(e,r||[],kx(t).constructor):e.apply(t,r))}function Sx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sx=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kx(t)}function Ox(t,e){return Ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ox(t,e)}var Ex=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=xx(this,e)).delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ox(t,e)}(e,t),r=e,n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==K_.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;mx(n.getView(),o,i,this.duration_),r.preventDefault(),e=!0}return!e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wx(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bx);const Ax=Ex;function Px(t){return Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(t)}function Cx(t){var e=function(t,e){if("object"!=Px(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Px(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Px(e)?e:String(e)}function jx(t,e,r){return e=Tx(e),function(t,e){if(e&&("object"===Px(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mx()?Reflect.construct(e,r||[],Tx(t).constructor):e.apply(t,r))}function Mx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mx=function(){return!!t})()}function Tx(t){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tx(t)}function Rx(t,e){return Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rx(t,e)}var Ix=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=jx(this,e,[t=t||{}]),t.handleDownEvent&&(r.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(r.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(r.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(r.handleUpEvent=t.handleUpEvent),t.stopDown&&(r.stopDown=t.stopDown),r.handlingDownUpSequence=!1,r.targetPointers=[],r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rx(t,e)}(e,t),r=e,(n=[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(t){return!1}},{key:"handleDragEvent",value:function(t){}},{key:"handleEvent",value:function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==K_.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==K_.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==K_.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==K_.POINTERMOVE&&this.handleMoveEvent(t);return!e}},{key:"handleMoveEvent",value:function(t){}},{key:"handleUpEvent",value:function(t){return!1}},{key:"stopDown",value:function(t){return t}},{key:"updateTrackedPointers_",value:function(t){t.activePointers&&(this.targetPointers=t.activePointers)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cx(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bx);function Lx(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return{clientX:r/e,clientY:n/e}}const Fx=Ix;function Dx(t){var e=arguments;return function(t){for(var r=!0,n=0,i=e.length;n<i&&(r=r&&e[n](t));++n);return r}}var Bx=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Nx=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),r=t.map.getOwnerDocument().activeElement;return e.contains(r)}(t)},zx=Be,Gx=function(t){var e=t.originalEvent;return 0==e.button&&!(sa&&ua&&e.ctrlKey)},Ux=Ne,qx=function(t){return t.type==K_.SINGLECLICK},Wx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Vx=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zx=function(t){var e=t.originalEvent,r=e.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!e.target.isContentEditable},Yx=function(t){var e=t.originalEvent;return qr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},Xx=function(t){var e=t.originalEvent;return qr(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};function Hx(t){return Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(t)}function Kx(t){var e=function(t,e){if("object"!=Hx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hx(e)?e:String(e)}function Jx(t,e,r){return e=Qx(e),function(t,e){if(e&&("object"===Hx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$x()?Reflect.construct(e,r||[],Qx(t).constructor):e.apply(t,r))}function $x(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($x=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qx(t)}function tS(t,e){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tS(t,e)}var eS=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=Jx(this,e,[{stopDown:Ne}])).kinetic_=t.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var n=t.condition?t.condition:Dx(Wx,Xx);return r.condition_=t.onFocusOnly?Dx(Nx,n):n,r.noKinetic_=!1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tS(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());var r=this.targetPointers,n=e.getEventPixel(Lx(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],o=t.map.getView();uo(i,o.getResolution()),so(i,o.getRotation()),o.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:ea})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kx(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fx);const rS=eS;function nS(t){return nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nS(t)}function iS(t){var e=function(t,e){if("object"!=nS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nS(e)?e:String(e)}function oS(t,e,r){return e=sS(e),function(t,e){if(e&&("object"===nS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aS()?Reflect.construct(e,r||[],sS(t).constructor):e.apply(t,r))}function aS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aS=function(){return!!t})()}function sS(t){return sS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sS(t)}function uS(t,e){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uS(t,e)}var lS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=oS(this,e,[{stopDown:Ne}])).condition_=t.condition?t.condition:Bx,r.lastAngle_=void 0,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uS(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){if(Yx(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==$o){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}}},{key:"handleUpEvent",value:function(t){return!Yx(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!(!Yx(t)||!Gx(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fx);const cS=lS;function fS(t){return fS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fS(t)}function hS(t){var e=function(t,e){if("object"!=fS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fS(e)?e:String(e)}function pS(t,e,r){return e=yS(e),function(t,e){if(e&&("object"===fS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dS()?Reflect.construct(e,r||[],yS(t).constructor):e.apply(t,r))}function dS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dS=function(){return!!t})()}function yS(t){return yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yS(t)}function vS(t,e){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vS(t,e)}var gS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pS(this,e)).geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+t,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vS(t,e)}(e,t),r=e,n=[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var t=this.startPixel_,e=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+r,n.top=Math.min(t[1],e[1])+r,n.width=Math.abs(e[0]-t[0])+r,n.height=Math.abs(e[1]-t[1])+r}},{key:"setMap",value:function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new Ys([r])}},{key:"getGeometry",value:function(){return this.geometry_}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Te);const mS=gS;function bS(t){return bS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bS(t)}function _S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xS(n.key),n)}}function wS(t,e,r){return e&&_S(t.prototype,e),r&&_S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xS(t){var e=function(t,e){if("object"!=bS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bS(e)?e:String(e)}function SS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kS(t,e,r){return e=ES(e),function(t,e){if(e&&("object"===bS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OS()?Reflect.construct(e,r||[],ES(t).constructor):e.apply(t,r))}function OS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OS=function(){return!!t})()}function ES(t){return ES=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ES(t)}function AS(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PS(t,e)}var CS=function(t){function e(t,r,n){var i;return SS(this,e),(i=kS(this,e,[t])).coordinate=r,i.mapBrowserEvent=n,i}return AS(e,t),wS(e)}(Pe),jS=function(t){function e(t){var r;return SS(this,e),(r=kS(this,e)).on,r.once,r.un,t=t||{},r.box_=new mS(t.className||"ol-dragbox"),r.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(r.onBoxEnd=t.onBoxEnd),r.startPixel_=null,r.condition_=t.condition?t.condition:Gx,r.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:r.defaultBoxEndCondition,r}return AS(e,t),wS(e,[{key:"defaultBoxEndCondition",value:function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new CS("boxdrag",t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new CS(e?"boxend":"boxcancel",t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new CS("boxstart",t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),e}(Fx);function MS(t){return MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MS(t)}function TS(t){var e=function(t,e){if("object"!=MS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=MS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==MS(e)?e:String(e)}function RS(t,e,r){return e=LS(e),function(t,e){if(e&&("object"===MS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IS()?Reflect.construct(e,r||[],LS(t).constructor):e.apply(t,r))}function IS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IS=function(){return!!t})()}function LS(t){return LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LS(t)}function FS(t,e){return FS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FS(t,e)}var DS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=RS(this,e,[{condition:(t=t||{}).condition?t.condition:Vx,className:t.className||"ol-dragzoom",minArea:t.minArea}])).duration_=void 0!==t.duration?t.duration:200,r.out_=void 0!==t.out&&t.out,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FS(t,e)}(e,t),r=e,(n=[{key:"onBoxEnd",value:function(t){var e=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=e.rotatedExtentForGeometry(r),i=e.getResolutionForExtentInternal(n),o=e.getResolution()/i;(r=r.clone()).scale(o*o)}e.fitInternal(r,{duration:this.duration_,easing:ea})}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(jS);const BS=DS,NS="ArrowLeft",zS="ArrowRight",GS="ArrowDown";function US(t){return US="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},US(t)}function qS(t){var e=function(t,e){if("object"!=US(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=US(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==US(e)?e:String(e)}function WS(t,e,r){return e=ZS(e),function(t,e){if(e&&("object"===US(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,VS()?Reflect.construct(e,r||[],ZS(t).constructor):e.apply(t,r))}function VS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(VS=function(){return!!t})()}function ZS(t){return ZS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZS(t)}function YS(t,e){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},YS(t,e)}var XS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=WS(this,e)).defaultCondition_=function(t){return Wx(t)&&Zx(t)},r.condition_=void 0!==t.condition?t.condition:r.defaultCondition_,r.duration_=void 0!==t.duration?t.duration:100,r.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YS(t,e)}(e,t),r=e,(n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==rr){var r=t.originalEvent,n=r.key;if(this.condition_(t)&&(n==GS||n==NS||n==zS||"ArrowUp"==n)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,a=0,s=0;n==GS?s=-o:n==NS?a=-o:n==zS?a=o:s=o;var u=[a,s];so(u,i.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:na,center:t.getConstrainedCenter(i)})}}(i,u,this.duration_),r.preventDefault(),e=!0}}return!e}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bx);const HS=XS;function KS(t){return KS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KS(t)}function JS(t){var e=function(t,e){if("object"!=KS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=KS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==KS(e)?e:String(e)}function $S(t,e,r){return e=tk(e),function(t,e){if(e&&("object"===KS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,QS()?Reflect.construct(e,r||[],tk(t).constructor):e.apply(t,r))}function QS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(QS=function(){return!!t})()}function tk(t){return tk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tk(t)}function ek(t,e){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ek(t,e)}var rk=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=$S(this,e)).condition_=t.condition?t.condition:function(t){return!function(t){var e=t.originalEvent;return ua?e.metaKey:e.ctrlKey}(t)&&Zx(t)},r.delta_=t.delta?t.delta:1,r.duration_=void 0!==t.duration?t.duration:100,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ek(t,e)}(e,t),r=e,n=[{key:"handleEvent",value:function(t){var e=!1;if(t.type==rr||t.type==nr){var r=t.originalEvent,n=r.key;if(this.condition_(t)&&("+"===n||"-"===n)){var i=t.map,o="+"===n?this.delta_:-this.delta_;mx(i.getView(),o,void 0,this.duration_),r.preventDefault(),e=!0}}return!e}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JS(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bx);const nk=rk;function ik(t){return ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ik(t)}function ok(t){var e=function(t,e){if("object"!=ik(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ik(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ik(e)?e:String(e)}const ak=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.decay_=e,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}var e,r;return e=t,(r=[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,e){this.points_.push(t,e,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ok(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sk(t){return sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sk(t)}function uk(t){var e=function(t,e){if("object"!=sk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sk(e)?e:String(e)}function lk(t,e,r){return e=fk(e),function(t,e){if(e&&("object"===sk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ck()?Reflect.construct(e,r||[],fk(t).constructor):e.apply(t,r))}function ck(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ck=function(){return!!t})()}function fk(t){return fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fk(t)}function hk(t,e){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hk(t,e)}var pk=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=lk(this,e,[t=t||{}])).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,r.duration_=void 0!==t.duration?t.duration:250,r.timeout_=void 0!==t.timeout?t.timeout:80,r.useAnchor_=void 0===t.useAnchor||t.useAnchor,r.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var n=t.condition?t.condition:zx;return r.condition_=t.onFocusOnly?Dx(Nx,n):n,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hk(t,e)}(e,t),r=e,n=[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(t){if(!this.condition_(t))return!0;if(t.type!==or)return!0;var e,r=t.map,n=t.originalEvent;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==or&&(e=n.deltaY,aa&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=la),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?"trackpad":"wheel");var o=r.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1}},{key:"handleWheelZoom_",value:function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-Wr(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),mx(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(bx);const dk=pk;function yk(t){return yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yk(t)}function vk(t){var e=function(t,e){if("object"!=yk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yk(e)?e:String(e)}function gk(t,e,r){return e=bk(e),function(t,e){if(e&&("object"===yk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mk()?Reflect.construct(e,r||[],bk(t).constructor):e.apply(t,r))}function mk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mk=function(){return!!t})()}function bk(t){return bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bk(t)}function _k(t,e){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_k(t,e)}var wk=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t=t||{};return n.stopDown||(n.stopDown=Ne),(r=gk(this,e,[n])).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==t.threshold?t.threshold:.3,r.duration_=void 0!==t.duration?t.duration:250,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_k(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();s.getConstraints().rotation!==$o&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Lx(this.targetPointers))),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_)))}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fx);const xk=wk;function Sk(t){return Sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sk(t)}function kk(t){var e=function(t,e){if("object"!=Sk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sk(e)?e:String(e)}function Ok(t,e,r){return e=Ak(e),function(t,e){if(e&&("object"===Sk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ek()?Reflect.construct(e,r||[],Ak(t).constructor):e.apply(t,r))}function Ek(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ek=function(){return!!t})()}function Ak(t){return Ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ak(t)}function Pk(t,e){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pk(t,e)}var Ck=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t=t||{};return n.stopDown||(n.stopDown=Ne),(r=Ok(this,e,[n])).anchor_=null,r.duration_=void 0!==t.duration?t.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pk(t,e)}(e,t),r=e,n=[{key:"handleDragEvent",value:function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Lx(this.targetPointers))),s.render(),u.adjustResolutionInternal(e,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fx);const jk=Ck;function Mk(t){return Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mk(t)}function Tk(t){var e=function(t,e){if("object"!=Mk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mk(e)?e:String(e)}function Rk(t,e,r){return e=Dk(e),function(t,e){if(e&&("object"===Mk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lk(t)}(t,Ik()?Reflect.construct(e,r||[],Dk(t).constructor):e.apply(t,r))}function Ik(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ik=function(){return!!t})()}function Lk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fk(){return Fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dk(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},Fk.apply(this,arguments)}function Dk(t){return Dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dk(t)}function Bk(t,e){return Bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bk(t,e)}function Nk(t){t instanceof yu?t.setMapInternal(null):t instanceof wi&&t.getLayers().forEach(Nk)}function zk(t,e){if(t instanceof yu)t.setMapInternal(e);else if(t instanceof wi)for(var r=t.getLayers().getArray(),n=0,i=r.length;n<i;++n)zk(r[n],e)}var Gk=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},(r=Rk(this,e)).on,r.once,r.un;var n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new wi({layers:t.layers});return o[fw]=a,o[pw]=t.target,o[dw]=t.view instanceof ou?t.view:new ou,void 0!==t.controls&&(Array.isArray(t.controls)?r=new On(t.controls.slice()):(qr("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new On(t.interactions.slice()):(qr("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new On(t.overlays.slice()):(qr("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),i=t.overlays):i=new On,{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(t);r.renderComplete_,r.loaded_=!0,r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(Lk(r)),r.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,r.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:la,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=r.animationDelay_.bind(Lk(r)),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=t.moveTolerance,r.keyboardEventTarget_=n.keyboardEventTarget,r.targetChangeHandlerKeys_=null,r.targetElement_=null,r.resizeObserver_=new ResizeObserver((function(){return r.updateSize()})),r.controls=n.controls||lx(),r.interactions=n.interactions||function(t){t=t||{};var e=new On,r=new ak(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new cS),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Ax({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new rS({onFocusOnly:t.onFocusOnly,kinetic:r})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new xk),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new jk({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new HS),e.push(new nk({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new dk({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new BS({duration:t.zoomDuration})),e}({onFocusOnly:!0}),r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new Ew(r.getTilePriority.bind(Lk(r)),r.handleTileChange_.bind(Lk(r))),r.addChangeListener(fw,r.handleLayerGroupChanged_),r.addChangeListener(dw,r.handleViewChanged_),r.addChangeListener(hw,r.handleSizeChanged_),r.addChangeListener(pw,r.handleTargetChanged_),r.setProperties(n.values);var i=Lk(r);return!t.view||t.view instanceof ou||t.view.then((function(t){i.setView(new ou(t))})),r.controls.addEventListener(cn,(function(t){t.element.setMap(Lk(r))})),r.controls.addEventListener(fn,(function(t){t.element.setMap(null)})),r.interactions.addEventListener(cn,(function(t){t.element.setMap(Lk(r))})),r.interactions.addEventListener(fn,(function(t){t.element.setMap(null)})),r.overlays_.addEventListener(cn,(function(t){r.addOverlayInternal_(t.element)})),r.overlays_.addEventListener(fn,(function(t){var e=t.element.getId();void 0!==e&&delete r.overlayIdIndex_[e.toString()],t.element.setMap(null)})),r.controls.forEach((function(t){t.setMap(Lk(r))})),r.interactions.forEach((function(t){t.setMap(Lk(r))})),r.overlays_.forEach(r.addOverlayInternal_.bind(Lk(r))),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bk(t,e)}(e,t),r=e,n=[{key:"addControl",value:function(t){this.getControls().push(t)}},{key:"addInteraction",value:function(t){this.getInteractions().push(t)}},{key:"addLayer",value:function(t){this.getLayerGroup().getLayers().push(t)}},{key:"handleLayerAdd_",value:function(t){zk(t.layer,this)}},{key:"addOverlay",value:function(t){this.getOverlays().push(t)}},{key:"addOverlayInternal_",value:function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),Fk(Dk(e.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(t,e,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:Be,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}}},{key:"getFeaturesAtPixel",value:function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r}},{key:"getAllLayers",value:function(){var t=[];return function e(r){r.forEach((function(r){r instanceof wi?e(r.getLayers()):t.push(r)}))}(this.getLayers()),t}},{key:"hasFeatureAtPixel",value:function(t,e){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Be,i=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)}},{key:"getEventCoordinate",value:function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}},{key:"getEventCoordinateInternal",value:function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}},{key:"getEventPixel",value:function(t){var e=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=e.width/r[0],i=e.height/r[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/n,(o.clientY-e.top)/i]}},{key:"getTarget",value:function(){return this.get(pw)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(t){return Go(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(t){var e=this.frameState_;return e?ga(e.pixelToCoordinateTransform,t.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(fw)}},{key:"setLayers",value:function(t){var e=this.getLayerGroup();if(t instanceof On)e.setLayers(t);else{var r=e.getLayers();r.clear(),r.extend(t)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var o=n.layer.getSource();if(o&&o.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(t){var e=Uo(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}},{key:"getPixelFromCoordinateInternal",value:function(t){var e=this.frameState_;return e?ga(e.coordinateToPixelTransform,t.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(hw)}},{key:"getView",value:function(){return this.get(dw)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var t=this.getTargetElement();return t?t.ownerDocument:document}},{key:"getTilePriority",value:function(t,e,r,n){return function(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return gw;if(!t.wantedTiles[r][e.getKey()])return gw;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,r,n)}},{key:"handleBrowserEvent",value:function(t,e){e=e||t.type;var r=new H_(e,this,t);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(t){if(this.frameState_){var e=t.originalEvent,r=e.type;if(r===J_||r===or||r===rr){var n=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===n?n.documentElement:i).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var u=a[s];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(t)||t.propagationStopped))break}}}},{key:"handlePostRender",value:function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[0]||i[1]){var o=Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Oi)&&this.renderer_.dispatchRenderEvent(Oi,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new z_(cw,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new z_(lw,this,t))));for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)ur(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(tr,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(or,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,yl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);var r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}var n=this.getTarget(),i="string"==typeof n?document.getElementById(n):n;if(this.targetElement_=i,i){for(var o in i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new R_(this)),this.mapBrowserEventHandler_=new sw(this,this.moveTolerance_),K_)this.mapBrowserEventHandler_.addEventListener(K_[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(tr,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(or,this.boundHandleBrowserEvent_,!!ha&&{passive:!1});var a=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[ar(a,rr,this.handleBrowserEvent,this),ar(a,nr,this.handleBrowserEvent,this)];var s=i.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(i)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&(ur(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ur(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ar(t,Ce,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ar(t,Qe,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ur),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new mi("addlayer",t)),this.layerGroupPropertyListenerKeys_=[ar(t,Ce,this.render,this),ar(t,Qe,this.render,this),ar(t,"addlayer",this.handleLayerAdd_,this),ar(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"flushDeclutterItems",value:function(){var t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}},{key:"removeControl",value:function(t){return this.getControls().remove(t)}},{key:"removeInteraction",value:function(t){return this.getInteractions().remove(t)}},{key:"removeLayer",value:function(t){return this.getLayerGroup().getLayers().remove(t)}},{key:"handleLayerRemove_",value:function(t){Nk(t.layer)}},{key:"removeOverlay",value:function(t){return this.getOverlays().remove(t)}},{key:"renderFrame_",value:function(t){var e=this,r=this.getSize(),n=this.getView(),i=this.frameState_,o=null;if(void 0!==r&&xc(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Jn(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:_r(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var u=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=Jn(s.nextCenter,s.nextResolution,u,r)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!oi(this.previousExtent_)&&!zn(o.extent,this.previousExtent_))&&(this.dispatchEvent(new z_("movestart",this,i)),this.previousExtent_=Dn(this.previousExtent_)),this.previousExtent_&&!o.viewHints[0]&&!o.viewHints[1]&&!zn(o.extent,this.previousExtent_)&&(this.dispatchEvent(new z_("moveend",this,o)),jn(o.extent,this.previousExtent_))),this.dispatchEvent(new z_(uw,this,o)),this.renderComplete_=this.hasListener(lw)||this.hasListener(cw)||this.hasListener(Oi)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))}},{key:"setLayerGroup",value:function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new mi("removelayer",e)),this.set(fw,t)}},{key:"setSize",value:function(t){this.set(hw,t)}},{key:"setTarget",value:function(t){this.set(pw,t)}},{key:"setView",value:function(t){if(!t||t instanceof ou)this.set(dw,t);else{this.set(dw,new ou);var e=this;t.then((function(t){e.setView(new ou(t))}))}}},{key:"updateSize",value:function(){var t=this.getTargetElement(),e=void 0;if(t){var r=getComputedStyle(t),n=t.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=t.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||!xc(e=[n,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&mo("No map visible because the map container's width or height are 0.")}var o=this.getSize();!e||o&&De(e,o)||(this.setSize(e),this.updateViewportSize_(e))}},{key:"updateViewportSize_",value:function(t){var e=this.getView();e&&e.setViewportSize(t)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const Uk=Gk;function qk(t){return qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qk(t)}function Wk(t){var e=function(t,e){if("object"!=qk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qk(e)?e:String(e)}function Vk(t,e,r){return e=Yk(e),function(t,e){if(e&&("object"===qk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zk()?Reflect.construct(e,r||[],Yk(t).constructor):e.apply(t,r))}function Zk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zk=function(){return!!t})()}function Yk(t){return Yk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yk(t)}function Xk(t,e){return Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xk(t,e)}const Hk=function(t){function e(t,r,n,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Vk(this,e,[t,r,n,void 0!==o?0:2])).loader_=void 0!==o?o:null,a.canvas_=i,a.error_=null,a}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xk(t,e)}(e,t),r=e,(n=[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=3):this.state=2,this.changed()}},{key:"load",value:function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ql);function Kk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jk(t){return Array.isArray(t)?Math.min.apply(Math,function(t){if(Array.isArray(t))return Kk(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return Kk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kk(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t;var e}function $k(t){return $k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$k(t)}function Qk(t){var e=function(t,e){if("object"!=$k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$k(e)?e:String(e)}function tO(t,e,r){return e=nO(e),function(t,e){if(e&&("object"===$k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eO()?Reflect.construct(e,r||[],nO(t).constructor):e.apply(t,r))}function eO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eO=function(){return!!t})()}function rO(){return rO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nO(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},rO.apply(this,arguments)}function nO(t){return nO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nO(t)}function iO(t,e){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iO(t,e)}var oO=function(t){function e(t,r,n,i,o,a,s){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=t.getExtent();l&&t.canWrapX()&&((l=l.slice())[0]=-1/0,l[2]=1/0);var c=r.getExtent();c&&r.canWrapX()&&((c=c.slice())[0]=-1/0,c[2]=1/0);var f=c?ti(n,c):n,h=oc(t,r,Hn(f),i),p=new tc(t,r,f,l,.5*h,i),d=p.calculateSourceExtent(),y=oi(d)?null:a(d,h,o),v=y?0:4,g=y?y.getPixelRatio():1;return(u=tO(this,e,[n,i,g,v])).targetProj_=r,u.maxSourceExtent_=l,u.triangulation_=p,u.targetResolution_=i,u.targetExtent_=n,u.sourceImage_=y,u.sourcePixelRatio_=g,u.interpolate_=s,u.canvas_=null,u.sourceListenerKey_=null,u}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iO(t,e)}(e,t),r=e,(n=[{key:"disposeInternal",value:function(){1==this.state&&this.unlistenSource_(),rO(nO(e.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var t=this.sourceImage_.getState();if(2==t){var e=ni(this.targetExtent_)/this.targetResolution_,r=Qn(this.targetExtent_)/this.targetResolution_;this.canvas_=ac(e,r,this.sourcePixelRatio_,Jk(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}},{key:"load",value:function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=ar(this.sourceImage_,Qe,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){ur(this.sourceListenerKey_),this.sourceListenerKey_=null}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qk(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ql);const aO=oO;function sO(t){return sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sO(t)}function uO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cO(n.key),n)}}function lO(t,e,r){return e&&uO(t.prototype,e),r&&uO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function cO(t){var e=function(t,e){if("object"!=sO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sO(e)?e:String(e)}function fO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hO(t,e,r){return e=dO(e),function(t,e){if(e&&("object"===sO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pO()?Reflect.construct(e,r||[],dO(t).constructor):e.apply(t,r))}function pO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pO=function(){return!!t})()}function dO(t){return dO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dO(t)}function yO(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vO(t,e)}function vO(t,e){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vO(t,e)}var gO=function(t){function e(t,r){var n;return fO(this,e),(n=hO(this,e,[t])).image=r,n}return yO(e,t),lO(e)}(Pe),mO=function(t){function e(t){var r;return fO(this,e),(r=hO(this,e,[{attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}])).on,r.once,r.un,r.loader=t.loader||null,r.resolutions_=void 0!==t.resolutions?t.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r.image=null,r.wantedExtent_,r.wantedResolution_,r.static_=!!t.loader&&0===t.loader.length,r.wantedProjection_=null,r}return yO(e,t),lO(e,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(t){this.resolutions_=t}},{key:"findNearestResolution",value:function(t){var e=this.getResolutions();return e&&(t=e[Ie(e,t,0)]),t}},{key:"getImage",value:function(t,e,r,n){var i=this,o=this.getProjection();if(!o||!n||Mo(o,n))return o&&(n=o),this.getImageInternal(t,e,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Mo(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&zn(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new aO(o,n,t,e,r,(function(t,e,r){return i.getImageInternal(t,e,r,o)}),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(t,e,r,n){if(this.loader){var i=function(t,e,r,n){var i=e/r,o=Hn(t),a=Qr(ni(t)/i,4),s=Qr(Qn(t)/i,4);return Jn(o,i,0,[a+2*Qr(0*a/2,4),s+2*Qr(0*s/2,4)])}(t,e,r),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&Rn(this.wantedExtent_,i)||Rn(this.image.getExtent(),i))&&(this.wantedResolution_&&Jk(this.wantedResolution_)===o||Jk(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=i,this.wantedResolution_=o,this.image=new ql(i,o,r,this.loader),this.image.addEventListener(Qe,this.handleImageChange.bind(this))}return this.image}},{key:"handleImageChange",value:function(t){var e,r=t.target;switch(r.getState()){case 1:this.loading=!0,e="imageloadstart";break;case 2:this.loading=!1,e="imageloadend";break;case 3:this.loading=!1,e="imageloaderror";break;default:return}this.hasListener(e)&&this.dispatchEvent(new gO(e,r))}}]),e}(Hv);const bO=mO;function _O(t){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_O(t)}function wO(){return wO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PO(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},wO.apply(this,arguments)}function xO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OO(n.key),n)}}function kO(t,e,r){return e&&SO(t.prototype,e),r&&SO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OO(t){var e=function(t,e){if("object"!=_O(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_O(e)?e:String(e)}function EO(t,e,r){return e=PO(e),function(t,e){if(e&&("object"===_O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return CO(t)}(t,AO()?Reflect.construct(e,r||[],PO(t).constructor):e.apply(t,r))}function AO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AO=function(){return!!t})()}function PO(t){return PO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PO(t)}function CO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jO(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MO(t,e)}function MO(t,e){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MO(t,e)}var TO,RO=!0;try{new ImageData(10,10)}catch(t){RO=!1}function IO(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n=e.buffers,i=e.meta,o=e.imageOps,a=e.width,s=e.height,u=n.length,l=n[0].byteLength;if(o){for(var c=new Array(u),f=0;f<u;++f)c[f]=r(new Uint8ClampedArray(n[f]),a,s);return t(c,i).data.buffer}for(var h=new Uint8ClampedArray(l),p=new Array(u),d=new Array(u),y=0;y<u;++y)p[y]=new Uint8ClampedArray(n[y]),d[y]=[0,0,0,0];for(var v=0;v<l;v+=4){for(var g=0;g<u;++g){var m=p[g];d[g][0]=m[v],d[g][1]=m[v+1],d[g][2]=m[v+2],d[g][3]=m[v+3]}var b=t(d,i);h[v]=b[0],h[v+1]=b[1],h[v+2]=b[2],h[v+3]=b[3]}return h.buffer}}function LO(t,e){var r=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+IO.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(r.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",e),n}var FO=function(t){function e(t){var r,n;xO(this,e),(r=EO(this,e))._imageOps=!!t.imageOps,n=0===t.threads?0:r._imageOps?1:t.threads||1;var i=new Array(n);if(n)for(var o=0;o<n;++o)i[o]=LO(t,r._onWorkerMessage.bind(CO(r),o));else i[0]=function(t,e){var r=IO(t.operation),n=!1;return{postMessage:function(t){setTimeout((function(){n||e({data:{buffer:r(t),meta:t.meta}})}),0)},terminate:function(){n=!0}}}(t,r._onWorkerMessage.bind(CO(r),0));return r._workers=i,r._queue=[],r._maxQueueLength=t.queue||1/0,r._running=0,r._dataLookup={},r._job=null,r}return jO(e,t),kO(e,[{key:"process",value:function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var t=this._queue.shift();this._job=t;var e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1!==i)for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,f=n.length;c<f;++c)l.push(n[c].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}else this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n)}}},{key:"_onWorkerMessage",value:function(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var t,e,r=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var i=r.inputs[0].data.length;t=new Uint8ClampedArray(i),e=new Array(n);for(var o=4*Math.ceil(i/4/n),a=0;a<n;++a){var s=this._dataLookup[a].buffer,u=a*o;t.set(new Uint8ClampedArray(s),u),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},r.callback(null,function(t,e,r){if(RO)return new ImageData(t,e,r);TO||(TO=document.createElement("canvas").getContext("2d"));var n=TO.createImageData(e,r);return n.data.set(t),n}(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()}},{key:"disposeInternal",value:function(){for(var t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0}}]),e}(Te),DO=function(t){function e(t,r,n){var i;return xO(this,e),(i=EO(this,e,[t])).extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return jO(e,t),kO(e)}(Pe),BO=function(t){function e(t){var r;xO(this,e),(r=EO(this,e,[{projection:null}])).on,r.once,r.un,r.processor_=null,r.operationType_=void 0!==t.operationType?t.operationType:"pixel",r.threads_=void 0!==t.threads?t.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=(o=void 0,(i=t[n])instanceof Hv?i instanceof mg?o=new zc({source:i}):i instanceof bO&&(o=new n_({source:i})):o=i,o);var i,o;return r}(t.sources);for(var n,i=r.changed.bind(CO(r)),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(Qe,i);return r.useResolutions_=null!==t.resolutions,r.tileQueue_=new Ew((function(){return 1}),r.processSources_.bind(CO(r))),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:_r(CO(r)),renderTargets:{}},r.setAttributions((function(e){for(var r=[],n=0,i=t.sources.length;n<i;++n){var o=t.sources[n],a=o instanceof Hv?o:o.getSource();if(a){var s=a.getAttributions();if("function"==typeof s){var u=s(e);r.push.apply(r,u)}}}return 0!==r.length?r:null})),void 0!==t.operation&&r.setOperation(t.operation,t.lib),r}return jO(e,t),kO(e,[{key:"setOperation",value:function(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new FO({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(t,e,r){var n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);var i=Hn(t);n.size[0]=Math.ceil(ni(t)/e),n.size[1]=Math.ceil(Qn(t)/e),n.extent=[i[0]-n.size[0]*e/2,i[1]-n.size[1]*e/2,i[0]+n.size[0]*e/2,i[1]+n.size[1]*e/2],n.time=Date.now();var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n}},{key:"allSourcesReady_",value:function(){for(var t,e=!0,r=0,n=this.layers_.length;r<n;++r)if(!(t=this.layers_[r].getSource())||"ready"!==t.getState()){e=!1;break}return e}},{key:"getImage",value:function(t,e,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e);var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&zn(i.extent,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n,t.renderTargets={};var i=zO(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new DO("beforeoperations",t,o)),this.processor_.process(r,o,this.onWorkerComplete_.bind(this,t))}},{key:"onWorkerComplete_",value:function(t,e,r,n){if(!e&&r){var i,o=t.extent,a=t.viewState.resolution;a===this.requestedFrameState_.viewState.resolution&&zn(o,this.requestedFrameState_.extent)&&(this.renderedImageCanvas_?i=this.renderedImageCanvas_.getImage().getContext("2d"):(i=cl(Math.round(ni(o)/a),Math.round(Qn(o)/a)),this.renderedImageCanvas_=new Hk(o,a,1,i.canvas)),i.putImageData(r,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new DO("afteroperations",t,n)))}}},{key:"getResolutions",value:function(t){if(!this.useResolutions_)return null;var r=wO(PO(e.prototype),"getResolutions",this).call(this);if(!r)for(var n=0,i=this.layers_.length;n<i&&!(r=this.layers_[n].getSource().getResolutions(t));++n);return r}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),wO(PO(e.prototype),"disposeInternal",this).call(this)}}]),e}(bO);BO.prototype.dispose;var NO=null;function zO(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n=e.size[0],i=e.size[1];if(0===n||0===i)return null;var o,a=r.renderFrame(e,null);if(a instanceof HTMLCanvasElement)o=a;else{if(a&&(o=a.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===i)return o.getContext("2d").getImageData(0,0,n,i)}if(NO){var s=NO.canvas;s.width!==n||s.height!==i?NO=cl(n,i,void 0,{willReadFrequently:!0}):NO.clearRect(0,0,n,i)}else NO=cl(n,i,void 0,{willReadFrequently:!0});return NO.drawImage(o,0,0,n,i),NO.getImageData(0,0,n,i)}const GO=BO;function UO(t){return UO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UO(t)}function qO(t){var e=function(t,e){if("object"!=UO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=UO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==UO(e)?e:String(e)}function WO(t,e,r){return e=ZO(e),function(t,e){if(e&&("object"===UO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YO(t)}(t,VO()?Reflect.construct(e,r||[],ZO(t).constructor):e.apply(t,r))}function VO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(VO=function(){return!!t})()}function ZO(t){return ZO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZO(t)}function YO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XO(t,e){return XO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XO(t,e)}var HO=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=WO(this,e,[{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:ko("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}])).tileJSON_=null,r.tileSize_=t.tileSize,t.url)if(t.jsonp)!function(t,e,r,n){var i=document.createElement("script"),o="olc_"+_r(e);function a(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(t.includes("?")?"&":"?")+"callback="+o;var s=setTimeout((function(){a(),r&&r()}),1e4);window[o]=function(t){clearTimeout(s),a(),e(t)},document.head.appendChild(i)}(t.url,r.handleTileJSONResponse.bind(YO(r)),r.handleTileJSONError.bind(YO(r)));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(YO(r))),n.addEventListener("error",r.onXHRError_.bind(YO(r))),n.open("GET",t.url),n.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");r.handleTileJSONResponse(t.tileJSON)}return r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XO(t,e)}(e,t),r=e,n=[{key:"onXHRLoad_",value:function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(t){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(t){var e,r=ko("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=To(r,n);e=ai(t.bounds,i)}var o=ig(n),a=t.minzoom||0,s=rg({extent:o,maxZoom:t.maxzoom||22,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=_g(t.tiles,s),t.attribution&&!this.getAttributions()){var u=void 0!==e?e:o;this.setAttributions((function(e){return ii(u,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qO(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ng);const KO=HO;function JO(t){return JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JO(t)}function $O(t){var e=function(t,e){if("object"!=JO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JO(e)?e:String(e)}var QO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rbush_=new Gc(e),this.items_={}}var e,r;return e=t,r=[{key:"insert",value:function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[_r(e)]=r}},{key:"load",value:function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var o=t[n],a=e[n],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[n]=s,this.items_[_r(a)]=s}this.rbush_.load(r)}},{key:"remove",value:function(t){var e=_r(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)}},{key:"update",value:function(t,e){var r=this.items_[_r(e)];zn([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))}},{key:"getAll",value:function(){return this.rbush_.all().map((function(t){return t.value}))}},{key:"getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}},{key:"forEach",value:function(t){return this.forEach_(this.getAll(),t)}},{key:"forEachInExtent",value:function(t,e){return this.forEach_(this.getInExtent(t),e)}},{key:"forEach_",value:function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r}},{key:"isEmpty",value:function(){return We(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(t){var e=this.rbush_.toJSON();return Fn(e.minX,e.minY,e.maxX,e.maxY,t)}},{key:"concat",value:function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}],r&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$O(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();const tE=QO,eE="addfeature",rE="removefeature";function nE(t,e){return[[-1/0,-1/0,1/0,1/0]]}function iE(t,e){return[t]}var oE=!1;function aE(t,e,r,n,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(r,n,i):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.withCredentials=oE,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var n,u=e.getType();"json"==u?n=JSON.parse(s.responseText):"text"==u?n=s.responseText:"xml"==u?(n=s.responseXML)||(n=(new DOMParser).parseFromString(s.responseText,"application/xml")):"arraybuffer"==u&&(n=s.response),n?o(e.readFeatures(n,{extent:r,featureProjection:i}),e.readProjection(n)):a()}else a()},s.onerror=a,s.send()}function sE(t,e){return function(r,n,i,o,a){var s=this;aE(t,e,r,n,i,(function(t,e){s.addFeatures(t),void 0!==o&&o(t)}),a||ze)}}function uE(t){return uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uE(t)}function lE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cE(){return cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},cE.apply(this,arguments)}function fE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pE(n.key),n)}}function hE(t,e,r){return e&&fE(t.prototype,e),r&&fE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pE(t){var e=function(t,e){if("object"!=uE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uE(e)?e:String(e)}function dE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yE(t,e,r){return e=gE(e),function(t,e){if(e&&("object"===uE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vE()?Reflect.construct(e,r||[],gE(t).constructor):e.apply(t,r))}function vE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vE=function(){return!!t})()}function gE(t){return gE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gE(t)}function mE(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bE(t,e)}function bE(t,e){return bE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bE(t,e)}var _E=function(t){function e(t,r,n){var i;return dE(this,e),(i=yE(this,e,[t])).feature=r,i.features=n,i}return mE(e,t),hE(e)}(Pe),wE=function(t){function e(t){var r;dE(this,e),(r=yE(this,e,[{attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}])).on,r.once,r.un,r.loader_=ze,r.format_=t.format,r.overlaps_=void 0===t.overlaps||t.overlaps,r.url_=t.url,void 0!==t.loader?r.loader_=t.loader:void 0!==r.url_&&(qr(r.format_,"`format` must be set when `url` is set"),r.loader_=sE(r.url_,r.format_)),r.strategy_=void 0!==t.strategy?t.strategy:nE;var n,i,o=void 0===t.useSpatialIndex||t.useSpatialIndex;return r.featuresRtree_=o?new tE:null,r.loadedExtentsRtree_=new tE,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(n=t.features).getArray()),o||void 0!==n||(n=new On(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==n&&r.bindFeaturesCollection_(n),r}return mE(e,t),hE(e,[{key:"addFeature",value:function(t){this.addFeatureInternal(t),this.changed()}},{key:"addFeatureInternal",value:function(t){var e=_r(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new _E(eE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)}},{key:"setupChangeEvents_",value:function(t,e){e instanceof em||(this.featureChangeKeys_[t]=[ar(e,Qe,this.handleFeatureChange_,this),ar(e,Ce,this.handleFeatureChange_,this)])}},{key:"addToIndex_",value:function(t,e){var r=!0;if(void 0!==e.getId()){var n=String(e.getId());if(n in this.idIndex_)if(e instanceof em){var i=this.idIndex_[n];i instanceof em?Array.isArray(i)?i.push(e):this.idIndex_[n]=[i,e]:r=!1}else r=!1;else this.idIndex_[n]=e}return r&&(qr(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),r}},{key:"addFeatures",value:function(t){this.addFeaturesInternal(t),this.changed()}},{key:"addFeaturesInternal",value:function(t){for(var e=[],r=[],n=[],i=0,o=t.length;i<o;i++){var a=t[i],s=_r(a);this.addToIndex_(s,a)&&r.push(a)}for(var u=0,l=r.length;u<l;u++){var c=r[u],f=_r(c);this.setupChangeEvents_(f,c);var h=c.getGeometry();if(h){var p=h.getExtent();e.push(p),n.push(c)}else this.nullGeometryFeatures_[f]=c}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(eE))for(var d=0,y=r.length;d<y;d++)this.dispatchEvent(new _E(eE,r[d]))}},{key:"bindFeaturesCollection_",value:function(t){var e=this,r=!1;this.addEventListener(eE,(function(e){r||(r=!0,t.push(e.feature),r=!1)})),this.addEventListener(rE,(function(e){r||(r=!0,t.remove(e.feature),r=!1)})),t.addEventListener(cn,(function(t){r||(r=!0,e.addFeature(t.element),r=!1)})),t.addEventListener(fn,(function(t){r||(r=!0,e.removeFeature(t.element),r=!1)})),this.featuresCollection_=t}},{key:"clear",value:function(t){var e=this;if(t){for(var r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ur);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach((function(t){e.removeFeatureInternal(t)})),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new _E("clear");this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureAtCoordinateDirect",value:function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){var n=r.getGeometry();if(n instanceof em||n.intersectsCoordinate(t))return e(r)}))}},{key:"forEachFeatureInExtent",value:function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureIntersectingExtent",value:function(t,e){return this.forEachFeatureInExtent(t,(function(r){var n=r.getGeometry();if(n instanceof em||n.intersectsExtent(t)){var i=e(r);if(i)return i}}))}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),We(this.nullGeometryFeatures_)||Fe(t,Object.values(this.nullGeometryFeatures_))),t}},{key:"getFeaturesAtCoordinate",value:function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}},{key:"getFeaturesInExtent",value:function(t,e){var r,n=this;if(this.featuresRtree_){var i;if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);var o=function(t,e){if(e.canWrapX()){var r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];si(t,e);var n=ni(r);if(ni(t)>n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+n,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-n,t[3]]]}return[t]}(t,e);return(i=[]).concat.apply(i,function(t){if(Array.isArray(t))return lE(t)}(r=o.map((function(t){return n.featuresRtree_.getInExtent(t)})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return lE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lE(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return e=e||Be,this.featuresRtree_.forEachInExtent(s,(function(t){if(e(t)){var u=t.getGeometry(),l=a;if((a=u instanceof em?0:u.closestPointXY(r,n,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i}},{key:"getExtent",value:function(t){return this.featuresRtree_.getExtent(t)}},{key:"getFeatureById",value:function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null}},{key:"getFeatureByUid",value:function(t){var e=this.uidIndex_[t];return void 0!==e?e:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(t){var e=t.target,r=_r(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new _E("changefeature",e))}},{key:"hasFeature",value:function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:_r(t)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&We(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(t,e,r){for(var n=this,i=this.loadedExtentsRtree_,o=this.strategy_(t,e,r),a=function(){var t=o[s];i.forEachInExtent(t,(function(e){return Rn(e.extent,t)}))||(++n.loadingExtentsCount_,n.dispatchEvent(new _E("featuresloadstart")),n.loader_.call(n,t,e,r,(function(t){--n.loadingExtentsCount_,n.dispatchEvent(new _E("featuresloadend",void 0,t))}),(function(){--n.loadingExtentsCount_,n.dispatchEvent(new _E("featuresloaderror"))})),i.insert(t,{extent:t.slice()}))},s=0,u=o.length;s<u;++s)a();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),cE(gE(e.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(zn(r.extent,t))return e=r,!0})),e&&r.remove(e)}},{key:"removeFeature",value:function(t){if(t){var e=_r(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}}},{key:"removeFeatureInternal",value:function(t){var e=_r(t),r=this.featureChangeKeys_[e];if(r){r.forEach(ur),delete this.featureChangeKeys_[e];var n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new _E(rE,t)),t}}},{key:"removeFromIdIndex_",value:function(t){var e=!1;for(var r in this.idIndex_){var n=this.idIndex_[r];if(t instanceof em&&Array.isArray(n)&&n.includes(t))n.splice(n.indexOf(t),1);else if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}}return e}},{key:"setLoader",value:function(t){this.loader_=t}},{key:"setUrl",value:function(t){qr(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(sE(t,this.format_))}}]),e}(Hv);const xE=wE;function SE(t){return SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SE(t)}function kE(t){var e=function(t,e){if("object"!=SE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=SE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==SE(e)?e:String(e)}function OE(t,e,r){return e=CE(e),function(t,e){if(e&&("object"===SE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return AE(t)}(t,EE()?Reflect.construct(e,r||[],CE(t).constructor):e.apply(t,r))}function EE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EE=function(){return!!t})()}function AE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PE(){return PE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},PE.apply(this,arguments)}function CE(t){return CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CE(t)}function jE(t,e){return jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jE(t,e)}var ME=[],TE=function(t){function e(t,r,n,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=OE(this,e,[t,r,{transition:0}])).context_={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=i.bind(void 0,AE(o)),o.wrappedTileCoord=n,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jE(t,e)}(e,t),r=e,n=[{key:"getContext",value:function(t){var e=_r(t);return e in this.context_||(this.context_[e]=cl(1,1,ME)),this.context_[e]}},{key:"hasContext",value:function(t){return _r(t)in this.context_}},{key:"getImage",value:function(t){return this.hasContext(t)?this.getContext(t).canvas:null}},{key:"getReplayState",value:function(t){var e=_r(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var t in this.context_){var r=this.context_[t];fl(r),ME.push(r.canvas),delete this.context_[t]}PE(CE(e.prototype),"release",this).call(this)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kE(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fl);const RE=TE;function IE(t){return IE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IE(t)}function LE(t){var e=function(t,e){if("object"!=IE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=IE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==IE(e)?e:String(e)}function FE(t,e,r){return e=NE(e),function(t,e){if(e&&("object"===IE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,DE()?Reflect.construct(e,r||[],NE(t).constructor):e.apply(t,r))}function DE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(DE=function(){return!!t})()}function BE(){return BE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NE(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},BE.apply(this,arguments)}function NE(t){return NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NE(t)}function zE(t,e){return zE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zE(t,e)}var GE=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.projection||"EPSG:3857",i=t.extent||ig(n),o=t.tileGrid||rg({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});return(r=FE(this,e,[{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:n,state:t.state,tileGrid:o,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:qE,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}])).format_=t.format?t.format:null,r.sourceTileCache=new Nv(r.tileCache.highWaterMark),r.overlaps_=null==t.overlaps||t.overlaps,r.tileClass=t.tileClass?t.tileClass:lm,r.tileGrids_={},r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zE(t,e)}(e,t),r=e,(n=[{key:"getFeaturesInExtent",value:function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=jv(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===Pl.LOADED)for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var u=o[a],l=u.tileCoord;if(ii(t,i.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var f=0,h=c.length;f<h;++f){var p=c[f],d=p.getGeometry();ii(t,d.getExtent())&&e.push(p)}}}})),e}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(t,r){var n=this.getTileCacheForProjection(t),i=Object.keys(r).reduce((function(t,e){var r,i,o=Pv((i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{for(o=(r=r.call(t)).next;!(u=(n=o.call(r)).done)&&(s.push(n.value),3!==s.length);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t)||function(t,e){if(t){if("string"==typeof t)return Ev(t,3);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ev(t,3):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((r=e).substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number)))[0],i[1],i[2]),a=n.peek(o);if(a)for(var s=a.sourceTiles,u=0,l=s.length;u<l;++u)t[s[u].getKey()]=!0;return t}),{});BE(NE(e.prototype),"expireCache",this).call(this,t,r),this.sourceTileCache.expireCache(i)}},{key:"getSourceTiles",value:function(t,e,r){var n=this;if(r.getState()===Pl.IDLE){r.setState(Pl.LOADING);var i=r.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(i),s=i[0],u=o.getResolution(s);Cn(a,-u,a);var l=this.tileGrid,c=l.getExtent();c&&ti(a,c,a);var f=l.getZForResolution(u,this.zDirection);l.forEachTileCoord(a,f,(function(i){var o=n.tileUrlFunction(i,t,e),a=n.sourceTileCache.containsKey(o)?n.sourceTileCache.get(o):new n.tileClass(i,o?Pl.IDLE:Pl.EMPTY,o,n.format_,n.tileLoadFunction);r.sourceTiles.push(a);var s=a.getState();s<Pl.LOADED&&(a.addEventListener(Qe,(function t(e){n.handleTileChange(e);var i=a.getState();if(i===Pl.LOADED||i===Pl.ERROR){var o=a.getKey();o in r.errorTileKeys?a.getState()===Pl.LOADED&&delete r.errorTileKeys[o]:r.loadingSourceTiles--,i===Pl.ERROR?r.errorTileKeys[o]=!0:a.removeEventListener(Qe,t),0===r.loadingSourceTiles&&r.setState(We(r.errorTileKeys)?Pl.LOADED:Pl.ERROR)}})),r.loadingSourceTiles++),s===Pl.IDLE&&(a.extent=l.getTileCoordExtent(i),a.projection=e,a.resolution=l.getResolution(i[0]),n.sourceTileCache.set(o,a),a.load())})),r.loadingSourceTiles||r.setState(r.sourceTiles.some((function(t){return t.getState()===Pl.ERROR}))?Pl.ERROR:Pl.LOADED)}return r.sourceTiles}},{key:"getTile",value:function(t,e,r,n,i){var o,a=this,s=Pv(t,e,r),u=this.getKey();if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)).key===u)return o;var l=[t,e,r],c=this.getTileCoordForTileUrlFunction(l,i),f=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(c&&f){var p=h.getTileCoordExtent(c);Cn(p,-h.getResolution(t),p),ii(f,p)||(c=null)}var d=!0;if(null!==c){var y=this.tileGrid,v=h.getResolution(t),g=y.getZForResolution(v,1),m=h.getTileCoordExtent(c);Cn(m,-v,m),y.forEachTileCoord(m,g,(function(t){d=d&&!a.tileUrlFunction(t,n,i)}))}var b=new RE(l,d?Pl.EMPTY:Pl.IDLE,c,this.getSourceTiles.bind(this,n,i));return b.key=u,o?(b.interimTile=o,b.refreshInterimChain(),this.tileCache.replace(s,b)):this.tileCache.set(s,b),b}},{key:"getTileGridForProjection",value:function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){for(var n=this.tileGrid,i=n.getResolutions().slice(),o=i.map((function(t,e){return n.getOrigin(e)})),a=i.map((function(t,e){return n.getTileSize(e)})),s=Ai+1,u=i.length;u<s;++u)i.push(i[u-1]/2),o.push(o[u-1]),a.push(a[u-1]);r=new tg({extent:n.getExtent(),origins:o,resolutions:i,tileSizes:a}),this.tileGrids_[e]=r}return r}},{key:"getTilePixelRatio",value:function(t){return t}},{key:"getTilePixelSize",value:function(t,e,r){var n=Sc(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]}},{key:"updateCacheSize",value:function(t,r){BE(NE(e.prototype),"updateCacheSize",this).call(this,2*t,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LE(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Cg);const UE=GE;function qE(t,e){t.setLoader((function(r,n,i){aE(e,t.getFormat(),r,n,i,t.onLoad.bind(t),t.onError.bind(t))}))}function WE(t){return function(t){if(Array.isArray(t))return eA(t)}(t)||VE(t)||tA(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VE(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ZE(t){var e="function"==typeof Map?new Map:void 0;return ZE=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(YE())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var i=new(t.bind.apply(t,n));return r&&XE(i,r.prototype),i}(t,arguments,HE(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),XE(r,t)},ZE(t)}function YE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YE=function(){return!!t})()}function XE(t,e){return XE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XE(t,e)}function HE(t){return HE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HE(t)}function KE(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=tA(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function JE(t){return JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JE(t)}function $E(t,e){return rA(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||tA(t,e)||QE()}function QE(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tA(t,e){if(t){if("string"==typeof t)return eA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eA(t,e):void 0}}function eA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rA(t){if(Array.isArray(t))return t}function nA(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aA(n.key),n)}}function oA(t,e,r){return e&&iA(t.prototype,e),r&&iA(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function aA(t){var e=function(t,e){if("object"!=JE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JE(e)?e:String(e)}function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uA,lA={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function cA(t){return(t=Math.round(t))<0?0:t>255?255:t}function fA(t){return t<0?0:t>1?1:t}function hA(t){return"%"===t[t.length-1]?cA(parseFloat(t)/100*255):cA(parseInt(t))}function pA(t){return"%"===t[t.length-1]?fA(parseFloat(t)/100):fA(parseFloat(t))}function dA(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{uA={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in lA)return lA[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=r.indexOf("("),i=r.indexOf(")");if(-1!==n&&i+1===r.length){var o=r.substr(0,n),a=r.substr(n+1,i-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=pA(a.pop());case"rgb":return 3!==a.length?null:[hA(a[0]),hA(a[1]),hA(a[2]),s];case"hsla":if(4!==a.length)return null;s=pA(a.pop());case"hsl":if(3!==a.length)return null;var u=(parseFloat(a[0])%360+360)%360/360,l=pA(a[1]),c=pA(a[2]),f=c<=.5?c*(l+1):c+l-c*l,h=2*c-f;return[cA(255*dA(h,f,u+1/3)),cA(255*dA(h,f,u)),cA(255*dA(h,f,u-1/3)),s];default:return null}}return null}}catch(t){}var yA=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;nA(this,t),this.r=e,this.g=r,this.b=n,this.a=i}return oA(t,[{key:"toString",value:function(){var t=$E(this.toArray(),4),e=t[0],r=t[1],n=t[2],i=t[3];return"rgba(".concat(Math.round(e),",").concat(Math.round(r),",").concat(Math.round(n),",").concat(i,")")}},{key:"toArray",value:function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*r/n,n]}},{key:"toArray01",value:function(){var t=this.r,e=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[t/n,e/n,r/n,n]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(e){if(e){if(e instanceof t)return e;if("string"==typeof e){var r=uA(e);if(r)return new t(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}}}]),t}();yA.black=new yA(0,0,0,1),yA.white=new yA(1,1,1,1),yA.transparent=new yA(0,0,0,0),yA.red=new yA(1,0,0,1),yA.blue=new yA(0,0,1,1);var vA=yA;function gA(t){return"object"===JE(t)?["literal",t]:t}function mA(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function bA(t,e){var r,n,i=gA((r=t.default,n=e.default,void 0!==r?r:void 0!==n?n:void 0));return void 0===i&&"resolvedImage"===e.type?"":i}function _A(t,e,r){var n=SA(t,e),i=["get",t.property];if("categorical"===n&&"boolean"==typeof r[0][0]){var o,a=["case"],s=KE(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;a.push(["==",i,u[0]],u[1])}}catch(t){s.e(t)}finally{s.f()}return a.push(bA(t,e)),a}if("categorical"===n){var l,c=["match",i],f=KE(r);try{for(f.s();!(l=f.n()).done;){var h=l.value;xA(c,h[0],h[1],!1)}}catch(t){f.e(t)}finally{f.f()}return c.push(bA(t,e)),c}if("interval"===n){var p,d=["step",["number",i]],y=KE(r);try{for(y.s();!(p=y.n()).done;){var v=p.value;xA(d,v[0],v[1],!0)}}catch(t){y.e(t)}finally{y.f()}return wA(d),void 0===t.default?d:["case",["==",["typeof",i],"number"],d,gA(t.default)]}if("exponential"===n){var g,m=void 0!==t.base?t.base:1,b=[mA(t),1===m?["linear"]:["exponential",m],["number",i]],_=KE(r);try{for(_.s();!(g=_.n()).done;){var w=g.value;xA(b,w[0],w[1],!1)}}catch(t){_.e(t)}finally{_.f()}return void 0===t.default?b:["case",["==",["typeof",i],"number"],b,gA(t.default)]}throw new Error("Unknown property function type ".concat(n))}function wA(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function xA(t,e,r,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(r))}function SA(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function kA(t){for(var e=["concat"],r=/{([^{}]+)}/g,n=0,i=r.exec(t);null!==i;i=r.exec(t)){var o=t.slice(n,r.lastIndex-i[0].length);n=r.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}var OA=function(t){function e(t,r){var n;return nA(this,e),(n=function(t,e,r){return e=HE(e),function(t,e){if(e&&("object"===JE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YE()?Reflect.construct(e,r||[],HE(t).constructor):e.apply(t,r))}(this,e,[r])).message=r,n.key=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XE(t,e)}(e,t),oA(e)}(ZE(Error)),EA=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];nA(this,t),this.parent=e,this.bindings={};var n,i=KE(r);try{for(i.s();!(n=i.n()).done;){var o=$E(n.value,2),a=o[0],s=o[1];this.bindings[a]=s}}catch(t){i.e(t)}finally{i.f()}}return oA(t,[{key:"concat",value:function(e){return new t(this,e)}},{key:"get",value:function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error("".concat(t," not found in scope."))}},{key:"has",value:function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}]),t}(),AA={kind:"null"},PA={kind:"number"},CA={kind:"string"},jA={kind:"boolean"},MA={kind:"color"},TA={kind:"object"},RA={kind:"value"},IA={kind:"collator"},LA={kind:"formatted"},FA={kind:"resolvedImage"};function DA(t,e){return{kind:"array",itemType:t,N:e}}function BA(t){if("array"===t.kind){var e=BA(t.itemType);return"number"==typeof t.N?"array<".concat(e,", ").concat(t.N,">"):"value"===t.itemType.kind?"array":"array<".concat(e,">")}return t.kind}var NA=[AA,PA,CA,jA,MA,LA,TA,DA(RA),FA];function zA(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!zA(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var r=0,n=NA;r<n.length;r++)if(!zA(n[r],e))return null}return"Expected ".concat(BA(t)," but found ").concat(BA(e)," instead.")}function GA(t,e){return e.some((function(e){return e.kind===t.kind}))}function UA(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"===JE(t):e===JE(t)}))}var qA=function(){function t(e,r,n){nA(this,t),this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return oA(t,[{key:"compare",value:function(t,e){return this.collator.compare(t,e)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),t}(),WA=oA((function t(e,r,n,i,o){nA(this,t),this.text=e.normalize?e.normalize():e,this.image=r,this.scale=n,this.fontStack=i,this.textColor=o})),VA=function(){function t(e){nA(this,t),this.sections=e}return oA(t,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")}},{key:"serialize",value:function(){var t,e=["format"],r=KE(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.image)e.push(["image",n.image.name]);else{e.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(i)}}}catch(t){r.e(t)}finally{r.f()}return e}}],[{key:"fromString",value:function(e){return new t([new WA(e,null,null,null,null)])}},{key:"factory",value:function(e){return e instanceof t?e:t.fromString(e)}}]),t}(),ZA=function(){function t(e){nA(this,t),this.name=e.name,this.available=e.available}return oA(t,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(e){return e?new t({name:e,available:!1}):null}}]),t}();function YA(t,e,r,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([t,e,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function XA(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof vA)return!0;if(t instanceof qA)return!0;if(t instanceof VA)return!0;if(t instanceof ZA)return!0;if(Array.isArray(t)){var e,r=KE(t);try{for(r.s();!(e=r.n()).done;)if(!XA(e.value))return!1}catch(t){r.e(t)}finally{r.f()}return!0}if("object"===JE(t)){for(var n in t)if(!XA(t[n]))return!1;return!0}return!1}function HA(t){if(null===t)return AA;if("string"==typeof t)return CA;if("boolean"==typeof t)return jA;if("number"==typeof t)return PA;if(t instanceof vA)return MA;if(t instanceof qA)return IA;if(t instanceof VA)return LA;if(t instanceof ZA)return FA;if(Array.isArray(t)){var e,r,n=t.length,i=KE(t);try{for(i.s();!(r=i.n()).done;){var o=HA(r.value);if(e){if(e===o)continue;e=RA;break}e=o}}catch(t){i.e(t)}finally{i.f()}return DA(e||RA,n)}return TA}function KA(t){var e=JE(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof vA||t instanceof VA||t instanceof ZA?t.toString():JSON.stringify(t)}var JA=function(){function t(e,r){nA(this,t),this.type=e,this.value=r}return oA(t,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof vA?["rgba"].concat(this.value.toArray()):this.value instanceof VA?this.value.serialize():this.value}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!XA(e[1]))return r.error("invalid value");var n=e[1],i=HA(n),o=r.expectedType;return"array"!==i.kind||0!==i.N||!o||"array"!==o.kind||"number"==typeof o.N&&0!==o.N||(i=o),new t(i,n)}}]),t}(),$A=JA,QA=function(){function t(e){nA(this,t),this.name="ExpressionEvaluationError",this.message=e}return oA(t,[{key:"toJSON",value:function(){return this.message}}]),t}(),tP={string:CA,number:PA,boolean:jA,object:TA},eP=function(){function t(e,r){nA(this,t),this.type=e,this.args=r}return oA(t,[{key:"evaluate",value:function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!zA(this.type,HA(r)))return r;if(e===this.args.length-1)throw new QA("Expected value to be of type ".concat(BA(this.type),", but found ").concat(BA(HA(r))," instead."))}return null}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n,i=1,o=e[0];if("array"===o){var a,s;if(e.length>2){var u=e[1];if("string"!=typeof u||!(u in tP)||"object"===u)return r.error('The item type argument of "array" must be one of string, number, boolean',1);a=tP[u],i++}else a=RA;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);s=e[2],i++}n=DA(a,s)}else n=tP[o];for(var l=[];i<e.length;i++){var c=r.parse(e[i],i,RA);if(!c)return null;l.push(c)}return new t(n,l)}}]),t}(),rP=eP,nP=function(){function t(e){nA(this,t),this.type=LA,this.sections=e}return oA(t,[{key:"evaluate",value:function(t){return new VA(this.sections.map((function(e){var r=e.content.evaluate(t);return HA(r)===FA?new WA("",r,null,null,null):new WA(KA(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}},{key:"eachChild",value:function(t){var e,r=KE(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t,e=["format"],r=KE(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.content.serialize());var i={};n.scale&&(i["font-scale"]=n.scale.serialize()),n.font&&(i["text-font"]=n.font.serialize()),n.textColor&&(i["text-color"]=n.textColor.serialize()),e.push(i)}}catch(t){r.e(t)}finally{r.f()}return e}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"===JE(n))return r.error("First argument must be an image or text section.");for(var i=[],o=!1,a=1;a<=e.length-1;++a){var s=e[a];if(o&&"object"===JE(s)&&!Array.isArray(s)){o=!1;var u=null;if(s["font-scale"]&&!(u=r.parse(s["font-scale"],1,PA)))return null;var l=null;if(s["text-font"]&&!(l=r.parse(s["text-font"],1,DA(CA))))return null;var c=null;if(s["text-color"]&&!(c=r.parse(s["text-color"],1,MA)))return null;var f=i[i.length-1];f.scale=u,f.font=l,f.textColor=c}else{var h=r.parse(e[a],1,RA);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:h,scale:null,font:null,textColor:null})}}return new t(i)}}]),t}(),iP=function(){function t(e){nA(this,t),this.type=FA,this.input=e}return oA(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),r=ZA.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected two arguments.");var n=r.parse(e[1],1,CA);return n?new t(n):r.error("No image name provided.")}}]),t}(),oP={"to-boolean":jA,"to-color":MA,"to-number":PA,"to-string":CA},aP=function(){function t(e,r){nA(this,t),this.type=e,this.args=r}return oA(t,[{key:"evaluate",value:function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){var e,r,n,i=KE(this.args);try{for(i.s();!(n=i.n()).done;){if(e=n.value.evaluate(t),r=null,e instanceof vA)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value ".concat(JSON.stringify(e),": expected an array containing either three or four numeric values."):YA(e[0],e[1],e[2],e[3])))return new vA(e[0]/255,e[1]/255,e[2]/255,e[3])}}catch(t){i.e(t)}finally{i.f()}throw new QA(r||"Could not parse color from value '".concat("string"==typeof e?e:String(JSON.stringify(e)),"'"))}if("number"===this.type.kind){var a,s=null,u=KE(this.args);try{for(u.s();!(a=u.n()).done;){if(null===(s=a.value.evaluate(t)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(t){u.e(t)}finally{u.f()}throw new QA("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?VA.fromString(KA(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ZA.fromString(KA(this.args[0].evaluate(t))):KA(this.args[0].evaluate(t))}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new nP([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new iP(this.args[0]).serialize();var t=["to-".concat(this.type.kind)];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return r.error("Expected one argument.");for(var i=oP[n],o=[],a=1;a<e.length;a++){var s=r.parse(e[a],a,RA);if(!s)return null;o.push(s)}return new t(i,o)}}]),t}(),sP=aP,uP=["Unknown","Point","LineString","Polygon"],lP=function(){function t(){nA(this,t),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return oA(t,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?uP[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,e=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,i=r.y,o=n*e-t[0],a=i*e-t[1];return this.featureDistanceData.bearing[0]*o+this.featureDistanceData.bearing[1]*a}return 0}},{key:"parseColor",value:function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=vA.parse(t)),e}}]),t}(),cP=lP,fP=function(){function t(e,r,n,i){nA(this,t),this.name=e,this.type=r,this._evaluate=n,this.args=i}return oA(t,[{key:"evaluate",value:function(t){return this._evaluate(t,this.args)}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))}}],[{key:"parse",value:function(e,r){var n=e[0],i=t.definitions[n];if(!i)return r.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,a=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,u=s.filter((function(t){var r=$E(t,1)[0];return!Array.isArray(r)||r.length===e.length-1})),l=null,c=KE(u);try{for(c.s();!(o=c.n()).done;){var f=$E(o.value,2),h=f[0],p=f[1];l=new NP(r.registry,r.path,null,r.scope);for(var d=[],y=!1,v=1;v<e.length;v++){var g=e[v],m=Array.isArray(h)?h[v-1]:h.type,b=l.parse(g,1+d.length,m);if(!b){y=!0;break}d.push(b)}if(!y)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected ".concat(h.length," arguments, but found ").concat(d.length," instead."));else{for(var _=0;_<d.length;_++){var w=Array.isArray(h)?h[_]:h.type,x=d[_];l.concat(_+1).checkSubtype(w,x.type)}if(0===l.errors.length)return new t(n,a,p,d)}}}catch(t){c.e(t)}finally{c.f()}if(1===u.length){var S;(S=r.errors).push.apply(S,WE(l.errors))}else{for(var k=(u.length?u:s).map((function(t){var e;return e=$E(t,1)[0],Array.isArray(e)?"(".concat(e.map(BA).join(", "),")"):"(".concat(BA(e.type),"...)")})).join(" | "),O=[],E=1;E<e.length;E++){var A=r.parse(e[E],1+O.length);if(!A)return null;O.push(BA(A.type))}r.error("Expected arguments of type ".concat(k,", but found (").concat(O.join(", "),") instead."))}return null}},{key:"register",value:function(e,r){for(var n in t.definitions=r,r)e[n]=t}}]),t}(),hP=fP,pP=function(){function t(e,r,n){nA(this,t),this.type=IA,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=r}return oA(t,[{key:"evaluate",value:function(t){return new qA(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}},{key:"eachChild",value:function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected one argument.");var n=e[1];if("object"!==JE(n)||Array.isArray(n))return r.error("Collator options argument must be an object.");var i=r.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,jA);if(!i)return null;var o=r.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,jA);if(!o)return null;var a=null;return n.locale&&!(a=r.parse(n.locale,1,CA))?null:new t(i,o,a)}}]),t}(),dP=8192;function yP(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function vP(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function gP(t,e){var r,n=(180+t[0])/360,i=(r=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360),o=Math.pow(2,e.z);return[Math.round(n*o*dP),Math.round(i*o*dP)]}function mP(t,e,r){var n=t[0]-e[0],i=t[1]-e[1],o=t[0]-r[0],a=t[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function bP(t,e,r){return e[1]>t[1]!=r[1]>t[1]&&t[0]<(r[0]-e[0])*(t[1]-e[1])/(r[1]-e[1])+e[0]}function _P(t,e){for(var r=!1,n=0,i=e.length;n<i;n++)for(var o=e[n],a=0,s=o.length;a<s-1;a++){if(mP(t,o[a],o[a+1]))return!1;bP(t,o[a],o[a+1])&&(r=!r)}return r}function wP(t,e){for(var r=0;r<e.length;r++)if(_P(t,e[r]))return!0;return!1}function xP(t,e,r,n){var i=t[0]-r[0],o=t[1]-r[1],a=e[0]-r[0],s=e[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],c=i*l-u*o,f=a*l-u*s;return c>0&&f<0||c<0&&f>0}function SP(t,e,r){var n,i,o,a,s,u,l,c,f=KE(r);try{for(f.s();!(n=f.n()).done;)for(var h=n.value,p=0;p<h.length-1;++p)if(i=t,o=e,a=h[p],s=h[p+1],c=[o[0]-i[0],o[1]-i[1]],0!=(u=[s[0]-a[0],s[1]-a[1]])[0]*(l=c)[1]-u[1]*l[0]&&xP(i,o,a,s)&&xP(a,s,i,o))return!0}catch(t){f.e(t)}finally{f.f()}return!1}function kP(t,e){for(var r=0;r<t.length;++r)if(!_P(t[r],e))return!1;for(var n=0;n<t.length-1;++n)if(SP(t[n],t[n+1],e))return!1;return!0}function OP(t,e){for(var r=0;r<e.length;r++)if(kP(t,e[r]))return!0;return!1}function EP(t,e,r){for(var n=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=gP(t[i][a],r);yP(e,s),o.push(s)}n.push(o)}return n}function AP(t,e,r){for(var n=[],i=0;i<t.length;i++){var o=EP(t[i],e,r);n.push(o)}return n}function PP(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){var i=.5*n,o=t[0]-r[0]>i?-n:r[0]-t[0]>i?n:0;0===o&&(o=t[0]-r[2]>i?-n:r[2]-t[0]>i?n:0),t[0]+=o}yP(e,t)}function CP(t,e,r,n){var i=Math.pow(2,n.z)*dP,o=[n.x*dP,n.y*dP],a=[];if(!t)return a;var s,u=KE(t);try{for(u.s();!(s=u.n()).done;){var l,c=KE(s.value);try{for(c.s();!(l=c.n()).done;){var f=l.value,h=[f.x+o[0],f.y+o[1]];PP(h,e,r,i),a.push(h)}}catch(t){c.e(t)}finally{c.f()}}}catch(t){u.e(t)}finally{u.f()}return a}function jP(t,e,r,n){var i=Math.pow(2,n.z)*dP,o=[n.x*dP,n.y*dP],a=[];if(!t)return a;var s,u=KE(t);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,f=[],h=KE(c);try{for(h.s();!(l=h.n()).done;){var p=l.value,d=[p.x+o[0],p.y+o[1]];yP(e,d),f.push(d)}}catch(t){h.e(t)}finally{h.f()}a.push(f)}}catch(t){u.e(t)}finally{u.f()}if(e[2]-e[0]<=i/2){!function(t){t[0]=t[1]=1/0,t[2]=t[3]=-1/0}(e);var y,v=KE(a);try{for(v.s();!(y=v.n()).done;){var g,m=KE(y.value);try{for(m.s();!(g=m.n()).done;)PP(g.value,e,r,i)}catch(t){m.e(t)}finally{m.f()}}}catch(t){v.e(t)}finally{v.f()}}return a}var MP=function(){function t(e,r){nA(this,t),this.type=jA,this.geojson=e,this.geometries=r}return oA(t,[{key:"evaluate",value:function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){var o=EP(e.coordinates,n,i),a=CP(t.geometry(),r,n,i);if(!vP(r,n))return!1;var s,u=KE(a);try{for(u.s();!(s=u.n()).done;)if(!_P(s.value,o))return!1}catch(t){u.e(t)}finally{u.f()}}if("MultiPolygon"===e.type){var l=AP(e.coordinates,n,i),c=CP(t.geometry(),r,n,i);if(!vP(r,n))return!1;var f,h=KE(c);try{for(h.s();!(f=h.n()).done;)if(!wP(f.value,l))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if(!i)return!1;if("Polygon"===e.type){var o=EP(e.coordinates,n,i),a=jP(t.geometry(),r,n,i);if(!vP(r,n))return!1;var s,u=KE(a);try{for(u.s();!(s=u.n()).done;)if(!kP(s.value,o))return!1}catch(t){u.e(t)}finally{u.f()}}if("MultiPolygon"===e.type){var l=AP(e.coordinates,n,i),c=jP(t.geometry(),r,n,i);if(!vP(r,n))return!1;var f,h=KE(c);try{for(h.s();!(f=h.n()).done;)if(!OP(f.value,l))return!1}catch(t){h.e(t)}finally{h.f()}}return!0}(t,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(XA(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var i=0;i<n.features.length;++i){var o=n.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new t(n,n.features[i].geometry)}else if("Feature"===n.type){var a=n.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new t(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new t(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),t}(),TP=MP;function RP(t){if(t instanceof hP){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof TP)return!1;var e=!0;return t.eachChild((function(t){e&&!RP(t)&&(e=!1)})),e}function IP(t){if(t instanceof hP&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!IP(t)&&(e=!1)})),e}function LP(t,e){if(t instanceof hP&&e.indexOf(t.name)>=0)return!1;var r=!0;return t.eachChild((function(t){r&&!LP(t,e)&&(r=!1)})),r}var FP=function(){function t(e,r){nA(this,t),this.type=r.type,this.name=e,this.boundExpression=r}return oA(t,[{key:"evaluate",value:function(t){return this.boundExpression.evaluate(t)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(e,r){if(2!==e.length||"string"!=typeof e[1])return r.error("'var' expression requires exactly one string literal argument.");var n=e[1];return r.scope.has(n)?new t(n,r.scope.get(n)):r.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),t}(),DP=FP,BP=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new EA,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];nA(this,t),this.registry=e,this.path=r,this.key=r.map((function(t){return"[".concat(t,"]")})).join(""),this.scope=i,this.errors=o,this.expectedType=n}return oA(t,[{key:"parse",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}},{key:"_parse",value:function(t,e){function r(t,e,r){return"assert"===r?new rP(e,[t]):"coerce"===r?new sP(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(JE(n),' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[n];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=r(o,a,e.typeAnnotation||"coerce");else o=r(o,a,e.typeAnnotation||"assert")}if(!(o instanceof $A)&&"resolvedImage"!==o.type.kind&&zP(o)){var u=new cP;try{o=new $A(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===JE(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found ".concat(JE(t)," instead."))}},{key:"concat",value:function(e,r,n){var i="number"==typeof e?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new t(this.registry,i,r||null,o,this.errors)}},{key:"error",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i="".concat(this.key).concat(r.map((function(t){return"[".concat(t,"]")})).join(""));this.errors.push(new OA(i,t))}},{key:"checkSubtype",value:function(t,e){var r=zA(t,e);return r&&this.error(r),r}}]),t}(),NP=BP;function zP(t){if(t instanceof DP)return zP(t.boundExpression);if(t instanceof hP&&"error"===t.name)return!1;if(t instanceof pP)return!1;if(t instanceof TP)return!1;var e=t instanceof sP||t instanceof rP,r=!0;return t.eachChild((function(t){r=e?r&&zP(t):r&&t instanceof $A})),!!r&&RP(t)&&LP(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function GP(t,e){for(var r,n,i=t.length-1,o=0,a=i,s=0;o<=a;)if(r=t[s=Math.floor((o+a)/2)],n=t[s+1],r<=e){if(s===i||e<n)return s;o=s+1}else{if(!(r>e))throw new QA("Input is not a number.");a=s-1}return 0}var UP=function(){function t(e,r,n){nA(this,t),this.type=e,this.input=r,this.labels=[],this.outputs=[];var i,o=KE(n);try{for(o.s();!(i=o.n()).done;){var a=$E(i.value,2),s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}}catch(t){o.e(t)}finally{o.f()}}return oA(t,[{key:"evaluate",value:function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);var i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[GP(e,n)].evaluate(t)}},{key:"eachChild",value:function(t){t(this.input);var e,r=KE(this.outputs);try{for(r.s();!(e=r.n()).done;)t(e.value)}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}],[{key:"parse",value:function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var n=r.parse(e[1],1,PA);if(!n)return null;var i=[],o=null;r.expectedType&&"value"!==r.expectedType.kind&&(o=r.expectedType);for(var a=1;a<e.length;a+=2){var s=1===a?-1/0:e[a],u=e[a+1],l=a,c=a+1;if("number"!=typeof s)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=r.parse(u,c,o);if(!f)return null;o=o||f.type,i.push([s,f])}return new t(o,n,i)}}]),t}(),qP=UP,WP=VP;function VP(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=r,this.p2y=n}VP.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},VP.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},VP.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},VP.prototype.solveCurveX=function(t,e){var r,n,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(r=0))return r;if(i>(n=1))return n;for(;r<n;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?r=i:n=i,i=.5*(n-r)+r}return i},VP.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ZP=sA(WP);function YP(t,e,r){return t*(1-r)+e*r}var XP=Object.freeze({__proto__:null,number:YP,color:function(t,e,r){return new vA(YP(t.r,e.r,r),YP(t.g,e.g,r),YP(t.b,e.b,r),YP(t.a,e.a,r))},array:function(t,e,r){return t.map((function(t,n){return YP(t,e[n],r)}))}}),HP=.95047,KP=1.08883,JP=4/29,$P=6/29,QP=3*$P*$P,tC=$P*$P*$P,eC=Math.PI/180,rC=180/Math.PI;function nC(t){return t>tC?Math.pow(t,1/3):t/QP+JP}function iC(t){return t>$P?t*t*t:QP*(t-JP)}function oC(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function aC(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function sC(t){var e=aC(t.r),r=aC(t.g),n=aC(t.b),i=nC((.4124564*e+.3575761*r+.1804375*n)/HP),o=nC((.2126729*e+.7151522*r+.072175*n)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-nC((.0193339*e+.119192*r+.9503041*n)/KP)),alpha:t.a}}function uC(t){var e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*iC(e),r=HP*iC(r),n=KP*iC(n),new vA(oC(3.2404542*r-1.5371385*e-.4985314*n),oC(-.969266*r+1.8760108*e+.041556*n),oC(.0556434*r-.2040259*e+1.0572252*n),t.alpha)}function lC(t,e,r){var n=e-t;return t+r*(n>180||n<-180?n-360*Math.round(n/360):n)}var cC={forward:sC,reverse:uC,interpolate:function(t,e,r){return{l:YP(t.l,e.l,r),a:YP(t.a,e.a,r),b:YP(t.b,e.b,r),alpha:YP(t.alpha,e.alpha,r)}}},fC=function(t){var e=sC(t),r=e.l,n=e.a,i=e.b,o=Math.atan2(i,n)*rC;return{h:o<0?o+360:o,c:Math.sqrt(n*n+i*i),l:r,alpha:t.a}},hC=function(){function t(e,r,n,i,o){nA(this,t),this.type=e,this.operator=r,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];var a,s=KE(o);try{for(s.s();!(a=s.n()).done;){var u=$E(a.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(t){s.e(t)}finally{s.f()}}return oA(t,[{key:"evaluate",value:function(e){var r=this.labels,n=this.outputs;if(1===r.length)return n[0].evaluate(e);var i=this.input.evaluate(e);if(i<=r[0])return n[0].evaluate(e);var o=r.length;if(i>=r[o-1])return n[o-1].evaluate(e);var a=GP(r,i),s=r[a],u=r[a+1],l=t.interpolationFactor(this.interpolation,i,s,u),c=n[a].evaluate(e),f=n[a+1].evaluate(e);return"interpolate"===this.operator?XP[this.type.kind.toLowerCase()](c,f,l):"interpolate-hcl"===this.operator?function(t){var e=t.h*eC,r=t.c;return uC({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})}(function(t,e,r){return{h:lC(t.h,e.h,r),c:YP(t.c,e.c,r),l:YP(t.l,e.l,r),alpha:YP(t.alpha,e.alpha,r)}}(fC(c),fC(f),l)):cC.reverse(cC.interpolate(cC.forward(c),cC.forward(f),l))}},{key:"eachChild",value:function(t){t(this.input);var e,r=KE(this.outputs);try{for(r.s();!(e=r.n()).done;)t(e.value)}catch(t){r.e(t)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e}}],[{key:"interpolationFactor",value:function(t,e,r,n){var i=0;if("exponential"===t.name)i=pC(e,t.base,r,n);else if("linear"===t.name)i=pC(e,1,r,n);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new ZP(o[0],o[1],o[2],o[3]).solve(pC(e,1,r,n))}return i}},{key:"parse",value:function(e,r){var n,i=rA(n=e)||VE(n)||tA(n)||QE(),o=i[0],a=i[1],s=i[2],u=i.slice(3);if(!Array.isArray(a)||0===a.length)return r.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return r.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(t){return"number"!=typeof t||t<0||t>1})))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(s=r.parse(s,2,PA)))return null;var f=[],h=null;"interpolate-hcl"===o||"interpolate-lab"===o?h=MA:r.expectedType&&"value"!==r.expectedType.kind&&(h=r.expectedType);for(var p=0;p<u.length;p+=2){var d=u[p],y=u[p+1],v=p+3,g=p+4;if("number"!=typeof d)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(f.length&&f[f.length-1][0]>=d)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var m=r.parse(y,g,h);if(!m)return null;h=h||m.type,f.push([d,m])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new t(h,o,a,s,f):r.error("Type ".concat(BA(h)," is not interpolatable."))}}]),t}();function pC(t,e,r,n){var i=n-r,o=t-r;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}var dC=hC,yC=function(){function t(e,r){nA(this,t),this.type=e,this.args=r}return oA(t,[{key:"evaluate",value:function(t){var e,r,n=null,i=0,o=KE(this.args);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(i++,(n=a.evaluate(t))&&n instanceof ZA&&!n.available&&(e||(e=n),n=null,i===this.args.length))return e;if(null!==n)break}}catch(t){o.e(t)}finally{o.f()}return n}},{key:"eachChild",value:function(t){this.args.forEach(t)}},{key:"outputDefined",value:function(){return this.args.every((function(t){return t.outputDefined()}))}},{key:"serialize",value:function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var n=null,i=r.expectedType;i&&"value"!==i.kind&&(n=i);var o,a=[],s=KE(e.slice(1));try{for(s.s();!(o=s.n()).done;){var u=o.value,l=r.parse(u,1+a.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,a.push(l)}}catch(t){s.e(t)}finally{s.f()}var c=i&&a.some((function(t){return zA(i,t.type)}));return new t(c?RA:n,a)}}]),t}(),vC=yC,gC=function(){function t(e,r){nA(this,t),this.type=r.type,this.bindings=[].concat(e),this.result=r}return oA(t,[{key:"evaluate",value:function(t){return this.result.evaluate(t)}},{key:"eachChild",value:function(t){var e,r=KE(this.bindings);try{for(r.s();!(e=r.n()).done;)t(e.value[1])}catch(t){r.e(t)}finally{r.f()}t(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var t,e=["let"],r=KE(this.bindings);try{for(r.s();!(t=r.n()).done;){var n=$E(t.value,2),i=n[0],o=n[1];e.push(i,o.serialize())}}catch(t){r.e(t)}finally{r.f()}return e.push(this.result.serialize()),e}}],[{key:"parse",value:function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));for(var n=[],i=1;i<e.length-1;i+=2){var o=e[i];if("string"!=typeof o)return r.error("Expected string, but found ".concat(JE(o)," instead."),i);if(/[^a-zA-Z0-9_]/.test(o))return r.error("Variable names must contain only alphanumeric characters or '_'.",i);var a=r.parse(e[i+1],i+1);if(!a)return null;n.push([o,a])}var s=r.parse(e[e.length-1],e.length-1,r.expectedType,n);return s?new t(n,s):null}}]),t}(),mC=gC,bC=function(){function t(e,r,n){nA(this,t),this.type=e,this.index=r,this.input=n}return oA(t,[{key:"evaluate",value:function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new QA("Array index out of bounds: ".concat(e," < 0."));if(e>=r.length)throw new QA("Array index out of bounds: ".concat(e," > ").concat(r.length-1,"."));if(e!==Math.floor(e))throw new QA("Array index must be an integer, but found ".concat(e," instead."));return r[e]}},{key:"eachChild",value:function(t){t(this.index),t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,PA),i=r.parse(e[2],2,DA(r.expectedType||RA));return n&&i?new t(i.type.itemType,n,i):null}}]),t}(),_C=bC,wC=function(){function t(e,r){nA(this,t),this.type=jA,this.needle=e,this.haystack=r}return oA(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(null==r)return!1;if(!UA(e,["boolean","string","number","null"]))throw new QA("Expected first argument to be of type boolean, string, number or null, but found ".concat(BA(HA(e))," instead."));if(!UA(r,["string","array"]))throw new QA("Expected second argument to be of type array or string, but found ".concat(BA(HA(r))," instead."));return r.indexOf(e)>=0}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,RA),i=r.parse(e[2],2,RA);return n&&i?GA(n.type,[jA,CA,PA,AA,RA])?new t(n,i):r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(BA(n.type)," instead")):null}}]),t}(),xC=wC,SC=function(){function t(e,r,n){nA(this,t),this.type=PA,this.needle=e,this.haystack=r,this.fromIndex=n}return oA(t,[{key:"evaluate",value:function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!UA(e,["boolean","string","number","null"]))throw new QA("Expected first argument to be of type boolean, string, number or null, but found ".concat(BA(HA(e))," instead."));if(!UA(r,["string","array"]))throw new QA("Expected second argument to be of type array or string, but found ".concat(BA(HA(r))," instead."));if(this.fromIndex){var n=this.fromIndex.evaluate(t);return r.indexOf(e,n)}return r.indexOf(e)}},{key:"eachChild",value:function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,RA),i=r.parse(e[2],2,RA);if(!n||!i)return null;if(!GA(n.type,[jA,CA,PA,AA,RA]))return r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(BA(n.type)," instead"));if(4===e.length){var o=r.parse(e[3],3,PA);return o?new t(n,i,o):null}return new t(n,i)}}]),t}(),kC=SC,OC=function(){function t(e,r,n,i,o,a){nA(this,t),this.inputType=e,this.type=r,this.input=n,this.cases=i,this.outputs=o,this.otherwise=a}return oA(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);return(HA(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}},{key:"eachChild",value:function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t,e=this,r=["match",this.input.serialize()],n=[],i={},o=KE(Object.keys(this.cases).sort());try{for(o.s();!(t=o.n()).done;){var a=t.value,s=i[this.cases[a]];void 0===s?(i[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}}catch(t){o.e(t)}finally{o.f()}for(var u=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,c=n;l<c.length;l++){var f=$E(c[l],2),h=f[0],p=f[1];1===p.length?r.push(u(p[0])):r.push(p.map(u)),r.push(this.outputs[h].serialize())}return r.push(this.otherwise.serialize()),r}}],[{key:"parse",value:function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return r.error("Expected an even number of arguments.");var n,i;r.expectedType&&"value"!==r.expectedType.kind&&(i=r.expectedType);for(var o={},a=[],s=2;s<e.length-1;s+=2){var u=e[s],l=e[s+1];Array.isArray(u)||(u=[u]);var c=r.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var f,h=KE(u);try{for(h.s();!(f=h.n()).done;){var p=f.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,HA(p)))return null}else n=HA(p);if(void 0!==o[String(p)])return c.error("Branch labels must be unique.");o[String(p)]=a.length}}catch(t){h.e(t)}finally{h.f()}var d=r.parse(l,s,i);if(!d)return null;i=i||d.type,a.push(d)}var y=r.parse(e[1],1,RA);if(!y)return null;var v=r.parse(e[e.length-1],e.length-1,i);return v?"value"!==y.type.kind&&r.concat(1).checkSubtype(n,y.type)?null:new t(n,i,y,o,a,v):null}}]),t}(),EC=OC,AC=function(){function t(e,r,n){nA(this,t),this.type=e,this.branches=r,this.otherwise=n}return oA(t,[{key:"evaluate",value:function(t){var e,r=KE(this.branches);try{for(r.s();!(e=r.n()).done;){var n=$E(e.value,2),i=n[0],o=n[1];if(i.evaluate(t))return o.evaluate(t)}}catch(t){r.e(t)}finally{r.f()}return this.otherwise.evaluate(t)}},{key:"eachChild",value:function(t){var e,r=KE(this.branches);try{for(r.s();!(e=r.n()).done;){var n=$E(e.value,2),i=n[0],o=n[1];t(i),t(o)}}catch(t){r.e(t)}finally{r.f()}t(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(t){var e=$E(t,2);return e[0],e[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&"value"!==r.expectedType.kind&&(n=r.expectedType);for(var i=[],o=1;o<e.length-1;o+=2){var a=r.parse(e[o],o,jA);if(!a)return null;var s=r.parse(e[o+1],o+1,n);if(!s)return null;i.push([a,s]),n=n||s.type}var u=r.parse(e[e.length-1],e.length-1,n);return u?new t(n,i,u):null}}]),t}(),PC=AC,CC=function(){function t(e,r,n,i){nA(this,t),this.type=e,this.input=r,this.beginIndex=n,this.endIndex=i}return oA(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!UA(e,["string","array"]))throw new QA("Expected first argument to be of type array or string, but found ".concat(BA(HA(e))," instead."));if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(r,n)}return e.slice(r)}},{key:"eachChild",value:function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1,RA),i=r.parse(e[2],2,PA);if(!n||!i)return null;if(!GA(n.type,[DA(RA),CA,RA]))return r.error("Expected first argument to be of type array or string, but found ".concat(BA(n.type)," instead"));if(4===e.length){var o=r.parse(e[3],3,PA);return o?new t(n.type,n,i,o):null}return new t(n.type,n,i)}}]),t}(),jC=CC;function MC(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function TC(t,e,r,n){return 0===n.compare(e,r)}function RC(t,e,r){var n="=="!==t&&"!="!==t;return function(){function i(t,e,r){nA(this,i),this.type=jA,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return oA(i,[{key:"evaluate",value:function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){var s=HA(o),u=HA(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new QA('Expected arguments for "'.concat(t,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){var l=HA(o),c=HA(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):e(i,o,a)}},{key:"eachChild",value:function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=t[0],o=e.parse(t[1],1,RA);if(!o)return null;if(!MC(r,o.type))return e.concat(1).error('"'.concat(r,"\" comparisons are not supported for type '").concat(BA(o.type),"'."));var a=e.parse(t[2],2,RA);if(!a)return null;if(!MC(r,a.type))return e.concat(2).error('"'.concat(r,"\" comparisons are not supported for type '").concat(BA(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '".concat(BA(o.type),"' and '").concat(BA(a.type),"'."));n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new rP(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new rP(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,IA)))return null}return new i(o,a,s)}}]),i}()}var IC=RC("==",(function(t,e,r){return e===r}),TC),LC=RC("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return!TC(0,e,r,n)})),FC=RC("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),DC=RC(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),BC=RC("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),NC=RC(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0})),zC=function(){function t(e,r,n,i,o,a){nA(this,t),this.type=CA,this.number=e,this.locale=r,this.currency=n,this.unit=i,this.minFractionDigits=o,this.maxFractionDigits=a}return oA(t,[{key:"evaluate",value:function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}},{key:"eachChild",value:function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}],[{key:"parse",value:function(e,r){if(3!==e.length)return r.error("Expected two arguments.");var n=r.parse(e[1],1,PA);if(!n)return null;var i=e[2];if("object"!==JE(i)||Array.isArray(i))return r.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=r.parse(i.locale,1,CA)))return null;var a=null;if(i.currency&&!(a=r.parse(i.currency,1,CA)))return null;var s=null;if(i.unit&&!(s=r.parse(i.unit,1,CA)))return null;var u=null;if(i["min-fraction-digits"]&&!(u=r.parse(i["min-fraction-digits"],1,PA)))return null;var l=null;return i["max-fraction-digits"]&&!(l=r.parse(i["max-fraction-digits"],1,PA))?null:new t(n,o,a,s,u,l)}}]),t}(),GC=function(){function t(e){nA(this,t),this.type=PA,this.input=e}return oA(t,[{key:"evaluate",value:function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new QA("Expected value to be of type string or array, but found ".concat(BA(HA(e))," instead."))}},{key:"eachChild",value:function(t){t(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,r){if(2!==e.length)return r.error("Expected 1 argument, but found ".concat(e.length-1," instead."));var n=r.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?r.error("Expected argument of type string or array, but found ".concat(BA(n.type)," instead.")):new t(n):null}}]),t}(),UC={"==":IC,"!=":LC,">":DC,"<":FC,">=":NC,"<=":BC,array:rP,at:_C,boolean:rP,case:PC,coalesce:vC,collator:pP,format:nP,image:iP,in:xC,"index-of":kC,interpolate:dC,"interpolate-hcl":dC,"interpolate-lab":dC,length:GC,let:mC,literal:$A,match:EC,number:rP,"number-format":zC,object:rP,slice:jC,step:qP,string:rP,"to-boolean":sP,"to-color":sP,"to-number":sP,"to-string":sP,var:DP,within:TP};function qC(t,e){var r=$E(e,4),n=r[0],i=r[1],o=r[2],a=r[3];n=n.evaluate(t),i=i.evaluate(t),o=o.evaluate(t);var s=a?a.evaluate(t):1,u=YA(n,i,o,s);if(u)throw new QA(u);return new vA(n/255*s,i/255*s,o/255*s,s)}function WC(t,e){return t in e}function VC(t,e){var r=e[t];return void 0===r?null:r}function ZC(t){return{type:t}}hP.register(UC,{error:[{kind:"error"},[CA],function(t,e){var r=$E(e,1)[0];throw new QA(r.evaluate(t))}],typeof:[CA,[RA],function(t,e){return BA(HA($E(e,1)[0].evaluate(t)))}],"to-rgba":[DA(PA,4),[MA],function(t,e){return $E(e,1)[0].evaluate(t).toArray()}],rgb:[MA,[PA,PA,PA],qC],rgba:[MA,[PA,PA,PA,PA],qC],has:{type:jA,overloads:[[[CA],function(t,e){return WC($E(e,1)[0].evaluate(t),t.properties())}],[[CA,TA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return WC(n.evaluate(t),i.evaluate(t))}]]},get:{type:RA,overloads:[[[CA],function(t,e){return VC($E(e,1)[0].evaluate(t),t.properties())}],[[CA,TA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return VC(n.evaluate(t),i.evaluate(t))}]]},"feature-state":[RA,[CA],function(t,e){return VC($E(e,1)[0].evaluate(t),t.featureState||{})}],properties:[TA,[],function(t){return t.properties()}],"geometry-type":[CA,[],function(t){return t.geometryType()}],id:[RA,[],function(t){return t.id()}],zoom:[PA,[],function(t){return t.globals.zoom}],pitch:[PA,[],function(t){return t.globals.pitch||0}],"distance-from-center":[PA,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[PA,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[PA,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[PA,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[RA,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[PA,ZC(PA),function(t,e){var r,n=0,i=KE(e);try{for(i.s();!(r=i.n()).done;)n+=r.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return n}],"*":[PA,ZC(PA),function(t,e){var r,n=1,i=KE(e);try{for(i.s();!(r=i.n()).done;)n*=r.value.evaluate(t)}catch(t){i.e(t)}finally{i.f()}return n}],"-":{type:PA,overloads:[[[PA,PA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return n.evaluate(t)-i.evaluate(t)}],[[PA],function(t,e){return-$E(e,1)[0].evaluate(t)}]]},"/":[PA,[PA,PA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return n.evaluate(t)/i.evaluate(t)}],"%":[PA,[PA,PA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return n.evaluate(t)%i.evaluate(t)}],ln2:[PA,[],function(){return Math.LN2}],pi:[PA,[],function(){return Math.PI}],e:[PA,[],function(){return Math.E}],"^":[PA,[PA,PA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return Math.pow(n.evaluate(t),i.evaluate(t))}],sqrt:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.sqrt(r.evaluate(t))}],log10:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.log(r.evaluate(t))/Math.LN10}],ln:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.log(r.evaluate(t))}],log2:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.log(r.evaluate(t))/Math.LN2}],sin:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.sin(r.evaluate(t))}],cos:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.cos(r.evaluate(t))}],tan:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.tan(r.evaluate(t))}],asin:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.asin(r.evaluate(t))}],acos:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.acos(r.evaluate(t))}],atan:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.atan(r.evaluate(t))}],min:[PA,ZC(PA),function(t,e){return Math.min.apply(Math,WE(e.map((function(e){return e.evaluate(t)}))))}],max:[PA,ZC(PA),function(t,e){return Math.max.apply(Math,WE(e.map((function(e){return e.evaluate(t)}))))}],abs:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.abs(r.evaluate(t))}],round:[PA,[PA],function(t,e){var r=$E(e,1)[0].evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.floor(r.evaluate(t))}],ceil:[PA,[PA],function(t,e){var r=$E(e,1)[0];return Math.ceil(r.evaluate(t))}],"filter-==":[jA,[CA,RA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return t.properties()[n.value]===i.value}],"filter-id-==":[jA,[RA],function(t,e){var r=$E(e,1)[0];return t.id()===r.value}],"filter-type-==":[jA,[CA],function(t,e){var r=$E(e,1)[0];return t.geometryType()===r.value}],"filter-<":[jA,[CA,RA],function(t,e){var r=$E(e,2),n=r[0],i=r[1],o=t.properties()[n.value],a=i.value;return JE(o)===JE(a)&&o<a}],"filter-id-<":[jA,[RA],function(t,e){var r=$E(e,1)[0],n=t.id(),i=r.value;return JE(n)===JE(i)&&n<i}],"filter->":[jA,[CA,RA],function(t,e){var r=$E(e,2),n=r[0],i=r[1],o=t.properties()[n.value],a=i.value;return JE(o)===JE(a)&&o>a}],"filter-id->":[jA,[RA],function(t,e){var r=$E(e,1)[0],n=t.id(),i=r.value;return JE(n)===JE(i)&&n>i}],"filter-<=":[jA,[CA,RA],function(t,e){var r=$E(e,2),n=r[0],i=r[1],o=t.properties()[n.value],a=i.value;return JE(o)===JE(a)&&o<=a}],"filter-id-<=":[jA,[RA],function(t,e){var r=$E(e,1)[0],n=t.id(),i=r.value;return JE(n)===JE(i)&&n<=i}],"filter->=":[jA,[CA,RA],function(t,e){var r=$E(e,2),n=r[0],i=r[1],o=t.properties()[n.value],a=i.value;return JE(o)===JE(a)&&o>=a}],"filter-id->=":[jA,[RA],function(t,e){var r=$E(e,1)[0],n=t.id(),i=r.value;return JE(n)===JE(i)&&n>=i}],"filter-has":[jA,[RA],function(t,e){return $E(e,1)[0].value in t.properties()}],"filter-has-id":[jA,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[jA,[DA(CA)],function(t,e){return $E(e,1)[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jA,[DA(RA)],function(t,e){return $E(e,1)[0].value.indexOf(t.id())>=0}],"filter-in-small":[jA,[CA,DA(RA)],function(t,e){var r=$E(e,2),n=r[0];return r[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[jA,[CA,DA(RA)],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return function(t,e,r,n){for(;r<=n;){var i=r+n>>1;if(e[i]===t)return!0;e[i]>t?n=i-1:r=i+1}return!1}(t.properties()[n.value],i.value,0,i.value.length-1)}],all:{type:jA,overloads:[[[jA,jA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return n.evaluate(t)&&i.evaluate(t)}],[ZC(jA),function(t,e){var r,n=KE(e);try{for(n.s();!(r=n.n()).done;)if(!r.value.evaluate(t))return!1}catch(t){n.e(t)}finally{n.f()}return!0}]]},any:{type:jA,overloads:[[[jA,jA],function(t,e){var r=$E(e,2),n=r[0],i=r[1];return n.evaluate(t)||i.evaluate(t)}],[ZC(jA),function(t,e){var r,n=KE(e);try{for(n.s();!(r=n.n()).done;)if(r.value.evaluate(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}]]},"!":[jA,[jA],function(t,e){return!$E(e,1)[0].evaluate(t)}],"is-supported-script":[jA,[CA],function(t,e){var r=$E(e,1)[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(r.evaluate(t))}],upcase:[CA,[CA],function(t,e){return $E(e,1)[0].evaluate(t).toUpperCase()}],downcase:[CA,[CA],function(t,e){return $E(e,1)[0].evaluate(t).toLowerCase()}],concat:[CA,ZC(RA),function(t,e){return e.map((function(e){return KA(e.evaluate(t))})).join("")}],"resolved-locale":[CA,[IA],function(t,e){return $E(e,1)[0].evaluate(t).resolvedLocale()}]});var YC=UC;function XC(t){return{result:"success",value:t}}function HC(t){return{result:"error",value:t}}function KC(t){return"object"===JE(t)&&null!==t&&!Array.isArray(t)}var JC=function(){function t(e,r){nA(this,t),this.expression=e,this._warningHistory={},this._evaluator=new cP,this._defaultValue=r?function(t){return"color"===t.type&&(KC(t.default)||Array.isArray(t.default))?new vA(0,0,0,0):"color"===t.type?vA.parse(t.default)||null:void 0===t.default?null:t.default}(r):null,this._enumValues=r&&"enum"===r.type?r.values:null}return oA(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(t,e,r,n,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new QA("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", "),", but found ").concat(JSON.stringify(u)," instead."));return u}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}]),t}();function $C(t,e){var r=new NP(YC,[],e?function(t){var e={color:MA,string:CA,number:PA,enum:CA,boolean:jA,formatted:LA,resolvedImage:FA};return"array"===t.type?DA(e[t.value]||RA,t.length):e[t.type]}(e):void 0),n=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?XC(new JC(n,e)):HC(r.errors)}var QC=function(){function t(e,r){nA(this,t),this.kind=e,this._styleExpression=r,this.isStateDependent="constant"!==e&&!IP(r.expression)}return oA(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}},{key:"evaluate",value:function(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}}]),t}(),tj=function(){function t(e,r,n,i){nA(this,t),this.kind=e,this.zoomStops=n,this._styleExpression=r,this.isStateDependent="camera"!==e&&!IP(r.expression),this.interpolationType=i}return oA(t,[{key:"evaluateWithoutErrorHandling",value:function(t,e,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,o)}},{key:"evaluate",value:function(t,e,r,n,i,o){return this._styleExpression.evaluate(t,e,r,n,i,o)}},{key:"interpolationFactor",value:function(t,e,r){return this.interpolationType?dC.interpolationFactor(this.interpolationType,t,e,r):0}}]),t}();function ej(t,e){if("error"===(t=$C(t,e)).result)return t;var r=t.value.expression,n=RP(r);if(!n&&!function(t){return"data-driven"===t["property-type"]}(e))return HC([new OA("","data expressions not supported")]);var i=LP(r,["zoom","pitch","distance-from-center"]);if(!i&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(e))return HC([new OA("","zoom expressions not supported")]);var o=rj(r);if(!o&&!i)return HC([new OA("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof OA)return HC([o]);if(o instanceof dC&&!function(t){return!!t.expression&&t.expression.interpolated}(e))return HC([new OA("",'"interpolate" expressions cannot be used with this property')]);if(!o)return XC(new QC(n?"constant":"source",t.value));var a=o instanceof dC?o.interpolation:void 0;return XC(new tj(n?"camera":"composite",t.value,o.labels,a))}function rj(t){var e=null;if(t instanceof mC)e=rj(t.result);else if(t instanceof vC){var r,n=KE(t.args);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(e=rj(i))break}}catch(t){n.e(t)}finally{n.f()}}else(t instanceof qP||t instanceof dC)&&t.input instanceof hP&&"zoom"===t.input.name&&(e=t);return e instanceof OA||t.eachChild((function(t){var r=rj(t);r instanceof OA?e=r:!e&&r?e=new OA("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new OA("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function nj(t){if(Array.isArray(t))return t.map(nj);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var r in t)e[r]=nj(t[r]);return e}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}var ij={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function oj(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":var e,r=KE(t.slice(1));try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!oj(n)&&"boolean"!=typeof n)return!1}}catch(t){r.e(t)}finally{r.f()}return!0;default:return!0}}function aj(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};oj(t)||(t=pj(t));var r=t,n=!0;try{n=function(t){if(!lj(t))return t;var e=nj(t);return uj(e),sj(e)}(r)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(r,null,2),"\n        "))}var i,o=ij["filter_".concat(e)],a=$C(n,o);if("error"===a.result)throw new Error(a.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));i=function(t,e,r){return a.value.evaluate(t,e,{},r)};var s=null,u=null;if(n!==r){var l=$C(r,o);if("error"===l.result)throw new Error(l.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));s=function(t,e,r,n,i){return l.value.evaluate(t,e,{},r,void 0,void 0,n,i)},u=!RP(l.value.expression)}return{filter:i,dynamicFilter:s||void 0,needGeometry:hj(n),needFeature:!!u}}function sj(t){if(!Array.isArray(t))return t;var e=function(t){if(cj.has(t[0]))for(var e=1;e<t.length;e++)if(lj(t[e]))return!0;return t}(t);return!0===e?e:e.map((function(t){return sj(t)}))}function uj(t){var e=!1,r=[];if("case"===t[0]){for(var n=1;n<t.length-1;n+=2)e=e||lj(t[n]),r.push(t[n+1]);r.push(t[t.length-1])}else if("match"===t[0]){e=e||lj(t[1]);for(var i=2;i<t.length-1;i+=2)r.push(t[i+1]);r.push(t[t.length-1])}else if("step"===t[0]){e=e||lj(t[1]);for(var o=1;o<t.length-1;o+=2)r.push(t[o+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(r)));for(var a=1;a<t.length;a++)uj(t[a])}function lj(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;for(var e,r=1;r<t.length;r++)if(lj(t[r]))return!0;return!1}var cj=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function fj(t,e){return t<e?-1:t>e?1:0}function hj(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(hj(t[e]))return!0;return!1}function pj(t){if(!t)return!0;var e,r=t[0];return t.length<=1?"any"!==r:"=="===r?dj(t[1],t[2],"=="):"!="===r?gj(dj(t[1],t[2],"==")):"<"===r||">"===r||"<="===r||">="===r?dj(t[1],t[2],r):"any"===r?(e=t.slice(1),["any"].concat(e.map(pj))):"all"===r?["all"].concat(t.slice(1).map(pj)):"none"===r?["all"].concat(t.slice(1).map(pj).map(gj)):"in"===r?yj(t[1],t.slice(2)):"!in"===r?gj(yj(t[1],t.slice(2))):"has"===r?vj(t[1]):"!has"===r?gj(vj(t[1])):"within"!==r||t}function dj(t,e,r){switch(t){case"$type":return["filter-type-".concat(r),e];case"$id":return["filter-id-".concat(r),e];default:return["filter-".concat(r),t,e]}}function yj(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return JE(t)!==JE(e[0])}))?["filter-in-large",t,["literal",e.sort(fj)]]:["filter-in-small",t,["literal",e]]}}function vj(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function gj(t){return["!",t]}var mj=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bj(t,e){var r={};for(var n in t)"ref"!==n&&(r[n]=t[n]);return mj.forEach((function(t){t in e&&(r[t]=e[t])})),r}function _j(t){t=t.slice();for(var e=Object.create(null),r=0;r<t.length;r++)e[t[r].id]=t[r];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=bj(t[n],e[t[n].ref]));return t}var wj={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},xj=" ",Sj=/(italic|oblique)$/i,kj={},Oj=sA((function(t,e,r){var n=kj[t];if(!n){Array.isArray(t)||(t=[t]);for(var i=400,o="normal",a=[],s=0,u=t.length;s<u;++s){var l=t[s].split(" "),c=l[l.length-1].toLowerCase();for(var f in"normal"==c||"italic"==c||"oblique"==c?(o=c,l.pop(),c=l[l.length-1].toLowerCase()):Sj.test(c)&&(c=c.replace(Sj,""),o=l[l.length-1].replace(c,"")),wj){var h=l.length>1?l[l.length-2].toLowerCase():"";if(c==f||c==f.replace("-","")||h+"-"+c==f){i=wj[f],l.pop(),h&&f.startsWith(h)&&l.pop();break}}"number"==typeof c&&(i=c);var p=l.join(xj).replace("Klokantech Noto Sans","Noto Sans");-1!==p.indexOf(xj)&&(p='"'+p+'"'),a.push(p)}n=kj[t]=[o,i,a]}return n[0]+xj+n[1]+xj+e+"px"+(r?"/"+r:"")+xj+n[2]})),Ej="https://api.mapbox.com";function Aj(t){return 0!==t.indexOf("mapbox://")?"":t.slice(9)}function Pj(t,e){var r=Aj(t);if(!r)return decodeURI(new URL(t,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: ".concat(t));var n=r.slice(7);return"".concat(Ej,"/styles/v1/").concat(n,"?&access_token=").concat(e)}function Cj(t,e,r,n){var i=new URL(t,n),o=Aj(t);if(!o)return e?(i.searchParams.has(r)||i.searchParams.set(r,e),decodeURI(i.href)):decodeURI(i.href);if("mapbox.satellite"===o){var a=window.devicePixelRatio>=1.5?"@2x":"";return"https://api.mapbox.com/v4/".concat(o,"/{z}/{x}/{y}").concat(a,".webp?access_token=").concat(e)}return"https://{a-d}.tiles.mapbox.com/v4/".concat(o,"/{z}/{x}/{y}.vector.pbf?access_token=").concat(e)}var jj={},Mj={},Tj=0;function Rj(t){return t.id||(t.id=Tj++),t.id}function Ij(t){var e=jj[t.id];return e||(e={},jj[Rj(t)]=e),e}function Lj(t){return t*Math.PI/180}var Fj=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}(),Dj=new tg({extent:ko("EPSG:3857").getExtent(),resolutions:Fj});function Bj(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var r=document.createElement("canvas");return r.width=t,r.height=e,r}function Nj(t,e){for(var r=0,n=e.length;r<n;++r)if(e[r]<t&&r+1<n){var i=e[r]/e[r+1];return r+Math.log(e[r]/t)/Math.log(i)}return n-1}var zj={};function Gj(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(e in zj)return n&&(n.request=zj[e][0]),zj[e][1];var i=r.transformRequest&&r.transformRequest(e,t)||e,o=Ue((function(){return i})).then((function(t){return t instanceof Request||(t=new Request(t)),t.headers.get("Accept")||t.headers.set("Accept","application/json"),n&&(n.request=t),fetch(t).then((function(t){return delete zj[e],t.ok?t.json():Promise.reject(new Error("Error fetching source "+e))})).catch((function(t){return delete zj[e],Promise.reject(new Error("Error fetching source "+e))}))}));return zj[e]=[i,o],o}function Uj(t,e){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return Gj("Style",t=Pj(t,e.accessToken),e);try{var r=JSON.parse(t);return Promise.resolve(r)}catch(t){return Promise.reject(t)}}var qj={};function Wj(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[e,JSON.stringify(t)].toString(),i=qj[n];if(!i||r.transformRequest){var o;r.transformRequest&&(o=function(t,e){var n=r.transformRequest&&r.transformRequest(e,"Tiles")||e;if(t instanceof lm)t.setLoader((function(e,r,i){Ue((function(){return n})).then((function(r){fetch(r).then((function(t){return t.arrayBuffer()})).then((function(r){var n=t.getFormat().readFeatures(r,{extent:e,featureProjection:i});t.setFeatures(n)})).catch((function(e){return t.setState(Pl.ERROR)}))}))}));else{var i=t.getImage();Ue((function(){return n})).then((function(e){e instanceof Request?fetch(e).then((function(t){return t.blob()})).then((function(t){var e=URL.createObjectURL(t);i.addEventListener("load",(function(){return URL.revokeObjectURL(e)})),i.addEventListener("error",(function(){return URL.revokeObjectURL(e)})),i.src=e})).catch((function(e){return t.setState(Pl.ERROR)})):i.src=e}))}});var a=t.url;if(a&&!t.tiles){var s=Cj(a,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(a.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:wg(s)}),tileLoadFunction:o});else{var u={};i=Gj("Source",s,r,u).then((function(t){return t.tiles=t.tiles.map((function(e){return"tms"===t.scheme&&(e=e.replace("{y}","{-y}")),Cj(e,r.accessToken,r.accessTokenParam||"access_token",u.request.url)})),Promise.resolve({tileJson:t,tileLoadFunction:o})}))}}else t=Object.assign({},t,{tiles:t.tiles.map((function(n){return"tms"===t.scheme&&(n=n.replace("{y}","{-y}")),Cj(n,r.accessToken,r.accessTokenParam||"access_token",e||location.href)}))}),i=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:o});qj[n]=i}return i}function Vj(t,e,r,n){var i=document.createElement("canvas"),o=[2*r*e.pixelRatio+e.width,2*r*e.pixelRatio+e.height];i.width=o[0],i.height=o[1];var a=i.getContext("2d");a.drawImage(t,e.x,e.y,e.width,e.height,r*e.pixelRatio,r*e.pixelRatio,e.width,e.height);var s=a.getImageData(0,0,o[0],o[1]);a.globalCompositeOperation="destination-over",a.fillStyle="rgba(".concat(255*n.r,",").concat(255*n.g,",").concat(255*n.b,",").concat(n.a,")");for(var u=s.data,l=0,c=s.width;l<c;++l)for(var f=0,h=s.height;f<h;++f)u[4*(f*c+l)+3]>0&&a.arc(l,f,r*e.pixelRatio,0,2*Math.PI);return a.fill(),i}function Zj(t,e,r){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var i=n.getContext("2d");i.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);for(var o,a,s=i.getImageData(0,0,e.width,e.height),u=s.data,l=0,c=s.width;l<c;++l)for(var f=0,h=s.height;f<h;++f){var p=4*(f*c+l),d=(o=u[p+3]/255,(a=Math.max(0,Math.min(1,(o-.65)/(.85-.65))))*a*(3-2*a));d>0?(u[p+0]=Math.round(255*r.r*d),u[p+1]=Math.round(255*r.g*d),u[p+2]=Math.round(255*r.b*d),u[p+3]=Math.round(255*d)):u[p+3]=0}return i.putImageData(s,0,0),n}var Yj,Xj=Array(256).join(" ");function Hj(t,e){if(e>=.05){for(var r="",n=t.split("\n"),i=Xj.slice(0,Math.round(e/.1)),o=0,a=n.length;o<a;++o)o>0&&(r+="\n"),r+=n[o].split("").join(i);return r}return t}function Kj(){return Yj||(Yj=Bj(1,1).getContext("2d")),Yj}function Jj(t,e){return Kj().measureText(t).width+(t.length-1)*e}var $j={};function Qj(t,e,r,n){if(-1!==t.indexOf("\n")){for(var i=t.split("\n"),o=[],a=0,s=i.length;a<s;++a)o.push(Qj(i[a],e,r,n));return o.join("\n")}var u=r+","+e+","+t+","+n,l=$j[u];if(!l){var c=t.split(" ");if(c.length>1){var f=Kj();f.font=e;for(var h=f.measureText("M").width*r,p="",d=[],y=0,v=c.length;y<v;++y){var g=c[y],m=p+(p?" ":"")+g;Jj(m,n)<=h?p=m:(p&&d.push(p),p=g)}p&&d.push(p);for(var b=0,_=d.length;b<_&&_>1;++b){var w=d[b];if(Jj(w,n)<.35*h){var x=b>0?Jj(d[b-1],n):1/0,S=b<_-1?Jj(d[b+1],n):1/0;d.splice(b,1),_-=1,x<S?(d[b-1]+=" "+w,b-=1):d[b]=w+" "+d[b]}}for(var k=0,O=d.length-1;k<O;++k){var E=d[k],A=d[k+1];if(Jj(E,n)>.7*h&&Jj(A,n)<.6*h){var P=E.split(" "),C=P.pop();Jj(C,n)<.2*h&&(d[k]=P.join(" "),d[k+1]=C+" "+A),O-=1}}l=d.join("\n")}else l=t;l=Hj(l,n),$j[u]=l}return l}var tM,eM=/font-family: ?([^;]*);/,rM=/("|')/g;function nM(t){if(!tM){tM={};for(var e=document.styleSheets,r=0,n=e.length;r<n;++r){var i=e[r];try{var o=i.rules||i.cssRules;if(o)for(var a=0,s=o.length;a<s;++a){var u=o[a];if(5==u.type){var l=u.cssText.match(eM);tM[l[1].replace(rM,"")]=!0}}}catch(t){}}}return t in tM}var iM={};function oM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css",r=t.toString();if(r in iM)return iM[r];for(var n=[],i=0,o=t.length;i<o;++i){t[i]=t[i].replace("Arial Unicode MS","Arial");var a=t[i],s=Oj(a,1);yf(s);var u=s.split(" ");n.push([u.slice(3).join(" ").replace(/"/g,""),u[1],u[0]])}for(var l=0,c=n.length;l<c;++l){var f=n[l],h=f[0];if(!nM(h)&&100!==hf.get("".concat(f[2],"\n").concat(f[1]," \n").concat(h))){var p=e.replace("{font-family}",h.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",h.replace(/ /g,"+")).replace("{fontweight}",f[1]).replace("{-fontstyle}",f[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",f[2]);if(!document.querySelector('link[href="'+p+'"]')){var d=document.createElement("link");d.href=p,d.rel="stylesheet",document.head.appendChild(d)}}}return iM[r]=t,t}var aM,sM,uM={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},lM={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},cM=function(t,e){var r=ej(t,e);if("error"===r.result)throw new Error(r.value.map((function(t){return"".concat(t.key,": ").concat(t.message)})).join(", "));return r.value},fM={},hM={zoom:0};function pM(t,e,r,n,i,o,a){var s=t.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[s]||(o[s]={});var u,l=o[s];if(!l[r]){var c=(t[e]||fM)[r],f=ij["".concat(e,"_").concat(t.type)][r];void 0===c&&(c=f.default);var h=(u=c,Array.isArray(u)&&u.length>0&&"string"==typeof u[0]&&u[0]in YC);if(!h&&KC(c)&&(c=function(t,e){var r=t.stops;if(!r)return function(t,e){var r=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",r]:r;if("enum"===e.type)return["match",r,Object.keys(e.values),r,t.default];var n=["color"===e.type?"to-color":e.type,r,gA(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}(t,e);var n=r&&"object"===JE(r[0][0]),i=n||void 0!==t.property,o=n||!i;return r=r.map((function(t){return!i&&e.tokens&&"string"==typeof t[1]?[t[0],kA(t[1])]:[t[0],gA(t[1])]})),n?function(t,e,r){for(var n={},i={},o=[],a=0;a<r.length;a++){var s=r[a],u=s[0].zoom;void 0===n[u]&&(n[u]={zoom:u,type:t.type,property:t.property,default:t.default},i[u]=[],o.push(u)),i[u].push([s[0].value,s[1]])}if("exponential"===SA({},e)){var l,c=[mA(t),["linear"],["zoom"]],f=KE(o);try{for(f.s();!(l=f.n()).done;){var h=l.value;xA(c,h,_A(n[h],e,i[h]),!1)}}catch(t){f.e(t)}finally{f.f()}return c}var p,d=["step",["zoom"]],y=KE(o);try{for(y.s();!(p=y.n()).done;){var v=p.value;xA(d,v,_A(n[v],e,i[v]),!0)}}catch(t){y.e(t)}finally{y.f()}return wA(d),d}(t,e,r):o?function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["zoom"],o=SA(t,e),a=!1;if("interval"===o)n=["step",i],a=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'.concat(o,'"'));var s=void 0!==t.base?t.base:1;n=[mA(t),1===s?["linear"]:["exponential",s],i]}var u,l=KE(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;xA(n,c[0],c[1],a)}}catch(t){l.e(t)}finally{l.f()}return wA(n),n}(t,e,r):_A(t,e,r)}(c,f),h=!0),h){var p=cM(c,f);l[r]=p.evaluate.bind(p)}else"color"==f.type&&(c=vA.parse(c)),l[r]=function(){return c}}return hM.zoom=n,l[r](hM,i,a)}var dM=!1;function yM(t,e){if(t){if(!dM&&(0===t.a||0===e))return;var r=t.a;return e=void 0===e?1:e,0===r?"transparent":"rgba("+Math.round(255*t.r/r)+","+Math.round(255*t.g/r)+","+Math.round(255*t.b/r)+","+r*e+")"}return t}var vM=/\{[^{}}]*\}/g;function gM(t,e){return t.replace(vM,(function(t){return e[t.slice(1,-1)]||""}))}var mM=!1,bM={};function _M(t,e){var r,n,i,o,a,s,u,l,c,f,h,p,d,y,v,g,m,b,_,w,x=t[0],S=x.width,k=x.height,O=x.data,E=new Uint8ClampedArray(O.length),A=2*e.resolution,P=S-1,C=k-1,j=[0,0,0,0],M=2*Math.PI,T=Math.PI/2,R=Math.PI*e.sunEl/180,I=Math.PI*e.sunAz/180,L=Math.cos(R),F=Math.sin(R),D=e.highlightColor,B=e.shadowColor,N=e.accentColor,z=e.encoding;function G(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mapbox";return"mapbox"===e?.1*(256*t[0]*256+256*t[1]+t[2])-1e4:"terrarium"===e?256*t[0]+t[1]+t[2]/256-32768:void 0}for(n=0;n<=C;++n)for(o=0===n?0:n-1,a=n===C?C:n+1,r=0;r<=P;++r)i=r===P?P:r+1,s=4*(n*S+(0===r?0:r-1)),j[0]=O[s],j[1]=O[s+1],j[2]=O[s+2],j[3]=O[s+3],u=e.vert*G(j,z),s=4*(n*S+i),j[0]=O[s],j[1]=O[s+1],j[2]=O[s+2],j[3]=O[s+3],l=(e.vert*G(j,z)-u)/A,s=4*(o*S+r),j[0]=O[s],j[1]=O[s+1],j[2]=O[s+2],j[3]=O[s+3],u=e.vert*G(j,z),s=4*(a*S+r),j[0]=O[s],j[1]=O[s+1],j[2]=O[s+2],j[3]=O[s+3],c=(e.vert*G(j,z)-u)/A,h=(h=Math.atan2(c,-l))<0?T-h:h>T?M-h+T:T-h,f=Math.atan(Math.sqrt(l*l+c*c)),w=F*Math.cos(f)+L*Math.sin(f)*Math.cos(I-h),p=Math.cos(f),d=255*w,m=Math.min(Math.max(2*e.sunEl,0),1),b=1.875-1.75*e.opacity,_=.5!==e.opacity?T*((Math.pow(b,f)-1)/(Math.pow(b,T)-1)):f,v={r:(1-p)*N.r*m*255,g:(1-p)*N.g*m*255,b:(1-p)*N.b*m*255,a:(1-p)*N.a*m*255},y=Math.abs(((h+I)/Math.PI+.5)%2-1),g={r:(D.r*(1-y)+B.r*y)*d,g:(D.g*(1-y)+B.g*y)*d,b:(D.b*(1-y)+B.b*y)*d,a:(D.a*(1-y)+B.a*y)*d},E[s=4*(n*S+r)]=v.r*(1-y)+g.r,E[s+1]=v.g*(1-y)+g.g,E[s+2]=v.b*(1-y)+g.b,E[s+3]=O[s+3]*e.opacity*m*Math.sin(_);return new ImageData(E,S,k)}function wM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return t.getExtent()?rg({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Fj}function xM(t,e){return e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((function(t,r){e.accessToken=t,e.accessTokenParam=r}))),e}function SM(t,e){var r,n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,l=!0;return"string"==typeof a||Array.isArray(a)?o=a:(o=(i=a).source||i.layers,s=i),"string"==typeof s?(r=s,i={}):(r=s.styleUrl,i=s),!1===i.updateSource&&(l=!1),u||(u=i.resolutions),r||"string"!=typeof e||e.trim().startsWith("{")||(r=e),r&&(r=r.startsWith("data:")?location.href:Pj(r,i.accessToken),i=xM(r,i)),new Promise((function(a,s){Uj(e,i).then((function(e){if(8!=e.version)return s(new Error("glStyle version 8 required."));if(!(t instanceof rv||t instanceof Sv))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,f,h,p=t instanceof Sv?"vector":"geojson";if(o?n=Array.isArray(o)?e.layers.find((function(t){return t.id===o[0]})).source:o:(n=Object.keys(e.sources).find((function(t){return e.sources[t].type===p})),o=n),!n)return s(new Error("No ".concat(p," source found in the glStyle.")));function d(){if(!l)return Promise.resolve();if(t instanceof Sv)return AM(e.sources[n],r,i).then((function(e){var r=t.getSource();if(r?e!==r&&(r.setTileUrlFunction(e.getTileUrlFunction()),"function"==typeof r.setUrls&&"function"==typeof e.getUrls&&r.setUrls(e.getUrls()),r.format_||(r.format_=e.format_),r.getAttributions()||r.setAttributions(e.getAttributions()),r.getTileLoadFunction()===qE&&r.setTileLoadFunction(e.getTileLoadFunction()),Mo(r.getProjection(),e.getProjection())&&(r.tileGrid=e.getTileGrid())):t.setSource(e),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var n=t.getSource().getTileGrid();t.setMaxResolution(n.getResolution(n.getMinZoom()))}}));var o=e.sources[n],a=t.getSource();a&&a.get("mapbox-source")===o||(a=jM(o,r,i));var s=t.getSource();return s?a!==s&&(s.getAttributions()||s.setAttributions(a.getAttributions()),s.format_||(s.format_=a.getFormat()),s.url_=a.getUrl()):t.setSource(a),Promise.resolve()}function y(){if(h||e.sprite&&!c)h?(t.setStyle(h),d().then(a).catch(s)):s(new Error("Something went wrong trying to apply style."));else{if(i.projection&&!u){var r=ko(i.projection).getUnits();"m"!==r&&(u=Fj.map((function(t){return t/Ci[r]})))}h=function(t,e,r){var n,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fj,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if("string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");if(bM[function(t,e){return Rj(t)+"."+_r(e)}(e,t)]=Array.from(arguments),u)if("undefined"!=typeof Image){var f,h=new Image;Ue((function(){return u})).then((function(t){t instanceof Request?fetch(t).then((function(t){return t.blob()})).then((function(t){f=URL.createObjectURL(t),h.src=f})).catch((function(){})):(h.crossOrigin="anonymous",h.src=t,f&&URL.revokeObjectURL(f))})),h.onload=function(){n=h,i=[h.width,h.height],t.changed(),h.onload=null}}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var p=self;p.postMessage({action:"loadImage",src:u}),p.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===u&&(n=t.data.image,i=[n.width,n.height])}))}for(var d,y=_j(e.layers),v={},g=[],m={},b={},_=Ij(e),w=function(t){var e=Mj[t.id];return e||(e={},Mj[Rj(t)]=e),e}(e),x=0,S=y.length;x<S;++x){var k=y[x],O=k.id;if("string"==typeof r&&k.source==r||-1!==r.indexOf(O)){var E=k["source-layer"];if(d){if(k.source!==d)throw new Error('Layer "'.concat(O,'" does not use source "').concat(d))}else{d=k.source;var A=e.sources[d];if(!A)throw new Error('Source "'.concat(d,'" is not defined'));var P=A.type;if("vector"!==P&&"geojson"!==P)throw new Error('Source "'.concat(d,'" is not of type "vector" or "geojson", but "').concat(P,'"'))}var C=v[E];C||(C=[],v[E]=C),C.push({layer:k,index:x}),g.push(O)}}var j=new qf,M=new Nf,T=[],R=function(r,u,f){var h=r.getProperties(),p=v[h.layer];if(p){var d=a.indexOf(u);-1==d&&(d=Nj(u,a));for(var y,g=uM[r.getGeometry().getType()],x={id:r.getId(),properties:h,type:g},S=t.get("mapbox-featurestate")[r.getId()],k=-1,O=function(){var a=p[E],v=a.layer,O=v.id;if(void 0!==f&&f!==O)return 0;var A=v.layout||fM,P=v.paint||fM;if("none"===A.visibility||"minzoom"in v&&d<v.minzoom||"maxzoom"in v&&d>=v.maxzoom)return 0;var C=v.filter;if(!C||function(t,e,r,n,i){return i||console.warn("No filterCache provided to evaluateFilter()"),t in i||(i[t]=aj(e).filter),hM.zoom=n,i[t](hM,r)}(O,C,x,d,w)){var R,I,L,F,D,B;y=v;var N=a.index;if(3==g&&("fill"==v.type||"fill-extrusion"==v.type))if(I=pM(v,"paint",v.type+"-opacity",d,x,_,S),v.type+"-pattern"in P){var z=pM(v,"paint",v.type+"-pattern",d,x,_,S);if(z){var G="string"==typeof z?gM(z,h):z.toString();if(n&&s&&s[G]){++k,(B=T[k])&&B.getFill()&&!B.getStroke()&&!B.getText()||(B=new Jf({fill:new Nf}),T[k]=B),L=B.getFill(),B.setZIndex(N);var U=G+"."+I,q=b[U];if(!q){var W=s[G],V=Bj(W.width,W.height),Z=V.getContext("2d");Z.globalAlpha=I,Z.drawImage(n,W.x,W.y,W.width,W.height,0,0,W.width,W.height),q=Z.createPattern(V,"repeat"),b[U]=q}L.setColor(q)}}}else R=yM(pM(v,"paint",v.type+"-color",d,x,_,S),I),v.type+"-outline-color"in P&&(D=yM(pM(v,"paint",v.type+"-outline-color",d,x,_,S),I)),D||(D=R),(R||D)&&(++k,(!(B=T[k])||R&&!B.getFill()||!R&&B.getFill()||D&&!B.getStroke()||!D&&B.getStroke()||B.getText())&&(B=new Jf({fill:R?new Nf:void 0,stroke:D?new qf:void 0}),T[k]=B),R&&(L=B.getFill()).setColor(R),D&&((F=B.getStroke()).setColor(D),F.setWidth(.5)),B.setZIndex(N));if(1!=g&&"line"==v.type){R=!("line-pattern"in P)&&"line-color"in P?yM(pM(v,"paint","line-color",d,x,_,S),pM(v,"paint","line-opacity",d,x,_,S)):void 0;var Y=pM(v,"paint","line-width",d,x,_,S);R&&Y>0&&(++k,(B=T[k])&&B.getStroke()&&!B.getFill()&&!B.getText()||(B=new Jf({stroke:new qf}),T[k]=B),(F=B.getStroke()).setLineCap(pM(v,"layout","line-cap",d,x,_,S)),F.setLineJoin(pM(v,"layout","line-join",d,x,_,S)),F.setMiterLimit(pM(v,"layout","line-miter-limit",d,x,_,S)),F.setColor(R),F.setWidth(Y),F.setLineDash(P["line-dasharray"]?pM(v,"paint","line-dasharray",d,x,_,S).map((function(t){return t*Y})):null),B.setZIndex(N))}var X,H,K,J,$,Q,tt,et,rt,nt=!1,it=null,ot=0;if((1==g||2==g)&&"icon-image"in A){var at=pM(v,"layout","icon-image",d,x,_,S);if(at){X="string"==typeof at?gM(at,h):at.toString();var st=void 0,ut=c?c(t,X):void 0;if(n&&s&&s[X]||ut){var lt=pM(v,"layout","icon-rotation-alignment",d,x,_,S);if(2==g){var ct=r.getGeometry();if(ct.getFlatMidpoint||ct.getFlatMidpoints){var ft=ct.getExtent();if(Math.sqrt(Math.max(Math.pow((ft[2]-ft[0])/u,2),Math.pow((ft[3]-ft[1])/u,2)))>150){var ht="MultiLineString"===ct.getType()?ct.getFlatMidpoints():ct.getFlatMidpoint();if(sM||(sM=new em("Point",aM=[NaN,NaN],[],{},null)),st=sM,aM[0]=ht[0],aM[1]=ht[1],"line"===pM(v,"layout","symbol-placement",d,x,_,S)&&"map"===lt)for(var pt=ct.getStride(),dt=ct.getFlatCoordinates(),yt=0,vt=dt.length-pt;yt<vt;yt+=pt){var gt=dt[yt],mt=dt[yt+1],bt=dt[yt+pt],_t=dt[yt+pt+1],wt=Math.min(gt,bt),xt=Math.min(mt,_t),St=Math.max(gt,bt),kt=Math.max(mt,_t);if(ht[0]>=wt&&ht[0]<=St&&ht[1]>=xt&&ht[1]<=kt){ot=Math.atan2(mt-_t,bt-gt);break}}}}}if(2!==g||st){var Ot=pM(v,"layout","icon-size",d,x,_,S),Et=void 0!==P["icon-color"]?pM(v,"paint","icon-color",d,x,_,S):null;if(!Et||0!==Et.a){var At=pM(v,"paint","icon-halo-color",d,x,_,S),Pt=pM(v,"paint","icon-halo-width",d,x,_,S),Ct="".concat(X,".").concat(Ot,".").concat(Pt,".").concat(At);if(null!==Et&&(Ct+=".".concat(Et)),!(H=m[Ct])){var jt,Mt=function(t,e,r,n){return pM(t,"layout","icon-allow-overlap",e,r,n)?pM(t,"layout","icon-ignore-placement",e,r,n)?"none":"obstacle":"declutter"}(v,d,x,_);"icon-offset"in A&&((jt=pM(v,"layout","icon-offset",d,x,_,S).slice(0))[1]*=-1);var Tt=Et?[255*Et.r,255*Et.g,255*Et.b,Et.a]:void 0;if(ut){var Rt={color:Tt,rotateWithView:"map"===lt,displacement:jt,declutterMode:Mt,scale:Ot};"string"==typeof ut?Rt.src=ut:(Rt.img=ut,Rt.imgSize=[ut.width,ut.height]),H=new wh(Rt)}else{var It,Lt,Ft,Dt=s[X];Pt?Dt.sdf?(It=Vj(Zj(n,Dt,Et),{x:0,y:0,width:Dt.width,height:Dt.height,pixelRatio:Dt.pixelRatio},Pt,At),Tt=void 0):It=Vj(n,Dt,Pt,At):(Dt.sdf?(o||(o=Zj(n,{x:0,y:0,width:i[0],height:i[1]},{r:1,g:1,b:1,a:1})),It=o):It=n,Lt=[Dt.width,Dt.height],Ft=[Dt.x,Dt.y]),H=new wh({color:Tt,img:It,imgSize:i,size:Lt,offset:Ft,rotateWithView:"map"===lt,scale:Ot/Dt.pixelRatio,displacement:jt,declutterMode:Mt})}m[Ct]=H}}H&&(++k,(B=T[k])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new Jf,T[k]=B),B.setGeometry(st),H.setRotation(ot+Lj(pM(v,"layout","icon-rotate",d,x,_,S))),H.setOpacity(pM(v,"paint","icon-opacity",d,x,_,S)),H.setAnchor(lM[pM(v,"layout","icon-anchor",d,x,_,S)]),B.setImage(H),it=B.getText(),B.setText(void 0),B.setZIndex(N),nt=!0,K=!1)}else K=!0}}}if(1==g&&"circle"===v.type){++k,(B=T[k])&&B.getImage()&&!B.getFill()&&!B.getStroke()||(B=new Jf,T[k]=B);var Bt="circle-radius"in P?pM(v,"paint","circle-radius",d,x,_,S):5,Nt=yM(pM(v,"paint","circle-stroke-color",d,x,_,S),pM(v,"paint","circle-stroke-opacity",d,x,_,S)),zt=yM(pM(v,"paint","circle-color",d,x,_,S),pM(v,"paint","circle-opacity",d,x,_,S)),Gt=pM(v,"paint","circle-stroke-width",d,x,_,S),Ut=Bt+"."+Nt+"."+zt+"."+Gt;(H=m[Ut])||(H=new Lf({radius:Bt,stroke:Nt&&Gt>0?new qf({width:Gt,color:Nt}):void 0,fill:zt?new Nf({color:zt}):void 0,declutterMode:"none"}),m[Ut]=H),B.setImage(H),it=B.getText(),B.setText(void 0),B.setGeometry(void 0),B.setZIndex(N),nt=!0}if("text-field"in A){tt=Math.round(pM(v,"layout","text-size",d,x,_,S));var qt=pM(v,"layout","text-font",d,x,_,S);Q=pM(v,"layout","text-line-height",d,x,_,S),($=Oj(l?l(qt,e.metadata?e.metadata["ol:webfonts"]:void 0):qt,tt,Q)).includes("sans-serif")||($+=",sans-serif"),et=pM(v,"layout","text-letter-spacing",d,x,_,S),rt=pM(v,"layout","text-max-width",d,x,_,S);var Wt=pM(v,"layout","text-field",d,x,_,S);J="object"===JE(Wt)&&Wt.sections?1===Wt.sections.length?Wt.toString():Wt.sections.reduce((function(t,e,r){var n=e.fontStack?e.fontStack.split(","):qt,i=Oj(l?l(n):n,tt*(e.scale||1),Q),o=e.text;if("\n"===o)return t.push("\n",""),t;if(2!=g){for(var a=0,s=(o=Qj(o,i,rt,et).split("\n")).length;a<s;++a)a>0&&t.push("\n",""),t.push(o[a],i);return t}t.push(Hj(o,et),i)}),[]):gM(Wt,h).trim(),I=pM(v,"paint","text-opacity",d,x,_,S)}if(J&&I&&!K){nt||(++k,(B=T[k])&&B.getText()&&!B.getFill()&&!B.getStroke()||(B=new Jf,T[k]=B),B.setImage(void 0),B.setGeometry(void 0)),B.getText()||B.setText(it||new Oh({padding:[2,2,2,2]})),it=B.getText();var Vt=A["text-transform"];"uppercase"==Vt?J=Array.isArray(J)?J.map((function(t,e){return e%2?t:t.toUpperCase()})):J.toUpperCase():"lowercase"==Vt&&(J=Array.isArray(J)?J.map((function(t,e){return e%2?t:t.toLowerCase()})):J.toLowerCase());var Zt=Array.isArray(J)?J:2==g?Hj(J,et):Qj(J,$,rt,et);it.setText(Zt),it.setFont($),it.setRotation(Lj(pM(v,"layout","text-rotate",d,x,_,S)));var Yt,Xt=pM(v,"layout","text-anchor",d,x,_,S),Ht=nt||1==g?"point":pM(v,"layout","symbol-placement",d,x,_,S);if("line-center"===Ht?(it.setPlacement("line"),Yt="center"):it.setPlacement(Ht),"line"===Ht&&"function"==typeof it.setRepeat){var Kt=pM(v,"layout","symbol-spacing",d,x,_,S);it.setRepeat(2*Kt)}it.setOverflow("point"===Ht);var Jt=pM(v,"paint","text-halo-width",d,x,_,S),$t=pM(v,"layout","text-offset",d,x,_,S),Qt=pM(v,"paint","text-translate",d,x,_,S),te=0,ee=0;if("point"==Ht){Yt="center",-1!==Xt.indexOf("left")?(Yt="left",ee=Jt):-1!==Xt.indexOf("right")&&(Yt="right",ee=-Jt);var re=pM(v,"layout","text-rotation-alignment",d,x,_,S);it.setRotateWithView("map"==re)}else it.setMaxAngle(Lj(pM(v,"layout","text-max-angle",d,x,_,S))*J.length/Zt.length),it.setRotateWithView(!1);it.setTextAlign(Yt);var ne="middle";0==Xt.indexOf("bottom")?(ne="bottom",te=-Jt-.5*(Q-1)*tt):0==Xt.indexOf("top")&&(ne="top",te=Jt+.5*(Q-1)*tt),it.setTextBaseline(ne);var ie=pM(v,"layout","text-justify",d,x,_,S);it.setJustify("auto"===ie?void 0:ie),it.setOffsetX($t[0]*tt+ee+Qt[0]),it.setOffsetY($t[1]*tt+te+Qt[1]),M.setColor(yM(pM(v,"paint","text-color",d,x,_,S),I)),it.setFill(M);var oe=yM(pM(v,"paint","text-halo-color",d,x,_,S),I);if(oe){j.setColor(oe),Jt*=2;var ae=.5*tt;j.setWidth(Jt<=ae?Jt:ae),it.setStroke(j)}else it.setStroke(void 0);var se=pM(v,"layout","text-padding",d,x,_,S),ue=it.getPadding();se!==ue[0]&&(ue[0]=se,ue[1]=se,ue[2]=se,ue[3]=se),B.setZIndex(N)}}},E=0,A=p.length;E<A;++E)O();return k>-1?(T.length=k+1,mM&&("set"in r?r.set("mapbox-layer",y):r.getProperties()["mapbox-layer"]=y),T):void 0}};return t.setStyle(R),t.set("mapbox-source",d),t.set("mapbox-layers",g),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),R}(t,e,o,u,c,f,oM,i.getImage),t.getStyle()?d().then(a).catch(s):s(new Error("Nothing to show for source [".concat(n,"]")))}}if(e.sprite){var v=new URL(function(t,e,r){var n=Aj(t);if(!n)return decodeURI(new URL(t,r).href);if(0!==n.indexOf("sprites/"))throw new Error("unexpected sprites url: ".concat(t));var i=n.slice(8);return"".concat(Ej,"/styles/v1/").concat(i,"/sprite?access_token=").concat(e)}(e.sprite,i.accessToken,r||location.href)),g=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",m=v.origin+v.pathname+g+".json"+v.search;new Promise((function(t,e){Gj("Sprite",m,i).then(t).catch((function(r){Gj("Sprite",m=v.origin+v.pathname+".json"+v.search,i).then(t).catch(e)}))})).then((function(t){if(void 0===t&&s(new Error("No sprites found.")),c=t,f=v.origin+v.pathname+g+".png"+v.search,i.transformRequest){var e=i.transformRequest(f,"SpriteImage")||f;(e instanceof Request||e instanceof Promise)&&(f=e)}y()})).catch((function(t){s(new Error("Sprites cannot be loaded: ".concat(m,": ").concat(t.message)))}))}else y()})).catch(s)}))}var kM={};function OM(t,e){var r;return t.some((function(t){if(t.id==e)return r=t.source,!0})),r}function EM(t,e,r){var n=new KO({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),i=n.getTileJSON(),o=n.getTileGrid(),a=ko(r.projection||"EPSG:3857"),s=function(t,e){var r=t.bounds;if(r){var n=Co([r[0],r[1]],e),i=Co([r[2],r[3]],e);return[n[0],n[1],i[0],i[1]]}return ko(e).getExtent()}(i,a),u=a.getExtent(),l=i.minzoom||0,c=i.maxzoom||22,f={attributions:n.getAttributions(),projection:a,tileGrid:new tg({origin:u?ei(u):o.getOrigin(0),extent:s||o.getExtent(),minZoom:l,resolutions:wM(a,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(i.tiles)?f.urls=i.tiles:f.url=i.tiles,f}function AM(t,e,r){return new Promise((function(n,i){Wj(t,e,r).then((function(e){var i=e.tileJson,o=e.tileLoadFunction,a=EM(t,i,r);a.tileLoadFunction=o,a.format=new v_,n(new UE(a))})).catch(i)}))}function PM(t){var e=t?t.getCode():"EPSG:3857";return"{bbox-".concat(e.toLowerCase().replace(/[^a-z0-9]/g,"-"),"}")}function CM(t,e,r){var n=new zc;return function(t,e,r){return new Promise((function(n,i){Wj(t,e,r).then((function(e){var i=e.tileJson,o=e.tileLoadFunction,a=new KO({interpolate:void 0===r.interpolate||r.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:i});a.tileGrid=EM(t,i,r).tileGrid,r.projection&&(a.projection=ko(r.projection));var s=a.getTileUrlFunction();o&&a.setTileLoadFunction(o),a.setTileUrlFunction((function(t,e,r){var n=PM(r),i=s(t,e,r);if(-1!=i.indexOf(n)){var o=a.getTileGrid().getTileCoordExtent(t);i=i.replace(n,o.toString())}return i})),a.set("mapbox-source",t),n(a)})).catch((function(t){i(t)}))}))}(t,e,r).then((function(t){n.setSource(t)})).catch((function(){n.setSource(void 0)})),n}function jM(t,e,r){var n=r.projection?new Tb({dataProjection:r.projection}):new Tb,i=t.data,o={};if("string"==typeof i){var a=Cj(i,r.accessToken,r.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){var s=new xE({attributions:t.attribution,format:n,loader:function(t,e,n,i,o){Gj("GeoJSON",function(t,e,r){var n=PM(r);return a.replace(n,"".concat(t.join(",")))}(t,0,n),r).then((function(t){var e=s.getFormat().readFeatures(t,{featureProjection:n});s.addFeatures(e),i(e)})).catch((function(e){s.removeLoadedExtent(t),o()}))},strategy:iE});return s.set("mapbox-source",t),s}var u=new xE({attributions:t.attribution,format:n,url:a,loader:function(t,e,n,i,o){Gj("GeoJSON",a,r).then((function(t){var e=u.getFormat().readFeatures(t,{featureProjection:n});u.addFeatures(e),i(e)})).catch((function(e){u.removeLoadedExtent(t),o()}))}});return u}o.features=n.readFeatures(i,{featureProjection:zo()||"EPSG:3857"});var l=new xE(Object.assign({attributions:t.attribution,format:n},o));return l.set("mapbox-source",t),l}function MM(t,e,r,n){var i,o=Ij(t),a=t.layers,s=r.type,u=r.source||OM(a,r.ref),l=t.sources[u];if("background"==s)i=function(t,e,r){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new yu({source:new Hv({}),render:function(i){var o=function(t,e,r,n){var i={id:t.id,type:t.type},o=t.layout||{},a=t.paint||{};i.paint=a;var s,u,l=Nj(e,r.resolutions||Fj);return void 0!==a["background-color"]&&(s=pM(i,"paint","background-color",l,kM,n)),void 0!==a["background-opacity"]&&(u=pM(i,"paint","background-opacity",l,kM,n)),"none"==o.visibility?void 0:yM(s,u)}(t,i.viewState.resolution,e,r);return n.style.backgroundColor=o,n}})}(r,n,o);else if("vector"==l.type)i=function(t,e,r){var n=new Sv({declutter:!0,visible:!1});return AM(t,e,r).then((function(e){e.set("mapbox-source",t),n.setSource(e)})).catch((function(t){n.setSource(void 0)})),n}(l,e,n);else if("raster"==l.type)(i=CM(l,e,n)).setVisible(!r.layout||"none"!==r.layout.visibility),i.on("prerender",function(t,e,r){var n=null;return function(i){t.paint&&"raster-opacity"in t.paint&&i.frameState.viewState.zoom!==n&&(n=i.frameState.viewState.zoom,delete r[t.id],function(t,e,r,n){var i=pM(t,"paint","raster-opacity",r,kM,n);e.setOpacity(i)}(t,e,n,r))}}(r,i,o));else if("geojson"==l.type)i=function(t,e,r){return new rv({declutter:!0,source:jM(t,e,r),visible:!1})}(l,e,n);else if("raster-dem"==l.type&&"hillshade"==r.type){var c=function(t,e,r){var n=CM(t,e,r);return new n_({source:new GO({operationType:"image",operation:_M,sources:[n]})})}(l,e,n);i=c,c.getSource().on("beforeoperations",(function(t){var e=t.data;e.resolution=t.resolution;var i=Nj(t.resolution,n.resolutions||Fj);e.encoding=l.encoding,e.vert=5*pM(r,"paint","hillshade-exaggeration",i,kM,o),e.sunAz=pM(r,"paint","hillshade-illumination-direction",i,kM,o),e.sunEl=35,e.opacity=.3,e.highlightColor=pM(r,"paint","hillshade-highlight-color",i,kM,o),e.shadowColor=pM(r,"paint","hillshade-shadow-color",i,kM,o),e.accentColor=pM(r,"paint","hillshade-accent-color",i,kM,o)})),i.setVisible(!r.layout||"none"!==r.layout.visibility)}var f=u;return i&&i.set("mapbox-source",f),i}function TM(t,e,r,n){var i=[],o=null;if(e instanceof Uk){if(!(o=e.getView()).isDef()&&!o.getRotation()&&!o.getResolutions()){var a=n.projection?ko(n.projection):o.getProjection();o=new ou(Object.assign(o.getProperties(),{maxResolution:Fj[0]/Ci[a.getUnits()],projection:n.projection||o.getProjection()})),e.setView(o)}"center"in t&&!o.getCenter()&&o.setCenter(Co(t.center,o.getProjection())),"zoom"in t&&void 0===o.getZoom()&&o.setResolution(Fj[0]/Ci[o.getProjection().getUnits()]/Math.pow(2,t.zoom)),o.getCenter()&&void 0!==o.getZoom()||o.fit(o.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:r,options:n});for(var s,u,l,c=t.layers,f=[],h=0,p=c.length;h<p;++h){var d=c[h],y=d.type;if("heatmap"==y)throw new Error("".concat(y," layers are not supported"));(l=d.source||OM(c,d.ref))&&l==u||(f.length&&(i.push(IM(s,f,t,r,e,n)),f=[]),(s=MM(t,r,d,n))instanceof rv||s instanceof Sv||(f=[]),u=s.get("mapbox-source")),f.push(d.id)}return i.push(IM(s,f,t,r,e,n)),Promise.all(i)}function RM(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n="string"==typeof t||t instanceof HTMLElement?new Uk({target:t}):t,"string"==typeof e){var o=e.startsWith("data:")?location.href:Pj(e,i.accessToken);i=xM(o,i),r=new Promise((function(t,r){Uj(e,i).then((function(e){TM(e,n,o,i).then((function(){t(n)})).catch(r)})).catch((function(t){r(new Error("Could not load ".concat(e,": ").concat(t.message)))}))}))}else r=new Promise((function(t,r){TM(e,n,!i.styleUrl||i.styleUrl.startsWith("data:")?location.href:Pj(i.styleUrl,i.accessToken),i).then((function(){t(n)})).catch(r)}));return r}function IM(t,e,r,n,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=24,s=0,u=r.layers,l=0,c=u.length;l<c;++l){var f=u[l];-1!==e.indexOf(f.id)&&(a=Math.min("minzoom"in f?f.minzoom:0,a),s=Math.max("maxzoom"in f?f.maxzoom:24,s))}return new Promise((function(u,l){var c=function(){var c=t.getSource();if(c&&"error"!==c.getState()){if("getTileGrid"in c){var f=c.getTileGrid();if(f){var h=f.getMinZoom();(a>0||h>0)&&t.setMaxResolution(Math.min(Dj.getResolution(a),f.getResolution(h))+1e-9),s<24&&t.setMinResolution(Dj.getResolution(s)+1e-9)}}else a>0&&t.setMaxResolution(Dj.getResolution(a)+1e-9);c instanceof xE||c instanceof UE?SM(t,r,e,Object.assign({styleUrl:n},o)).then((function(){!function(t,e){function r(){var r=e.get("mapbox-style");if(r){var n=_j(r.layers),i=t.get("mapbox-layers"),o=n.filter((function(t){return i.includes(t.id)})).some((function(t){return!t.layout||!t.layout.visibility||"visible"===t.layout.visibility}));t.get("visible")!==o&&t.setVisible(o)}}t.on("change",r),r()}(t,i),u()})).catch(l):u()}else l(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);var f=i.getLayers();-1===f.getArray().indexOf(t)&&f.push(t),t.getSource()?c():t.once("change:source",c)}))}var LM="mapbox-style",FM="baseLayerCache",DM="layerCache",BM="selectableLayers",NM="tooltipLayers",zM="defaultZoomLevel",GM="userLocation",UM="mapDB",qM="isOffline",WM="offlineWorker",VM="tooManyRequests",ZM="lasso",YM="followMode",XM="followed",HM="pin",KM="layerPickerConfigCache",JM="layerPickerConfigBaseCache",$M="layer",QM="wmn-tooltip",tT="tooltipBuffer",eT="feature-picker",rT="EPSG:4326";function nT(t){return nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nT(t)}function iT(){iT=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==nT(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(nT(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function oT(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function aT(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){oT(o,n,i,a,s,"next",t)}function s(t){oT(o,n,i,a,s,"throw",t)}a(void 0)}))}}var sT,uT=Object.getOwnPropertyDescriptor(Image.prototype,"src").set;function lT(t){Object.defineProperty(Image.prototype,"src",{set:function(e){var r=this;if(t.get(qM)){var n=function(){var n=aT(iT().mark((function n(){var i,o,a,s;return iT().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.get("mapDB"),n.next=3,i.tiles.get(e);case 3:(o=n.sent)?(a=URL.createObjectURL(o),s=r.onload,r.onload=function(){URL.revokeObjectURL(a),s()},uT.call(r,a)):uT.call(r,e);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}else uT.call(this,e)}})}function cT(){Object.defineProperty(Image.prototype,"src",{set:uT})}function fT(t){sT=window.fetch,window.fetch=function(){var e=aT(iT().mark((function e(r,n){var i,o,a,s,u;return iT().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.get("isOffline")){e.next=7;break}return i=t.get("mapDB"),e.next=4,i.tiles.get(r.url);case 4:return o=e.sent,a=JSON.stringify(o),e.abrupt("return",new Response(a));case 7:return e.next=9,sT(r,n);case 9:return 429===(s=e.sent).status&&((u=t.get(VM)||[]).push(r.url),t.set(VM,u)),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}function hT(){window.fetch=sT}function pT(t){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pT(t)}function dT(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return yT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yT(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function yT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vT(){vT=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==pT(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(pT(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function gT(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function mT(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){gT(o,n,i,a,s,"next",t)}function s(t){gT(o,n,i,a,s,"throw",t)}a(void 0)}))}}function bT(t){return _T.apply(this,arguments)}function _T(){return _T=mT(vT().mark((function t(e){var r,n,i,o,a,s,u,l,c;return vT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.baseLayers,i=e.isOffline,Array.isArray(n)){t.next=3;break}return t.abrupt("return");case 3:o={},r.set(FM,o),a={},r.set(JM,a),u=dT(n),t.prev=8,u.s();case 10:if((l=u.n()).done){t.next=40;break}if((c=l.value).layerId){t.next=15;break}return h.warn("Base layer id not configured"),t.abrupt("continue",38);case 15:if(!i||c.offlineCache){t.next=18;break}return h.warn("Base layer ".concat(c.layerId," is not available offline")),t.abrupt("continue",38);case 18:if(!o[c.layerId]){t.next=21;break}return h.warn("Duplicate base layer id configured: ".concat(c.layerId)),t.abrupt("continue",38);case 21:t.prev=21,t.t0=c.layerType,t.next="xyz"===t.t0?25:"mapbox"===t.t0||"mapbox-style"===t.t0?27:30;break;case 25:return ET(r,c),t.abrupt("break",32);case 27:return t.next=29,kT(r,c);case 29:return t.abrupt("break",32);case 30:return h.warn("Base layer type ".concat(c.layerType," is not supported")),t.abrupt("continue",38);case 32:s||(s=c.layerId),t.next=38;break;case 35:t.prev=35,t.t1=t.catch(21),h.error("Error adding layer: ".concat(t.t1));case 38:t.next=10;break;case 40:t.next=45;break;case 42:t.prev=42,t.t2=t.catch(8),u.e(t.t2);case 45:return t.prev=45,u.f(),t.finish(45);case 48:return t.next=50,wT(r,s);case 50:case"end":return t.stop()}}),t,null,[[8,42,45,48],[21,35]])}))),_T.apply(this,arguments)}function wT(t,e){return xT.apply(this,arguments)}function xT(){return xT=mT(vT().mark((function t(e,r){var n,i,o,a,s,u;return vT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&r){t.next=2;break}return t.abrupt("return");case 2:for(i in n=e.get(FM))i!==r&&n[i].group.setVisible(!1);if(o=n[r]){t.next=7;break}return t.abrupt("return");case 7:a=dT(o.group.getLayers().getArray()),t.prev=8,a.s();case 10:if((s=a.n()).done){t.next=22;break}if(!((u=s.value)instanceof rv||u instanceof Sv)){t.next=20;break}if(lT(e),fT(e),!o.style){t.next=18;break}return t.next=18,SM(u,o.style,u.get("mapbox-layers"),{accessToken:o.accessToken},void 0,e);case 18:cT(),hT();case 20:t.next=10;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(8),a.e(t.t0);case 27:return t.prev=27,a.f(),t.finish(27);case 30:ST(e,o),o.group.setVisible(!0);case 32:case"end":return t.stop()}}),t,null,[[8,24,27,30]])}))),xT.apply(this,arguments)}function ST(t,e){var r=e.backgroundColor,n=e.opacity,i=t.getTargetElement();i&&(i.style.backgroundColor=r,i.style.opacity=n)}function kT(t,e){return OT.apply(this,arguments)}function OT(){return OT=mT(vT().mark((function t(e,r){var n,i,o,a,s,u,l,c,f;return vT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.accessToken,lT(e),fT(e),"mapbox"!==r.layerType){t.next=8;break}return t.next=6,RM(e,r.styleUrl,{accessToken:i});case 6:t.next=10;break;case 8:return t.next=10,RM(e,r.styleJSON);case 10:cT(),hT(),o=r.layerId,a=null===(n=r.offlineCache)||void 0===n?void 0:n.maxZoom,s=e.get(LM),u=e.getTargetElement(),l=u&&u.style.backgroundColor,c=u&&u.style.opacity,f=new wi({visible:!1}),e.addLayer(f),e.getLayers().getArray().slice().forEach((function(t){t instanceof wi||(e.removeLayer(t),f.getLayers().push(t),PT({layer:t,map:e,config:r}),!t.getSource().getAttributions()&&r.attributions&&t.getSource().setAttributions(r.attributions))})),e.get(FM)[o]={id:o,offlineMaxZoom:a,style:s,backgroundColor:l,opacity:c,group:f,accessToken:i},e.get(JM)[o]={layerId:o,layerType:r.layerType,title:r.title,image:r.image};case 25:case"end":return t.stop()}}),t)}))),OT.apply(this,arguments)}function ET(t,e){var r=new zc({source:new Yg({url:e.source,attributions:e.attributions})}),n=new wi({visible:!0});t.addLayer(n),PT({layer:r,map:t,config:e}),n.getLayers().push(r),t.get(FM)[e.layerId]={id:e.layerId,group:n},t.get(JM)[e.layerId]={layerId:e.layerId,layerType:e.layerType,title:e.title,image:e.image}}function AT(t){if(t){var e=t.get(FM);for(var r in e)if(e[r].group.getVisible())return r}}function PT(t){var e=t.layer,r=t.map,n=t.config;if(n.offlineCache)if(e instanceof Sv)e.getSource().setTileLoadFunction(CT(r,n));else if(e instanceof zc){var i=e.getSource();i.setTileLoadFunction(jT(r,i))}else if(e instanceof rv){var o=e.getSource(),a=o.getUrl();o.setLoader(MT(r,n,o,a))}}var CT=function(t,e){return function(r,n){r.setLoader(function(){var i=mT(vT().mark((function i(o,a,s){var u,l,c,f,p,d;return vT().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!t.get(qM)){i.next=9;break}if(!(l=t.get(UM))){i.next=7;break}return i.next=6,l.tiles.get(n);case 6:u=i.sent;case 7:i.next=13;break;case 9:return i.next=11,Oe({method:"GET",url:n,responseType:"arraybuffer"});case 11:c=i.sent,u=c.data;case 13:i.next=19;break;case 15:i.prev=15,i.t0=i.catch(0),h.error("Error loading tile: ".concat(i.t0)),429===(null===(f=i.t0.response)||void 0===f?void 0:f.status)&&t.dispatchEvent({type:"tooManyRequests",layerId:e.layerId});case 19:u?(p=r.getFormat(),d=p.readFeatures(u,{extent:o,featureProjection:s}),r.setFeatures(d)):r.setState(Pl.ERROR);case 20:case"end":return i.stop()}}),i,null,[[0,15]])})));return function(t,e,r){return i.apply(this,arguments)}}())}},jT=function(t,e){return function(){var r=mT(vT().mark((function r(n,i){var o,a,s,u,l;return vT().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==i.indexOf("{bbox-epsg-3857}")&&(o=e.getTileGrid().getTileCoordExtent(n.getTileCoord()),i=i.replace("{bbox-epsg-3857}",o.toString())),a=n.getImage(),!t.get(qM)){r.next=17;break}if(s=t.get(UM),r.prev=4,!s){r.next=9;break}return r.next=8,s.tiles.get(i);case 8:u=r.sent;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),h.error("Error loading tile: ".concat(r.t0));case 14:u?(l=URL.createObjectURL(u),a.onload=function(){return URL.revokeObjectURL(l)},a.src=l):n.setState(Pl.ERROR),r.next=18;break;case 17:a.src=i;case 18:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(t,e){return r.apply(this,arguments)}}()},MT=function(t,e,r,n){return mT(vT().mark((function i(){var o,a,s,u;return vT().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!t.get(qM)){i.next=9;break}if(!(a=t.get(UM))){i.next=7;break}return i.next=6,a.tiles.get(n);case 6:o=i.sent;case 7:i.next=13;break;case 9:return i.next=11,Oe({method:"GET",url:n});case 11:s=i.sent,o=s.data;case 13:i.next=19;break;case 15:i.prev=15,i.t0=i.catch(0),h.error("Error loading data: ".concat(i.t0)),429===(null===(u=i.t0.response)||void 0===u?void 0:u.status)&&t.dispatchEvent({type:"tooManyRequests",layerId:e.layerId});case 19:o&&r.addFeatures(r.getFormat().readFeatures(o));case 20:case"end":return i.stop()}}),i,null,[[0,15]])})))},TT=s(280),RT=s.n(TT);function IT(t){return IT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IT(t)}function LT(){LT=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==IT(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(IT(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function FT(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function DT(){return BT.apply(this,arguments)}function BT(){return(t=LT().mark((function t(){return LT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RT().delete("MapDB");case 2:case"end":return t.stop()}}),t)})),BT=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){FT(o,n,i,a,s,"next",t)}function s(t){FT(o,n,i,a,s,"throw",t)}a(void 0)}))}).apply(this,arguments);var t}function NT(t){return NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NT(t)}function zT(){zT=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==NT(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(NT(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function GT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function UT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?GT(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=NT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=NT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==NT(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GT(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qT(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}var WT=function(t,e,r){t.animate({center:e.getGeometry().flatCoordinates,duration:r,easing:ta})},VT=function(){var t,e=(t=zT().mark((function t(e){var r,n,i,o,a,s,u,l,c,f;return zT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.map,n=e.view,i=e.source,o=e.featureId,a=e.getFeature,s=e.animationDuration,t.next=3,a(o);case 3:u=t.sent,l=new Tb,c=l.readFeature(u,{dataProjection:rT,featureProjection:n.getProjection()}),f=i.getFeatureById(o),c.set($M,null==f?void 0:f.get($M)),c.set(XM,!0),i.removeFeature(f),i.addFeature(c),WT(n,c,s),r.set(YM,UT(UT({},r.get(YM)),{},{feature:c}));case 13:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){qT(o,n,i,a,s,"next",t)}function s(t){qT(o,n,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),ZT=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.map,n=e.selected,i=e.getFeature,o=e.interval,a=void 0===o?1e3:o,s=e.animationDuration,u=void 0===s?200:s,l=null===(t=r.get(YM))||void 0===t?void 0:t.followInterval;if(!l&&n){var c=n.getId(),f=r.get(BM),h=r.getView();n.set(XM,!0);var p=n.get($M).get("source");r.set(BM,[]),WT(h,n,u),l=setInterval((function(){VT({map:r,view:h,source:p,featureId:c,animationDuration:u,getFeature:i})}),a),r.set(YM,{followInterval:l,feature:n,selectableLayers:f})}},YT=function(t){var e=t.get(YM),r=e.followInterval,n=e.feature,i=e.selectableLayers;t.set(BM,i),n.set(XM,!1),clearInterval(r),t.set(YM,{followInterval:void 0})},XT=s(345);function HT(t){return HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HT(t)}function KT(t){var e=function(t,e){if("object"!=HT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=HT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==HT(e)?e:String(e)}function JT(t,e,r){return e=QT(e),function(t,e){if(e&&("object"===HT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$T()?Reflect.construct(e,r||[],QT(t).constructor):e.apply(t,r))}function $T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($T=function(){return!!t})()}function QT(t){return QT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},QT(t)}function tR(t,e){return tR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tR(t,e)}function eR(t){return eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eR(t)}function rR(t){var e=function(t,e){if("object"!=eR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eR(e)?e:String(e)}function nR(t,e,r){return e=oR(e),function(t,e){if(e&&("object"===eR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return aR(t)}(t,iR()?Reflect.construct(e,r||[],oR(t).constructor):e.apply(t,r))}function iR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iR=function(){return!!t})()}function oR(t){return oR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oR(t)}function aR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sR(t,e){return sR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sR(t,e)}var uR=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nR(this,e,[t]))._previousPosition=null,r._currentPosition=null,r.handleWatchPositionSuccess=r.handleWatchPositionSuccess.bind(aR(r)),r.handleWatchPositionError=r.handleWatchPositionError.bind(aR(r)),r.watchId=null,r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sR(t,e)}(e,t),r=e,(n=[{key:"watchPosition",value:function(){this.watchId=navigator.geolocation.watchPosition(this.handleWatchPositionSuccess,this.handleWatchPositionError,this.options)}},{key:"getWatchID",value:function(){return this.watchId}},{key:"handleWatchPositionSuccess",value:function(t){this._currentPosition?this._currentPosition=t:(this._currentPosition=t,this.firePositionEvent()),this._trackPosition&&(this._previousPosition?this.getDistanceTravelled()>=this.distance&&(this.firePositionEvent(),this._previousPosition=t):this._previousPosition=t)}},{key:"handleWatchPositionError",value:function(t){this.firePositionError(t)}},{key:"trackPosition",value:function(){this._trackPosition=!0}},{key:"getCurrentPosition",value:function(){return this._currentPosition}},{key:"getPreviousPosition",value:function(){return this._previousPosition}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rR(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=JT(this,e)).constructor===e)throw new Error("Cannot create an instance of an abstract Class");return t&&(t.duration&&"number"==typeof t.duration&&(t.duration<5?r._duration=5:r._duration=t.duration,setInterval((function(){r.firePositionEvent()}),1e3*r._duration)),t.distance&&"number"==typeof t.distance&&(t.distance<250?r._distance=250:r._distance=t.distance,r.trackPosition()),r._options={enableHighAccuracy:!1,maximumAge:0,timeout:3e4},t.options&&Object.assign(r._options,t.options)),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tR(t,e)}(e,t),r=e,(n=[{key:"duration",get:function(){return this._duration}},{key:"distance",get:function(){return this._distance}},{key:"options",get:function(){return this._options}},{key:"firePositionEvent",value:function(){var t=this.getCurrentPosition();t&&this.emit("position",t)}},{key:"firePositionError",value:function(t){this.emit("positionError",t)}},{key:"getDistanceTravelled",value:function(){var t=this.getCurrentPosition(),e=this.getPreviousPosition();return t&&e?yo([e.coords.longitude,e.coords.latitude],[t.coords.longitude,t.coords.latitude]):null}},{key:"watchPosition",value:function(){throw new Error("watchPosition() must be implemented in the inheriting Class")}},{key:"trackPosition",value:function(){throw new Error("trackPosition() must be implemented in the inheriting Class")}},{key:"getCurrentPosition",value:function(){throw new Error("getCurrentPosition() must be implemented in the inheriting Class")}},{key:"getPreviousPosition",value:function(){throw new Error("getPreviousPosition() must be implemented in the inheriting Class")}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KT(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(s.n(XT)()));function lR(t){return lR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lR(t)}function cR(){cR=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==lR(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(lR(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function fR(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function hR(t,e){if(e){var r,n={className:"lm-layer-user-location",layerId:"UserLocationLayer",updateWhileAnimating:!0,updateWhileInteracting:!0,source:new xE,visible:e.enable,style:new Jf({image:new wh({anchor:[.5,.5],anchorOrigin:"top-left",anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNDQuMzc1cHgiIGhlaWdodD0iNDQuMzc1cHgiIHZpZXdCb3g9IjAgMCA0NC4zNzUgNDQuMzc1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0NC4zNzUgNDQuMzc1IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOS4zMywxMi43ODVjMC43NzEtMS4yNzYsMS4xOTMtMi43NjksMS4xOTMtNC4zMjdjMC00LjU2LTMuNzYzLTguMjctOC4zODctOC4yNw0KCWMtNC42MTEsMC04LjM2MywzLjcxLTguMzYzLDguMjdjMCwxLjU0MSwwLjQ3MiwzLjA0NSwxLjMyNSw0LjM1Yy0xLjgwNSwxLjIzLTIuNjQyLDMuMTg1LTIuNjQyLDUuMDI4djguNDY5DQoJYzAsMi40MDcsMS4yMiw0LjU3MywzLjE4Myw1Ljc3NGwyLjA3Niw4LjMzMmMwLjQ4MywyLjMzLDIuMTI5LDMuNzc2LDQuMjk2LDMuNzc2YzEuNjU4LDAsMy42MzYtMC45Nyw0LjI0Ni0zLjY4N2wyLjQxNC04LjQ1Nw0KCWMxLjk1MS0xLjI1MiwzLjI0Ni0zLjU5LDMuMjQ2LTYuMDA5di04LjQ3QzMxLjkxOCwxNS41MjQsMzAuOTc2LDEzLjg0OSwyOS4zMywxMi43ODV6Ii8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjMDA4MzhGIiBkPSJNMjQuNzg1LDE0LjA1NWgtNS4zNzVjLTIuMjIxLDAtNC4wODEsMS41NTgtNC4wODEsMy43ODJ2OC40NjljMCwxLjgwNiwxLjIyOCwzLjMxNiwyLjg2MiwzLjgyOWwyLjMyNCw5LjcNCgkJYzAuMjE3LDEuMDY3LDAuNjk1LDEuNTg4LDEuNTQxLDEuNTg4YzAuODQ4LDAsMS4zMTgtMC41NDUsMS41MzctMS41ODhsMi41NjgtOS43MjhjMS42LTAuNTMsMi44ODEtMi4wMjEsMi44ODEtMy44MDR2LTguNDY5DQoJCUMyOS4wNDMsMTUuNjEzLDI3LjAwNiwxNC4wNTUsMjQuNzg1LDE0LjA1NXoiLz4NCgk8ZWxsaXBzZSBmaWxsPSIjMDA4MzhGIiBjeD0iMjIuMDk2IiBjeT0iOC40NiIgcng9IjUuNTI1IiByeT0iNS40NTIiLz4NCjwvZz4NCjwvc3ZnPg0K",opacity:1,rotation:0,scale:1})})},i=new rv(n);t.addLayer(i),"HTMLGeolocationAPI"===e.provider&&(r=function(t,e){var r=new uR(e);return r.on("position",(function(e){pR(t,e)})),r.on("positionError",(function(e){t.dispatchEvent({type:"positionError",error:e})})),navigator.permissions.query({name:"geolocation"}).then((function(t){"denied"===t.state?h.error("Geolocation permission denied"):"granted"===t.state?(h.info("Geolocation permission granted"),r.watchPosition()):"prompt"===t.state&&(h.info("Geolocation permission prompt"),r.watchPosition()),t.onchange=function(){"denied"===t.state?h.error("Geolocation permission denied"):"granted"===t.state?(h.info("Geolocation permission granted"),r.watchPosition()):"prompt"===t.state&&(h.info("Geolocation permission prompt"),r.watchPosition())}})),r}(t,e)),t.set(GM,{layer:i,config:e,following:null,showCurrentLocation:!1,geo:r})}}function pR(t,e){var r,n=t.get(GM),i=n.layer.getSource();0===i.getFeatures().length?((r=new gm).setId("userLocation"),r.setGeometry(new Ss(Io([e.coords.longitude,e.coords.latitude],"EPSG:4326","EPSG:3857"))),i.addFeature(r)):(r=i.getFeatures()[0]).getGeometry().setCoordinates(Io([e.coords.longitude,e.coords.latitude],"EPSG:4326","EPSG:3857")),n.showCurrentLocation&&(mR(r,t),n.showCurrentLocation=!1,t.set(GM,n))}function dR(t){var e=t.get(GM);if(e){if(e.following)return;var r=e.layer.getSource().getFeatures()[0];if(r){var n=function(e){return function(t,e){mR(e.target,t)}(t,e)};e.following={feature:r,handleChange:n},t.set(GM,e),r.on("change",n),mR(r,t)}}else h.error("User Location Layer does not exists")}function yR(t){var e=t.get(GM);null!=e&&e.following&&(e.following.feature.un("change",e.following.handleChange),e.following=null,t.set(GM,e))}function vR(t,e){return gR.apply(this,arguments)}function gR(){var t;return t=cR().mark((function t(e,r){var n,i,o,a;return cR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.get(GM)).layer){t.next=27;break}if("function"!=typeof r){t.next=16;break}return t.prev=3,n.showCurrentLocation=!0,e.set(GM,n),t.next=8,r();case 8:i=t.sent,pR(e,i),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),e.dispatchEvent({type:"positionError",error:t.t0});case 15:return t.abrupt("return");case 16:if("HTMLGeolocationAPI"!==n.config.provider){t.next=21;break}return o=n.layer.getSource(),(a=o.getFeatures()[0])?mR(a,e,!0):(n.showCurrentLocation=!0,e.set(GM,n)),t.abrupt("return");case 21:if("Abstract"!==n.config.provider){t.next=25;break}return n.showCurrentLocation=!0,e.set(GM,n),t.abrupt("return",Oe({method:"get",url:n.config.providers.Abstract.url}).then((function(t){var r={coords:{longitude:t.data.longitude,latitude:t.data.latitude}};pR(e,r)})).catch((function(t){h.error("User location not found: ".concat(t)),e.dispatchEvent({type:"positionError",error:t})})));case 25:t.next=28;break;case 27:h.error("User Location Layer does not exists");case 28:case"end":return t.stop()}}),t,null,[[3,12]])})),gR=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){fR(o,n,i,a,s,"next",t)}function s(t){fR(o,n,i,a,s,"throw",t)}a(void 0)}))},gR.apply(this,arguments)}function mR(t,e,r){if(t){var n=e.getView();n.setCenter(t.getGeometry().flatCoordinates),r&&n.setZoom(e.get(zM))}else h.error("Feature to center on is not defined")}function bR(t,e,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function _R(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return bR({type:"LineString",coordinates:t},e,r)}function wR(t,e){void 0===e&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function xR(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function SR(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function kR(t){return"Feature"===t.type?t.geometry:t}function OR(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),i=kR(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(n,a))return!1;"Polygon"===o&&(s=[s]);for(var u=!1,l=0;l<s.length&&!u;l++)if(ER(n,s[l][0],r.ignoreBoundary)){for(var c=!1,f=1;f<s[l].length&&!c;)ER(n,s[l][f],!r.ignoreBoundary)&&(c=!0),f++;c||(u=!0)}return u}function ER(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+l*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(l-t[1])<=0)return!r;s>t[1]!=l>t[1]&&t[0]<(u-a)*(t[1]-s)/(l-s)+a&&(n=!n)}return n}function AR(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function PR(t,e){!function(t,e){var r,n,i,o,a,s,u,l,c,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(s=p?t.features[r].geometry:d?t.geometry:t,l=p?t.features[r].properties:d?t.properties:{},c=p?t.features[r].bbox:d?t.bbox:void 0,f=p?t.features[r].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,f))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,f))return!1;h++}}(t,(function(t,r,n,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(bR(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(bR({type:a,coordinates:l},n),r,u))return!1}}))}const CR=function(t){if(!t)throw new Error("geojson is required");var e=[];return PR(t,(function(t){!function(t,e){var r=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":r=SR(n);break;case"LineString":r=[SR(n)]}r.forEach((function(r){var n=function(t,e){var r=[];return t.reduce((function(t,n){var i,o,a,s,u,l,c=_R([t,n],e);return c.bbox=(o=n,a=(i=t)[0],s=i[1],[a<(u=o[0])?a:u,s<(l=o[1])?s:l,a>u?a:u,s>l?s:l]),r.push(c),n})),r}(r,t.properties);n.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),wR(e)};var jR=s(554);function MR(t,e){var r=SR(t),n=SR(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],a=r[1][0],s=r[1][1],u=n[0][0],l=n[0][1],c=n[1][0],f=n[1][1],h=(f-l)*(a-i)-(c-u)*(s-o);if(0===h)return null;var p=((c-u)*(o-l)-(f-l)*(i-u))/h,d=((a-i)*(o-l)-(s-o)*(i-u))/h;return p>=0&&p<=1&&d>=0&&d<=1?function(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xR(t[0])||!xR(t[1]))throw new Error("coordinates must contain numbers");return bR({type:"Point",coordinates:t},void 0,r)}([i+p*(a-i),o+p*(s-o)]):null}const TR=function(t,e){var r={},n=[];if("LineString"===t.type&&(t=bR(t)),"LineString"===e.type&&(e=bR(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=MR(t,e);return i&&n.push(i),wR(n)}var o=jR();return o.load(CR(e)),AR(CR(t),(function(t){AR(o.search(t),(function(e){var i=MR(t,e);if(i){var o=SR(i).join(",");r[o]||(r[o]=!0,n.push(i))}}))})),wR(n)};function RR(t,e){void 0===e&&(e={});var r=kR(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),r.type){case"Polygon":return function(t,e){return void 0===e&&(e={}),IR(kR(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}(r,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var r=kR(t).coordinates,n=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach((function(t){i.push(IR(t,n))})),wR(i)}(r,e);default:throw new Error("invalid poly")}}function IR(t,e){return t.length>1?function(t,e,r){return void 0===r&&(r={}),bR({type:"MultiLineString",coordinates:t},e,r)}(t,e):_R(t[0],e)}function LR(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(DR(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function FR(t,e){for(var r=0,n=e.coordinates;r<n.length;r++)if(OR(n[r],t))return!0;return TR(e,RR(t)).features.length>0}function DR(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0==n*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}const BR=function(t,e){var r=!0;return PR(t,(function(t){PR(e,(function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,n=e.coordinates,!(r[0]===n[0]&&r[1]===n[1]);case"LineString":return!LR(e,t);case"Polygon":return!OR(t,e)}break;case"LineString":switch(e.type){case"Point":return!LR(t,e);case"LineString":return!(TR(t,e).features.length>0);case"Polygon":return!FR(e,t)}break;case"Polygon":switch(e.type){case"Point":return!OR(e,t);case"LineString":return!FR(t,e);case"Polygon":return!function(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++)if(OR(n[r],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(OR(o[i],t))return!0;return TR(RR(t),RR(e)).features.length>0}(e,t)}}var r,n;return!1}(t.geometry,e.geometry)}))})),r};function NR(t){return NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NR(t)}function zR(t){var e=function(t,e){if("object"!=NR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=NR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==NR(e)?e:String(e)}function GR(t,e,r){return e=qR(e),function(t,e){if(e&&("object"===NR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,UR()?Reflect.construct(e,r||[],qR(t).constructor):e.apply(t,r))}function UR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(UR=function(){return!!t})()}function qR(t){return qR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qR(t)}function WR(t,e){return WR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},WR(t,e)}var VR=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=GR(this,e),void 0!==n&&void 0===r?i.setFlatCoordinates(n,t):(r=r||0,i.setCenterAndRadius(t,r,n)),i}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WR(t,e)}(e,t),r=e,(n=[{key:"clone",value:function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);r[0]=i[0]+l*o,r[1]=i[1]+l*a;for(var c=2;c<this.stride;++c)r[c]=i[c]}return r.length=this.stride,s}return n}},{key:"containsXY",value:function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return Fn(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(t){if(ii(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Vn(t,this.intersectsCoordinate.bind(this))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=Xa(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(Sa(r,0,r.length,n,t,e,r)),this.changed()}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zR(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ua);VR.prototype.transform;const ZR=VR;function YR(t){return YR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YR(t)}function XR(){return XR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eI(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},XR.apply(this,arguments)}function HR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JR(n.key),n)}}function KR(t,e,r){return e&&HR(t.prototype,e),r&&HR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function JR(t){var e=function(t,e){if("object"!=YR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=YR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YR(e)?e:String(e)}function $R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QR(t,e,r){return e=eI(e),function(t,e){if(e&&("object"===YR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tI()?Reflect.construct(e,r||[],eI(t).constructor):e.apply(t,r))}function tI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tI=function(){return!!t})()}function eI(t){return eI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eI(t)}function rI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nI(t,e)}function nI(t,e){return nI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nI(t,e)}var iI="drawstart",oI=function(t){function e(t,r){var n;return $R(this,e),(n=QR(this,e,[t])).feature=r,n}return rI(e,t),KR(e)}(Pe);function aI(t,e){return Zr(t[0],t[1],e[0],e[1])}function sI(t,e){var r=t.length;return e<0?t[e+r]:e>=r?t[e-r]:t[e]}function uI(t,e,r){var n,i;e<r?(n=e,i=r):(n=r,i=e);var o=Math.ceil(n),a=Math.floor(i);if(o>a)return aI(dI(t,n),dI(t,i));var s=0;n<o&&(s+=aI(dI(t,n),sI(t,o))),a<i&&(s+=aI(sI(t,a),dI(t,i)));for(var u=o;u<a-1;++u)s+=aI(sI(t,u),sI(t,u+1));return s}function lI(t,e,r){if(e instanceof Om)fI(t,e.getCoordinates(),!1,r);else if(e instanceof Gm)for(var n=e.getCoordinates(),i=0,o=n.length;i<o;++i)fI(t,n[i],!1,r);else if(e instanceof Ys)for(var a=e.getCoordinates(),s=0,u=a.length;s<u;++s)fI(t,a[s],!0,r);else if(e instanceof Hm)for(var l=e.getCoordinates(),c=0,f=l.length;c<f;++c)for(var h=l[c],p=0,d=h.length;p<d;++p)fI(t,h[p],!0,r);else if(e instanceof ib)for(var y=e.getGeometries(),v=0;v<y.length;++v)lI(t,y[v],r)}var cI={index:-1,endIndex:NaN};function fI(t,e,r,n){for(var i=t[0],o=t[1],a=0,s=e.length-1;a<s;++a){var u=pI(i,o,e[a],e[a+1]);if(0===u.squaredDistance){var l=a+u.along;return void n.push({coordinates:e,ring:r,startIndex:l,endIndex:l})}}}var hI={along:0,squaredDistance:0};function pI(t,e,r,n){var i=r[0],o=r[1],a=n[0]-i,s=n[1]-o,u=0,l=i,c=o;return 0===a&&0===s||(l+=a*(u=Wr(((t-i)*a+(e-o)*s)/(a*a+s*s),0,1)),c+=s*u),hI.along=u,hI.squaredDistance=Kr(Zr(t,e,l,c),10),hI}function dI(t,e){var r=t.length,n=Math.floor(e),i=e-n;n>=r?n-=r:n<0&&(n+=r);var o=n+1;o>=r&&(o-=r);var a=t[n],s=a[0],u=a[1],l=t[o];return[s+(l[0]-s)*i,u+(l[1]-u)*i]}var yI=function(t){function e(t){var r;$R(this,e);var n=t;n.stopDown||(n.stopDown=Ne),(r=QR(this,e,[n])).on,r.once,r.un,r.shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.pointerType_,r.freehand_=!1,r.source_=t.source?t.source:null,r.features_=t.features?t.features:null,r.snapTolerance_=t.snapTolerance?t.snapTolerance:12,r.type_=t.type,r.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(r.type_),r.stopClick_=!!t.stopClick,r.minPoints_=t.minPoints?t.minPoints:"Polygon"===r.mode_?3:2,r.maxPoints_="Circle"===r.mode_?2:t.maxPoints?t.maxPoints:1/0,r.finishCondition_=t.finishCondition?t.finishCondition:Be,r.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";var i,o=t.geometryFunction;if(!o){var a,s=r.mode_;"Circle"===s?o=function(t,e,r){var n=e||new ZR([NaN,NaN]),i=Uo(t[0],r),o=lo(i,Uo(t[t.length-1],r));n.setCenterAndRadius(i,Math.sqrt(o),this.geometryLayout_);var a=zo();return a&&n.transform(r,a),n}:("Point"===s?a=Ss:"LineString"===s?a=Om:"Polygon"===s&&(a=Ys),o=function(t,e,r){return e?"Polygon"===s?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])],this.geometryLayout_):e.setCoordinates([],this.geometryLayout_):e.setCoordinates(t,this.geometryLayout_):e=new a(t,this.geometryLayout_),e})}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,r.overlay_=new rv({source:new xE({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:(i=Hf(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=t.geometryName,r.condition_=t.condition?t.condition:Wx,r.freehandCondition_,t.freehand?r.freehandCondition_=zx:r.freehandCondition_=t.freehandCondition?t.freehandCondition:Vx,r.traceCondition_,r.setTrace(t.trace||!1),r.traceState_={active:!1},r.traceSource_=t.traceSource||t.source||null,r.addChangeListener(cx,r.updateState_),r}return rI(e,t),KR(e,[{key:"setTrace",value:function(t){var e;e=t?!0===t?zx:t:Ux,this.traceCondition_=e}},{key:"setMap",value:function(t){XR(eI(e.prototype),"setMap",this).call(this,t),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(t){t.originalEvent.type===tr&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);var r=t.type===K_.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===K_.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===K_.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===K_.POINTERDOWN?n=!1:r&&this.getPointerCount()<2?(n=t.type===K_.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===K_.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===K_.DBLCLICK&&(n=!1),XR(eI(e.prototype),"handleEvent",this).call(this,t)&&n}},{key:"handleDownEvent",value:function(t){var e=this;return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){e.handlePointerMove_(new H_(K_.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"deactivateTrace_",value:function(){this.traceState_={active:!1}}},{key:"toggleTraceState_",value:function(t){if(this.traceSource_&&this.traceCondition_(t))if(this.traceState_.active)this.deactivateTrace_();else{var e=this.getMap(),r=Pn([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(r);if(0!==n.length){var i=function(t,e){for(var r=[],n=0;n<e.length;++n)lI(t,e[n].getGeometry(),r);return r}(t.coordinate,n);i.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:i,targetIndex:-1})}}}},{key:"addOrRemoveTracedCoordinates_",value:function(t,e){var r=t.startIndex<=t.endIndex;r===t.startIndex<=e?r&&e>t.endIndex||!r&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(r&&e<t.endIndex||!r&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}},{key:"removeTracedCoordinates_",value:function(t,e){if(t!==e){var r=0;if(t<e){var n=Math.ceil(t),i=Math.floor(e);i===e&&(i-=1),r=i-n+1}else{var o=Math.floor(t),a=Math.ceil(e);a===e&&(a+=1),r=o-a+1}r>0&&this.removeLastPoints_(r)}}},{key:"addTracedCoordinates_",value:function(t,e,r){if(e!==r){var n=[];if(e<r){var i=Math.ceil(e),o=Math.floor(r);o===r&&(o-=1);for(var a=i;a<=o;++a)n.push(sI(t.coordinates,a))}else{var s=Math.floor(e),u=Math.ceil(r);u===r&&(u+=1);for(var l=s;l>=u;--l)n.push(sI(t.coordinates,l))}n.length&&this.appendCoordinates(n)}}},{key:"updateTrace_",value:function(t){var e=this.traceState_;if(e.active&&!(-1===e.targetIndex&&co(e.startPx,t.pixel)<this.snapTolerance_)){var r=function(t,e,r,n){for(var i=t[0],o=t[1],a=1/0,s=-1,u=NaN,l=0;l<e.targets.length;++l){for(var c=e.targets[l],f=c.coordinates,h=1/0,p=void 0,d=0;d<f.length-1;++d){var y=pI(i,o,f[d],f[d+1]);y.squaredDistance<h&&(h=y.squaredDistance,p=d+y.along)}h<a&&(a=h,c.ring&&e.targetIndex===l&&(c.endIndex>c.startIndex?p<c.startIndex&&(p+=f.length):c.endIndex<c.startIndex&&p>c.startIndex&&(p-=f.length)),u=p,s=l)}var v=e.targets[s],g=v.ring;if(e.targetIndex===s&&g){var m=dI(v.coordinates,u);co(r.getPixelFromCoordinate(m),e.startPx)>n&&(g=!1)}if(g){var b=v.coordinates,_=b.length,w=v.startIndex,x=u;if(w<x){var S=uI(b,w,x);uI(b,w,x-_)<S&&(u-=_)}else{var k=uI(b,w,x);uI(b,w,x+_)<k&&(u+=_)}}return cI.index=s,cI.endIndex=u,cI}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==r.index){if(-1!==e.targetIndex){var n=e.targets[e.targetIndex];this.removeTracedCoordinates_(n.startIndex,n.endIndex)}var i=e.targets[r.index];this.addTracedCoordinates_(i,i.startIndex,r.endIndex)}else{var o=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(o,r.endIndex)}e.targetIndex=r.index;var a=e.targets[e.targetIndex];a.endIndex=r.endIndex;var s=dI(a.coordinates,a.endIndex),u=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(u[0]),Math.round(u[1])]}}},{key:"handleUpEvent",value:function(t){var e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){var n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(t.pixel,r)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}},{key:"handlePointerMove_",value:function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}},{key:"atFinish_",value:function(t,e){var r=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_],o=this.mode_;if("Point"===o)r=!0;else if("Circle"===o)r=2===this.sketchCoords_.length;else if("LineString"===o)n=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){var a=this.sketchCoords_;n=a[0].length>this.minPoints_,i=[a[0][0],a[0][a[0].length-2]],i=e?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(n)for(var s=this.getMap(),u=0,l=i.length;u<l;u++){var c=i[u],f=s.getPixelFromCoordinate(c),h=t[0]-f[0],p=t[1]-f[1],d=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(h*h+p*p)<=d){this.finishCoordinate_=c;break}}}return r}},{key:"createOrUpdateSketchPoint_",value:function(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new gm(new Ss(t)),this.updateSketchFeatures_())}},{key:"createOrUpdateCustomSketchLine_",value:function(t){this.sketchLine_||(this.sketchLine_=new gm);var e=t.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),r.changed()):(r=new Om(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(r))}},{key:"startDrawing_",value:function(t){for(var e=this.getMap().getView().getProjection(),r=Ga(this.geometryLayout_);t.length<r;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new gm(new Om(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new gm,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new oI(iI,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(t){for(var e,r,n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=Ga(this.geometryLayout_);t.length<a;)t.push(0);"Point"===this.mode_?r=this.sketchCoords_:"Polygon"===this.mode_?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=t[0],r[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===i.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):"Polygon"===o&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()}},{key:"removeLastPoints_",value:function(t){if(this.sketchFeature_){for(var e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_,i=0;i<t;++i){var o=void 0;if("LineString"===n||"Circle"===n){if((o=this.sketchCoords_).splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();var a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,e,r),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===n){(o=this.sketchCoords_[0]).splice(-2,1);var s=this.sketchLine_.getGeometry();if(o.length>=2){var u=o[o.length-2].slice();o[o.length-1]=u,this.createOrUpdateSketchPoint_(u)}s.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,e,r)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}}},{key:"removeLastPoint",value:function(){this.removeLastPoints_(1)}},{key:"finishDrawing",value:function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,r,n)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new Rm([e])):"MultiLineString"===this.type_?t.setGeometry(new Gm([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Hm([e])),this.dispatchEvent(new oI("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}},{key:"abortDrawing",value:function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new oI("drawabort",t))}},{key:"appendCoordinates",value:function(t){var e,r=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(t[0]),"LineString"===r||"Circle"===r)e=this.sketchCoords_;else{if("Polygon"!==r)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&e.shift(),e.pop();for(var i=0;i<t.length;i++)this.addToDrawing_(t[i]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)}},{key:"extend",value:function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new gm(new Ss(r)),this.updateSketchFeatures_(),this.dispatchEvent(new oI(iI,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}},{key:"updateState_",value:function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}]),e}(Fx);const vI=yI;function gI(t){return gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gI(t)}function mI(){return mI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EI(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},mI.apply(this,arguments)}function bI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wI(n.key),n)}}function _I(t,e,r){return e&&bI(t.prototype,e),r&&bI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wI(t){var e=function(t,e){if("object"!=gI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gI(e)?e:String(e)}function xI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SI(t,e,r){return e=EI(e),function(t,e){if(e&&("object"===gI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kI(t)}(t,OI()?Reflect.construct(e,r||[],EI(t).constructor):e.apply(t,r))}function kI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OI=function(){return!!t})()}function EI(t){return EI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EI(t)}function AI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PI(t,e)}var CI=function(t){function e(t,r,n,i){var o;return xI(this,e),(o=SI(this,e,[t])).selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return AI(e,t),_I(e)}(Pe),jI={},MI=function(t){function e(t){var r,n,i;if(xI(this,e),(r=SI(this,e)).on,r.once,r.un,t=t||{},r.boundAddFeature_=r.addFeature_.bind(kI(r)),r.boundRemoveFeature_=r.removeFeature_.bind(kI(r)),r.condition_=t.condition?t.condition:qx,r.addCondition_=t.addCondition?t.addCondition:Ux,r.removeCondition_=t.removeCondition?t.removeCondition:Ux,r.toggleCondition_=t.toggleCondition?t.toggleCondition:Vx,r.multi_=!!t.multi&&t.multi,r.filter_=t.filter?t.filter:Be,r.hitTolerance_=t.hitTolerance?t.hitTolerance:0,r.style_=void 0!==t.style?t.style:(Fe((n=Hf()).Polygon,n.LineString),Fe(n.GeometryCollection,n.LineString),function(t){return t.getGeometry()?n[t.getGeometry().getType()]:null}),r.features_=t.features||new On,t.layers)if("function"==typeof t.layers)i=t.layers;else{var o=t.layers;i=function(t){return o.includes(t)}}else i=Be;return r.layerFilter_=i,r.featureLayerAssociation_={},r}return AI(e,t),_I(e,[{key:"addFeatureLayerAssociation_",value:function(t,e){this.featureLayerAssociation_[_r(t)]=e}},{key:"getFeatures",value:function(){return this.features_}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(t){return this.featureLayerAssociation_[_r(t)]}},{key:"setHitTolerance",value:function(t){this.hitTolerance_=t}},{key:"setMap",value:function(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),mI(EI(e.prototype),"setMap",this).call(this,t),t?(this.features_.addEventListener(cn,this.boundAddFeature_),this.features_.addEventListener(fn,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(cn,this.boundAddFeature_),this.features_.removeEventListener(fn,this.boundRemoveFeature_))}},{key:"addFeature_",value:function(t){var e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){var r=this.getMap().getAllLayers().find((function(t){if(t instanceof rv&&t.getSource()&&t.getSource().hasFeature(e))return t}));r&&this.addFeatureLayerAssociation_(e,r)}}},{key:"removeFeature_",value:function(t){this.style_&&this.restorePreviousStyle_(t.element)}},{key:"getStyle",value:function(){return this.style_}},{key:"applySelectedStyle_",value:function(t){var e=_r(t);e in jI||(jI[e]=t.getStyle()),t.setStyle(this.style_)}},{key:"restorePreviousStyle_",value:function(t){for(var r=this.getMap().getInteractions().getArray(),n=r.length-1;n>=0;--n){var i=r[n];if(i!==this&&i instanceof e&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}var o=_r(t);t.setStyle(jI[o]),delete jI[o]}},{key:"removeFeatureLayerAssociation_",value:function(t){delete this.featureLayerAssociation_[_r(t)]}},{key:"handleEvent",value:function(t){var e=this;if(!this.condition_(t))return!0;var r=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),o=!r&&!n&&!i,a=t.map,s=this.getFeatures(),u=[],l=[];if(o){qe(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,(function(t,r){if(t instanceof gm&&e.filter_(t,r))return e.addFeatureLayerAssociation_(t,r),l.push(t),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var c=s.getLength()-1;c>=0;--c){var f=s.item(c),h=l.indexOf(f);h>-1?l.splice(h,1):(s.remove(f),u.push(f))}0!==l.length&&s.extend(l)}else{a.forEachFeatureAtPixel(t.pixel,(function(t,o){if(t instanceof gm&&e.filter_(t,o))return!r&&!i||s.getArray().includes(t)?(n||i)&&s.getArray().includes(t)&&(u.push(t),e.removeFeatureLayerAssociation_(t)):(e.addFeatureLayerAssociation_(t,o),l.push(t)),!e.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=u.length-1;p>=0;--p)s.remove(u[p]);s.extend(l)}return(l.length>0||u.length>0)&&this.dispatchEvent(new CI("select",l,u,t)),!0}}]),e}(bx);const TI=MI;var RI=s(42),II=s.n(RI);function LI(t){return LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LI(t)}function FI(t){var e=function(t,e){if("object"!=LI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=LI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LI(e)?e:String(e)}function DI(t,e,r){return e=NI(e),function(t,e){if(e&&("object"===LI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,BI()?Reflect.construct(e,r||[],NI(t).constructor):e.apply(t,r))}function BI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BI=function(){return!!t})()}function NI(t){return NI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NI(t)}function zI(t,e){return zI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zI(t,e)}var GI="element",UI="map",qI="offset",WI="position",VI="positioning",ZI=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=DI(this,e)).on,r.once,r.un,r.options=t,r.id=t.id,r.insertFirst=void 0===t.insertFirst||t.insertFirst,r.stopEvent=void 0===t.stopEvent||t.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute",r.element.style.pointerEvents="auto",r.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(GI,r.handleElementChanged),r.addChangeListener(UI,r.handleMapChanged),r.addChangeListener(qI,r.handleOffsetChanged),r.addChangeListener(WI,r.handlePositionChanged),r.addChangeListener(VI,r.handlePositioningChanged),void 0!==t.element&&r.setElement(t.element),r.setOffset(void 0!==t.offset?t.offset:[0,0]),r.setPositioning(t.positioning||"top-left"),void 0!==t.position&&r.setPosition(t.position),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zI(t,e)}(e,t),r=e,n=[{key:"getElement",value:function(){return this.get(GI)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(UI)||null}},{key:"getOffset",value:function(){return this.get(qI)}},{key:"getPosition",value:function(){return this.get(WI)}},{key:"getPositioning",value:function(){return this.get(VI)}},{key:"handleElementChanged",value:function(){vl(this.element);var t=this.getElement();t&&this.element.appendChild(t)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&(yl(this.element),ur(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=ar(t,uw,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(t){this.set(GI,t)}},{key:"setMap",value:function(t){this.set(UI,t)}},{key:"setOffset",value:function(t){this.set(qI,t)}},{key:"setPosition",value:function(t){this.set(WI,t)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(WI)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[hl(n),pl(n)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!Rn(r,i)){var a=i[0]-r[0],s=r[2]-i[2],u=i[1]-r[1],l=r[3]-i[3],c=[0,0];if(a<0?c[0]=a-o:s<0&&(c[0]=Math.abs(s)+o),u<0?c[1]=u-o:l<0&&(c[1]=Math.abs(l)+o),0!==c[0]||0!==c[1]){var f=e.getView().getCenterInternal(),h=e.getPixelFromCoordinateInternal(f);if(!h)return;var p=[h[0]+c[0],h[1]+c[1]],d=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}}},{key:"getRect",value:function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]}},{key:"setPositioning",value:function(t){this.set(VI,t)}},{key:"setVisible",value:function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}},{key:"updatePixelPosition",value:function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";"bottom-right"==i||"center-right"==i||"top-right"==i?s="-100%":"bottom-center"!=i&&"center-center"!=i&&"top-center"!=i||(s="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?u="-100%":"center-left"!=i&&"center-center"!=i&&"center-right"!=i||(u="-50%");var l="translate(".concat(s,", ").concat(u,") translate(").concat(o,", ").concat(a,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l)}},{key:"getOptions",value:function(){return this.options}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FI(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Rr);const YI=ZI;function XI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HI(t){if(!t.getOverlayById(eT)){var e=document.createElement("div");e.className="wmn-feature-picker",e.addEventListener("pointermove",(function(t){return t.stopPropagation()}));var r=new YI({id:eT,element:e,positioning:"bottom-center"});t.addOverlay(r)}}function KI(t){var e,r=t.map,n=t.features,i=t.coordinates,o=t.featurePickerConfig,a=t.clickCallback;null!=o&&o.itemContent&&(e=II().compile(o.itemContent));var s,u=[],l=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return XI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XI(t,e):void 0}}(t))){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(n);try{var c=function(){var t=s.value,n=document.createElement("div");n.className="wmn-feature-picker-item",n.innerHTML=e?e(t.getProperties()):t.getId(),n.addEventListener("click",(function(){a({map:r,features:t}),JI(r)})),u.push(n)};for(l.s();!(s=l.n()).done;)c()}catch(t){l.e(t)}finally{l.f()}var f=r.getOverlayById(eT),h=f.getElement();h.style.display="",h.innerHTML="",h.append.apply(h,u),f.setPosition(i)}function JI(t){var e=t.getOverlayById(eT).getElement();e.style.display="none",e.innerHTML=""}function $I(t){return $I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$I(t)}function QI(t){var e=function(t,e){if("object"!=$I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$I(e)?e:String(e)}function tL(t,e,r){return e=iL(e),function(t,e){if(e&&("object"===$I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rL(t)}(t,eL()?Reflect.construct(e,r||[],iL(t).constructor):e.apply(t,r))}function eL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eL=function(){return!!t})()}function rL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nL(){return nL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iL(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},nL.apply(this,arguments)}function iL(t){return iL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iL(t)}function oL(t,e){return oL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oL(t,e)}var aL=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tL(this,e,[{attributions:t.attributions,wrapX:t.wrapX}])).resolution=void 0,r.distance=void 0!==t.distance?t.distance:20,r.minDistance=t.minDistance||0,r.interpolationRatio=0,r.features=[],r.geometryFunction=t.geometryFunction||function(t){var e=t.getGeometry();return qr(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},r.createCustomCluster_=t.createCluster,r.source=null,r.boundRefresh_=r.refresh.bind(rL(r)),r.updateDistance(r.distance,r.minDistance),r.setSource(t.source||null),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oL(t,e)}(e,t),r=e,n=[{key:"clear",value:function(t){this.features.length=0,nL(iL(e.prototype),"clear",this).call(this,t)}},{key:"getDistance",value:function(){return this.distance}},{key:"getSource",value:function(){return this.source}},{key:"loadFeatures",value:function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.resolution=e,this.refresh())}},{key:"setDistance",value:function(t){this.updateDistance(t,this.minDistance)}},{key:"setMinDistance",value:function(t){this.updateDistance(this.distance,t)}},{key:"getMinDistance",value:function(){return this.minDistance}},{key:"setSource",value:function(t){this.source&&this.source.removeEventListener(Qe,this.boundRefresh_),this.source=t,t&&t.addEventListener(Qe,this.boundRefresh_),this.refresh()}},{key:"refresh",value:function(){this.clear(),this.cluster(),this.addFeatures(this.features)}},{key:"updateDistance",value:function(t,e){var r=0===t?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==r;this.distance=t,this.minDistance=e,this.interpolationRatio=r,n&&this.refresh()}},{key:"cluster",value:function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!(_r(a)in n)){var s=this.geometryFunction(a);if(s){Bn(s.getCoordinates(),t),Cn(t,e,t);var u=this.source.getFeaturesInExtent(t).filter((function(t){var e=_r(t);return!(e in n)&&(n[e]=!0,!0)}));this.features.push(this.createCluster(u,t))}}}}},{key:"createCluster",value:function(t,e){for(var r=[0,0],n=t.length-1;n>=0;--n){var i=this.geometryFunction(t[n]);i?oo(r,i.getCoordinates()):t.splice(n,1)}uo(r,1/t.length);var o=Hn(e),a=this.interpolationRatio,s=new Ss([r[0]*(1-a)+o[0]*a,r[1]*(1-a)+o[1]*a]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new gm({geometry:s,features:t})}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QI(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(xE);const sL=aL;function uL(t,e){var r=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))}));var n=r.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}function lL(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}var cL="1.3.0";function fL(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:cL,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}function hL(t){return hL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hL(t)}function pL(t){var e=function(t,e){if("object"!=hL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hL(e)?e:String(e)}function dL(t,e,r){return e=vL(e),function(t,e){if(e&&("object"===hL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yL()?Reflect.construct(e,r||[],vL(t).constructor):e.apply(t,r))}function yL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yL=function(){return!!t})()}function vL(t){return vL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vL(t)}function gL(t,e){return gL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gL(t,e)}var mL=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{};var n=Object.assign({},t.params),i=!("TRANSPARENT"in n)||n.TRANSPARENT;return(r=dL(this,e,[{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}])).gutter_=void 0!==t.gutter?t.gutter:0,r.params_=n,r.v13_=!0,r.serverType_=t.serverType,r.hidpi_=void 0===t.hidpi||t.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gL(t,e)}(e,t),r=e,n=[{key:"getFeatureInfoUrl",value:function(t,e,r,n){var i=ko(r),o=this.getProjection()||i,a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));var s=Io(t,i,o),u=oc(o,i,t,e),l=a.getZForResolution(u,this.zDirection),c=a.getResolution(l),f=a.getTileCoordForCoordAndZ(s,l);if(!(a.getResolutions().length<=f[0])){var h=a.getTileCoordExtent(f,this.tmpExtent_),p=this.gutter_;0!==p&&(h=Cn(h,c*p,h));var d={QUERY_LAYERS:this.params_.LAYERS};Object.assign(d,fL(this.params_,"GetFeatureInfo"),n);var y=Math.floor((s[0]-h[0])/c),v=Math.floor((h[3]-s[1])/c);return d[this.v13_?"I":"X"]=y,d[this.v13_?"J":"Y"]=v,this.getRequestUrl_(f,h,1,o||i,d)}}},{key:"getLegendUrl",value:function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:cL,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i/28e-5}return Object.assign(r,e),uL(this.urls[0],r)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(t,e,r,n,i){var o,a=this.urls;if(a)return o=1==a.length?a[0]:a[Xr(Mv(t),a.length)],function(t,e,r,n,i,o,a){o=Object.assign({REQUEST:"GetMap"},o);var s=e/r,u=[Jr(ni(t)/s,4),Jr(Qn(t)/s,4)];if(1!=r)switch(a){case"geoserver":var l=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+l:o.FORMAT_OPTIONS="dpi:"+l;break;case"mapserver":o.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":o.DPI=90*r;break;default:throw new Error("Unknown `serverType` configured")}return function(t,e,r,n,i){i.WIDTH=r[0],i.HEIGHT=r[1];var o,a=n.getAxisOrientation(),s=lL(i.VERSION,"1.3")>=0;return i[s?"CRS":"SRS"]=n.getCode(),o=s&&"ne"==a.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,i.BBOX=o.join(","),uL(t,i)}(i,t,u,n,o)}(e,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),r,n,o,i,this.serverType_)}},{key:"getTilePixelRatio",value:function(t){return this.hidpi_&&void 0!==this.serverType_?t:1}},{key:"getKeyForParams_",value:function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")}},{key:"updateParams",value:function(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var t=this.params_.VERSION||cL;this.v13_=lL(t,"1.3")>=0}},{key:"tileUrlFunction",value:function(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=this.gutter_;0!==a&&(o=Cn(o,i*a,o));var s=Object.assign({},fL(this.params_,"GetMap"));return this.getRequestUrl_(t,o,e,r,s)}}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pL(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Ng);const bL=mL;function _L(t){return _L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_L(t)}function wL(){wL=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==_L(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(_L(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xL(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function SL(t){var e=jo(ri(t)),r=jo(Yn(t));return"".concat(r[0],",").concat(r[1],",").concat(e[0],",").concat(e[1])}function kL(t){return OL.apply(this,arguments)}function OL(){var t;return t=wL().mark((function t(e){var r,n,i,o,a,s,u,l,c,f,h,p,d,y,v,g,m,b,_,w;return wL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.source,n=e.fields,i=e.extent,o=e.serverUrl,a=e.retrieveAll,s=void 0!==a&&a,u=e.scrollCallbackAsync,l=e.getAccessToken,!r.internalSource){t.next=48;break}return c=r.maxResults||1e4,f=II().compile(r.url),"bbox"===r.loadingStrategy&&(h=SL(i)),n&&Array.isArray(n[r.internalSource])&&(p=n[r.internalSource].join()),t.t0=Oe,t.t1=o+f({bbox:h,fields:p,retrieveAll:s}),t.t2="Bearer ",t.next=11,l();case 11:return t.t3=t.sent,t.t4=t.t2.concat.call(t.t2,t.t3),t.t5={"Cache-Control":"no-cache",Authorization:t.t4},t.t6={method:"GET",url:t.t1,headers:t.t5},t.next=17,(0,t.t0)(t.t6);case 17:if(d=t.sent,!(y=d.data).scrollId){t.next=45;break}return v=y.scrollId,g=v&&y.features.features.length===c,t.next=24,u(y.features,g);case 24:if(!g){t.next=44;break}return t.t7=Oe,t.t8=o+f({bbox:h,fields:p,scrollId:v}),t.t9="Bearer ",t.next=30,l();case 30:return t.t10=t.sent,t.t11=t.t9.concat.call(t.t9,t.t10),t.t12={"Cache-Control":"no-cache",Authorization:t.t11},t.t13={method:"GET",url:t.t8,headers:t.t12},t.next=36,(0,t.t7)(t.t13);case 36:return m=t.sent,b=m.data,v=b.scrollId,g=v&&b.features.features.length===c,t.next=42,u(b.features,g);case 42:t.next=24;break;case 44:return t.abrupt("return");case 45:return t.abrupt("return",y.features);case 48:return t.next=50,Oe({method:"GET",url:r.url});case 50:return _=t.sent,w=_.data,t.abrupt("return",w);case 53:case"end":return t.stop()}}),t)})),OL=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){xL(o,n,i,a,s,"next",t)}function s(t){xL(o,n,i,a,s,"throw",t)}a(void 0)}))},OL.apply(this,arguments)}function EL(t){return EL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EL(t)}function AL(t,e,r){return e=CL(e),function(t,e){if(e&&("object"===EL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,PL()?Reflect.construct(e,r||[],CL(t).constructor):e.apply(t,r))}function PL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(PL=function(){return!!t})()}function CL(t){return CL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CL(t)}function jL(t,e){return jL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jL(t,e)}var ML=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=AL(this,e,[{opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,e){var n=t.getTileCoord()[0],i=Sc(r.tileGrid.getTileSize(n)),o=cl(i[0],i[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,i[0]+.5,i[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(e,i[0]/2,i[1]/2,i[0]),o.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(o.canvas)}}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jL(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(Yg);const TL=ML;var RL=1,IL=2,LL=3,FL=5,DL=6378137,BL=6356752.314,NL=.0066943799901413165,zL=484813681109536e-20,GL=Math.PI/2,UL=1e-10,qL=.017453292519943295,WL=57.29577951308232,VL=Math.PI/4,ZL=2*Math.PI,YL=3.14159265359,XL={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const HL={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var KL=/[\s_\-\/\(\)]/g;function JL(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(KL,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(KL,"")===i)return t[r]}function $L(t){var e,r,n,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*qL},lat_1:function(t){i.lat1=t*qL},lat_2:function(t){i.lat2=t*qL},lat_ts:function(t){i.lat_ts=t*qL},lon_0:function(t){i.long0=t*qL},lon_1:function(t){i.long1=t*qL},lon_2:function(t){i.long2=t*qL},alpha:function(t){i.alpha=parseFloat(t)*qL},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*qL},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=JL(HL,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*qL},pm:function(t){var e=JL(XL,t);i.from_greenwich=(e||parseFloat(t))*qL},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)r=o[e],e in a?"function"==typeof(n=a[e])?n(r):i[n]=r:i[e]=r;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}const QL=function(t){return new aF(t).output()};var tF=1,eF=/\s/,rF=/[A-Za-z]/,nF=/[A-Za-z84_]/,iF=/[,\]]/,oF=/[\d\.E\-\+]/;function aF(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=tF}function sF(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return uF(e,t),t}),n);e&&(t[e]=i)}function uF(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void uF(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&uF(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&uF(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void sF(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return uF(t,e[r]);return sF(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function lF(t){return lF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lF(t)}aF.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;eF.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case tF:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},aF.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(iF.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},aF.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=tF)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=tF,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},aF.prototype.number=function(t){if(!oF.test(t)){if(iF.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},aF.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},aF.prototype.keyword=function(t){if(nF.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=tF)}if(!iF.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},aF.prototype.neutral=function(t){if(rF.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(oF.test(t))return this.word=t,void(this.state=3);if(!iF.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},aF.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var cF=.017453292519943295;function fF(t){return t*cF}function hF(t){var e=QL(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return uF(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===lF(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var i=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",fF],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",fF],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",fF],["lat0","latitude_of_origin",fF],["lat0","standard_parallel_1",fF],["lat1","standard_parallel_1",fF],["lat2","standard_parallel_2",fF],["azimuth","Azimuth"],["alpha","azimuth",fF],["srsCode","name"]].forEach((function(e){return function(t,e){var r=e[0],n=e[1];!(r in t)&&n in t&&(t[r]=t[n],3===e.length&&(t[r]=e[2](t[r])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=fF(t.lat0>0?90:-90)):(t.lat0=fF(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function pF(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?pF[t]=$L(arguments[1]):pF[t]=hF(arguments[1]):pF[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?pF.apply(e,t):pF(t)}));if("string"==typeof t){if(t in pF)return pF[t]}else"EPSG"in t?pF["EPSG:"+t.EPSG]=t:"ESRI"in t?pF["ESRI:"+t.ESRI]=t:"IAU2000"in t?pF["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(pF);const dF=pF;var yF=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],vF=["3857","900913","3785","102113"];function gF(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function mF(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function bF(t){return t<0?-1:1}function _F(t){return Math.abs(t)<=YL?t:t-bF(t)*ZL}function wF(t,e,r){var n=t*r,i=.5*t;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(GL-e))/n}function xF(t,e){for(var r,n,i=.5*t,o=GL-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(o),o+=n=GL-2*Math.atan(e*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999}function SF(t){return t}var kF=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=mF(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,i=t.y;if(i*WL>90&&i*WL<-90&&n*WL>180&&n*WL<-180)return null;if(Math.abs(Math.abs(i)-GL)<=UL)return null;if(this.sphere)e=this.x0+this.a*this.k0*_F(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(VL+.5*i));else{var o=Math.sin(i),a=wF(this.e,i,o);e=this.x0+this.a*this.k0*_F(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,i=t.y-this.y0;if(this.sphere)r=GL-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=xF(this.e,o)))return null}return e=_F(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:SF,inverse:SF,names:["longlat","identity"]}],OF={},EF=[];function AF(t,e){var r=EF.length;return t.names?(EF[r]=t,t.names.forEach((function(t){OF[t.toLowerCase()]=r})),this):(console.log(e),!0)}const PF={start:function(){kF.forEach(AF)},add:AF,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==OF[e]&&EF[OF[e]]?EF[OF[e]]:void 0}};var CF={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},jF=CF.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};CF.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var MF={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},TF={};function RF(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:TF[t]||null,isNull:!1}}function IF(t){return t/3600*Math.PI/180}function LF(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function FF(t){return t.map((function(t){return[IF(t.longitudeShift),IF(t.latitudeShift)]}))}function DF(t,e,r){return{name:LF(t,e+8,e+16).trim(),parent:LF(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function BF(t,e,r,n){for(var i=e+176,o=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,n),longitudeShift:t.getFloat32(i+16*a+4,n),latitudeAccuracy:t.getFloat32(i+16*a+8,n),longitudeAccuracy:t.getFloat32(i+16*a+12,n)};o.push(s)}return o}function NF(t){return NF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NF(t)}function zF(t,e){if(!(this instanceof zF))return new zF(t);e=e||function(t){if(t)throw t};var r=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in dF}(t))return dF[t];if(function(t){return yF.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=hF(t);if(function(t){var e=JL(t,"authority");if(e){var r=JL(e,"epsg");return r&&vF.indexOf(r)>-1}}(e))return dF["EPSG:3857"];var r=function(t){var e=JL(t,"extension");if(e)return JL(e,"proj4")}(e);return r?$L(r):e}return function(t){return"+"===t[0]}(t)?$L(t):void 0}(t);if("object"===NF(r)){var n=zF.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var i=JL(MF,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var o=function(t,e,r,n,i){if(!t){var o=JL(CF,n);o||(o=jF),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<UL)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(r.a,r.b,r.rf,r.ellps,r.sphere),a=function(t,e,r,n){var i=t*t,o=e*e,a=(i-o)/i,s=0;return n?(i=(t*=1-a*(.16666666666666666+a*(.04722222222222222+.022156084656084655*a)))*t,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}(o.a,o.b,o.rf,r.R_A),s=function(t){return void 0===t?null:t.split(",").map(RF)}(r.nadgrids),u=r.datum||function(t,e,r,n,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?FL:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=RL),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=IL,s.datum_params[3]*=zL,s.datum_params[4]*=zL,s.datum_params[5]*=zL,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=LL,s.grids=a),s.a=r,s.b=n,s.es=i,s.ep2=o,s}(r.datumCode,r.datum_params,o.a,o.b,a.es,a.ep2,s);gF(this,r),gF(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=u,this.init(),e(null,this)}else e(t)}else e(t)}zF.projections=PF,zF.projections.start();const GF=zF;function UF(t,e,r){var n,i,o,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-GL&&u>-1.001*GL)u=-GL;else if(u>GL&&u<1.001*GL)u=GL;else{if(u<-GL)return{x:-1/0,y:-1/0,z:t.z};if(u>GL)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),a=Math.cos(u),o=i*i,{x:((n=r/Math.sqrt(1-e*o))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*i}}function qF(t,e,r,n){var i,o,a,s,u,l,c,f,h,p,d,y,v,g,m,b=t.x,_=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+_*_),o=Math.sqrt(b*b+_*_+w*w),i/r<1e-12){if(g=0,o/r<1e-12)return m=-n,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(_,b);a=w/o,f=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),h=a*u,v=0;do{v++,l=e*(c=r/Math.sqrt(1-e*h*h))/(c+(m=i*f+w*h-c*(1-e*h*h))),y=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(p=s*(1-l)*u)*h,f=p,h=d}while(y*y>1e-24&&v<30);return{x:g,y:Math.atan(d/Math.abs(p)),z:m}}function WF(t){return t===RL||t===IL}function VF(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[];t:for(var a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=n;break}if(s.mandatory,null!==s.grid)for(var u=s.grid.subgrids,l=0,c=u.length;l<c;l++){var f=u[l],h=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,p=f.ll[0]-h,d=f.ll[1]-h,y=f.ll[0]+(f.lim[0]-1)*f.del[0]+h,v=f.ll[1]+(f.lim[1]-1)*f.del[1]+h;if(!(d>n.y||p>n.x||v<n.y||y<n.x||(i=ZF(n,e,f),isNaN(i.x))))break t}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*WL+" "+n.y*WL+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function ZF(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var i={x:t.x,y:t.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=_F(i.x-Math.PI)+Math.PI;var o=YF(i,r);if(e){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=YF(o,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=_F(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function YF(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(n.x),o=Math.floor(n.y),a=n.x-1*i,s=n.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;r=o*e.lim[0]+i;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],h=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],d=e.cvs[r][1];r--;var y=e.cvs[r][0],v=e.cvs[r][1],g=a*s,m=a*(1-s),b=(1-a)*(1-s),_=(1-a)*s;return u.x=b*l+m*f+_*y+g*p,u.y=b*c+m*h+_*v+g*d,u}function XF(t,e,r){var n,i,o,a=r.x,s=r.y,u=r.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(n=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(n=u,i="z"),t.axis[o]){case"e":case"n":l[i]=n;break;case"w":case"s":l[i]=-n;break;case"u":void 0!==r[i]&&(l.z=n);break;case"d":void 0!==r[i]&&(l.z=-n);break;default:return null}return l}function HF(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function KF(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function JF(t,e,r,n){var i,o=void 0!==(r=Array.isArray(r)?HF(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){KF(t.x),KF(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===RL||t.datum.datum_type===IL||t.datum.datum_type===LL)&&"WGS84"!==e.datumCode||(e.datum.datum_type===RL||e.datum.datum_type===IL||e.datum.datum_type===LL)&&"WGS84"!==t.datumCode}(t,e)&&(r=JF(t,i=new GF("WGS84"),r,n),t=i),n&&"enu"!==t.axis&&(r=XF(t,!1,r)),"longlat"===t.projName)r={x:r.x*qL,y:r.y*qL,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=function(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===RL?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==IL||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===FL||e.datum_type===FL)return r;var n=t.a,i=t.es;if(t.datum_type===LL){if(0!==VF(t,!1,r))return;n=DL,i=NL}var o=e.a,a=e.b,s=e.es;return e.datum_type===LL&&(o=DL,a=BL,s=NL),i!==s||n!==o||WF(t.datum_type)||WF(e.datum_type)?(r=UF(r,i,n),WF(t.datum_type)&&(r=function(t,e,r){if(e===RL)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===IL){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(r,t.datum_type,t.datum_params)),WF(e.datum_type)&&(r=function(t,e,r){if(e===RL)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===IL){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,f=(t.y-i)/l,h=(t.z-o)/l;return{x:c+u*f-s*h,y:-u*c+f+a*h,z:s*c-a*f+h}}}(r,e.datum_type,e.datum_params)),r=qF(r,s,o,a),e.datum_type!==LL||0===VF(e,!0,r)?r:void 0):r}(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*WL,y:r.y*WL,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?XF(e,!0,r):(r&&!o&&delete r.z,r)}var $F=GF("WGS84");function QF(t,e,r,n){var i,o,a;return Array.isArray(r)?(i=JF(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(o=JF(t,e,r,n),2===(a=Object.keys(r)).length||a.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=r[n]})),o)}function tD(t){return t instanceof GF?t:t.oProj?t.oProj:GF(t)}const eD=function(t,e,r){t=tD(t);var n,i=!1;return void 0===e?(e=t,t=$F,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=$F,i=!0),e=tD(e),r?QF(t,e,r):(n={forward:function(r,n){return QF(t,e,r,n)},inverse:function(r,n){return QF(e,t,r,n)}},i&&(n.oProj=e),n)};var rD=6,nD="AJSAJS",iD="AFAFAF",oD=65,aD=73,sD=79,uD=86,lD=90;const cD={forward:fD,inverse:function(t){var e=yD(gD(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:hD};function fD(t,e){return e=e||5,function(t,e){var r,n,i,o,a,s,u,l,c,f,h,p="00000"+t.easting,d="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,f=t.northing,h=vD(t.zoneNumber),r=Math.floor(c/1e5),n=Math.floor(f/1e5)%20,i=h-1,o=nD.charCodeAt(i),a=iD.charCodeAt(i),l=!1,(s=o+r-1)>lD&&(s=s-lD+oD-1,l=!0),(s===aD||o<aD&&s>aD||(s>aD||o<aD)&&l)&&s++,(s===sD||o<sD&&s>sD||(s>sD||o<sD)&&l)&&++s===aD&&s++,s>lD&&(s=s-lD+oD-1),(u=a+n)>uD?(u=u-uD+oD-1,l=!0):l=!1,(u===aD||a<aD&&u>aD||(u>aD||a<aD)&&l)&&u++,(u===sD||a<sD&&u>sD||(u>sD||a<sD)&&l)&&++u===aD&&u++,u>uD&&(u=u-uD+oD-1),String.fromCharCode(s)+String.fromCharCode(u))+p.substr(p.length-5,e)+d.substr(d.length-5,e)}(function(t){var e,r,n,i,o,a,s,u=t.lat,l=t.lon,c=6378137,f=.9996,h=pD(u),p=pD(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60),u>=56&&u<64&&l>=3&&l<12&&(s=32),u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37)),a=pD(6*(s-1)-180+3),e=.006739496752268451,r=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),i=e*Math.cos(h)*Math.cos(h);var d,y,v=f*r*((o=Math.cos(h)*(p-a))+(1-n+i)*o*o*o/6+(5-18*n+n*n+72*i-58*e)*o*o*o*o*o/120)+5e5,g=f*(c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h))+r*Math.tan(h)*(o*o/2+(5-n+9*i+4*i*i)*o*o*o*o/24+(61-58*n+n*n+600*i-2.2240339282485886)*o*o*o*o*o*o/720));return u<0&&(g+=1e7),{northing:Math.round(g),easting:Math.round(v),zoneNumber:s,zoneLetter:(d=u,y="Z",84>=d&&d>=72?y="X":72>d&&d>=64?y="W":64>d&&d>=56?y="V":56>d&&d>=48?y="U":48>d&&d>=40?y="T":40>d&&d>=32?y="S":32>d&&d>=24?y="R":24>d&&d>=16?y="Q":16>d&&d>=8?y="P":8>d&&d>=0?y="N":0>d&&d>=-8?y="M":-8>d&&d>=-16?y="L":-16>d&&d>=-24?y="K":-24>d&&d>=-32?y="J":-32>d&&d>=-40?y="H":-40>d&&d>=-48?y="G":-48>d&&d>=-56?y="F":-56>d&&d>=-64?y="E":-64>d&&d>=-72?y="D":-72>d&&d>=-80&&(y="C"),y)}}({lat:t[1],lon:t[0]}),e)}function hD(t){var e=yD(gD(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function pD(t){return t*(Math.PI/180)}function dD(t){return t/Math.PI*180}function yD(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,f,h,p,d=.9996,y=6378137,v=.00669438,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=r-5e5,b=e;n<"N"&&(b-=1e7),f=6*(i-1)-180+3,o=.006739496752268451,p=(h=b/d/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*h)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*h)+151*g*g*g/96*Math.sin(6*h),a=y/Math.sqrt(1-v*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),l=.99330562*y/Math.pow(1-v*Math.sin(p)*Math.sin(p),1.5),c=m/(a*d);var _=p-a*Math.tan(p)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);_=dD(_);var w,x=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(p);if(x=f+dD(x),t.accuracy){var S=yD({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:S.lat,right:S.lon,bottom:_,left:x}}else w={lat:_,lon:x};return w}function vD(t){var e=t%rD;return 0===e&&(e=rD),e}function gD(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var u=vD(a),l=function(t,e){for(var r=nD.charCodeAt(e-1),n=1e5,i=!1;r!==t.charCodeAt(0);){if(++r===aD&&r++,r===sD&&r++,r>lD){if(i)throw"Bad character: "+t;r=oD,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=iD.charCodeAt(e-1),n=0,i=!1;r!==t.charCodeAt(0);){if(++r===aD&&r++,r===sD&&r++,r>uD){if(i)throw"Bad character: "+t;r=oD,i=!0}n+=1e5}return n}(n.charAt(1),u);c<mD(s);)c+=2e6;var f=r-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,p,d,y=f/2,v=0,g=0;return y>0&&(h=1e5/Math.pow(10,y),p=t.substring(o,o+y),v=parseFloat(p)*h,d=t.substring(o+y),g=parseFloat(d)*h),{easting:v+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function mD(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function bD(t){return bD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bD(t)}function _D(t,e,r){if(!(this instanceof _D))return new _D(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===bD(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}_D.fromMGRS=function(t){return new _D(hD(t))},_D.prototype.toMGRS=function(t){return fD([this.x,this.y],t)};const wD=_D;var xD=.046875,SD=.01953125,kD=.01068115234375;function OD(t){var e=[];e[0]=1-t*(.25+t*(xD+t*(SD+t*kD))),e[1]=t*(.75-t*(xD+t*(SD+t*kD)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e}function ED(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function AD(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(ED(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<UL)return i}return i}const PD={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=OD(this.es),this.ml0=ED(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=_F(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),h=Math.pow(f,2),p=Math.abs(u)>UL?Math.tan(o):0,d=Math.pow(p,2),y=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var v=ED(o,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+f+c/20*(5-18*d+y+14*f-58*d*f+c/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(v-this.ml0+s*a*l/2*(1+c/12*(5-d+9*f+4*h+c/30*(61+y-58*d+270*f-330*d*f+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<UL)return 93;if(r=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>UL)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=AD(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<GL){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>UL?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),h=Math.pow(l,2),p=Math.pow(h,2);e=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(e)/this.k0,y=Math.pow(d,2);n=r-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*h-9*c*h+c-4*f-y/30*(61+90*h-252*c*h+45*p+46*c-y/56*(1385+3633*h+4095*p+1574*p*h)))),i=_F(this.long0+d*(1-y/6*(1+2*h+c-y/20*(5+28*h+24*p+8*c*h+6*c-y/42*(61+662*h+1320*p+720*p*h))))/u)}else n=GL*bF(a),i=0;else{var v=Math.exp(o/this.k0),g=.5*(v-1/v),m=this.lat0+a/this.k0,b=Math.cos(m);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),n=Math.asin(e),a<0&&(n=-n),i=0===g&&0===b?0:_F(Math.atan2(g,b)+this.long0)}return t.x=i,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function CD(t){var e=Math.exp(t);return(e-1/e)/2}function jD(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function MD(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)}function TD(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=CD(r),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(r),l=2*a*u,c=-2*o*s,f=t.length-1,h=t[f],p=0,d=0,y=0;--f>=0;)n=d,i=p,h=l*(d=h)-n-c*(p=y)+t[f],y=c*d-i+l*p;return[(l=o*u)*h-(c=a*s)*y,l*y+c*h]}const RD={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(PD.init.apply(this),this.forward=PD.forward,this.inverse=PD.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=MD(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=_F(t.x-this.long0),r=t.y;r=MD(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,jD(n,i*a)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(jD(1,e)+1))),t<0?-e:e}(Math.tan(e));var s,u,l=TD(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=TD(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(CD(n));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(n),l=Math.cos(n);i=Math.atan2(a*l,jD(u,l*s)),e=_F((n=Math.atan2(u,l*s))+this.long0),r=MD(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},ID={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(_F(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*qL,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,RD.init.apply(this),this.forward=RD.forward,this.inverse=RD.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function LD(t,e){return Math.pow((1-t)/(1+t),e)}const FD={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+VL)/(Math.pow(Math.tan(.5*this.lat0+VL),this.C)*LD(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+VL),this.C)*LD(this.e*Math.sin(r),this.ratexp))-GL,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+VL)/this.K,1/this.C),i=20;i>0&&(r=2*Math.atan(n*LD(this.e*Math.sin(t.y),-.5*this.e))-GL,!(Math.abs(r-t.y)<1e-14));--i)t.y=r;return i?(t.x=e,t.y=r,t):null},names:["gauss"]},DD={init:function(){FD.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=_F(t.x-this.long0),FD.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=jD(t.x,t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,FD.inverse.apply(this,[t]),t.x=_F(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},BD={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=UL&&(this.k0=.5*(1+bF(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=UL&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=UL&&Math.abs(Math.cos(this.lat_ts))>UL&&(this.k0=.5*this.cons*mF(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/wF(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=mF(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-GL,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,i,o,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),f=_F(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=UL&&Math.abs(u+this.lat0)<=UL?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-GL,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=UL?(o=wF(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<UL?(e=2*this.a*this.k0/(1+i*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*i*Math.cos(f))+this.y0),t.x=e*i*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=UL?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<UL?this.lat0>0?_F(this.long0+Math.atan2(t.x,-1*t.y)):_F(this.long0+Math.atan2(t.x,t.y)):_F(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=UL){if(a<=UL)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*xF(this.e,n),e=this.con*_F(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=UL?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=_F(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),r=-1*xF(this.e,Math.tan(.5*(GL+o)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(GL+t))*Math.pow((1-e)/(1+e),.5*r)}},ND={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};function zD(t){return zD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zD(t)}var GD=1e-7;const UD={init:function(){var t,e,r,n,i,o,a,s,u,l,c,f,h,p=0,d=0,y=0,v=0,g=0,m=0,b=0;this.no_off=(h="object"===zD((f=this).PROJECTION)?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(h)),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),_&&(b=this.alpha),w&&(p=this.rectified_grid_angle*qL),_||w)d=this.longc;else if(y=this.long1,g=this.lat1,v=this.long2,m=this.lat2,Math.abs(g-m)<=GD||(t=Math.abs(g))<=GD||Math.abs(t-GL)<=GD||Math.abs(Math.abs(this.lat0)-GL)<=GD||Math.abs(Math.abs(m)-GL)<=GD)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>UL?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(i=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(wF(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=i=1),_||w?(_?(c=Math.asin(Math.sin(b)/n),w||(p=b)):(c=p,b=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(wF(this.e,g,Math.sin(g)),this.B),a=Math.pow(wF(this.e,m,Math.sin(m)),this.B),i=this.E/o,u=(a-o)/(a+o),l=((l=this.E*this.E)-a*o)/(l+a*o),(t=y-v)<-Math.pi?v-=ZL:t>Math.pi&&(v+=ZL),this.lam0=_F(.5*(y+v)-Math.atan(l*Math.tan(.5*this.B*(y-v))/u)/this.B),c=Math.atan(2*Math.sin(this.B*_F(y-this.lam0))/(i-1/i)),p=b=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(VL-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(VL+i))},forward:function(t){var e,r,n,i,o,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-GL)>UL){if(e=.5*((o=this.E/Math.pow(wF(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),r=.5*(o+a),i=Math.sin(this.B*t.x),n=(e*this.singam-i*this.cosgam)/r,Math.abs(Math.abs(n)-1)<UL)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<GD?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,i,o,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((n=Math.exp(-this.BrA*r))-1/n),o=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<UL)u.x=0,u.y=s<0?-GL:GL;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=xF(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},qD={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<UL)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=mF(this.e,e,r),i=wF(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=mF(this.e,o,a),u=wF(this.e,this.lat2,o),l=wF(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>UL?this.ns=Math.log(n/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=UL&&(r=bF(r)*(GL-2e-10));var n,i,o=Math.abs(Math.abs(r)-GL);if(o>UL)n=wF(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*_F(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(i=xF(this.e,n)))return null}else i=-GL;return o=_F(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},WD={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y,c=_F(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function VD(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function ZD(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function YD(t){return.375*t*(1+.25*t*(1+.46875*t))}function XD(t){return.05859375*t*t*(1+.75*t)}function HD(t){return t*t*t*(35/3072)}function KD(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function JD(t){return Math.abs(t)<GL?t:t-bF(t)*Math.PI}function $D(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}const QD={init:function(){this.sphere||(this.e0=ZD(this.es),this.e1=YD(this.es),this.e2=XD(this.es),this.e3=HD(this.es),this.ml0=this.a*VD(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=_F(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=KD(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=n*Math.cos(i),c=l*l,f=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*VD(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=$D(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-GL)<=UL)return t.x=this.long0,t.y=GL,i<0&&(t.y*=-1),t;var s=KD(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return t.x=_F(r+this.long0),t.y=JD(e),t},names:["Cassini","Cassini_Soldner","cass"]};function tB(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}const eB={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-GL)<UL?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<UL?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=tB(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=.3333333333333333*t,e=t*t,r[0]+=.17222222222222222*e,r[1]=.06388888888888888*e,e*=t,r[0]+=.10257936507936508*e,r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=tB(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,i,o,a,s,u,l,c,f=t.x,h=t.y;if(f=_F(f-this.long0),this.sphere){if(o=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=UL)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<UL)return null;r=VL-.5*h,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=tB(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=GL+h,a=this.qp-a;break;case this.S_POLE:l=h-GL,a=this.qp+a}if(Math.abs(l)<UL)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,i,o,a,s,u,l,c,f=t.x/this.a,h=t.y/this.a;if(this.sphere){var p,d=0,y=0;if((r=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(r),d=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=UL?0:Math.asin(h*y/p),f*=y,h=d*p;break;case this.OBLIQ:r=Math.abs(p)<=UL?this.lat0:Math.asin(d*this.sinph0+h*y*this.cosph0/p),f*=y*this.cosph0,h=(d-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:h=-h,r=GL-r;break;case this.S_POLE:r-=GL}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<UL)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),f*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+h*i*this.cosb1/a,o=this.qp*s,h=a*this.cosb1*n-h*this.sinb1*i):(s=h*i/a,o=this.qp*s,h=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(o=f*f+h*h))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,h),c=(u=Math.asin(s))+u,r=u+(l=this.apa)[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=_F(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function rB(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const nB={init:function(){Math.abs(this.lat1+this.lat2)<UL||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=mF(this.e3,this.sin_po,this.cos_po),this.qs1=tB(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=mF(this.e3,this.sin_po,this.cos_po),this.qs2=tB(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=tB(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>UL?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=tB(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*_F(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=_F(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=rB(.5*e);if(t<UL)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}},iB={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=_F(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=UL?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),a=rB((n=Math.cos(i))*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=_F(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},oB={init:function(){this.sphere||(this.k0=mF(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=_F(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=tB(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=_F(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*GL:GL;for(var n,i,o,a,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=_F(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]},aB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=_F(e-this.long0),i=JD(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=_F(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=JD(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},sB={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZD(this.es),this.e1=YD(this.es),this.e2=XD(this.es),this.e3=HD(this.es),this.ml0=this.a*VD(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=_F(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=UL?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(JD(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=UL)e=this.a*a,r=-1*this.ml0;else{var s=KD(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*VD(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,u,l;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=UL)e=_F(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=UL){r=u;break}e=_F(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=UL)r=0,e=_F(this.long0+n/this.a);else{var f,h,p,d,y;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(y=this.e*Math.sin(u),f=Math.sqrt(1-y*y)*Math.tan(u),h=this.a*VD(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(d=h/this.a)+1)-d-.5*f*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*f)+(a-d)*(f*p-2/Math.sin(2*u))-p),Math.abs(l)<=UL){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=_F(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]},uB={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,i=r-this.long0,o=n/zL*1e-5,a=i,s=1,u=0;for(e=1;e<=10;e++)s*=o,u+=this.A[e]*s;var l,c=u,f=a,h=1,p=0,d=0,y=0;for(e=1;e<=6;e++)l=p*c+h*f,h=h*c-p*f,p=l,d=d+this.B_re[e]*h-this.B_im[e]*p,y=y+this.B_im[e]*h+this.B_re[e]*p;return t.x=y*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,i=t.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,u=1,l=0,c=0,f=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,f=f+this.C_im[e]*u+this.C_re[e]*l;for(var h=0;h<this.iterations;h++){var p,d=c,y=f,v=a,g=s;for(e=2;e<=6;e++)p=y*c+d*f,d=d*c-y*f,y=p,v+=(e-1)*(this.B_re[e]*d-this.B_im[e]*y),g+=(e-1)*(this.B_im[e]*d+this.B_re[e]*y);d=1,y=0;var m=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=y*c+d*f,d=d*c-y*f,y=p,m+=e*(this.B_re[e]*d-this.B_im[e]*y),b+=e*(this.B_im[e]*d+this.B_re[e]*y);var _=m*m+b*b;c=(v*m+g*b)/_,f=(g*m-v*b)/_}var w=c,x=f,S=1,k=0;for(e=1;e<=9;e++)S*=w,k+=this.D[e]*S;var O=this.lat0+k*zL*1e5,E=this.long0+x;return t.x=E,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]},lB={init:function(){},forward:function(t){var e=t.x,r=t.y,n=_F(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=_F(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},cB={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=OD(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=_F(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<UL)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);r=this.a*ED(i,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=rB((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=rB(Math.sin(e)/this.n)),r=_F(r+this.long0),e=JD(e)):(e=AD(t.y/this.a,this.es,this.en),(n=Math.abs(e))<GL?(n=Math.sin(e),r=_F(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-UL<GL&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]},fB={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=_F(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<UL)break}i/=2,Math.PI/2-Math.abs(r)<UL&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=_F(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]},hB={init:function(){Math.abs(this.lat1+this.lat2)<UL||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZD(this.es),this.e1=YD(this.es),this.e2=XD(this.es),this.e3=HD(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=mF(this.e,this.sinphi,this.cosphi),this.ml1=VD(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<UL?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=mF(this.e,this.sinphi,this.cosphi),this.ml2=VD(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=VD(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=VD(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*_F(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=_F(this.long0+o/this.ns),n=JD(this.g-r/this.a),t.x=i,t.y=n,t):(n=$D(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),i=_F(this.long0+o/this.ns),t.x=i,t.y=n,t)},names:["Equidistant_Conic","eqdc"]},pB={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,i=t.y,o=_F(n-this.long0);Math.abs(i)<=UL&&(e=this.x0+this.R*o,r=this.y0);var a=rB(2*Math.abs(i/Math.PI));(Math.abs(o)<=UL||Math.abs(Math.abs(i)-GL)<=UL)&&(e=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),h=f*f,p=f*(2/l-1),d=p*p,y=Math.PI*this.R*(s*(f-d)+Math.sqrt(u*(f-d)*(f-d)-(d+u)*(h-d)))/(d+u);o<0&&(y=-y),e=this.x0+y;var v=u+f;return y=Math.PI*this.R*(p*v-s*Math.sqrt((d+u)*(u+1)-v*v))/(d+u),r=i>=0?this.y0+y:this.y0-y,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,f,h;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,o=(n=t.x/f)*n+(i=t.y/f)*i,f=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<UL?this.long0:_F(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},dB={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u,l,c,f,h,p,d,y,v,g,m,b,_,w,x,S=t.x,k=t.y,O=Math.sin(t.y),E=Math.cos(t.y),A=_F(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=UL?(t.x=this.x0+this.a*(GL-k)*Math.sin(A),t.y=this.y0-this.a*(GL-k)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=UL?(t.x=this.x0+this.a*(GL+k)*Math.sin(A),t.y=this.y0+this.a*(GL+k)*Math.cos(A),t):(m=this.sin_p12*O+this.cos_p12*E*Math.cos(A),g=(v=Math.acos(m))?v/Math.sin(v):1,t.x=this.x0+this.a*g*E*Math.sin(A),t.y=this.y0+this.a*g*(this.cos_p12*O-this.sin_p12*E*Math.cos(A)),t):(e=ZD(this.es),r=YD(this.es),n=XD(this.es),i=HD(this.es),Math.abs(this.sin_p12-1)<=UL?(o=this.a*VD(e,r,n,i,GL),a=this.a*VD(e,r,n,i,k),t.x=this.x0+(o-a)*Math.sin(A),t.y=this.y0-(o-a)*Math.cos(A),t):Math.abs(this.sin_p12+1)<=UL?(o=this.a*VD(e,r,n,i,GL),a=this.a*VD(e,r,n,i,k),t.x=this.x0+(o+a)*Math.sin(A),t.y=this.y0+(o+a)*Math.cos(A),t):(s=O/E,u=KD(this.a,this.e,this.sin_p12),l=KD(this.a,this.e,O),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*E)),b=0===(f=Math.atan2(Math.sin(A),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(A)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=UL?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(A)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),v=u*b*(1-(_=b*b)*(y=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-y)/6+(w=_*b)/8*(d=h*p)*(1-2*y)+(x=w*b)/120*(y*(4-7*y)-3*h*h*(1-7*y))-x*b/48*d),t.x=this.x0+v*Math.sin(f),t.y=this.y0+v*Math.cos(f),t))},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,f,h,p,d,y,v,g,m,b,_,w,x,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*GL*this.a)return;return r=e/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(e)<=UL?a=this.lat0:(a=rB(i*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-GL,o=Math.abs(s)<=UL?this.lat0>=0?_F(this.long0+Math.atan2(t.x,-t.y)):_F(this.long0-Math.atan2(-t.x,t.y)):_F(this.long0+Math.atan2(t.x*n,e*this.cos_p12*i-t.y*this.sin_p12*n))),t.x=o,t.y=a,t}return u=ZD(this.es),l=YD(this.es),c=XD(this.es),f=HD(this.es),Math.abs(this.sin_p12-1)<=UL?(a=$D(((h=this.a*VD(u,l,c,f,GL))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,f),o=_F(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=UL?(h=this.a*VD(u,l,c,f,GL),a=$D(((e=Math.sqrt(t.x*t.x+t.y*t.y))-h)/this.a,u,l,c,f),o=_F(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),p=KD(this.a,this.e,this.sin_p12),v=Math.cos(y),m=-(g=this.e*this.cos_p12*v)*g/(1-this.es),b=3*this.es*(1-m)*this.sin_p12*this.cos_p12*v/(1-this.es),x=1-m*(w=(_=e/p)-m*(1+m)*Math.pow(_,3)/6-b*(1+3*m)*Math.pow(_,4)/24)*w/2-_*w*w*w/6,d=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*v),o=_F(this.long0+Math.asin(Math.sin(y)*Math.sin(w)/Math.cos(d))),S=Math.sin(d),a=Math.atan2((S-this.es*x*this.sin_p12)*Math.tan(d),S*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]},yB={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=_F(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=UL)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,r=rB((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(e)<=UL?(s=this.lat0,t.x=a,t.y=s,t):(s=rB(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-GL,Math.abs(o)<=UL?(a=this.lat0>=0?_F(this.long0+Math.atan2(t.x,-t.y)):_F(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=_F(this.long0+Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]};function vB(t,e,r,n){var i;return t<UL?(n.value=1,i=0):(i=Math.atan2(e,r),Math.abs(i)<=VL?n.value=1:i>VL&&i<=GL+VL?(n.value=2,i-=GL):i>GL+VL||i<=-(GL+VL)?(n.value=3,i=i>=0?i-YL:i+YL):(n.value=4,i+=GL)),i}function gB(t,e){var r=t+e;return r<-YL?r+=ZL:r>+YL&&(r-=ZL),r}const mB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=GL-VL/2?this.face=5:this.lat0<=-(GL-VL/2)?this.face=6:Math.abs(this.long0)<=VL?this.face=1:Math.abs(this.long0)<=GL+VL?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,i,o,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,5===this.face)i=GL-e,r>=VL&&r<=GL+VL?(u.value=1,n=r-GL):r>GL+VL||r<=-(GL+VL)?(u.value=2,n=r>0?r-YL:r+YL):r>-(GL+VL)&&r<=-VL?(u.value=3,n=r+GL):(u.value=4,n=r);else if(6===this.face)i=GL+e,r>=VL&&r<=GL+VL?(u.value=1,n=-r+GL):r<VL&&r>=-VL?(u.value=2,n=-r):r<-VL&&r>=-(GL+VL)?(u.value=3,n=-r-GL):(u.value=4,n=r>0?-r+YL:-r-YL);else{var l,c,f,h,p,d;2===this.face?r=gB(r,+GL):3===this.face?r=gB(r,+YL):4===this.face&&(r=gB(r,-GL)),h=Math.sin(e),p=Math.cos(e),d=Math.sin(r),l=p*Math.cos(r),c=p*d,f=h,1===this.face?n=vB(i=Math.acos(l),f,c,u):2===this.face?n=vB(i=Math.acos(c),f,-l,u):3===this.face?n=vB(i=Math.acos(-l),f,-c,u):4===this.face?n=vB(i=Math.acos(-c),f,l,u):(i=n=0,u.value=1)}return a=Math.atan(12/YL*(n+Math.acos(Math.sin(n)*Math.cos(VL))-GL)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),2===u.value?a+=GL:3===u.value?a+=YL:4===u.value&&(a+=1.5*YL),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,f,h,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=2,e-=GL):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=3,e=e<0?e+YL:e-YL):(d.value=4,e+=GL),l=YL/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(e))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),5===this.face)u=Math.acos(s),p.phi=GL-u,1===d.value?p.lam=a+GL:2===d.value?p.lam=a<0?a+YL:a-YL:3===d.value?p.lam=a-GL:p.lam=a;else if(6===this.face)u=Math.acos(s),p.phi=u-GL,1===d.value?p.lam=-a+GL:2===d.value?p.lam=-a:3===d.value?p.lam=-a-GL:p.lam=a<0?-a-YL:-a+YL;else{var y,v,g;l=(y=s)*y,v=(l+=(g=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*g)>=1?0:Math.sqrt(1-l),2===d.value?(l=v,v=-g,g=l):3===d.value?(v=-v,g=-g):4===d.value&&(l=v,v=g,g=-l),2===this.face?(l=y,y=-v,v=l):3===this.face?(y=-y,v=-v):4===this.face&&(l=y,y=v,v=-l),p.phi=Math.acos(-g)-GL,p.lam=Math.atan2(v,y),2===this.face?p.lam=gB(p.lam,-GL):3===this.face?p.lam=gB(p.lam,-YL):4===this.face&&(p.lam=gB(p.lam,+GL))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var bB=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],_B=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],wB=.8487,xB=1.3523,SB=WL/5,kB=1/SB,OB=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const EB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=_F(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*SB);n<0?n=0:n>=18&&(n=17);var i={x:OB(bB[n],r=WL*(r-kB*n))*e,y:OB(_B[n],r)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*wB+this.x0,i.y=i.y*this.a*xB+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*wB),y:Math.abs(t.y-this.y0)/(this.a*xB)};if(e.y>=1)e.x/=bB[18][0],e.y=t.y<0?-GL:GL;else{var r=Math.floor(18*e.y);for(r<0?r=0:r>=18&&(r=17);;)if(_B[r][0]>e.y)--r;else{if(!(_B[r+1][0]<=e.y))break;++r}var n=_B[r],i=5*(e.y-n[0])/(_B[r+1][0]-n[0]);i=function(t,e,r,n){for(var i=e;n;--n){var o=t(i);if(i-=o,Math.abs(o)<1e-10)break}return i}((function(t){return(OB(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),i,0,100),e.x/=OB(bB[r],i),e.y=(5*r+i)*qL,t.y<0&&(e.y=-e.y)}return e.x=_F(e.x+this.long0),e},names:["Robinson","robin"]},AB={init:function(){this.name="geocent"},forward:function(t){return UF(t,this.es,this.a)},inverse:function(t){return qF(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var PB={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const CB={init:function(){if(Object.keys(PB).forEach(function(t){if(void 0===this[t])this[t]=PB[t].def;else{if(PB[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);PB[t].num&&(this[t]=parseFloat(this[t]))}PB[t].degrees&&(this[t]=this[t]*qL)}.bind(this)),Math.abs(Math.abs(this.lat0)-GL)<UL?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<UL?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case 3:r=this.sinph0*o+this.cosph0*a*s;break;case 2:r=a*s;break;case 1:r=-o;break;case 0:r=o}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case 3:r*=this.cosph0*o-this.sinph0*a*s;break;case 2:r*=o;break;case 0:r*=-a*s;break;case 1:r*=a*s}return i=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*i,r=n*i,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,i={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var o=jD(t.x,t.y);if(Math.abs(o)<UL)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case 3:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case 2:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case 0:i.y=Math.asin(a),t.y=-t.y;break;case 1:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]},jB={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/jD(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(o)*Math.cos(a),n=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-r)*r-n*n-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/jD(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/jD(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(o)*e,n=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/jD(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(i/jD(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*jD(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*jD(1,a));var u=s/this.radius_p;if(e=a*a+u*u+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(n=(r=2*this.radius_g*o)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-r-Math.sqrt(n))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var MB;eD.defaultDatum="WGS84",eD.Proj=GF,eD.WGS84=new eD.Proj("WGS84"),eD.Point=wD,eD.toPoint=HF,eD.defs=dF,eD.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:LF(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n),o=function(t,e,r){for(var n=176,i=[],o=0;o<e.nSubgrids;o++){var a=DF(t,n,r),s=BF(t,n,a,r),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[IF(a.lowerLongitude),IF(a.lowerLatitude)],del:[IF(a.longitudeInterval),IF(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:FF(s)}),n+=176+16*a.gridNodeCount}return i}(r,i,n),a={header:i,subgrids:o};return TF[t]=a,a},eD.transform=JF,eD.mgrs=cD,eD.version="__VERSION__",(MB=eD).Proj.projections.add(PD),MB.Proj.projections.add(RD),MB.Proj.projections.add(ID),MB.Proj.projections.add(DD),MB.Proj.projections.add(BD),MB.Proj.projections.add(ND),MB.Proj.projections.add(UD),MB.Proj.projections.add(qD),MB.Proj.projections.add(WD),MB.Proj.projections.add(QD),MB.Proj.projections.add(eB),MB.Proj.projections.add(nB),MB.Proj.projections.add(iB),MB.Proj.projections.add(oB),MB.Proj.projections.add(aB),MB.Proj.projections.add(sB),MB.Proj.projections.add(uB),MB.Proj.projections.add(lB),MB.Proj.projections.add(cB),MB.Proj.projections.add(fB),MB.Proj.projections.add(hB),MB.Proj.projections.add(pB),MB.Proj.projections.add(dB),MB.Proj.projections.add(yB),MB.Proj.projections.add(mB),MB.Proj.projections.add(EB),MB.Proj.projections.add(AB),MB.Proj.projections.add(CB),MB.Proj.projections.add(jB);const TB=eD;var RB=s(361),IB=s.n(RB),LB=s(497),FB=s.n(LB),DB=s(918),BB=s.n(DB),NB=s(751),zB=s.n(NB),GB=s(66),UB=s.n(GB),qB=s(710),WB=s.n(qB),VB=s(295),ZB={};ZB.styleTagTransform=WB(),ZB.setAttributes=zB(),ZB.insert=BB().bind(null,"head"),ZB.domAPI=FB(),ZB.insertStyleElement=UB(),IB()(VB.Z,ZB),VB.Z&&VB.Z.locals&&VB.Z.locals;var YB=s(234),XB={};function HB(t){var e=function(e){return t.get(BM).includes(e.get("layerId"))},r=null;t.on(["pointermove","longpress"],(function(n){var i=t.getTargetElement(),o=t.forEachFeatureAtPixel(n.pixel,(function(t){return function(t,e,r){if(null!==r){if(r===t)return;KB(r)}t.set("hover",!0),t.setStyle(),e.style.cursor="pointer"}(t,i,r),r=t,!0}),{layerFilter:e});o||null===r||(i.style.cursor="",KB(r),r=null)}))}function KB(t){t.set("hover",!1),t.setStyle()}function JB(t){return JB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JB(t)}function $B(t){var e=function(t,e){if("object"!=JB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JB(e)?e:String(e)}function QB(t,e,r){return e=eN(e),function(t,e){if(e&&("object"===JB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tN()?Reflect.construct(e,r||[],eN(t).constructor):e.apply(t,r))}function tN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tN=function(){return!!t})()}function eN(t){return eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eN(t)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rN(t,e)}XB.styleTagTransform=WB(),XB.setAttributes=zB(),XB.insert=BB().bind(null,"head"),XB.domAPI=FB(),XB.insertStyleElement=UB(),IB()(YB.Z,XB),YB.Z&&YB.Z.locals&&YB.Z.locals;var nN=function(t){function e(t){var r,n,i,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=QB(this,e,[{handleEvent:iN}])).longPressTimeInMS_=(null==t||null===(r=t.options)||void 0===r?void 0:r.longPressTime)||0,o.longPressMapDraggable_=(null==t||null===(n=t.options)||void 0===n?void 0:n.longPressMapDraggable)||!1,o.timeoutId_=null,o.isLongPress_=!1,o.down_=null,o.moveTolerance_=null==t||null===(i=t.options)||void 0===i?void 0:i.moveTolerance,o}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}(e,t),r=e,n=[{key:"timeoutId",get:function(){return this.timeoutId_}},{key:"isLongPress",get:function(){return this.isLongPress_}},{key:"getDragPanInteraction",value:function(t){return t.getInteractions().getArray().find((function(t){return t instanceof rS}))}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$B(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Fx);function iN(t){var e=this,r=t.map;switch(t.type){case"pointerdown":if(this.longPressTimeInMS_<=0||this.getPointerCount()>1)return!0;this.down_=t.originalEvent,this.timeoutId_=setTimeout((function(){e.longPressMapDraggable_||e.getDragPanInteraction(r).setActive(!1),e.isLongPress_=!0,t.type="longpress",r.dispatchEvent(t)}),this.longPressTimeInMS_);break;case"pointerup":case"pointercancel":case"pointermove":case"pointerdrag":case"pointerleave":case"pointerout":if("pointermove"===t.type&&this.down_){var n=t.originalEvent;if(Math.abs(n.clientX-this.down_.clientX)<=this.moveTolerance_&&Math.abs(n.clientY-this.down_.clientY)<=this.moveTolerance_)return!0}this.down_=null,this.longPressMapDraggable_||this.getDragPanInteraction(r).setActive(!0),this.timeoutId_&&(clearTimeout(this.timeoutId_),this.timeoutId_=null);break;case"singleclick":if(this.isLongPress_)return this.isLongPress_=!1,!1}return!0}var oN=function(t,e){t.addInteraction(new nN(e))},aN="https://api.mapbox.com";function sN(t,e){var r=function(t){return 0!==t.indexOf("mapbox://")?"":t.slice(9)}(t);if(!r)return decodeURI(new URL(t,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: ".concat(t));var n=r.slice(7);return"".concat(aN,"/styles/v1/").concat(n,"?&access_token=").concat(e)}var uN=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function lN(t){return lN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lN(t)}function cN(){cN=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==lN(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(lN(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function fN(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function hN(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return pN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pN(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function pN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dN(t,e){var r;t.get(qM)!==e&&(t.set(qM,e),e&&t.set(UM,((r=new(RT())("MapDB")).version(1).stores({values:"",tiles:"",layerSources:""}),r.open(),r)),yN(t,e))}function yN(t,e){var r=t.get(FM);if(r)for(var n=0,i=Object.values(r);n<i.length;n++){var o=i[n];if(o.offlineMaxZoom){var a,s=hN(o.group.getLayers().getArray());try{for(s.s();!(a=s.n()).done;){var u=a.value.getSource();if(u instanceof UE||u instanceof KO){var l=u.getTileGrid(),c=l._origMaxZoom||l.getMaxZoom(),f=e&&o.offlineMaxZoom<c?o.offlineMaxZoom:c,h=void 0;u instanceof UE?h=uN.slice(0,f+1):u instanceof KO&&(h=rg({maxZoom:f,tileSize:l.getTileSize()}).getResolutions()),u.tileGrid=new tg({origin:l.getOrigin(0),extent:l.getExtent(),minZoom:l.getMinZoom(),resolutions:h,tileSize:l.getTileSize()}),u.tileGrid._origMaxZoom=c}}}catch(t){s.e(t)}finally{s.f()}}}}function vN(t,e){var r=new Worker(new URL(s.p+s.u(280),s.b),{type:void 0});return t.set(WM,r),r.postMessage({action:"startDownload",options:e}),new Promise((function(e,n){return function(t,e,r,n){t.onmessage=function(i){var o=i.data,a=o.action,s=o.success,u=o.error,l=o.msg;"startDownload"===a?(function(t,e,r,n){if(t)r();else{var i;if(e.includes("AxiosError"))try{i=JSON.parse(e)}catch(t){}n(i?new Error("Map download failed.",{cause:i}):new Error(e))}}(s,u,r,n),t.terminate(),e.set(WM,null)):"logInfo"===a&&h.info(l)}}(r,t,e,n)}))}function gN(t){return mN.apply(this,arguments)}function mN(){var t;return t=cN().mark((function t(e){var r,n,i,o,a,s,u,l,c,f,p,d,y,v,g,m,b;return cN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.config,n=e.map,i=e.extent,o=e.serverUrl,a=e.getAccessToken,s=e.maxConcurrentRequest,u=void 0===s?100:s,l=e.maxTiles,c=void 0===l?3e4:l,f=e.resumeDownload,p=e.isUnitTest,d=void 0!==p&&p,i=yG(i,n.getView().getProjection()),y=_N(r.baseLayers),v=SN({baseLayers:r.baseLayers,map:n,extent:i,maxTiles:c}),g=xN({sources:r.sources,map:n,extent:i,maxTiles:c}),m=v.vectorTilesToDownload.size+v.rasterTilesToDownload.size+g.tilesToDownload.size,h.debug("Total number of map tiles to download: ".concat(m)),!(m>c)){t.next=11;break}throw b="".concat(m," map tiles to download exceeded the maximum of ").concat(c),h.error(b),new Error(b,{cause:"MAX_TILES_EXCEEDED"});case 11:if(!d){t.next=13;break}return t.abrupt("return",{styleJson:y,mapTiles:v,offlineSources:g});case 13:return t.t0=vN,t.t1=n,t.t2=y,t.t3=v,t.t4=g,t.t5=r.fields,t.t6=i,t.t7=o,t.next=23,a();case 23:return t.t8=t.sent,t.t9=devicePixelRatio,t.t10=u,t.t11=f,t.t12={styleJson:t.t2,mapTiles:t.t3,offlineSources:t.t4,fields:t.t5,extent:t.t6,serverUrl:t.t7,accessToken:t.t8,devicePixelRatio:t.t9,maxConcurrentRequest:t.t10,resumeDownload:t.t11},t.next=30,(0,t.t0)(t.t1,t.t12);case 30:case"end":return t.stop()}}),t)})),mN=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){fN(o,n,i,a,s,"next",t)}function s(t){fN(o,n,i,a,s,"throw",t)}a(void 0)}))},mN.apply(this,arguments)}function bN(t){var e=t.get(WM);e&&(e.terminate(),t.set(WM,null))}function _N(t){var e,r=[],n=hN(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.offlineCache){if("xyz"===i.layerType)continue;"mapbox"===i.layerType?r.push(sN(i.styleUrl,i.accessToken)):r.push(i.styleJSON)}}}catch(t){n.e(t)}finally{n.f()}return r}function wN(t,e){var r,n=function(t){return function(t){return t instanceof Sv||t instanceof zc}(t)&&t.get("sourceConfig").url===e},i=function(t){var e,r=hN(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(n(i))return i}}catch(t){r.e(t)}finally{r.f()}},o=hN(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a instanceof wi){var s=i(a.getLayers().getArray());if(s)return s}else if(n(a))return a}}catch(t){o.e(t)}finally{o.f()}}function xN(t){var e=t.sources,r=t.map,n=t.extent,i=t.maxTiles,o={},a=new Set,s=new Set,u=function(t){var e,o,a=function(t,e){for(var r=t.get(DM),n=0,i=Object.values(r);n<i.length;n++){var o=i[n],a=wN(Object.values(o.layers),e);if(a)return a}}(r,t.url);a&&kN({map:r,layer:a,extent:n,minZoom:null===(e=t.offlineCache)||void 0===e?void 0:e.minZoom,maxZoom:null===(o=t.offlineCache)||void 0===o?void 0:o.maxZoom,tilesToDownload:s,maxTiles:i})};for(var l in e){var c=e[l];c.offlineCache&&("geojson"===c.sourceType?o[l]=c:"vector"===c.sourceType?(c.url.includes("tiles.json")&&a.add(c.url),u(c)):"wms"===c.sourceType&&u(c))}return{geojson:o,tilejson:a,tilesToDownload:s}}function SN(t){var e,r=t.baseLayers,n=t.map,i=t.extent,o=t.maxTiles,a=new Set,s=new Set,u=new Set,l=function(t,e){var r,l=hN(e);try{for(l.s();!(r=l.n()).done;){var c,f,h=r.value;if(h instanceof Sv)kN({map:n,layer:h,extent:i,minZoom:null===(c=t.offlineCache)||void 0===c?void 0:c.minZoom,maxZoom:null===(f=t.offlineCache)||void 0===f?void 0:f.maxZoom,tilesToDownload:a,maxTiles:o});else if(h instanceof zc){var p,d;kN({map:n,layer:h,extent:i,minZoom:null===(p=t.offlineCache)||void 0===p?void 0:p.minZoom,maxZoom:null===(d=t.offlineCache)||void 0===d?void 0:d.maxZoom,tilesToDownload:s,maxTiles:o})}else if(h instanceof rv){var y=h.getSource().getUrl();y&&u.add(y)}}}catch(t){l.e(t)}finally{l.f()}},c=n.get(FM),f=hN(r);try{for(f.s();!(e=f.n()).done;){var h=e.value;h.offlineCache&&l(h,c[h.layerId].group.getLayers().getArray())}}catch(t){f.e(t)}finally{f.f()}return{vectorTilesToDownload:a,rasterTilesToDownload:s,geojsonToDownload:u}}function kN(t){var e=t.map,r=t.layer,n=t.extent,i=t.minZoom,o=void 0===i?0:i,a=t.maxZoom,s=void 0===a?14:a,u=t.tilesToDownload,l=t.maxTiles,c=e.getView().getProjection(),f=r.getSource(),h=f.getTileGrid()||f.getTileGridForProjection(c),p=h.getExtent(),d=f.getTileUrlFunction();if(oi(p)||ii(p,n)){o=Math.max(o,h.getMinZoom()),s=Math.min(s,h.getMaxZoom());for(var y=o;y<=s&&!(u.size>l);y+=1)h.forEachTileCoord(n,y,(function(t){if(oi(p)||Tn(p,t)){var e=d(t,devicePixelRatio,c);u.add(e)}}))}}function ON(t){return ON="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ON(t)}function EN(t){var e=function(t,e){if("object"!=ON(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ON(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ON(e)?e:String(e)}function AN(t,e,r){return e=CN(e),function(t,e){if(e&&("object"===ON(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,PN()?Reflect.construct(e,r||[],CN(t).constructor):e.apply(t,r))}function PN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(PN=function(){return!!t})()}function CN(t){return CN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CN(t)}function jN(t,e){return jN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jN(t,e)}var MN=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t||{},i=0;return t.stroke&&(i=t.stroke.getWidth()),(r=AN(this,e,[{radius:n.radius+i,fill:new Nf({color:[0,0,0]}),rotation:n.rotation,displacement:n.displacement,snapToPixel:n.snapToPixel,declutterMode:n.declutterMode}])).setScale(n.scale||1),r._stroke=n.stroke,r._radius=n.radius||20,r._donutratio=n.donutRatio||.5,r._type=n.type,r._offset=[n.offsetX?n.offsetX:0,n.offsetY?n.offsetY:0],r._animation="number"==typeof n.animation?{animate:!0,step:n.animation}:r._animation={animate:!1,step:1},r._max=n.max,r._data=n.data,n.colors instanceof Array?r._colors=n.colors:(r._colors=MN.colors[n.colors],r._colors||(r._colors=MN.colors.classic)),r.renderChart_(),r}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jN(t,e)}(e,t),r=e,n=[{key:"clone",value:function(){var t=new MN({type:this._type,radius:this._radius,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:!!this.getSnapToPixel&&this.getSnapToPixel(),stroke:this._stroke,colors:this._colors,offsetX:this._offset[0],offsetY:this._offset[1],animation:this._animation,declutterMode:this.getDeclutterMode?this.getDeclutterMode():null});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}},{key:"getData",value:function(){return this._data}},{key:"setData",value:function(t){this._data=t,this.renderChart_()}},{key:"getRadius",value:function(){return this._radius}},{key:"setRadius",value:function(t,e){this._radius=t,this.donuratio_=e||this.donuratio_,this.renderChart_()}},{key:"setAnimation",value:function(t){if(!1===t){if(0==this._animation.animate)return;this._animation.animate=!1}else{if(this._animation.step==t)return;this._animation.animate=!0,this._animation.step=t}this.renderChart_()}},{key:"renderChart_",value:function(t){if(t){var e,r=0;this._stroke&&(e=tl(this._stroke.getColor()),r=this._stroke.getWidth());var n=this.getImage(t),i=n.getContext("2d");i.save(),i.setTransform(t,0,0,t,0,0),i.clearRect(0,0,n.width,n.height),i.lineJoin="round";var o,a,s=0;for(o=0;o<this._data.length;o++)s+=this._data[o];i.translate(0,0);var u=this._animation.animate?this._animation.step:1;switch(this._type){case"donut":case"pie3D":case"pie":var l,c=Math.PI*(u-1.5);for(a=n.width/2/t,i.strokeStyle=e,i.lineWidth=r,i.save(),"pie3D"==this._type&&(i.translate(0,.3*a),i.scale(1,.7),i.beginPath(),i.fillStyle="#369",i.arc(a,1.4*a,this._radius*u,0,2*Math.PI),i.fill(),i.stroke()),"donut"==this._type&&(i.save(),i.beginPath(),i.rect(0,0,2*a,2*a),i.arc(a,a,this._radius*u*this._donutratio,0,2*Math.PI),i.clip("evenodd")),o=0;o<this._data.length;o++)i.beginPath(),i.moveTo(a,a),i.fillStyle=this._colors[o%this._colors.length],l=c+2*Math.PI*this._data[o]/s*u,i.arc(a,a,this._radius*u,c,l),i.closePath(),i.fill(),i.stroke(),c=l;"donut"==this._type&&(i.restore(),i.beginPath(),i.strokeStyle=e,i.lineWidth=r,i.arc(a,a,this._radius*u*this._donutratio,Math.PI*(u-1.5),c),i.stroke()),i.restore();break;default:var f=0;if(this._max)f=this._max;else for(o=0;o<this._data.length;o++)f<this._data[o]&&(f=this._data[o]);var h=Math.min(5,2*this._radius/this._data.length);a=n.width/2/t;var p,d=n.width/t-r,y=a-this._data.length*h/2;for(i.strokeStyle=e,i.lineWidth=r,o=0;o<this._data.length;o++){i.beginPath(),i.fillStyle=this._colors[o%this._colors.length],p=y+h;var v=this._data[o]/f*2*this._radius*u;i.rect(y,d-v,h,v),i.closePath(),i.fill(),i.stroke(),y=p}}if(i.restore(),!this.setDisplacement){var g=this.getAnchor();g[0]=a-this._offset[0],g[1]=a-this._offset[1]}}else this.getPixelRatio?(t=window.devicePixelRatio,this.renderChart_(t),this.getPixelRatio&&1!==t&&this.renderChart_(1)):this.renderChart_(1)}}],n&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EN(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Af);MN.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};const TN=MN;var RN,IN,LN,FN,DN,BN=s(369),NN=(RN=new Nf({color:"rgba(255,255,255,0.4)"}),IN=new qf({color:"#3399CC",width:1.25}),[new Jf({image:new Lf({fill:RN,stroke:IN,radius:5}),fill:RN,stroke:IN})]),zN=(LN=[255,255,255,1],FN=[0,153,255,1],(DN={}).Polygon=[new Jf({fill:new Nf({color:[255,255,255,.5]}),stroke:new qf({color:FN,width:3})})],DN.MultiPolygon=DN.Polygon,DN.LineString=[new Jf({stroke:new qf({color:LN,width:5})}),new Jf({stroke:new qf({color:FN,width:3})})],DN.MultiLineString=DN.LineString,DN.Point=[new Jf({image:new Lf({radius:6,fill:new Nf({color:FN}),stroke:new qf({color:LN,width:1.5})}),zIndex:1/0})],DN.MultiPoint=DN.Point,DN.GeometryCollection=DN.Polygon.concat(DN.LineString,DN.Point),DN),GN={};function UN(t,e,r,n){if(t){var i,o,a,s,u=t.size;if(Object.prototype.hasOwnProperty.call(t,"geo"))i=new qf({color:t.geo.outline,width:t.geo.outlineWidth,lineDash:t.geo.lineDash}),o=new Nf({color:t.geo.fill});else if(Object.prototype.hasOwnProperty.call(t,"icon")){var l;t.icon.key&&n&&(l=(0,BN.getValueFromObj)(n,t.icon.key)),l||(l=t.icon.url),a={anchor:t.icon.anchor,anchorOrigin:t.icon.anchorOrigin,anchorXUnits:"fraction",anchorYUnits:"fraction",src:l,opacity:t.icon.opacity,rotation:t.rotation,offset:t.icon.offset,color:t.icon.color},"number"==typeof t.icon.width&&"number"==typeof t.icon.height&&(a.size=[t.icon.width,t.icon.height]),"number"==typeof t.icon.scale&&(a.scale=t.icon.scale)}if(s=qN(t.text,e,r),Object.prototype.hasOwnProperty.call(t,"type"))switch(t.type){case"geoStar":return new Jf({image:new Af({fill:o,stroke:i,points:5,radius:u,radius2:u/2,angle:0}),text:s});case"geoCross":return new Jf({image:new Af({fill:o,stroke:i,points:4,radius:u,radius2:0,angle:0}),text:s});case"geoSquare":return new Jf({image:new Af({fill:o,stroke:i,points:4,radius:u,angle:Math.PI/4}),text:s});case"geoTriangle":return new Jf({image:new Af({fill:o,stroke:i,points:3,radius:u,rotation:Math.PI/4,angle:0}),text:s});case"geoCircle":return new Jf({image:new Lf({radius:u,fill:o,stroke:i,displacement:t.geo.displacement}),text:s});case"geoDiamond":return new Jf({image:new Af({fill:o,stroke:i,points:4,radius:u,angle:Math.PI/4,rotation:2}),text:s});case"icon":return a||(a=void 0),new Jf({image:new wh(a),text:s});case"text":return new Jf({text:s});default:return}}}function qN(t,e,r){var n,i;if(t){var o=function(t,e,r,n){var i;if(t&&t.indexOf("{{")>=0)if(Object.prototype.hasOwnProperty.call(GN,t))i=(0,GN[t])(e);else{var o=II().compile(t);i=o(e),GN[t]=o}else i="function"==typeof r?r(t):t;return i}(t.text,e,r);return"uppercase"===t.transform&&(o=o.toUpperCase()),t.wrapWidth&&(o=ZN(o,t.wrapWidth,"\n")),new Oh({text:o,font:t.font,offsetX:t.offsetX,offsetY:t.offsetY,textAlign:t.align,padding:t.padding||[0,0,0,0],fill:new Nf({color:t.color||"#333"}),stroke:new qf({color:t.outline||"transparent",width:t.outlineWidth||0}),backgroundFill:new Nf({color:t.backgroundColor||"transparent"}),backgroundStroke:new qf({color:(null===(n=t.backgroundStroke)||void 0===n?void 0:n.color)||"transparent",width:(null===(i=t.backgroundStroke)||void 0===i?void 0:i.width)||0}),overflow:t.overflow,placement:t.placement||"point"})}}function WN(t,e,r){if(t){var n=qN(t.text,e,r);return new Jf({stroke:new qf({color:t.outline,width:t.outlineWidth,lineDash:t.lineDash}),text:n})}}function VN(t,e,r){var n,i;if(t)return Object.prototype.hasOwnProperty.call(t,"fill")&&(n=new Nf({color:t.fill})),i=qN(t.text,e,r),new Jf({stroke:new qf({color:t.outline,width:t.outlineWidth,lineDash:t.lineDash}),fill:n,text:i})}function ZN(t,e,r){if(t.length>e){for(var n=e;n>0&&" "!=t[n]&&"-"!=t[n];)n--;if(n>0)return("-"==t.substring(n,n+1)?t.substring(0,n+1):t.substring(0,n))+r+ZN(t.substring(n+1),e,r)}return t}var YN={};function XN(t,e,r){var n=YN.points[t];n||(n=UN(e,null,null,r),YN.points[t]=n)}function HN(t){return YN.points[t]}function KN(t,e){var r=YN.lines[t];r||(r=WN(e),YN.lines[t]=r)}function JN(t){return YN.lines[t]}function $N(t,e){var r=YN.polygons[t];r||(r=VN(e),YN.polygons[t]=r)}function QN(t){return YN.polygons[t]}function tz(t){return tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tz(t)}function ez(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return rz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rz(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function rz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nz(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=tz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==tz(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oz(t){var e,r=t.id,n=t.styleConfig,i=t.value,o=t.idTemplate,a=t.valuePath,s=t.feature,u=t.getLocale,l=t.images,c=r;return o&&(c=o.replace("{value}",i)),c?((e=HN(c))||(XN(c,az(n,i,a),l),e=HN(c)),e):UN(az(n,i,a),s,u,l)}function az(t,e,r){var n;if(n=Object.assign({},{},JSON.parse(JSON.stringify(t.style))),r){var i=(0,BN.getValueFromObj)(n,r);i?(0,BN.setValueToObj)(n,r,i.replace("{value}",e)):(0,BN.setValueToObj)(n,r,"")}return n}function sz(t){var e,r=t.id,n=t.styleConfig,i=t.feature,o=t.getLocale;return r?((e=QN(r))||($N(r,uz(n)),e=QN(r)),e):VN(uz(n),i,o)}function uz(t){return Object.assign({},{outlineWidth:3},t.style)}function lz(t){var e,r=t.id,n=t.styleConfig,i=t.feature,o=t.getLocale;return r?((e=JN(r))||(KN(r,cz(n)),e=JN(r)),e):WN(cz(n),i,o)}function cz(t){return Object.assign({},{outline:"#000000",outlineWidth:3},t.style)}function fz(t,e){t&&(Array.isArray(t.pointStyles)&&t.pointStyles.forEach((function(t){XN(t.styleID,t.style,e)})),Array.isArray(t.lineStyles)&&t.lineStyles.forEach((function(t){KN(t.styleID,t.style)})),Array.isArray(t.polyStyles)&&t.polyStyles.forEach((function(t){$N(t.styleID,t.style)})))}function hz(t){var e=t.name,r=t.styleTemplates,n=t.layerStyles,i=t.getStringResource,o=t.select,a=t.images,s=0;return function(t){for(var u,l=!1,c=o.getFeatures().getArray(),f=t.get("hover"),p=t.get("followed"),d=0;d<c.length;d+=1){var y=c[d];if(t===y){l=!0;break}var v=t.get("features");if(v){var g=y.get("features");if(hG(v,g)){c[d]=t,l=!0;break}if(!g){var m,b=ez(v);try{for(b.s();!(m=b.n()).done;){var _=m.value;if(_===y){t=_;break}if(pG(_,y)){y=_,t=_,DG({select:o,index:d,feature:_});break}}}catch(t){b.e(t)}finally{b.f()}if(t===y){l=!0;break}}}else if(pG(t,y)){DG({select:o,index:d,feature:t}),l=!0;break}}var w=t.getGeometry().getType();if(!e||!n||!n[e])return l?zN[w]:NN;switch(w){case"Point":case"MultiPoint":u=p?n[e].pointStyleFollowed:l?n[e].pointStyleSelected:f&&n[e].pointStyleHover?n[e].pointStyleHover:n[e].pointStyle;break;case"LineString":case"LinearRing":case"MultiLineString":u=l?n[e].lineStyleSelected:f&&n[e].lineStyleHover?n[e].lineStyleHover:n[e].lineStyle;break;case"Polygon":case"MultiPolygon":u=l?n[e].polyStyleSelected:f&&n[e].polyStyleHover?n[e].polyStyleHover:n[e].polyStyle;break;default:h.info("Feature type not supported: ".concat(w))}if(!u)return l?zN[w]:NN;var x,S,k=[],O=t.get("features"),E=O&&O.length>1;if(!E&&O&&(t=O[0]),x=E?u.lookup.filter((function(t){return"cluster"===t.styleType})):u.lookup.filter((function(t){return"cluster"!==t.styleType})),E)return x.length>1?void h.warn("Cannot have more than 1 cluster style"):(l?S=1/0:(S=s,s=s===Number.MAX_VALUE?0:s+1),function(t){var e=t.lookup,r=t.styleTemplates,n=t.features,i=t.images,o=t.zIndex,a=[];if(!e[0])return a;var s,u=e[0];if(u.styleTemplate&&r[u.styleTemplate]&&(u=iz(iz({},r[u.styleTemplate]),u)),Array.isArray(u.outerClusterStyles)&&u.outerClusterStyles.forEach((function(t){var e=oz({id:t.styleID,styleConfig:t});e.setZIndex(o),a.push(e)})),Array.isArray(u.groupBy)){var l={},c=u.groupBy,f=[],h=[],p=0,d=0,y=0,v=void 0;n.forEach((function(t){var e=!1;c.forEach((function(r){e||(0,BN.valueFromObjSatisfiesConditionsArray)(t,r.conditions)&&(l[r.groupID]=(l[r.groupID]||0)+1,e=!0)}))})),function(t){var e=Object.keys(t),r=100*Math.min(1/e.length,.125),n=0;e.forEach((function(e){n+=t[e]}));var i=0,o=0;if(e.forEach((function(e){var a=t[e]/n*100;a<r?i+=r-a:a>r&&(o+=1)})),0!==i){var a=i/o;e.forEach((function(e){var s=t[e]/n*100;s<=r?t[e]=r:s-a<r?(t[e]=r,i-=s-r,o-=1):(t[e]=s-a,i-=a)})),i>=1&&function n(){a=i/o,e.forEach((function(e){var n=t[e];n>r&&(n-a<r?(t[e]=r,i-=n-r,o-=1):(t[e]=n-a,i-=a))})),i>=1&&n()}()}}(l),u.groupIDsForRotation&&(Object.keys(l).forEach((function(t){u.groupIDsForRotation.indexOf(t)>=0&&(d+=l[t]||0),y+=l[t]||0})),d>0&&(v=(s=d/y)<.5?-Math.PI*s:-.5*Math.PI)),c.forEach((function(t){f[p]=l[t.groupID]||0,h[p]=t.color,p+=1})),a.push(new Jf({image:new TN({type:"pie",radius:u.groupRadius,data:f,colors:h,offsetX:u.groupOffsetX,offsetY:u.groupOffsetY,rotation:v,stroke:new qf({color:"transparent",width:1})}),zIndex:o}))}return u.styles.forEach((function(t){var e;(e=oz({id:t.styleID,styleConfig:t,value:n.length,idTemplate:t.styleIDTemplate,valuePath:t.styleValuePath,images:i})).setZIndex(o),a.push(e)})),a}({lookup:x,styleTemplates:r,features:O,images:a,zIndex:S}));var A,P=ez(x);try{for(P.s();!(A=P.n()).done;){var C=A.value;if(C.styleTemplate&&r[C.styleTemplate]&&(C=iz(iz({},r[C.styleTemplate]),C)),(0,BN.valueFromObjSatisfiesConditionsArray)(t,C.conditions)){var j,M=ez(C.styles);try{for(M.s();!(j=M.n()).done;){var T=j.value,R=T;if(T.styleTemplate&&r[T.styleTemplate]&&(R=iz(iz({},r[T.styleTemplate]),T)),Array.isArray(R.lookup)&&R.lookup.length>0){var I,L=void 0,F=ez(R.lookup);try{for(F.s();!(I=F.n()).done;){var D=I.value;if((0,BN.valueFromObjSatisfiesConditionsArray)(t,D.conditions)){L=D;break}}}catch(t){F.e(t)}finally{F.f()}if(!L)continue;R=L}var B=void 0;switch(C.styleType){case"poly":B=sz({id:R.styleID,styleConfig:R,feature:t,getLocale:i});break;case"line":B=lz({id:R.styleID,styleConfig:R,feature:t,getLocale:i});break;default:B=oz({id:R.styleID,styleConfig:R,feature:t,getLocale:i,images:a})}"point"===C.styleType&&B.setZIndex(l?1/0:s),k.push(B)}}catch(t){M.e(t)}finally{M.f()}return l||(s=s===Number.MAX_VALUE?0:s+1),k}}}catch(t){P.e(t)}finally{P.f()}return k}}function pz(t){return pz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pz(t)}function dz(t){return function(t){if(Array.isArray(t))return yz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return yz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yz(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vz(t,e){var r,n=function(r){gz(t),JI(t);var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).feature,n=t.forEachFeatureAtPixel(r.pixel,(function(t,n){if(!e||e===t){var i,o={};"function"==typeof t.getGeometry().getCoordinates&&(i=t.getGeometry().getCoordinates()),i&&Array.isArray(i)&&!Array.isArray(i[0])||(i=r.coordinate);var a=function(t,e){var r=t.get("tooltipTemplate"),n=t.get("tooltipFunction");if(n)try{return h.debug("Calling tooltip function"),n(e)}catch(t){h.error("The Tooltip callback threw an exception, no tooltip will be shown.",t)}else{if(r)return h.debug("Executing handlebar template"),r(e.getProperties());h.info("No tooltip handlebar template or function was found")}}(n,t);if(a)return o.innerHTML=a,o.coordinates=i,o.layer=n,o.feature=t,o.settings=n.get("tooltipSettings"),o}}),{layerFilter:function(e){return t.get(NM).includes(e.get("layerId"))}});!function(t,e){var r=e.getOverlayById(QM);if(r){if(t&&t.innerHTML&&t.coordinates){r.getElement().innerHTML=t.innerHTML,r.getElement().style.display="",document.body.style.cursor="pointer";var n,i=e.getPixelFromCoordinate(t.coordinates),o=i[0],a=i[1],s=e.getSize(),u=r.get(tT);t.settings.positioning?"default"===t.settings.positioning?(n="bottom-center",o<u.tooltipBufferLX?n=a<u.tooltipBufferY?"top-left":a>s[1]-u.tooltipBufferY?"bottom-left":"center-left":o>s[0]-u.tooltipBufferRX?n=a<u.tooltipBufferY?"top-right":a>s[1]-u.tooltipBufferY?"bottom-right":"center-right":a<u.tooltipBufferY&&(n="top-center")):n=t.settings.positioning:n="bottom-center",r.setPositioning(n);var l,c,f=void 0,p=void 0;if(t.settings.offset)if(Array.isArray(t.settings.offset))f=t.settings.offset;else if("function"==typeof t.settings.offset){p=t.settings.offset;try{f=p.apply(this,t.feature,n)}catch(t){h.error("The offset callback threw an exception, no offset will be applied.",t)}}else if("object"===pz(t.settings.offset))f=t.settings.offset[n];else{if("default"!==t.settings.offset)throw new Error("Unknown format of offset.");f={"bottom-center":[0,-20],"top-center":[0,20],"center-left":[20,0],"center-right":[-20,0],"top-left":[20,20],"top-right":[-20,20],"bottom-left":[20,-20],"bottom-right":[-20,-20]}[n]}if(Array.isArray(f)){if(2!==f.length)throw new Error("Offset must be an array of 2 numbers.");r.setOffset(f)}if(t.settings.containerCls)if(c=!0,"string"==typeof t.settings.containerCls&&t.settings.containerCls.length>0)l=t.settings.containerCls;else{if("function"!=typeof t.settings.containerCls)throw new Error("Custom CSS class name must be a string or a function.");p=t.settings.containerCls;try{l=p.apply(this,t.feature,n)}catch(t){h.error("The containerCls callback threw an exception, no custom CSS will be applied.",t)}if(!("string"==typeof l&&l.length>0))throw new Error("Result from Custom CSS function must be a string.")}else c=!1;c&&("string"==typeof l&&l.length>0?(r.getElement().classList.add(l),h.debug("Adding custom CSS: "+l),r.set("customCSSName",l)):h.error("Custom CSS Name must be a string.  No custom CSS will be applied")),r.setPosition(t.coordinates),r.set("feature",t.feature),r.set("layer",t.layer),e.dispatchEvent({type:"tooltipShow",element:r.getElement(),layer:t.layer,feature:t.feature})}}else h.info("Cannot show tooltip because the tooltip overlay is not setup.")}(n,t)},i=dG(t,r.pixel,(function(e){return t.get(NM).includes(e.get("layerId"))})),o=dG(t,r.pixel,(function(e){return t.get(BM).includes(e.get("layerId"))})),a=new Set([].concat(dz(i),dz(o))).values();i.length>1?KI({map:t,features:a,coordinates:r.coordinate,featurePickerConfig:e.featurePicker,clickCallback:function(e){var r=e.feature;i.includes(r)&&n({feature:r}),o.includes(r)&&LG({map:t,features:r})}}):n()};!function(t,e){var r=document.createElement("div");r.addEventListener("pointermove",(function(t){return t.stopPropagation()})),r.addEventListener("click",(function(e){var r=e.target.classList;if(r.length>0&&r.contains("wmn-map-tooltip-button")){var n=e.target.getAttribute("data-action");n?t.dispatchEvent({type:"tooltipButtonClick",action:n,target:e.target,element:t.getOverlayById(QM).getElement(),layer:t.getOverlayById(QM).get("layer"),feature:t.getOverlayById(QM).get("feature")}):h.warn("No action associated with the tooltip button. To associate an action, add a data-action attribute to the tooltip button.")}})),r.classList.add("wmn-map-tooltip-container");var n=Object.assign({tooltipBufferRX:150,tooltipBufferLX:150,tooltipBufferY:150},e||{}),i={tooltipBufferRX:n.tooltipBufferRX,tooltipBufferLX:n.tooltipBufferLX,tooltipBufferY:n.tooltipBufferY},o=new YI({id:QM,element:r,positioning:"bottom-center",offset:[0,-20],layer:null,feature:null,customCSSName:""});o.getElement().style.display="none",o.set(tT,i),t.addOverlay(o)}(t,e),HI(t),t.on("pointermove",(function(e){e.dragging||"touch"===e.originalEvent.pointerType?e.dragging&&gz(t):(r&&(clearTimeout(r),r=void 0),r=setTimeout(n,250,e))})),t.on("longpress",(function(t){n(t)})),t.on("singleclick",(function(e){var r=dG(t,e.pixel,(function(e){return t.get(NM).includes(e.get("layerId"))}));dG(t,e.pixel,(function(e){return t.get(BM).includes(e.get("layerId"))})).length>1&&r.length>1&&n(e)}))}function gz(t){if(t.getOverlayById(QM)&&t.getOverlayById(QM).getElement()&&"none"!==t.getOverlayById(QM).getElement().style.display){var e=t.getOverlayById(QM).getElement();e.style.display="none",e.innerHTML="",document.body.style.cursor="";var r=t.getOverlayById(QM).get("customCSSName");r&&e.classList.contains(r)&&(e.classList.remove(r),h.debug("Removing custom CSS: "+r)),t.dispatchEvent({type:"tooltipHide",element:e,layer:t.getOverlayById(QM).get("layer"),feature:t.getOverlayById(QM).get("feature")}),t.getOverlayById(QM).set("feature",void 0),t.getOverlayById(QM).set("layer",void 0)}}function mz(t,e){var r={},n={positioning:"default",offset:"default"};return t.html?"string"==typeof t.html&&t.html.length>0?(r.tooltip=t.html,r.tooltipTemplate=II().compile(t.html),r.tooltipSettings=Object.assign(n,t)):h.error("Unknown format for html in the tooltip object. A string is expected."):e&&t.tooltipId?(r.tooltipFunction=function(r){return e(r,t.tooltipId)},r.tooltipSettings=Object.assign(n,t)):h.error("Unknown format for html in the tooltip object. A string is expected."),r}function bz(t){return bz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bz(t)}function _z(){_z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==bz(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(bz(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wz(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=bz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==bz(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sz(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return kz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kz(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function kz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Oz(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Ez(t){return Az.apply(this,arguments)}function Az(){var t;return t=_z().mark((function t(e){var r,n,i,o,a,s,u,l,c,f,p,d,y,v,g,m,b;return _z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.mapConfig,n=void 0===r?{}:r,i=e.serverUrl,o=e.getAccessToken,a=e.getStringResource,s=e.images,u=e.isOffline,l=e.createOtherLayer,c=e.generateTooltip,f=e.getFeaturesInExtent,p=e.enableTileDebug,d=xz({center:[0,0],zoom:4,target:"map",minZoom:3,maxZoom:20,moveTolerance:7,enableFeatureHover:!1,enableZoomControl:!0},n.options),t.prev=2,m=new Uk({target:d.target,controls:lx({attributionOptions:{collapsible:!1},rotate:!1,zoom:d.enableZoomControl}),view:new ou({center:d.center,zoom:d.zoom,minZoom:d.minZoom,maxZoom:d.maxZoom,enableRotation:!1}),moveTolerance:d.moveTolerance}),n.customProjections&&(_=n.customProjections)&&Array.isArray(_)&&0!==_.length&&(_.forEach((function(t){TB.defs(t.code,t.projection)})),function(t){var e,r,n,i,o,a,s,u,l=Object.keys(t.defs),c=l.length;for(e=0;e<c;++e){var f=l[e];if(!ko(f)){var h=t.defs(f),p=h.units;p||"longlat"!==h.projName||(p="degrees"),So(new Ri({code:f,axisOrientation:h.axis,metersPerUnit:h.to_meter,units:p}))}}for(e=0;e<c;++e){var d=l[e],y=ko(d);for(r=0;r<c;++r){var v=l[r],g=ko(v);if(!io(d,v))if(t.defs[d]===t.defs[v])Eo([y,g]);else{var m=t(d,v);n=y,i=g,o=Zo(y,g,m.forward),a=Zo(g,y,m.inverse),no(s=ko(n),u=ko(i),Po(o)),no(u,s,Po(a))}}}}(TB)),m.set(zM,d.zoom),u&&dN(m,!0),b=MG(m,n.featurePicker),t.next=10,bT({map:m,baseLayers:n.baseLayers,isOffline:u});case 10:return u&&yN(m,u),hR(m,n.userLocation),null!==(y=n.styles)&&void 0!==y&&y.commonStyles&&fz(n.styles.commonStyles,s),t.next=15,qz({map:m,layers:n.layers,sources:n.sources,fields:n.fields,styleTemplates:null===(v=n.styles)||void 0===v?void 0:v.styleTemplates,layerStyles:null===(g=n.styles)||void 0===g?void 0:g.layerStyles,serverUrl:i,getAccessToken:o,getStringResource:a,select:b,images:s,createOtherLayer:l,generateTooltip:c,getFeaturesInExtent:f});case 15:return p&&m.addLayer(new zc({source:new TL})),d.enableFeatureHover&&HB(m),d.enableTooltip&&vz(m,n),d.enableLongPress&&oN(m,n),t.abrupt("return",m);case 22:throw t.prev=22,t.t0=t.catch(2),h.error("Create map error: ".concat(t.t0)),new Error("Error creating map");case 26:case"end":return t.stop()}var _}),t,null,[[2,22]])})),Az=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Oz(o,n,i,a,s,"next",t)}function s(t){Oz(o,n,i,a,s,"throw",t)}a(void 0)}))},Az.apply(this,arguments)}function Pz(t){for(var e=t.get(FM),r=0,n=Object.values(e);r<n.length;r++){var i,o=Sz(n[r].group.getLayers().getArray());try{for(o.s();!(i=o.n()).done;)i.value.getSource().refresh()}catch(t){o.e(t)}finally{o.f()}}for(var a=t.get(DM),s=0,u=Object.values(a);s<u.length;s++)for(var l=u[s],c=0,f=Object.values(l.layers);c<f.length;c++){var h=f[c],p=h.get("config");if(null!=p&&p.source){var d=h.getSource();d instanceof sL&&(d=d.getSource()),d.refresh()}}}function Cz(t){var e=t.get("userLocation");null!=e&&e.geo&&navigator.geolocation.clearWatch(e.geo.getWatchID())}function jz(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=t.getView(),o=Lo(Pn([[e[0],e[1]],[e[2],e[3]]]),rT,i.getProjection()),a=Hn(o),s=i.getResolutionForExtent(o,t.getSize());Mz(t,a,s,r,n)}function Mz(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=t.getView(),a=t.getSize(),s=o.getCenter(),u=Pn([s,e]),l=o.getResolutionForExtent(u,a),c=[{resolution:2*Math.max(l,r),center:[(s[0]+e[0])/2,(s[1]+e[1])/2],duration:n/2},{resolution:r,center:e,duration:n/2}];"function"==typeof i&&c.push(i),o.animate.apply(o,c)}function Tz(t,e,r,n){var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3e3,a=t.getView().getProjection(),s=Io(Co([r,e],rT),rT,a);n&&(i=t.getView().getResolutionForZoom(n)),Mz(t,s,i,o)}function Rz(t){var e=t.getSource();e instanceof sL?e.getSource().refresh():e.refresh()}function Iz(t,e,r,n){var i=n?Kz(t,e,r,n):Hz(t,e,r);if(i){var o=t.getView().getMaxZoom(),a=t.getView().getZoom(),s=i.get("maxZoom")||o,u=a>=(i.get("minZoom")||0)&&a<=s;i.getVisible()&&u&&(i instanceof wi?i.getLayers().getArray().forEach(Rz):Rz(i))}}function Lz(t){return Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lz(t)}function Fz(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Dz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dz(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Dz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bz(Object(r),!0).forEach((function(e){var n,i,o,a;n=t,i=e,o=r[e],a=function(t,e){if("object"!=Lz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i),(i="symbol"==Lz(a)?a:String(a))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zz(){zz=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Lz(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(Lz(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Gz(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function Uz(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Gz(o,n,i,a,s,"next",t)}function s(t){Gz(o,n,i,a,s,"throw",t)}a(void 0)}))}}function qz(t){return Wz.apply(this,arguments)}function Wz(){return Wz=Uz(zz().mark((function t(e){var r,n,i,o,a,s,u,l,c,f,p,d,y,v,g,m,b,_,w,x,S,k,O,E,A,P,C,j,M,T,R;return zz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.layers,i=e.sources,o=e.fields,a=e.styleTemplates,s=e.layerStyles,u=e.serverUrl,l=e.getAccessToken,c=e.getStringResource,f=e.select,p=e.images,d=e.createOtherLayer,y=e.generateTooltip,v=e.getFeaturesInExtent,g={},r.set(DM,g),m=[],r.set(BM,m),b=[],r.set(NM,b),_={},r.set(KM,_),Array.isArray(n)){t.next=11;break}return t.abrupt("return");case 11:if(i&&0!==Object.keys(i).length){t.next=14;break}return h.warn("No layer sources configured"),t.abrupt("return");case 14:w=function(t,e,n,i){"number"!=typeof t||t<=0||setInterval((function(){return Iz(r,e,n,i)}),1e3*t)},x=function(){var t=Uz(zz().mark((function t(e){var n;return zz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,t.t0=e.layerType,t.next="geojson"===t.t0?4:"vector"===t.t0?6:"wms"===t.t0?10:"other"===t.t0?12:16;break;case 4:return n=$z({map:r,layer:e,source:i[e.source],fields:o,styleTemplates:a,layerStyles:s,serverUrl:u,getAccessToken:l,getStringResource:c,select:f,images:p,generateTooltip:y,getFeaturesInExtent:v}),t.abrupt("break",18);case 6:return t.next=8,eG({map:r,layer:e,source:i[e.source],styleTemplates:a,layerStyles:s,getAccessToken:l,getStringResource:c,select:f,images:p,generateTooltip:y});case 8:return n=t.sent,t.abrupt("break",18);case 10:return n=aG({map:r,layer:e,source:i[e.source]}),t.abrupt("break",18);case 12:if(d){t.next=14;break}return t.abrupt("return");case 14:return n=d({map:r,layer:e,styleTemplates:a,layerStyles:s,getStringResource:c,select:f,images:p,generateTooltip:y}),t.abrupt("break",18);case 16:return h.warn("Layer type ".concat(e.layerType," is not supported")),t.abrupt("return");case 18:return e.selectable&&("geojson"===e.layerType||"other"===e.layerType?m.push(e.layerId):h.warn("Selecting features in layers of type ".concat(e.layerType," is currently not supported"))),t.abrupt("return",n);case 22:t.prev=22,t.t1=t.catch(0),h.error("Error creating layer: ".concat(t.t1));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e){return t.apply(this,arguments)}}(),S=Fz(n),t.prev=17,S.s();case 19:if((k=S.n()).done){t.next=92;break}if((O=k.value).groupId){t.next=24;break}return h.warn("Group id not configured"),t.abrupt("continue",90);case 24:if(!g[O.groupId]){t.next=27;break}return h.warn("Duplicate group id configured: ".concat(O.groupId)),t.abrupt("continue",90);case 27:if(Array.isArray(O.groupItems)&&0!==O.groupItems.length){t.next=30;break}return h.warn("No layers configured for group: ".concat(O.groupId)),t.abrupt("continue",90);case 30:g[O.groupId]={group:new wi({groupId:O.groupId}),layers:{}},_[O.groupId]={groupId:O.groupId,groupTitle:O.groupTitle,layers:{}},E=Fz(O.groupItems),t.prev=33,E.s();case 35:if((A=E.n()).done){t.next=81;break}if((P=A.value).layerId){t.next=40;break}return h.warn("Layer id not configured"),t.abrupt("continue",79);case 40:if(!g[O.groupId].layers[P.layerId]){t.next=43;break}return h.warn("Duplicate layer id configured: ".concat(P.layerId)),t.abrupt("continue",79);case 43:if(["other","multiLayer"].includes(P.layerType)||i[P.source]){t.next=46;break}return h.warn("Layer source not configured: ".concat(P.source)),t.abrupt("continue",79);case 46:if(C=void 0,"multiLayer"!==P.layerType){t.next=75;break}j=Fz(P.layers),t.prev=49,j.s();case 51:if((M=j.n()).done){t.next=65;break}if((T=M.value).layerId){t.next=56;break}return h.warn("Layer id not configured"),t.abrupt("continue",63);case 56:if(i[T.source]){t.next=59;break}return h.warn("Layer source not configured: ".concat(T.source)),t.abrupt("continue",63);case 59:return t.next=61,x(T);case 61:(R=t.sent)&&(C||(C=new wi({layerId:P.layerId})),C.getLayers().push(R),T.tooltip&&b.push(T.layerId),w(T.syncAtInterval,O.groupId,P.layerId,T.layerId));case 63:t.next=51;break;case 65:t.next=70;break;case 67:t.prev=67,t.t0=t.catch(49),j.e(t.t0);case 70:return t.prev=70,j.f(),t.finish(70);case 73:t.next=78;break;case 75:return t.next=77,x(P);case 77:C=t.sent;case 78:C&&(P.tooltip&&b.push(P.layerId),g[O.groupId].group.getLayers().push(C),g[O.groupId].layers[P.layerId]=C,_[O.groupId].layers[P.layerId]={groupId:O.groupId,layerId:P.layerId,title:P.title,image:P.image,enableRefresh:P.enableRefresh,maxZoom:P.maxZoom,minZoom:P.minZoom},w(P.syncAtInterval,O.groupId,P.layerId));case 79:t.next=35;break;case 81:t.next=86;break;case 83:t.prev=83,t.t1=t.catch(33),E.e(t.t1);case 86:return t.prev=86,E.f(),t.finish(86);case 89:r.addLayer(g[O.groupId].group);case 90:t.next=19;break;case 92:t.next=97;break;case 94:t.prev=94,t.t2=t.catch(17),S.e(t.t2);case 97:return t.prev=97,S.f(),t.finish(97);case 100:case"end":return t.stop()}}),t,null,[[17,94,97,100],[33,83,86,89],[49,67,70,73]])}))),Wz.apply(this,arguments)}function Vz(t,e){var r,n=t.get(DM);return null==n||null===(r=n[e])||void 0===r?void 0:r.group}function Zz(t,e){if(!t)return!1;var r=Vz(t,e);return!!r&&r.getVisible()}function Yz(t,e,r){var n=Hz(t,e,r);n&&n.setVisible(!n.getVisible())}function Xz(t,e,r){if(!t)return!1;var n=Hz(t,e,r);return!!n&&n.getVisible()}function Hz(t,e,r){var n=t.get(DM);if(n[e]&&n[e].layers[r])return n[e].layers[r]}function Kz(t,e,r,n){var i=Hz(t,e,r);if(i)return i.getLayers().getArray().find((function(t){return t.get("layerId")===n}))}function Jz(t){var e=t.layerConfig,r=t.layerSource,n=t.getStringResource,i=t.styleTemplates,o=t.layerStyles,a=t.select,s=t.images,u=r;e.cluster&&(u=new sL({distance:"number"==typeof e.cluster?e.cluster:20,source:u}));var l=new rv({className:"lm-layer-".concat(e.layerId),config:e,layerId:e.layerId,source:u,zIndex:e.zIndex,minZoom:e.minZoom,maxZoom:e.maxZoom,visible:e.visible,declutter:e.declutter,style:hz({name:e.style,styleTemplates:i,layerStyles:o,getStringResource:n,select:a,images:s})});return e.selectable&&(r.forEachFeature((function(t){return t.set($M,l)})),r.on("addfeature",(function(t){t.feature.set($M,l)}))),l}function $z(t){var e,r,n=t.map,i=t.layer,o=t.source,a=t.fields,s=t.styleTemplates,u=t.layerStyles,l=t.serverUrl,c=t.getAccessToken,f=t.getStringResource,p=t.select,d=t.images,y=t.generateTooltip,v=t.getFeaturesInExtent,g={},m=new xE({loader:function(t){r&&clearTimeout(r),r=setTimeout(Uz(zz().mark((function r(){var s,u,f,p,d,y,g;return zz().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=m instanceof sL?m.getSource():m,u=n.get(qM),f=function(t){var r=[];s.getFormat().readFeatures(t).forEach((function(t){s.getFeatureById(t.getId())||(!i.cluster||t.getGeometry()instanceof Ss?(t.set($M,e),r.push(t)):h.warn("Clustering is supported for point features only, feature not added: ".concat(t.getId())))})),r.length>0&&s.addFeatures(r)},!u){r.next=39;break}if(!o.offlineCache){r.next=37;break}if("bbox"!==o.loadingStrategy||!v){r.next=18;break}return r.prev=6,r.next=9,v({name:i.source,extent:Lo(t,"EPSG:3857","EPSG:4326"),maxResults:o.maxResults||1e4});case 9:(p=r.sent)&&f(p),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),h.error("Error loading data for layer ".concat(i.layerId,". Error: ").concat(r.t0));case 16:r.next=37;break;case 18:if(!(d=n.get(UM))){r.next=37;break}return r.prev=20,r.next=23,d.layerSources.get(i.source);case 23:(y=r.sent)&&f(y);case 25:if(!y.nextKey){r.next=32;break}return r.next=28,d.layerSources.get(y.nextKey);case 28:(y=r.sent)&&f(y),r.next=25;break;case 32:r.next=37;break;case 34:r.prev=34,r.t1=r.catch(20),h.error("Error loading data for layer ".concat(i.layerId,". Error: ").concat(r.t1));case 37:r.next=50;break;case 39:return r.prev=39,r.next=42,kL({source:o,fields:a,extent:t,serverUrl:l,getAccessToken:c});case 42:g=r.sent,f(g),r.next=50;break;case 46:r.prev=46,r.t2=r.catch(39),h.error("Error loading data for layer ".concat(i.layerId,". Error: ").concat(r.t2)),n.dispatchEvent({type:"layerLoadError",layerId:i.layerId,error:r.t2});case 50:case"end":return r.stop()}}),r,null,[[6,13],[20,34],[39,46]])}))),100)},format:new Tb({featureProjection:"EPSG:3857",dataProjection:i.projection}),strategy:"bbox"===o.loadingStrategy?iE:nE});return i.cluster&&(m=new sL({distance:"number"==typeof i.cluster?i.cluster:20,source:m})),i.tooltip&&(g=mz(i.tooltip,y)),e=new rv(Nz({className:"lm-layer-".concat(i.layerId),config:i,layerId:i.layerId,source:m,zIndex:i.zIndex,minZoom:i.minZoom,maxZoom:i.maxZoom,visible:i.visible,declutter:i.declutter,style:hz({name:i.style,styleTemplates:s,layerStyles:u,getStringResource:f,select:p,images:d})},g))}function Qz(t){return tG.apply(this,arguments)}function tG(){return tG=Uz(zz().mark((function t(e){var r,n,i,o,a;return zz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.url,!r.get(qM)){t.next=9;break}return o=r.get(UM),t.next=5,o.tiles.get(n);case 5:a=t.sent,i=new KO({tileJSON:a}),t.next=10;break;case 9:i=new KO({url:n});case 10:return t.abrupt("return",new Promise((function(t){var e=i.on("change",(function(){var r=i.getState();if("ready"===r){var o=i.getTileJSON(),a=Array.isArray(o.tiles)?o.tiles:[o.tiles];n&&(a=a.map((function(t){return decodeURI(new URL(t,n).href)})));var s,u=i.getTileGrid();if(o.bounds){var l=Co([o.bounds[0],o.bounds[1]]),c=Co([o.bounds[2],o.bounds[3]]);s=[l[0],l[1],c[0],c[1]]}var f=o.minzoom||0,h=o.maxzoom||22,p=new UE({attributions:i.getAttributions(),format:new v_,tileGrid:new tg({origin:u.getOrigin(0),extent:s||u.getExtent(),minZoom:f,resolutions:uN.slice(0,h+1),tileSize:512}),urls:a});vr(e),t(p)}else"error"===r&&(vr(e),t(void 0))}));"ready"===i.getState()&&i.changed()})));case 11:case"end":return t.stop()}}),t)}))),tG.apply(this,arguments)}function eG(t){return rG.apply(this,arguments)}function rG(){return rG=Uz(zz().mark((function t(e){var r,n,i,o,a,s,u,l,c,f,p,d,y,v;return zz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.map,n=e.layer,i=e.source,o=e.styleTemplates,a=e.layerStyles,s=e.getAccessToken,u=e.getStringResource,l=e.select,c=e.images,f=e.generateTooltip,!i.internalSource||!s){t.next=10;break}return t.t1="Bearer ",t.next=5,s();case 5:t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),t.t0={"Cache-Control":"no-cache",Authorization:t.t3},t.next=11;break;case 10:t.t0={};case 11:if(p=t.t0,d=function(t,e){t.setLoader(function(){var i=Uz(zz().mark((function i(o,a,s){var u,l,c,f,d,y;return zz().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,!r.get(qM)){i.next=9;break}if(!(l=r.get(UM))){i.next=7;break}return i.next=6,l.tiles.get(e);case 6:u=i.sent;case 7:i.next=13;break;case 9:return i.next=11,Oe({method:"GET",url:e,responseType:"arraybuffer",headers:p});case 11:c=i.sent,u=c.data;case 13:i.next=18;break;case 15:i.prev=15,i.t0=i.catch(0),404!==(null===(f=i.t0.response)||void 0===f?void 0:f.status)&&(h.error("Error loading tile: ".concat(i.t0)),r.dispatchEvent({type:"layerLoadError",layerId:n.layerId,error:i.t0}));case 18:u?(d=t.getFormat(),y=d.readFeatures(u,{extent:o,dataProjection:n.projection,featureProjection:s}),t.setFeatures(y)):t.setState(Pl.ERROR);case 19:case"end":return i.stop()}}),i,null,[[0,15]])})));return function(t,e,r){return i.apply(this,arguments)}}())},!i.url.includes("tiles.json")){t.next=18;break}return t.next=16,Qz({map:r,url:i.url});case 16:(y=t.sent).setTileLoadFunction(d);case 18:return v=n.tooltip?mz(n.tooltip,f):{},t.abrupt("return",new Sv(Nz({className:"lm-layer-".concat(n.layerId),config:n,sourceConfig:i,layerId:n.layerId,source:y||new UE({format:new v_,url:i.url,tileLoadFunction:d}),zIndex:n.zIndex,minZoom:n.minZoom,maxZoom:n.maxZoom,visible:n.visible,declutter:n.declutter,style:hz({name:n.style,styleTemplates:o,layerStyles:a,getStringResource:u,select:l,images:c})},v)));case 20:case"end":return t.stop()}}),t)}))),rG.apply(this,arguments)}YN.points={},YN.lines={},YN.polygons={},YN.clusters={};var nG=function(t,e){return function(r,n){try{var i=r.getImage();if(t.get(qM)){var o=t.get(UM);o?o.tiles.get(n).then((function(t){if(t){var e=new Blob([t]),r=URL.createObjectURL(e);i.src=r}else i.src=""})):i.src=""}else i.src=n}catch(r){h.error("Error loading tile: ".concat(r)),t.dispatchEvent({type:"layerLoadError",layerId:e.layerId,error:r})}}},iG=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],oG=function(t){var e=t.source,r=t.map,n=t.layer,i=new bL({url:e.url,params:e.params,serverType:e.serverType,tileLoadFunction:nG(r,n),projection:n.projection||"EPSG:3857"});return i.getTileGrid()||i.setTileGridForProjection(r.getView().getProjection(),function(t){var e=t.extent||iG;return new tg({extent:e,tileSize:t.tileSize||256,resolutions:uN.slice(0,t.maxZoom||23),origin:ei(e)})}(n)),i},aG=function(t){var e=t.map,r=t.layer,n=t.source;return new zc({opacity:r.opacity,layerId:r.layerId,config:r,sourceConfig:n,source:oG({source:n,map:e,layer:r}),minZoom:r.minZoom,maxZoom:r.maxZoom,visible:r.visible})};function sG(t){return function(t){if(Array.isArray(t))return cG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||lG(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uG(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=lG(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function lG(t,e){if(t){if("string"==typeof t)return cG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cG(t,e):void 0}}function cG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fG(t){var e=t.map,r=t.groupId,n=t.layerId,i=t.featureId,o=t.propName,a=t.propValue,s=Hz(e,r,n);if(!s)return null;var u=function(t){var e,r=function(t){var e=t.getSource();return e instanceof sL&&(e=e.getSource()),e}(t);return r instanceof xE?(i?e=r.getFeatureById(i):o&&void 0!==a&&(e=r.forEachFeature((function(t){if(t.get(o)===a)return t}))),e||null):null};if(s instanceof wi){var l,c=uG(s.getLayers().getArray());try{for(c.s();!(l=c.n()).done;){var f=u(l.value);if(f)return f}}catch(t){c.e(t)}finally{c.f()}return null}return u(s)}function hG(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((function(t,r){return t===e[r]}))}function pG(t,e){return t.getId()===e.getId()}function dG(t,e,r){var n,i=[],o=uG(t.getFeaturesAtPixel(e,{layerFilter:r}));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.get("features")||"Polygon"!==a.getGeometry().getType())return[];i.push(a)}}catch(t){o.e(t)}finally{o.f()}return i}function yG(t,e){var r=fo([t[0],t[1]],e),n=fo([t[2],t[3]],e);return[].concat(sG(r),sG(n))}function vG(t){return vG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vG(t)}function gG(t){return function(t){if(Array.isArray(t))return wG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_G(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mG(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_G(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function bG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||_G(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _G(t,e){if(t){if("string"==typeof t)return wG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wG(t,e):void 0}}function wG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xG(t){var e=function(t,e){if("object"!=vG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vG(e)?e:String(e)}function SG(t,e,r){return e=EG(e),function(t,e){if(e&&("object"===vG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kG()?Reflect.construct(e,r||[],EG(t).constructor):e.apply(t,r))}function kG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kG=function(){return!!t})()}function OG(){return OG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EG(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}},OG.apply(this,arguments)}function EG(t){return EG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EG(t)}function AG(t,e){return AG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},AG(t,e)}var PG=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SG(this,e,[t])}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AG(t,e)}(e,t),r=e,(n=[{key:"handleEvent",value:function(t){if("singleclick"===t.type){var r=dG(t.map,t.pixel,(function(e){return t.map.get(BM).includes(e.get("layerId"))})),n=dG(t.map,t.pixel,(function(e){return t.map.get(NM).includes(e.get("layerId"))}));if(r.length>1)return n.length<=1&&KI({map:t.map,features:r,coordinates:t.coordinate,featurePickerConfig:this.get("featurePickerConfig"),clickCallback:LG}),!0;JI(t.map)}return OG(EG(e.prototype),"handleEvent",this).call(this,t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xG(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(TI);function CG(t){if(!t.suppressEvent){var e=t.mapBrowserEvent.map,r=bG(jG(t.selected),2),n=r[0],i=r[1];e.dispatchEvent({type:"selectionChanged",selected:n,clusterFeatures:i})}}function jG(t){var e,r;if(1===t.length){var n=t[0].get("features");n&&n.length>1?(e=t[0],r=n):e=n?n[0]:t[0]}return[e,r]}function MG(t,e){var r=new PG({toggleCondition:Ux,style:function(t){var e=t.get("features");return e?e[0].get($M).getStyle()(t):t.get($M).getStyle()(t)},filter:function(e,r){return t.get(BM).includes(r.get("layerId"))}});return r.set("featurePickerConfig",e),r.on("select",CG),t.addInteraction(r),HI(t),t.on("moveend",TG),r}function TG(t){var e=RG(t.map),r=e.getFeatures().getArray();if(0!==r.length){var n=bG(jG(r),2),i=n[0],o=n[1];if(Array.isArray(o)&&0!==o.length){var a,s=e.getLayer(i).get("layerId"),u=mG(t.map.getLayerGroup().getLayersArray());try{for(u.s();!(a=u.n()).done;){var l=a.value;if(l.get("layerId")===s){var c=i.getGeometry().getCoordinates(),f=l.getSource().getFeaturesAtCoordinate(c);if(f.length>0&&f[0].get("features").length===o.length)return}}}catch(t){u.e(t)}finally{u.f()}IG(t.map)}}}function RG(t){var e,r=mG(t.getInteractions().getArray());try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n instanceof PG)return n}}catch(t){r.e(t)}finally{r.f()}}function IG(t){var e=RG(t),r=e.getFeatures(),n=gG(r.getArray());n.length>0&&(r.clear(),e.dispatchEvent({type:"select",selected:[],deselected:n,mapBrowserEvent:{map:t}}))}function LG(t){var e=t.map,r=t.features,n=t.suppressEvent;if(e&&r){Array.isArray(r)||(r=[r]);var i=RG(e),o=i.getFeatures(),a=gG(o.getArray());o.clear(),r.forEach((function(t){var e=a.indexOf(t);e>-1&&a.splice(e,1),o.push(t)})),i.dispatchEvent({type:"select",selected:r,deselected:a,mapBrowserEvent:{map:e},suppressEvent:n})}}function FG(t){var e=t.map,r=t.id,n=t.coordinates,i=t.type,o=void 0===i?"Point":i;if(e&&r&&Array.isArray(n)&&0!==n.length){var a,s=e.getView();if("Point"===o)a=Co(n);else if("LineString"===o){var u=new Om(n);a=Co(Hn(u.getExtent()))}else if("Polygon"===o){var l=new Ys(n);a=Co(Hn(l.getExtent()))}s.animate({center:a},{zoom:s.getMaxZoom()},(function(){var t,n=e.getPixelFromCoordinate(a),i=mG(e.getFeaturesAtPixel(n));try{for(i.s();!(t=i.n()).done;){var o=t.value,s=o.get("features");if(s){var u,l=mG(s);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.getId()===r)return void LG({map:e,features:c})}}catch(t){l.e(t)}finally{l.f()}}else if(o.getId()===r)return void LG({map:e,features:o})}}catch(t){i.e(t)}finally{i.f()}var f=new gm(new Ss(a));f.setId(r),LG({map:e,features:f,suppressEvent:!0})}))}}function DG(t){var e=t.select,r=t.index,n=t.feature,i=e.getFeatures().getArray();i[r]=n,CG({target:e,selected:i,mapBrowserEvent:{map:e.getMap()}})}function BG(t){var e=t.get(ZM);if(!e){var r=new xE;e={vectorSource:r,vectorLayer:new rv({source:r,style:new Jf({fill:new Nf({color:"rgba(255, 255, 255, 0.5)"}),stroke:new qf({color:"rgba(0, 153, 255, 1.0)",width:3})})}),draw:null},t.set(ZM,e)}return e}function NG(t,e,r,n){var i=n.get(BM);if(t.getVisible()&&!(t.get("minZoom")&&t.get("minZoom")>=n.getView().getZoom()))if(t.getLayers)t.getLayers().forEach((function(t){return NG(t,e,r,n)}));else try{null!=i&&i.includes(t.get("layerId"))&&function(t,e,r){var n=new Tb,i=n.writeGeometryObject(e);if("Polygon"===e.getType()){var o=function(t,e,r){void 0===r&&(r={});for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return bR({type:"Polygon",coordinates:t},void 0,r)}(i.coordinates);t.forEachFeature((function(t){var e,i,a=n.writeFeatureObject(t);e=a,i=!1,PR(o,(function(t){PR(e,(function(e){if(!0===i)return!0;i=!BR(t.geometry,e.geometry)}))})),i&&r.push(t)}))}}(t.getSource(),e,r)}catch(t){h.warn("Error processing source from layer:",t)}}function zG(t,e){var r=BG(t);!function(t,e){t.getLayers().getArray().includes(e)||t.addLayer(e)}(t,r.vectorLayer),function(t){var e=BG(t),r=e.draw,n=e.vectorSource;r&&(t.removeInteraction(r),n.clear())}(t),function(t){var e=BG(t),r=new vI({source:e.vectorSource,type:"Polygon",freehand:!0});t.addInteraction(r),e.draw=r}(t),r.draw.on("drawstart",(function(){r.vectorSource.clear()})),r.draw.on("drawend",(function(r){var n=r.feature.getGeometry(),i=[];t.getLayers().forEach((function(e){NG(e,n,i,t)})),h.info(i),LG({map:t,features:i,suppressEvent:!0}),"function"==typeof e&&e(i)}))}function GG(t){var e=BG(t),r=e.draw,n=e.vectorSource,i=e.vectorLayer;r&&(t.removeInteraction(r),n.clear(),t.removeLayer(i),t.set(ZM,null)),IG(t)}var UG=s(481),qG=s.n(UG),WG=s(207),VG=s.n(WG),ZG=s(739),YG={};YG.styleTagTransform=WB(),YG.setAttributes=zB(),YG.insert=BB().bind(null,"head"),YG.domAPI=FB(),YG.insertStyleElement=UB(),IB()(ZG.Z,YG),ZG.Z&&ZG.Z.locals&&ZG.Z.locals;var XG=s(472),HG={};HG.styleTagTransform=WB(),HG.setAttributes=zB(),HG.insert=BB().bind(null,"head"),HG.domAPI=FB(),HG.insertStyleElement=UB(),IB()(XG.Z,HG),XG.Z&&XG.Z.locals&&XG.Z.locals;var KG=s(27),JG={};JG.styleTagTransform=WB(),JG.setAttributes=zB(),JG.insert=BB().bind(null,"head"),JG.domAPI=FB(),JG.insertStyleElement=UB(),IB()(KG.Z,JG),KG.Z&&KG.Z.locals&&KG.Z.locals;var $G,QG=s(520);function tU(){return tU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tU.apply(this,arguments)}var eU=function(t){return QG.createElement("svg",tU({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},t),$G||($G=QG.createElement("path",{fill:"#000",d:"M13.65 2.35A7.96 7.96 0 0 0 8 0a8 8 0 0 0 0 16c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 8 14 6 6 0 1 1 8 2c1.66 0 3.14.69 4.22 1.78L9 7h7V0z"})))},rU=["className"];function nU(){return nU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nU.apply(this,arguments)}function iU(t){var e=t.className,r=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,rU);return React.createElement("button",nU({className:qG()("layer-refresh-button",e)},r),React.createElement(eU,null))}iU.propTypes={className:VG().string};var oU,aU=s(505),sU={};function uU(){return uU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uU.apply(this,arguments)}sU.styleTagTransform=WB(),sU.setAttributes=zB(),sU.insert=BB().bind(null,"head"),sU.domAPI=FB(),sU.insertStyleElement=UB(),IB()(aU.Z,sU),aU.Z&&aU.Z.locals&&aU.Z.locals;var lU,cU=function(t){return QG.createElement("svg",uU({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16"},t),oU||(oU=QG.createElement("path",{fillRule:"evenodd",d:"M.667 8C1.82 5.073 4.667 3 8 3s6.18 2.073 7.333 5c-1.153 2.927-4 5-7.333 5S1.82 10.927.667 8M13.88 8A6.51 6.51 0 0 0 8 4.333 6.51 6.51 0 0 0 2.12 8 6.51 6.51 0 0 0 8 11.667c2.527 0 4.78-1.42 5.88-3.667M8 6.333a1.667 1.667 0 1 1-.001 3.335A1.667 1.667 0 0 1 8 6.333M5 8c0-1.653 1.347-3 3-3s3 1.347 3 3-1.347 3-3 3-3-1.347-3-3",clipRule:"evenodd"})))};function fU(){return fU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fU.apply(this,arguments)}var hU=function(t){return QG.createElement("svg",fU({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",viewBox:"0 0 16 16"},t),lU||(lU=QG.createElement("path",{fillRule:"evenodd",d:"M3.127 4.35 1.34 2.563l.94-.946L14.1 13.443l-.94.94-2.28-2.28A7.8 7.8 0 0 1 8 12.65c-3.333 0-6.18-2.073-7.333-5a7.8 7.8 0 0 1 2.46-3.3M8 3.983c2.527 0 4.78 1.42 5.88 3.667a6.4 6.4 0 0 1-1.607 2.08l.94.94a7.9 7.9 0 0 0 2.12-3.02c-1.153-2.927-4-5-7.333-5a7.9 7.9 0 0 0-2.427.38l1.1 1.1A6.7 6.7 0 0 1 8 3.983m-.713.76 1.38 1.38c.38.167.686.474.853.854l1.38 1.38c.053-.227.093-.467.093-.714A2.99 2.99 0 0 0 8 4.65c-.247 0-.48.033-.713.093m-.947 2.82 1.74 1.74q-.04.012-.08.014c-.92 0-1.667-.747-1.667-1.667q0-.024.004-.043zm-1.1-1.1L4.073 5.297A6.6 6.6 0 0 0 2.12 7.65 6.51 6.51 0 0 0 8 11.317a7 7 0 0 0 1.833-.254l-.653-.653a3.004 3.004 0 0 1-3.94-3.947",clipRule:"evenodd"})))},pU=["visible","className"];function dU(){return dU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dU.apply(this,arguments)}function yU(t){var e=t.visible,r=t.className,n=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,pU);return React.createElement("button",dU({className:qG()("layer-visibility-button",r)},n),e?React.createElement(cU,null):React.createElement(hU,null))}yU.propTypes={visible:VG().bool,className:VG().string};var vU=["layers","visibleLayers","layersInView","getLayerIconSrc","getStringResource","onLayerVisibilityToggle","className","refreshLayer","groupId"];function gU(){return gU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gU.apply(this,arguments)}function mU(t){var e=t.layers,r=t.visibleLayers,n=void 0===r?{}:r,i=t.layersInView,o=void 0===i?{}:i,a=t.getLayerIconSrc,s=t.getStringResource,u=t.onLayerVisibilityToggle,l=t.className,c=t.refreshLayer,f=t.groupId,h=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,vU);return e.length?React.createElement("ul",gU({},h,{className:qG()("layer-list",l)}),e.map((function(t){var e=(null==s?void 0:s(t.title))||t.title||t.layerId;return React.createElement("li",{key:t.layerId,className:qG()("layer-list-item",{"layer-list-item-not-in-view":!1===(null==o?void 0:o[t.layerId]),"layer-list-item-disabled":!1===(null==n?void 0:n[t.layerId])})},a?React.createElement("img",{src:null==a?void 0:a(t),alt:t.image}):null,React.createElement("div",{className:"layer-list-item-title"},React.createElement("span",{title:e},e),React.createElement("div",{className:"buttons"},React.createElement(yU,{visible:n[t.layerId],onClick:function(){return null==u?void 0:u(t)}}),f&&t.enableRefresh?React.createElement(iU,{disabled:!(null!=n&&n[t.layerId]&&null!=o&&o[t.layerId]),onClick:function(){return c(t.layerId,f)}}):null)))}))):null}function bU(t){return bU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bU(t)}function _U(){_U=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new j(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function g(){}function m(){}function b(){}var _={};l(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(M([])));x&&x!==r&&n.call(x,a)&&(_=x);var S=b.prototype=g.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==bU(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,r,n){var i=h;return function(o,a){if(i===d)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=f(e,r,n);if("normal"===l.type){if(i=n.done?y:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function A(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(bU(e)+" is not iterable")}return m.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new O(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=M,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wU(Object(r),!0).forEach((function(e){SU(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function SU(t,e,r){var n;return n=function(t,e){if("object"!=bU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==bU(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kU(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function OU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return EU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EU(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function AU(t,e){for(var r in t){var n=t[r];for(var i in n.layers)e(n.layers[i])}}mU.propTypes={layers:VG().arrayOf(VG().object).isRequired,visibleLayers:VG().object,layersInView:VG().object,getLayerIconSrc:VG().func,getStringResource:VG().func,onLayerVisibilityToggle:VG().func,className:VG().string,refreshLayer:VG().func,groupId:VG().string};const PU=function(t){var e=OU(React.useState({}),2),r=e[0],n=e[1],i=OU(React.useState({}),2),o=i[0],a=i[1],s=OU(React.useState({}),2),u=s[0],l=s[1];function c(){var e;return e=_U().mark((function e(r){var i,o,a,s;return _U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.get(JM),AT(t)!==r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,wT(t,r);case 6:for(s in o={},a=AT(t),i)o[s]=a===s;n(o);case 10:case"end":return e.stop()}}),e)})),c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(t){kU(o,n,i,a,s,"next",t)}function s(t){kU(o,n,i,a,s,"throw",t)}a(void 0)}))},c.apply(this,arguments)}return React.useEffect((function(){if(t){var e=t.get(KM),r=t.get(JM);return a(function(){var r={};for(var n in AU(e,(function(e){r[e.layerId]=Xz(t,e.groupId,e.layerId)})),e)r[n]=Zz(t,n);return r}()),i(),function(){var e={},i=AT(t);for(var o in r)e[o]=i===o;n(e)}(),t.on("moveend",i),function(){t.un("moveend",i)}}function i(){l(function(){var r={},n=t.getView().getZoom(),i=t.getView().getMaxZoom();return AU(e,(function(t){r[t.layerId]=n>(t.minZoom||0)&&n<=(t.maxZoom||i)})),r}())}}),[t]),{visibleBaseLayers:r,toggleBaseLayer:function(t){return c.apply(this,arguments)},visibleLayers:o,toggleLayerVisibility:function(e,r){Yz(t,e,r);var n=t.get(KM),i=Xz(t,e,r);a((function(o){var a=i;for(var s in null==n||null===(u=n[e])||void 0===u?void 0:u.layers){var u;r!==s&&(a=a||o[s])}var l=Vz(t,e);return null==l||l.setVisible(a),xU(xU({},o),{},SU(SU({},e,a),r,i))}))},layersInView:u,toggleGroupVisibility:function(e){!function(t,e){var r=Vz(t,e);r&&r.setVisible(!r.getVisible())}(t,e);var r=t.get(KM),n=Zz(t,e);a((function(i){var o={};for(var a in null==r||null===(s=r[e])||void 0===s?void 0:s.layers){var s;o[a]=n;var u=Hz(t,e,a);null==u||u.setVisible(n)}return xU(xU(xU({},i),o),{},SU({},e,n))}))},refreshMapLayer:function(e,r){Iz(t,r,e)}}};var CU=["map","getStringResource","getLayerIconSrc","className"];function jU(){return jU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jU.apply(this,arguments)}function MU(t){var e=t.map,r=t.getStringResource,n=t.getLayerIconSrc,i=t.className,o=function(t,e){if(null==t)return{};var r,n,i=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}(t,CU),a=PU(e),s=a.visibleBaseLayers,u=a.toggleBaseLayer,l=a.visibleLayers,c=a.toggleLayerVisibility,f=a.layersInView,h=a.toggleGroupVisibility,p=a.refreshMapLayer;if(!e)return null;var d=e.get(KM),y=e.get(JM)||{},v=(null==r?void 0:r("map.baseLayers.title"))||"Base Layers";return React.createElement("div",jU({},o,{className:qG()("layer-picker",i)}),React.createElement("div",{className:"layer-header-group"},React.createElement("span",{title:v},v)),React.createElement(mU,{layers:Object.values(y),visibleLayers:s,getLayerIconSrc:n,getStringResource:r,onLayerVisibilityToggle:function(t){return u(t.layerId)}}),Object.values(d).map((function(t){var e=(null==r?void 0:r(t.groupTitle))||t.groupTitle;return React.createElement("div",{key:t.groupId},React.createElement("div",{className:qG()("layer-header-group",{"layer-header-group-disabled":!1===l[t.groupId]})},React.createElement("span",{title:e},e),React.createElement(yU,{visible:l[t.groupId],onClick:function(){return h(t.groupId)}})),React.createElement(mU,{layers:Object.values(t.layers),groupId:t.groupId,getLayerIconSrc:n,visibleLayers:l,layersInView:f,getStringResource:r,onLayerVisibilityToggle:function(e){return c(t.groupId,e.layerId)},refreshLayer:p}))})))}function TU(t){var e=t.get(HM);if(!e){var r=new xE;e={vectorSource:r,vectorLayer:new rv({source:r,style:new Jf({image:new wh({anchor:[.5,.5],anchorOrigin:"top-left",anchorXUnits:"fraction",anchorYUnits:"fraction",src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz48L2RlZnM+CiAgPHBhdGggZD0iTTEyIDJDOC4xMyAyIDUgNS4xMyA1IDlDNSAxNC4yNSAxMiAyMiAxMiAyMkMxMiAyMiAxOSAxNC4yNSAxOSA5QzE5IDUuMTMgMTUuODcgMiAxMiAyWk0xMiAxMS41QzEwLjYyIDExLjUgOS41IDEwLjM4IDkuNSA5QzkuNSA3LjYyIDEwLjYyIDYuNSAxMiA2LjVDMTMuMzggNi41IDE0LjUgNy42MiAxNC41IDlDMTQuNSAxMC4zOCAxMy4zOCAxMS41IDEyIDExLjVaIiBzdHlsZT0iZmlsbDogcmdiKDAsIDEzMSwgMTQzKTsiPjwvcGF0aD4KPC9zdmc+",opacity:1,rotation:0,scale:1.5})}),className:"lm-layer-pin"})},t.set(HM,e)}return e}function RU(t,e,r){if(t){var n=TU(t);n.onClick&&IU(t),n.onClick=function(n){var i=n.coordinate;!function(t,e,r){if(e&&t instanceof Array){var n=TU(e),i=n.vectorSource,o=n.vectorLayer;i.clear();var a=new Ss(t),s=new gm(a);s.setStyle(r||o.getStyle()),i.addFeature(s),e.getLayers().getArray().includes(o)||e.addLayer(o)}else h.error("Invalid map object or coordinates")}(i,t,r),e({longitude:i[0],latitude:i[1]})},t.on("singleclick",n.onClick)}else h.error("Invalid map object")}function IU(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var r=TU(t);r.onClick&&(t.un("singleclick",r.onClick),r.onClick=null);var n=r.vectorSource,i=r.vectorLayer;n.clear(),e&&t.getLayers().getArray().includes(i)&&(t.removeLayer(i),t.set(HM,null))}else h.error("Invalid map object")}MU.propTypes={map:VG().object,className:VG().string,getLayerIconSrc:VG().func,getStringResource:VG().func}})(),u})()).apply(e,n))||(t.exports=i)},6263:t=>{"use strict";t.exports=JSON.parse('{"MapWidget":{"currentOperatingStatus":"Current Operating Status:","nameUnknown":"Name unknown","idUnknown":"ID Unknown","unknown":"Unknown"}}')},8992:t=>{"use strict";t.exports=JSON.parse('{"MapWidget":{"currentOperatingStatus":"Estado Operativo Actual:","nameUnknown":"Nombre desconocido","idUnknown":"ID desconocido","unknown":"Desconocido"}}')}}]);
//# sourceMappingURL=307.js.map